function Ym(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var cn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zi(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),r}var Jm={exports:{}},Mo={},Xm={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=Symbol.for("react.element"),Tv=Symbol.for("react.portal"),Cv=Symbol.for("react.fragment"),Av=Symbol.for("react.strict_mode"),Ov=Symbol.for("react.profiler"),Lv=Symbol.for("react.provider"),Rv=Symbol.for("react.context"),Iv=Symbol.for("react.forward_ref"),Dv=Symbol.for("react.suspense"),zv=Symbol.for("react.memo"),Bv=Symbol.for("react.lazy"),af=Symbol.iterator;function Mv(t){return t===null||typeof t!="object"?null:(t=af&&t[af]||t["@@iterator"],typeof t=="function"?t:null)}var Qm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ep=Object.assign,tp={};function Ss(t,e,r){this.props=t,this.context=e,this.refs=tp,this.updater=r||Qm}Ss.prototype.isReactComponent={};Ss.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ss.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rp(){}rp.prototype=Ss.prototype;function zd(t,e,r){this.props=t,this.context=e,this.refs=tp,this.updater=r||Qm}var Bd=zd.prototype=new rp;Bd.constructor=zd;ep(Bd,Ss.prototype);Bd.isPureReactComponent=!0;var of=Array.isArray,np=Object.prototype.hasOwnProperty,Md={current:null},sp={key:!0,ref:!0,__self:!0,__source:!0};function ip(t,e,r){var s,a={},o=null,c=null;if(e!=null)for(s in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)np.call(e,s)&&!sp.hasOwnProperty(s)&&(a[s]=e[s]);var u=arguments.length-2;if(u===1)a.children=r;else if(1<u){for(var h=Array(u),m=0;m<u;m++)h[m]=arguments[m+2];a.children=h}if(t&&t.defaultProps)for(s in u=t.defaultProps,u)a[s]===void 0&&(a[s]=u[s]);return{$$typeof:Bi,type:t,key:o,ref:c,props:a,_owner:Md.current}}function Uv(t,e){return{$$typeof:Bi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ud(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bi}function $v(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var lf=/\/+/g;function Fl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$v(""+t.key):e.toString(36)}function Fa(t,e,r,s,a){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case Bi:case Tv:c=!0}}if(c)return c=t,a=a(c),t=s===""?"."+Fl(c,0):s,of(a)?(r="",t!=null&&(r=t.replace(lf,"$&/")+"/"),Fa(a,e,r,"",function(m){return m})):a!=null&&(Ud(a)&&(a=Uv(a,r+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(lf,"$&/")+"/")+t)),e.push(a)),1;if(c=0,s=s===""?".":s+":",of(t))for(var u=0;u<t.length;u++){o=t[u];var h=s+Fl(o,u);c+=Fa(o,e,r,h,a)}else if(h=Mv(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=s+Fl(o,u++),c+=Fa(o,e,r,h,a);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function pa(t,e,r){if(t==null)return t;var s=[],a=0;return Fa(t,s,"","",function(o){return e.call(r,o,a++)}),s}function Fv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},Ha={transition:null},Hv={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:Md};function ap(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:pa,forEach:function(t,e,r){pa(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return pa(t,function(){e++}),e},toArray:function(t){return pa(t,function(e){return e})||[]},only:function(t){if(!Ud(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Ss;ye.Fragment=Cv;ye.Profiler=Ov;ye.PureComponent=zd;ye.StrictMode=Av;ye.Suspense=Dv;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hv;ye.act=ap;ye.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=ep({},t.props),a=t.key,o=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=Md.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)np.call(e,h)&&!sp.hasOwnProperty(h)&&(s[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)s.children=r;else if(1<h){u=Array(h);for(var m=0;m<h;m++)u[m]=arguments[m+2];s.children=u}return{$$typeof:Bi,type:t.type,key:a,ref:o,props:s,_owner:c}};ye.createContext=function(t){return t={$$typeof:Rv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Lv,_context:t},t.Consumer=t};ye.createElement=ip;ye.createFactory=function(t){var e=ip.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:Iv,render:t}};ye.isValidElement=Ud;ye.lazy=function(t){return{$$typeof:Bv,_payload:{_status:-1,_result:t},_init:Fv}};ye.memo=function(t,e){return{$$typeof:zv,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Ha.transition;Ha.transition={};try{t()}finally{Ha.transition=e}};ye.unstable_act=ap;ye.useCallback=function(t,e){return pt.current.useCallback(t,e)};ye.useContext=function(t){return pt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return pt.current.useEffect(t,e)};ye.useId=function(){return pt.current.useId()};ye.useImperativeHandle=function(t,e,r){return pt.current.useImperativeHandle(t,e,r)};ye.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return pt.current.useMemo(t,e)};ye.useReducer=function(t,e,r){return pt.current.useReducer(t,e,r)};ye.useRef=function(t){return pt.current.useRef(t)};ye.useState=function(t){return pt.current.useState(t)};ye.useSyncExternalStore=function(t,e,r){return pt.current.useSyncExternalStore(t,e,r)};ye.useTransition=function(){return pt.current.useTransition()};ye.version="18.3.1";Xm.exports=ye;var N=Xm.exports;const gs=Dd(N),Wv=Ym({__proto__:null,default:gs},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv=N,qv=Symbol.for("react.element"),Kv=Symbol.for("react.fragment"),Zv=Object.prototype.hasOwnProperty,Gv=Vv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yv={key:!0,ref:!0,__self:!0,__source:!0};function op(t,e,r){var s,a={},o=null,c=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(s in e)Zv.call(e,s)&&!Yv.hasOwnProperty(s)&&(a[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:qv,type:t,key:o,ref:c,props:a,_owner:Gv.current}}Mo.Fragment=Kv;Mo.jsx=op;Mo.jsxs=op;Jm.exports=Mo;var n=Jm.exports,wc={},lp={exports:{}},Ct={},cp={exports:{}},dp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,ce){var J=U.length;U.push(ce);e:for(;0<J;){var K=J-1>>>1,H=U[K];if(0<a(H,ce))U[K]=ce,U[J]=H,J=K;else break e}}function r(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var ce=U[0],J=U.pop();if(J!==ce){U[0]=J;e:for(var K=0,H=U.length,ee=H>>>1;K<ee;){var te=2*(K+1)-1,X=U[te],se=te+1,ue=U[se];if(0>a(X,J))se<H&&0>a(ue,X)?(U[K]=ue,U[se]=J,K=se):(U[K]=X,U[te]=J,K=te);else if(se<H&&0>a(ue,J))U[K]=ue,U[se]=J,K=se;else break e}}return ce}function a(U,ce){var J=U.sortIndex-ce.sortIndex;return J!==0?J:U.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],m=[],x=1,g=null,y=3,j=!1,b=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var ce=r(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=U)s(m),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=r(m)}}function P(U){if(w=!1,S(U),!b)if(r(h)!==null)b=!0,M(R);else{var ce=r(m);ce!==null&&le(P,ce.startTime-U)}}function R(U,ce){b=!1,w&&(w=!1,_(z),z=-1),j=!0;var J=y;try{for(S(ce),g=r(h);g!==null&&(!(g.expirationTime>ce)||U&&!F());){var K=g.callback;if(typeof K=="function"){g.callback=null,y=g.priorityLevel;var H=K(g.expirationTime<=ce);ce=t.unstable_now(),typeof H=="function"?g.callback=H:g===r(h)&&s(h),S(ce)}else s(h);g=r(h)}if(g!==null)var ee=!0;else{var te=r(m);te!==null&&le(P,te.startTime-ce),ee=!1}return ee}finally{g=null,y=J,j=!1}}var A=!1,O=null,z=-1,I=5,W=-1;function F(){return!(t.unstable_now()-W<I)}function q(){if(O!==null){var U=t.unstable_now();W=U;var ce=!0;try{ce=O(!0,U)}finally{ce?$():(A=!1,O=null)}}else A=!1}var $;if(typeof v=="function")$=function(){v(q)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,G=Q.port2;Q.port1.onmessage=q,$=function(){G.postMessage(null)}}else $=function(){E(q,0)};function M(U){O=U,A||(A=!0,$())}function le(U,ce){z=E(function(){U(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){b||j||(b=!0,M(R))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(U){switch(y){case 1:case 2:case 3:var ce=3;break;default:ce=y}var J=y;y=ce;try{return U()}finally{y=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,ce){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=y;y=U;try{return ce()}finally{y=J}},t.unstable_scheduleCallback=function(U,ce,J){var K=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?K+J:K):J=K,U){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=J+H,U={id:x++,callback:ce,priorityLevel:U,startTime:J,expirationTime:H,sortIndex:-1},J>K?(U.sortIndex=J,e(m,U),r(h)===null&&U===r(m)&&(w?(_(z),z=-1):w=!0,le(P,J-K))):(U.sortIndex=H,e(h,U),b||j||(b=!0,M(R))),U},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(U){var ce=y;return function(){var J=y;y=ce;try{return U.apply(this,arguments)}finally{y=J}}}})(dp);cp.exports=dp;var Jv=cp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv=N,Tt=Jv;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var up=new Set,gi={};function Tn(t,e){xs(t,e),xs(t+"Capture",e)}function xs(t,e){for(gi[t]=e,t=0;t<e.length;t++)up.add(e[t])}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=Object.prototype.hasOwnProperty,Qv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cf={},df={};function eb(t){return jc.call(df,t)?!0:jc.call(cf,t)?!1:Qv.test(t)?df[t]=!0:(cf[t]=!0,!1)}function tb(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rb(t,e,r,s){if(e===null||typeof e>"u"||tb(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,r,s,a,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var $d=/[\-:]([a-z])/g;function Fd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($d,Fd);st[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($d,Fd);st[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($d,Fd);st[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hd(t,e,r,s){var a=st.hasOwnProperty(e)?st[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rb(e,r,a,s)&&(r=null),s||a===null?eb(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,s=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Nr=Xv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ga=Symbol.for("react.element"),Yn=Symbol.for("react.portal"),Jn=Symbol.for("react.fragment"),Wd=Symbol.for("react.strict_mode"),Nc=Symbol.for("react.profiler"),hp=Symbol.for("react.provider"),fp=Symbol.for("react.context"),Vd=Symbol.for("react.forward_ref"),kc=Symbol.for("react.suspense"),Sc=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),mp=Symbol.for("react.offscreen"),uf=Symbol.iterator;function Vs(t){return t===null||typeof t!="object"?null:(t=uf&&t[uf]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Hl;function ei(t){if(Hl===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Hl=e&&e[1]||""}return`
`+Hl+t}var Wl=!1;function Vl(t,e){if(!t||Wl)return"";Wl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var s=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){s=m}t.call(e.prototype)}else{try{throw Error()}catch(m){s=m}t()}}catch(m){if(m&&s&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),o=s.stack.split(`
`),c=a.length-1,u=o.length-1;1<=c&&0<=u&&a[c]!==o[u];)u--;for(;1<=c&&0<=u;c--,u--)if(a[c]!==o[u]){if(c!==1||u!==1)do if(c--,u--,0>u||a[c]!==o[u]){var h=`
`+a[c].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=c&&0<=u);break}}}finally{Wl=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ei(t):""}function nb(t){switch(t.tag){case 5:return ei(t.type);case 16:return ei("Lazy");case 13:return ei("Suspense");case 19:return ei("SuspenseList");case 0:case 2:case 15:return t=Vl(t.type,!1),t;case 11:return t=Vl(t.type.render,!1),t;case 1:return t=Vl(t.type,!0),t;default:return""}}function Ec(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jn:return"Fragment";case Yn:return"Portal";case Nc:return"Profiler";case Wd:return"StrictMode";case kc:return"Suspense";case Sc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fp:return(t.displayName||"Context")+".Consumer";case hp:return(t._context.displayName||"Context")+".Provider";case Vd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qd:return e=t.displayName||null,e!==null?e:Ec(t.type)||"Memo";case Cr:e=t._payload,t=t._init;try{return Ec(t(e))}catch{}}return null}function sb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ec(e);case 8:return e===Wd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ib(t){var e=pp(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(c){s=""+c,o.call(this,c)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(c){s=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xa(t){t._valueTracker||(t._valueTracker=ib(t))}function gp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=pp(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function so(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pc(t,e){var r=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function hf(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=Kr(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xp(t,e){e=e.checked,e!=null&&Hd(t,"checked",e,!1)}function Tc(t,e){xp(t,e);var r=Kr(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cc(t,e.type,r):e.hasOwnProperty("defaultValue")&&Cc(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ff(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Cc(t,e,r){(e!=="number"||so(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ti=Array.isArray;function ls(t,e,r,s){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&s&&(t[r].defaultSelected=!0)}else{for(r=""+Kr(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Ac(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mf(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Y(92));if(ti(r)){if(1<r.length)throw Error(Y(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Kr(r)}}function yp(t,e){var r=Kr(e.value),s=Kr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function pf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ya,bp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ya=ya||document.createElement("div"),ya.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ya.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xi(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ab=["Webkit","ms","Moz","O"];Object.keys(oi).forEach(function(t){ab.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oi[e]=oi[t]})});function _p(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||oi.hasOwnProperty(t)&&oi[t]?(""+e).trim():e+"px"}function wp(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=_p(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,a):t[r]=a}}var ob=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lc(t,e){if(e){if(ob[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Rc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ic=null;function Kd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dc=null,cs=null,ds=null;function gf(t){if(t=$i(t)){if(typeof Dc!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Wo(e),Dc(t.stateNode,t.type,e))}}function jp(t){cs?ds?ds.push(t):ds=[t]:cs=t}function Np(){if(cs){var t=cs,e=ds;if(ds=cs=null,gf(t),e)for(t=0;t<e.length;t++)gf(e[t])}}function kp(t,e){return t(e)}function Sp(){}var ql=!1;function Ep(t,e,r){if(ql)return t(e,r);ql=!0;try{return kp(t,e,r)}finally{ql=!1,(cs!==null||ds!==null)&&(Sp(),Np())}}function yi(t,e){var r=t.stateNode;if(r===null)return null;var s=Wo(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Y(231,e,typeof r));return r}var zc=!1;if(br)try{var qs={};Object.defineProperty(qs,"passive",{get:function(){zc=!0}}),window.addEventListener("test",qs,qs),window.removeEventListener("test",qs,qs)}catch{zc=!1}function lb(t,e,r,s,a,o,c,u,h){var m=Array.prototype.slice.call(arguments,3);try{e.apply(r,m)}catch(x){this.onError(x)}}var li=!1,io=null,ao=!1,Bc=null,cb={onError:function(t){li=!0,io=t}};function db(t,e,r,s,a,o,c,u,h){li=!1,io=null,lb.apply(cb,arguments)}function ub(t,e,r,s,a,o,c,u,h){if(db.apply(this,arguments),li){if(li){var m=io;li=!1,io=null}else throw Error(Y(198));ao||(ao=!0,Bc=m)}}function Cn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Pp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xf(t){if(Cn(t)!==t)throw Error(Y(188))}function hb(t){var e=t.alternate;if(!e){if(e=Cn(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var r=t,s=e;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return xf(a),t;if(o===s)return xf(a),e;o=o.sibling}throw Error(Y(188))}if(r.return!==s.return)r=a,s=o;else{for(var c=!1,u=a.child;u;){if(u===r){c=!0,r=a,s=o;break}if(u===s){c=!0,s=a,r=o;break}u=u.sibling}if(!c){for(u=o.child;u;){if(u===r){c=!0,r=o,s=a;break}if(u===s){c=!0,s=o,r=a;break}u=u.sibling}if(!c)throw Error(Y(189))}}if(r.alternate!==s)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?t:e}function Tp(t){return t=hb(t),t!==null?Cp(t):null}function Cp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cp(t);if(e!==null)return e;t=t.sibling}return null}var Ap=Tt.unstable_scheduleCallback,yf=Tt.unstable_cancelCallback,fb=Tt.unstable_shouldYield,mb=Tt.unstable_requestPaint,Me=Tt.unstable_now,pb=Tt.unstable_getCurrentPriorityLevel,Zd=Tt.unstable_ImmediatePriority,Op=Tt.unstable_UserBlockingPriority,oo=Tt.unstable_NormalPriority,gb=Tt.unstable_LowPriority,Lp=Tt.unstable_IdlePriority,Uo=null,cr=null;function xb(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Uo,t,void 0,(t.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:bb,yb=Math.log,vb=Math.LN2;function bb(t){return t>>>=0,t===0?32:31-(yb(t)/vb|0)|0}var va=64,ba=4194304;function ri(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lo(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,a=t.suspendedLanes,o=t.pingedLanes,c=r&268435455;if(c!==0){var u=c&~a;u!==0?s=ri(u):(o&=c,o!==0&&(s=ri(o)))}else c=r&~a,c!==0?s=ri(c):o!==0&&(s=ri(o));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,o=e&-e,a>=o||a===16&&(o&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-Jt(e),a=1<<r,s|=t[r],e&=~a;return s}function _b(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wb(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,o=t.pendingLanes;0<o;){var c=31-Jt(o),u=1<<c,h=a[c];h===-1?(!(u&r)||u&s)&&(a[c]=_b(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Mc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rp(){var t=va;return va<<=1,!(va&4194240)&&(va=64),t}function Kl(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Mi(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=r}function jb(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Jt(r),o=1<<a;e[a]=0,s[a]=-1,t[a]=-1,r&=~o}}function Gd(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-Jt(r),a=1<<s;a&e|t[s]&e&&(t[s]|=e),r&=~a}}var je=0;function Ip(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dp,Yd,zp,Bp,Mp,Uc=!1,_a=[],Mr=null,Ur=null,$r=null,vi=new Map,bi=new Map,Or=[],Nb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vf(t,e){switch(t){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":vi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bi.delete(e.pointerId)}}function Ks(t,e,r,s,a,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},e!==null&&(e=$i(e),e!==null&&Yd(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function kb(t,e,r,s,a){switch(e){case"focusin":return Mr=Ks(Mr,t,e,r,s,a),!0;case"dragenter":return Ur=Ks(Ur,t,e,r,s,a),!0;case"mouseover":return $r=Ks($r,t,e,r,s,a),!0;case"pointerover":var o=a.pointerId;return vi.set(o,Ks(vi.get(o)||null,t,e,r,s,a)),!0;case"gotpointercapture":return o=a.pointerId,bi.set(o,Ks(bi.get(o)||null,t,e,r,s,a)),!0}return!1}function Up(t){var e=xn(t.target);if(e!==null){var r=Cn(e);if(r!==null){if(e=r.tag,e===13){if(e=Pp(r),e!==null){t.blockedOn=e,Mp(t.priority,function(){zp(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=$c(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);Ic=s,r.target.dispatchEvent(s),Ic=null}else return e=$i(r),e!==null&&Yd(e),t.blockedOn=r,!1;e.shift()}return!0}function bf(t,e,r){Wa(t)&&r.delete(e)}function Sb(){Uc=!1,Mr!==null&&Wa(Mr)&&(Mr=null),Ur!==null&&Wa(Ur)&&(Ur=null),$r!==null&&Wa($r)&&($r=null),vi.forEach(bf),bi.forEach(bf)}function Zs(t,e){t.blockedOn===e&&(t.blockedOn=null,Uc||(Uc=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,Sb)))}function _i(t){function e(a){return Zs(a,t)}if(0<_a.length){Zs(_a[0],t);for(var r=1;r<_a.length;r++){var s=_a[r];s.blockedOn===t&&(s.blockedOn=null)}}for(Mr!==null&&Zs(Mr,t),Ur!==null&&Zs(Ur,t),$r!==null&&Zs($r,t),vi.forEach(e),bi.forEach(e),r=0;r<Or.length;r++)s=Or[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<Or.length&&(r=Or[0],r.blockedOn===null);)Up(r),r.blockedOn===null&&Or.shift()}var us=Nr.ReactCurrentBatchConfig,co=!0;function Eb(t,e,r,s){var a=je,o=us.transition;us.transition=null;try{je=1,Jd(t,e,r,s)}finally{je=a,us.transition=o}}function Pb(t,e,r,s){var a=je,o=us.transition;us.transition=null;try{je=4,Jd(t,e,r,s)}finally{je=a,us.transition=o}}function Jd(t,e,r,s){if(co){var a=$c(t,e,r,s);if(a===null)nc(t,e,s,uo,r),vf(t,s);else if(kb(a,t,e,r,s))s.stopPropagation();else if(vf(t,s),e&4&&-1<Nb.indexOf(t)){for(;a!==null;){var o=$i(a);if(o!==null&&Dp(o),o=$c(t,e,r,s),o===null&&nc(t,e,s,uo,r),o===a)break;a=o}a!==null&&s.stopPropagation()}else nc(t,e,s,null,r)}}var uo=null;function $c(t,e,r,s){if(uo=null,t=Kd(s),t=xn(t),t!==null)if(e=Cn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Pp(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uo=t,null}function $p(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pb()){case Zd:return 1;case Op:return 4;case oo:case gb:return 16;case Lp:return 536870912;default:return 16}default:return 16}}var Dr=null,Xd=null,Va=null;function Fp(){if(Va)return Va;var t,e=Xd,r=e.length,s,a="value"in Dr?Dr.value:Dr.textContent,o=a.length;for(t=0;t<r&&e[t]===a[t];t++);var c=r-t;for(s=1;s<=c&&e[r-s]===a[o-s];s++);return Va=a.slice(t,1<s?1-s:void 0)}function qa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wa(){return!0}function _f(){return!1}function At(t){function e(r,s,a,o,c){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(r=t[u],this[u]=r?r(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?wa:_f,this.isPropagationStopped=_f,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),e}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qd=At(Es),Ui=De({},Es,{view:0,detail:0}),Tb=At(Ui),Zl,Gl,Gs,$o=De({},Ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gs&&(Gs&&t.type==="mousemove"?(Zl=t.screenX-Gs.screenX,Gl=t.screenY-Gs.screenY):Gl=Zl=0,Gs=t),Zl)},movementY:function(t){return"movementY"in t?t.movementY:Gl}}),wf=At($o),Cb=De({},$o,{dataTransfer:0}),Ab=At(Cb),Ob=De({},Ui,{relatedTarget:0}),Yl=At(Ob),Lb=De({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),Rb=At(Lb),Ib=De({},Es,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Db=At(Ib),zb=De({},Es,{data:0}),jf=At(zb),Bb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ub={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $b(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ub[t])?!!e[t]:!1}function eu(){return $b}var Fb=De({},Ui,{key:function(t){if(t.key){var e=Bb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(t){return t.type==="keypress"?qa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hb=At(Fb),Wb=De({},$o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nf=At(Wb),Vb=De({},Ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),qb=At(Vb),Kb=De({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zb=At(Kb),Gb=De({},$o,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yb=At(Gb),Jb=[9,13,27,32],tu=br&&"CompositionEvent"in window,ci=null;br&&"documentMode"in document&&(ci=document.documentMode);var Xb=br&&"TextEvent"in window&&!ci,Hp=br&&(!tu||ci&&8<ci&&11>=ci),kf=" ",Sf=!1;function Wp(t,e){switch(t){case"keyup":return Jb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xn=!1;function Qb(t,e){switch(t){case"compositionend":return Vp(e);case"keypress":return e.which!==32?null:(Sf=!0,kf);case"textInput":return t=e.data,t===kf&&Sf?null:t;default:return null}}function e_(t,e){if(Xn)return t==="compositionend"||!tu&&Wp(t,e)?(t=Fp(),Va=Xd=Dr=null,Xn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hp&&e.locale!=="ko"?null:e.data;default:return null}}var t_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ef(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!t_[t.type]:e==="textarea"}function qp(t,e,r,s){jp(s),e=ho(e,"onChange"),0<e.length&&(r=new Qd("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var di=null,wi=null;function r_(t){ng(t,0)}function Fo(t){var e=ts(t);if(gp(e))return t}function n_(t,e){if(t==="change")return e}var Kp=!1;if(br){var Jl;if(br){var Xl="oninput"in document;if(!Xl){var Pf=document.createElement("div");Pf.setAttribute("oninput","return;"),Xl=typeof Pf.oninput=="function"}Jl=Xl}else Jl=!1;Kp=Jl&&(!document.documentMode||9<document.documentMode)}function Tf(){di&&(di.detachEvent("onpropertychange",Zp),wi=di=null)}function Zp(t){if(t.propertyName==="value"&&Fo(wi)){var e=[];qp(e,wi,t,Kd(t)),Ep(r_,e)}}function s_(t,e,r){t==="focusin"?(Tf(),di=e,wi=r,di.attachEvent("onpropertychange",Zp)):t==="focusout"&&Tf()}function i_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fo(wi)}function a_(t,e){if(t==="click")return Fo(e)}function o_(t,e){if(t==="input"||t==="change")return Fo(e)}function l_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qt=typeof Object.is=="function"?Object.is:l_;function ji(t,e){if(Qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!jc.call(e,a)||!Qt(t[a],e[a]))return!1}return!0}function Cf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Af(t,e){var r=Cf(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cf(r)}}function Gp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yp(){for(var t=window,e=so();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=so(t.document)}return e}function ru(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function c_(t){var e=Yp(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Gp(r.ownerDocument.documentElement,r)){if(s!==null&&ru(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!t.extend&&o>s&&(a=s,s=o,o=a),a=Af(r,o);var c=Af(r,s);a&&c&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),o>s?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var d_=br&&"documentMode"in document&&11>=document.documentMode,Qn=null,Fc=null,ui=null,Hc=!1;function Of(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Hc||Qn==null||Qn!==so(s)||(s=Qn,"selectionStart"in s&&ru(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ui&&ji(ui,s)||(ui=s,s=ho(Fc,"onSelect"),0<s.length&&(e=new Qd("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=Qn)))}function ja(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var es={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionend:ja("Transition","TransitionEnd")},Ql={},Jp={};br&&(Jp=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function Ho(t){if(Ql[t])return Ql[t];if(!es[t])return t;var e=es[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Jp)return Ql[t]=e[r];return t}var Xp=Ho("animationend"),Qp=Ho("animationiteration"),eg=Ho("animationstart"),tg=Ho("transitionend"),rg=new Map,Lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(t,e){rg.set(t,e),Tn(e,[t])}for(var ec=0;ec<Lf.length;ec++){var tc=Lf[ec],u_=tc.toLowerCase(),h_=tc[0].toUpperCase()+tc.slice(1);Gr(u_,"on"+h_)}Gr(Xp,"onAnimationEnd");Gr(Qp,"onAnimationIteration");Gr(eg,"onAnimationStart");Gr("dblclick","onDoubleClick");Gr("focusin","onFocus");Gr("focusout","onBlur");Gr(tg,"onTransitionEnd");xs("onMouseEnter",["mouseout","mouseover"]);xs("onMouseLeave",["mouseout","mouseover"]);xs("onPointerEnter",["pointerout","pointerover"]);xs("onPointerLeave",["pointerout","pointerover"]);Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ni));function Rf(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,ub(s,e,void 0,t),t.currentTarget=null}function ng(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],a=s.event;s=s.listeners;e:{var o=void 0;if(e)for(var c=s.length-1;0<=c;c--){var u=s[c],h=u.instance,m=u.currentTarget;if(u=u.listener,h!==o&&a.isPropagationStopped())break e;Rf(a,u,m),o=h}else for(c=0;c<s.length;c++){if(u=s[c],h=u.instance,m=u.currentTarget,u=u.listener,h!==o&&a.isPropagationStopped())break e;Rf(a,u,m),o=h}}}if(ao)throw t=Bc,ao=!1,Bc=null,t}function Te(t,e){var r=e[Zc];r===void 0&&(r=e[Zc]=new Set);var s=t+"__bubble";r.has(s)||(sg(e,t,2,!1),r.add(s))}function rc(t,e,r){var s=0;e&&(s|=4),sg(r,t,s,e)}var Na="_reactListening"+Math.random().toString(36).slice(2);function Ni(t){if(!t[Na]){t[Na]=!0,up.forEach(function(r){r!=="selectionchange"&&(f_.has(r)||rc(r,!1,t),rc(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Na]||(e[Na]=!0,rc("selectionchange",!1,e))}}function sg(t,e,r,s){switch($p(e)){case 1:var a=Eb;break;case 4:a=Pb;break;default:a=Jd}r=a.bind(null,e,r,t),a=void 0,!zc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function nc(t,e,r,s,a){var o=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var c=s.tag;if(c===3||c===4){var u=s.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(c===4)for(c=s.return;c!==null;){var h=c.tag;if((h===3||h===4)&&(h=c.stateNode.containerInfo,h===a||h.nodeType===8&&h.parentNode===a))return;c=c.return}for(;u!==null;){if(c=xn(u),c===null)return;if(h=c.tag,h===5||h===6){s=o=c;continue e}u=u.parentNode}}s=s.return}Ep(function(){var m=o,x=Kd(r),g=[];e:{var y=rg.get(t);if(y!==void 0){var j=Qd,b=t;switch(t){case"keypress":if(qa(r)===0)break e;case"keydown":case"keyup":j=Hb;break;case"focusin":b="focus",j=Yl;break;case"focusout":b="blur",j=Yl;break;case"beforeblur":case"afterblur":j=Yl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Ab;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=qb;break;case Xp:case Qp:case eg:j=Rb;break;case tg:j=Zb;break;case"scroll":j=Tb;break;case"wheel":j=Yb;break;case"copy":case"cut":case"paste":j=Db;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Nf}var w=(e&4)!==0,E=!w&&t==="scroll",_=w?y!==null?y+"Capture":null:y;w=[];for(var v=m,S;v!==null;){S=v;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,_!==null&&(P=yi(v,_),P!=null&&w.push(ki(v,P,S)))),E)break;v=v.return}0<w.length&&(y=new j(y,b,null,r,x),g.push({event:y,listeners:w}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",y&&r!==Ic&&(b=r.relatedTarget||r.fromElement)&&(xn(b)||b[_r]))break e;if((j||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,j?(b=r.relatedTarget||r.toElement,j=m,b=b?xn(b):null,b!==null&&(E=Cn(b),b!==E||b.tag!==5&&b.tag!==6)&&(b=null)):(j=null,b=m),j!==b)){if(w=wf,P="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=Nf,P="onPointerLeave",_="onPointerEnter",v="pointer"),E=j==null?y:ts(j),S=b==null?y:ts(b),y=new w(P,v+"leave",j,r,x),y.target=E,y.relatedTarget=S,P=null,xn(x)===m&&(w=new w(_,v+"enter",b,r,x),w.target=S,w.relatedTarget=E,P=w),E=P,j&&b)t:{for(w=j,_=b,v=0,S=w;S;S=Hn(S))v++;for(S=0,P=_;P;P=Hn(P))S++;for(;0<v-S;)w=Hn(w),v--;for(;0<S-v;)_=Hn(_),S--;for(;v--;){if(w===_||_!==null&&w===_.alternate)break t;w=Hn(w),_=Hn(_)}w=null}else w=null;j!==null&&If(g,y,j,w,!1),b!==null&&E!==null&&If(g,E,b,w,!0)}}e:{if(y=m?ts(m):window,j=y.nodeName&&y.nodeName.toLowerCase(),j==="select"||j==="input"&&y.type==="file")var R=n_;else if(Ef(y))if(Kp)R=o_;else{R=i_;var A=s_}else(j=y.nodeName)&&j.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(R=a_);if(R&&(R=R(t,m))){qp(g,R,r,x);break e}A&&A(t,y,m),t==="focusout"&&(A=y._wrapperState)&&A.controlled&&y.type==="number"&&Cc(y,"number",y.value)}switch(A=m?ts(m):window,t){case"focusin":(Ef(A)||A.contentEditable==="true")&&(Qn=A,Fc=m,ui=null);break;case"focusout":ui=Fc=Qn=null;break;case"mousedown":Hc=!0;break;case"contextmenu":case"mouseup":case"dragend":Hc=!1,Of(g,r,x);break;case"selectionchange":if(d_)break;case"keydown":case"keyup":Of(g,r,x)}var O;if(tu)e:{switch(t){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Xn?Wp(t,r)&&(z="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(z="onCompositionStart");z&&(Hp&&r.locale!=="ko"&&(Xn||z!=="onCompositionStart"?z==="onCompositionEnd"&&Xn&&(O=Fp()):(Dr=x,Xd="value"in Dr?Dr.value:Dr.textContent,Xn=!0)),A=ho(m,z),0<A.length&&(z=new jf(z,t,null,r,x),g.push({event:z,listeners:A}),O?z.data=O:(O=Vp(r),O!==null&&(z.data=O)))),(O=Xb?Qb(t,r):e_(t,r))&&(m=ho(m,"onBeforeInput"),0<m.length&&(x=new jf("onBeforeInput","beforeinput",null,r,x),g.push({event:x,listeners:m}),x.data=O))}ng(g,e)})}function ki(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ho(t,e){for(var r=e+"Capture",s=[];t!==null;){var a=t,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=yi(t,r),o!=null&&s.unshift(ki(t,o,a)),o=yi(t,e),o!=null&&s.push(ki(t,o,a))),t=t.return}return s}function Hn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function If(t,e,r,s,a){for(var o=e._reactName,c=[];r!==null&&r!==s;){var u=r,h=u.alternate,m=u.stateNode;if(h!==null&&h===s)break;u.tag===5&&m!==null&&(u=m,a?(h=yi(r,o),h!=null&&c.unshift(ki(r,h,u))):a||(h=yi(r,o),h!=null&&c.push(ki(r,h,u)))),r=r.return}c.length!==0&&t.push({event:e,listeners:c})}var m_=/\r\n?/g,p_=/\u0000|\uFFFD/g;function Df(t){return(typeof t=="string"?t:""+t).replace(m_,`
`).replace(p_,"")}function ka(t,e,r){if(e=Df(e),Df(t)!==e&&r)throw Error(Y(425))}function fo(){}var Wc=null,Vc=null;function qc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kc=typeof setTimeout=="function"?setTimeout:void 0,g_=typeof clearTimeout=="function"?clearTimeout:void 0,zf=typeof Promise=="function"?Promise:void 0,x_=typeof queueMicrotask=="function"?queueMicrotask:typeof zf<"u"?function(t){return zf.resolve(null).then(t).catch(y_)}:Kc;function y_(t){setTimeout(function(){throw t})}function sc(t,e){var r=e,s=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){t.removeChild(a),_i(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);_i(e)}function Fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Bf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ps=Math.random().toString(36).slice(2),lr="__reactFiber$"+Ps,Si="__reactProps$"+Ps,_r="__reactContainer$"+Ps,Zc="__reactEvents$"+Ps,v_="__reactListeners$"+Ps,b_="__reactHandles$"+Ps;function xn(t){var e=t[lr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[_r]||r[lr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Bf(t);t!==null;){if(r=t[lr])return r;t=Bf(t)}return e}t=r,r=t.parentNode}return null}function $i(t){return t=t[lr]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Wo(t){return t[Si]||null}var Gc=[],rs=-1;function Yr(t){return{current:t}}function Ce(t){0>rs||(t.current=Gc[rs],Gc[rs]=null,rs--)}function Ee(t,e){rs++,Gc[rs]=t.current,t.current=e}var Zr={},dt=Yr(Zr),wt=Yr(!1),Nn=Zr;function ys(t,e){var r=t.type.contextTypes;if(!r)return Zr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=e[o];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function jt(t){return t=t.childContextTypes,t!=null}function mo(){Ce(wt),Ce(dt)}function Mf(t,e,r){if(dt.current!==Zr)throw Error(Y(168));Ee(dt,e),Ee(wt,r)}function ig(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(Y(108,sb(t)||"Unknown",a));return De({},r,s)}function po(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zr,Nn=dt.current,Ee(dt,t),Ee(wt,wt.current),!0}function Uf(t,e,r){var s=t.stateNode;if(!s)throw Error(Y(169));r?(t=ig(t,e,Nn),s.__reactInternalMemoizedMergedChildContext=t,Ce(wt),Ce(dt),Ee(dt,t)):Ce(wt),Ee(wt,r)}var gr=null,Vo=!1,ic=!1;function ag(t){gr===null?gr=[t]:gr.push(t)}function __(t){Vo=!0,ag(t)}function Jr(){if(!ic&&gr!==null){ic=!0;var t=0,e=je;try{var r=gr;for(je=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}gr=null,Vo=!1}catch(a){throw gr!==null&&(gr=gr.slice(t+1)),Ap(Zd,Jr),a}finally{je=e,ic=!1}}return null}var ns=[],ss=0,go=null,xo=0,It=[],Dt=0,kn=null,xr=1,yr="";function dn(t,e){ns[ss++]=xo,ns[ss++]=go,go=t,xo=e}function og(t,e,r){It[Dt++]=xr,It[Dt++]=yr,It[Dt++]=kn,kn=t;var s=xr;t=yr;var a=32-Jt(s)-1;s&=~(1<<a),r+=1;var o=32-Jt(e)+a;if(30<o){var c=a-a%5;o=(s&(1<<c)-1).toString(32),s>>=c,a-=c,xr=1<<32-Jt(e)+a|r<<a|s,yr=o+t}else xr=1<<o|r<<a|s,yr=t}function nu(t){t.return!==null&&(dn(t,1),og(t,1,0))}function su(t){for(;t===go;)go=ns[--ss],ns[ss]=null,xo=ns[--ss],ns[ss]=null;for(;t===kn;)kn=It[--Dt],It[Dt]=null,yr=It[--Dt],It[Dt]=null,xr=It[--Dt],It[Dt]=null}var Pt=null,Et=null,Oe=!1,Gt=null;function lg(t,e){var r=zt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function $f(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Et=Fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=kn!==null?{id:xr,overflow:yr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=zt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Pt=t,Et=null,!0):!1;default:return!1}}function Yc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jc(t){if(Oe){var e=Et;if(e){var r=e;if(!$f(t,e)){if(Yc(t))throw Error(Y(418));e=Fr(r.nextSibling);var s=Pt;e&&$f(t,e)?lg(s,r):(t.flags=t.flags&-4097|2,Oe=!1,Pt=t)}}else{if(Yc(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Oe=!1,Pt=t}}}function Ff(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function Sa(t){if(t!==Pt)return!1;if(!Oe)return Ff(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qc(t.type,t.memoizedProps)),e&&(e=Et)){if(Yc(t))throw cg(),Error(Y(418));for(;e;)lg(t,e),e=Fr(e.nextSibling)}if(Ff(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Et=Fr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=Pt?Fr(t.stateNode.nextSibling):null;return!0}function cg(){for(var t=Et;t;)t=Fr(t.nextSibling)}function vs(){Et=Pt=null,Oe=!1}function iu(t){Gt===null?Gt=[t]:Gt.push(t)}var w_=Nr.ReactCurrentBatchConfig;function Ys(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var s=r.stateNode}if(!s)throw Error(Y(147,t));var a=s,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var u=a.refs;c===null?delete u[o]:u[o]=c},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,t))}return t}function Ea(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hf(t){var e=t._init;return e(t._payload)}function dg(t){function e(_,v){if(t){var S=_.deletions;S===null?(_.deletions=[v],_.flags|=16):S.push(v)}}function r(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function s(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function a(_,v){return _=qr(_,v),_.index=0,_.sibling=null,_}function o(_,v,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<v?(_.flags|=2,v):S):(_.flags|=2,v)):(_.flags|=1048576,v)}function c(_){return t&&_.alternate===null&&(_.flags|=2),_}function u(_,v,S,P){return v===null||v.tag!==6?(v=hc(S,_.mode,P),v.return=_,v):(v=a(v,S),v.return=_,v)}function h(_,v,S,P){var R=S.type;return R===Jn?x(_,v,S.props.children,P,S.key):v!==null&&(v.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Cr&&Hf(R)===v.type)?(P=a(v,S.props),P.ref=Ys(_,v,S),P.return=_,P):(P=Qa(S.type,S.key,S.props,null,_.mode,P),P.ref=Ys(_,v,S),P.return=_,P)}function m(_,v,S,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=fc(S,_.mode,P),v.return=_,v):(v=a(v,S.children||[]),v.return=_,v)}function x(_,v,S,P,R){return v===null||v.tag!==7?(v=wn(S,_.mode,P,R),v.return=_,v):(v=a(v,S),v.return=_,v)}function g(_,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=hc(""+v,_.mode,S),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ga:return S=Qa(v.type,v.key,v.props,null,_.mode,S),S.ref=Ys(_,null,v),S.return=_,S;case Yn:return v=fc(v,_.mode,S),v.return=_,v;case Cr:var P=v._init;return g(_,P(v._payload),S)}if(ti(v)||Vs(v))return v=wn(v,_.mode,S,null),v.return=_,v;Ea(_,v)}return null}function y(_,v,S,P){var R=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:u(_,v,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ga:return S.key===R?h(_,v,S,P):null;case Yn:return S.key===R?m(_,v,S,P):null;case Cr:return R=S._init,y(_,v,R(S._payload),P)}if(ti(S)||Vs(S))return R!==null?null:x(_,v,S,P,null);Ea(_,S)}return null}function j(_,v,S,P,R){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(S)||null,u(v,_,""+P,R);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ga:return _=_.get(P.key===null?S:P.key)||null,h(v,_,P,R);case Yn:return _=_.get(P.key===null?S:P.key)||null,m(v,_,P,R);case Cr:var A=P._init;return j(_,v,S,A(P._payload),R)}if(ti(P)||Vs(P))return _=_.get(S)||null,x(v,_,P,R,null);Ea(v,P)}return null}function b(_,v,S,P){for(var R=null,A=null,O=v,z=v=0,I=null;O!==null&&z<S.length;z++){O.index>z?(I=O,O=null):I=O.sibling;var W=y(_,O,S[z],P);if(W===null){O===null&&(O=I);break}t&&O&&W.alternate===null&&e(_,O),v=o(W,v,z),A===null?R=W:A.sibling=W,A=W,O=I}if(z===S.length)return r(_,O),Oe&&dn(_,z),R;if(O===null){for(;z<S.length;z++)O=g(_,S[z],P),O!==null&&(v=o(O,v,z),A===null?R=O:A.sibling=O,A=O);return Oe&&dn(_,z),R}for(O=s(_,O);z<S.length;z++)I=j(O,_,z,S[z],P),I!==null&&(t&&I.alternate!==null&&O.delete(I.key===null?z:I.key),v=o(I,v,z),A===null?R=I:A.sibling=I,A=I);return t&&O.forEach(function(F){return e(_,F)}),Oe&&dn(_,z),R}function w(_,v,S,P){var R=Vs(S);if(typeof R!="function")throw Error(Y(150));if(S=R.call(S),S==null)throw Error(Y(151));for(var A=R=null,O=v,z=v=0,I=null,W=S.next();O!==null&&!W.done;z++,W=S.next()){O.index>z?(I=O,O=null):I=O.sibling;var F=y(_,O,W.value,P);if(F===null){O===null&&(O=I);break}t&&O&&F.alternate===null&&e(_,O),v=o(F,v,z),A===null?R=F:A.sibling=F,A=F,O=I}if(W.done)return r(_,O),Oe&&dn(_,z),R;if(O===null){for(;!W.done;z++,W=S.next())W=g(_,W.value,P),W!==null&&(v=o(W,v,z),A===null?R=W:A.sibling=W,A=W);return Oe&&dn(_,z),R}for(O=s(_,O);!W.done;z++,W=S.next())W=j(O,_,z,W.value,P),W!==null&&(t&&W.alternate!==null&&O.delete(W.key===null?z:W.key),v=o(W,v,z),A===null?R=W:A.sibling=W,A=W);return t&&O.forEach(function(q){return e(_,q)}),Oe&&dn(_,z),R}function E(_,v,S,P){if(typeof S=="object"&&S!==null&&S.type===Jn&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ga:e:{for(var R=S.key,A=v;A!==null;){if(A.key===R){if(R=S.type,R===Jn){if(A.tag===7){r(_,A.sibling),v=a(A,S.props.children),v.return=_,_=v;break e}}else if(A.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Cr&&Hf(R)===A.type){r(_,A.sibling),v=a(A,S.props),v.ref=Ys(_,A,S),v.return=_,_=v;break e}r(_,A);break}else e(_,A);A=A.sibling}S.type===Jn?(v=wn(S.props.children,_.mode,P,S.key),v.return=_,_=v):(P=Qa(S.type,S.key,S.props,null,_.mode,P),P.ref=Ys(_,v,S),P.return=_,_=P)}return c(_);case Yn:e:{for(A=S.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){r(_,v.sibling),v=a(v,S.children||[]),v.return=_,_=v;break e}else{r(_,v);break}else e(_,v);v=v.sibling}v=fc(S,_.mode,P),v.return=_,_=v}return c(_);case Cr:return A=S._init,E(_,v,A(S._payload),P)}if(ti(S))return b(_,v,S,P);if(Vs(S))return w(_,v,S,P);Ea(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(r(_,v.sibling),v=a(v,S),v.return=_,_=v):(r(_,v),v=hc(S,_.mode,P),v.return=_,_=v),c(_)):r(_,v)}return E}var bs=dg(!0),ug=dg(!1),yo=Yr(null),vo=null,is=null,au=null;function ou(){au=is=vo=null}function lu(t){var e=yo.current;Ce(yo),t._currentValue=e}function Xc(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function hs(t,e){vo=t,au=is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function Mt(t){var e=t._currentValue;if(au!==t)if(t={context:t,memoizedValue:e,next:null},is===null){if(vo===null)throw Error(Y(308));is=t,vo.dependencies={lanes:0,firstContext:t}}else is=is.next=t;return e}var yn=null;function cu(t){yn===null?yn=[t]:yn.push(t)}function hg(t,e,r,s){var a=e.interleaved;return a===null?(r.next=r,cu(e)):(r.next=a.next,a.next=r),e.interleaved=r,wr(t,s)}function wr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ar=!1;function du(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,be&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,wr(t,r)}return a=s.interleaved,a===null?(e.next=e,cu(s)):(e.next=a.next,a.next=e),s.interleaved=e,wr(t,r)}function Ka(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Gd(t,r)}}function Wf(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var c={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=c:o=o.next=c,r=r.next}while(r!==null);o===null?a=o=e:o=o.next=e}else a=o=e;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function bo(t,e,r,s){var a=t.updateQueue;Ar=!1;var o=a.firstBaseUpdate,c=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var h=u,m=h.next;h.next=null,c===null?o=m:c.next=m,c=h;var x=t.alternate;x!==null&&(x=x.updateQueue,u=x.lastBaseUpdate,u!==c&&(u===null?x.firstBaseUpdate=m:u.next=m,x.lastBaseUpdate=h))}if(o!==null){var g=a.baseState;c=0,x=m=h=null,u=o;do{var y=u.lane,j=u.eventTime;if((s&y)===y){x!==null&&(x=x.next={eventTime:j,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var b=t,w=u;switch(y=e,j=r,w.tag){case 1:if(b=w.payload,typeof b=="function"){g=b.call(j,g,y);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=w.payload,y=typeof b=="function"?b.call(j,g,y):b,y==null)break e;g=De({},g,y);break e;case 2:Ar=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,y=a.effects,y===null?a.effects=[u]:y.push(u))}else j={eventTime:j,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},x===null?(m=x=j,h=g):x=x.next=j,c|=y;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;y=u,u=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(x===null&&(h=g),a.baseState=h,a.firstBaseUpdate=m,a.lastBaseUpdate=x,e=a.shared.interleaved,e!==null){a=e;do c|=a.lane,a=a.next;while(a!==e)}else o===null&&(a.shared.lanes=0);En|=c,t.lanes=c,t.memoizedState=g}}function Vf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(Y(191,a));a.call(s)}}}var Fi={},dr=Yr(Fi),Ei=Yr(Fi),Pi=Yr(Fi);function vn(t){if(t===Fi)throw Error(Y(174));return t}function uu(t,e){switch(Ee(Pi,e),Ee(Ei,t),Ee(dr,Fi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Oc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Oc(e,t)}Ce(dr),Ee(dr,e)}function _s(){Ce(dr),Ce(Ei),Ce(Pi)}function mg(t){vn(Pi.current);var e=vn(dr.current),r=Oc(e,t.type);e!==r&&(Ee(Ei,t),Ee(dr,r))}function hu(t){Ei.current===t&&(Ce(dr),Ce(Ei))}var Re=Yr(0);function _o(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ac=[];function fu(){for(var t=0;t<ac.length;t++)ac[t]._workInProgressVersionPrimary=null;ac.length=0}var Za=Nr.ReactCurrentDispatcher,oc=Nr.ReactCurrentBatchConfig,Sn=0,Ie=null,Ke=null,Je=null,wo=!1,hi=!1,Ti=0,j_=0;function at(){throw Error(Y(321))}function mu(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Qt(t[r],e[r]))return!1;return!0}function pu(t,e,r,s,a,o){if(Sn=o,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Za.current=t===null||t.memoizedState===null?E_:P_,t=r(s,a),hi){o=0;do{if(hi=!1,Ti=0,25<=o)throw Error(Y(301));o+=1,Je=Ke=null,e.updateQueue=null,Za.current=T_,t=r(s,a)}while(hi)}if(Za.current=jo,e=Ke!==null&&Ke.next!==null,Sn=0,Je=Ke=Ie=null,wo=!1,e)throw Error(Y(300));return t}function gu(){var t=Ti!==0;return Ti=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Ie.memoizedState=Je=t:Je=Je.next=t,Je}function Ut(){if(Ke===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Je===null?Ie.memoizedState:Je.next;if(e!==null)Je=e,Ke=t;else{if(t===null)throw Error(Y(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Je===null?Ie.memoizedState=Je=t:Je=Je.next=t}return Je}function Ci(t,e){return typeof e=="function"?e(t):e}function lc(t){var e=Ut(),r=e.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=t;var s=Ke,a=s.baseQueue,o=r.pending;if(o!==null){if(a!==null){var c=a.next;a.next=o.next,o.next=c}s.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,s=s.baseState;var u=c=null,h=null,m=o;do{var x=m.lane;if((Sn&x)===x)h!==null&&(h=h.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),s=m.hasEagerState?m.eagerState:t(s,m.action);else{var g={lane:x,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};h===null?(u=h=g,c=s):h=h.next=g,Ie.lanes|=x,En|=x}m=m.next}while(m!==null&&m!==o);h===null?c=s:h.next=u,Qt(s,e.memoizedState)||(_t=!0),e.memoizedState=s,e.baseState=c,e.baseQueue=h,r.lastRenderedState=s}if(t=r.interleaved,t!==null){a=t;do o=a.lane,Ie.lanes|=o,En|=o,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function cc(t){var e=Ut(),r=e.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=t;var s=r.dispatch,a=r.pending,o=e.memoizedState;if(a!==null){r.pending=null;var c=a=a.next;do o=t(o,c.action),c=c.next;while(c!==a);Qt(o,e.memoizedState)||(_t=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,s]}function pg(){}function gg(t,e){var r=Ie,s=Ut(),a=e(),o=!Qt(s.memoizedState,a);if(o&&(s.memoizedState=a,_t=!0),s=s.queue,xu(vg.bind(null,r,s,t),[t]),s.getSnapshot!==e||o||Je!==null&&Je.memoizedState.tag&1){if(r.flags|=2048,Ai(9,yg.bind(null,r,s,a,e),void 0,null),Xe===null)throw Error(Y(349));Sn&30||xg(r,e,a)}return a}function xg(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function yg(t,e,r,s){e.value=r,e.getSnapshot=s,bg(e)&&_g(t)}function vg(t,e,r){return r(function(){bg(e)&&_g(t)})}function bg(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Qt(t,r)}catch{return!0}}function _g(t){var e=wr(t,1);e!==null&&Xt(e,t,1,-1)}function qf(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:t},e.queue=t,t=t.dispatch=S_.bind(null,Ie,t),[e.memoizedState,t]}function Ai(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function wg(){return Ut().memoizedState}function Ga(t,e,r,s){var a=ar();Ie.flags|=t,a.memoizedState=Ai(1|e,r,void 0,s===void 0?null:s)}function qo(t,e,r,s){var a=Ut();s=s===void 0?null:s;var o=void 0;if(Ke!==null){var c=Ke.memoizedState;if(o=c.destroy,s!==null&&mu(s,c.deps)){a.memoizedState=Ai(e,r,o,s);return}}Ie.flags|=t,a.memoizedState=Ai(1|e,r,o,s)}function Kf(t,e){return Ga(8390656,8,t,e)}function xu(t,e){return qo(2048,8,t,e)}function jg(t,e){return qo(4,2,t,e)}function Ng(t,e){return qo(4,4,t,e)}function kg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Sg(t,e,r){return r=r!=null?r.concat([t]):null,qo(4,4,kg.bind(null,e,t),r)}function yu(){}function Eg(t,e){var r=Ut();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&mu(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function Pg(t,e){var r=Ut();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&mu(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function Tg(t,e,r){return Sn&21?(Qt(r,e)||(r=Rp(),Ie.lanes|=r,En|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=r)}function N_(t,e){var r=je;je=r!==0&&4>r?r:4,t(!0);var s=oc.transition;oc.transition={};try{t(!1),e()}finally{je=r,oc.transition=s}}function Cg(){return Ut().memoizedState}function k_(t,e,r){var s=Vr(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Ag(t))Og(e,r);else if(r=hg(t,e,r,s),r!==null){var a=mt();Xt(r,t,s,a),Lg(r,e,s)}}function S_(t,e,r){var s=Vr(t),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ag(t))Og(e,a);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,u=o(c,r);if(a.hasEagerState=!0,a.eagerState=u,Qt(u,c)){var h=e.interleaved;h===null?(a.next=a,cu(e)):(a.next=h.next,h.next=a),e.interleaved=a;return}}catch{}finally{}r=hg(t,e,a,s),r!==null&&(a=mt(),Xt(r,t,s,a),Lg(r,e,s))}}function Ag(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Og(t,e){hi=wo=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Lg(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Gd(t,r)}}var jo={readContext:Mt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},E_={readContext:Mt,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:Mt,useEffect:Kf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ga(4194308,4,kg.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ga(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ga(4,2,t,e)},useMemo:function(t,e){var r=ar();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=ar();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=k_.bind(null,Ie,t),[s.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:qf,useDebugValue:yu,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=qf(!1),e=t[0];return t=N_.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=Ie,a=ar();if(Oe){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=e(),Xe===null)throw Error(Y(349));Sn&30||xg(s,e,r)}a.memoizedState=r;var o={value:r,getSnapshot:e};return a.queue=o,Kf(vg.bind(null,s,o,t),[t]),s.flags|=2048,Ai(9,yg.bind(null,s,o,r,e),void 0,null),r},useId:function(){var t=ar(),e=Xe.identifierPrefix;if(Oe){var r=yr,s=xr;r=(s&~(1<<32-Jt(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ti++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=j_++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},P_={readContext:Mt,useCallback:Eg,useContext:Mt,useEffect:xu,useImperativeHandle:Sg,useInsertionEffect:jg,useLayoutEffect:Ng,useMemo:Pg,useReducer:lc,useRef:wg,useState:function(){return lc(Ci)},useDebugValue:yu,useDeferredValue:function(t){var e=Ut();return Tg(e,Ke.memoizedState,t)},useTransition:function(){var t=lc(Ci)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:pg,useSyncExternalStore:gg,useId:Cg,unstable_isNewReconciler:!1},T_={readContext:Mt,useCallback:Eg,useContext:Mt,useEffect:xu,useImperativeHandle:Sg,useInsertionEffect:jg,useLayoutEffect:Ng,useMemo:Pg,useReducer:cc,useRef:wg,useState:function(){return cc(Ci)},useDebugValue:yu,useDeferredValue:function(t){var e=Ut();return Ke===null?e.memoizedState=t:Tg(e,Ke.memoizedState,t)},useTransition:function(){var t=cc(Ci)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:pg,useSyncExternalStore:gg,useId:Cg,unstable_isNewReconciler:!1};function Vt(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Qc(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:De({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ko={isMounted:function(t){return(t=t._reactInternals)?Cn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=mt(),a=Vr(t),o=vr(s,a);o.payload=e,r!=null&&(o.callback=r),e=Hr(t,o,a),e!==null&&(Xt(e,t,a,s),Ka(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=mt(),a=Vr(t),o=vr(s,a);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Hr(t,o,a),e!==null&&(Xt(e,t,a,s),Ka(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=mt(),s=Vr(t),a=vr(r,s);a.tag=2,e!=null&&(a.callback=e),e=Hr(t,a,s),e!==null&&(Xt(e,t,s,r),Ka(e,t,s))}};function Zf(t,e,r,s,a,o,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,o,c):e.prototype&&e.prototype.isPureReactComponent?!ji(r,s)||!ji(a,o):!0}function Rg(t,e,r){var s=!1,a=Zr,o=e.contextType;return typeof o=="object"&&o!==null?o=Mt(o):(a=jt(e)?Nn:dt.current,s=e.contextTypes,o=(s=s!=null)?ys(t,a):Zr),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ko,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=o),e}function Gf(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Ko.enqueueReplaceState(e,e.state,null)}function ed(t,e,r,s){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},du(t);var o=e.contextType;typeof o=="object"&&o!==null?a.context=Mt(o):(o=jt(e)?Nn:dt.current,a.context=ys(t,o)),a.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Qc(t,e,o,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Ko.enqueueReplaceState(a,a.state,null),bo(t,r,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function ws(t,e){try{var r="",s=e;do r+=nb(s),s=s.return;while(s);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:a,digest:null}}function dc(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function td(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var C_=typeof WeakMap=="function"?WeakMap:Map;function Ig(t,e,r){r=vr(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){ko||(ko=!0,ud=s),td(t,e)},r}function Dg(t,e,r){r=vr(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;r.payload=function(){return s(a)},r.callback=function(){td(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){td(t,e),typeof s!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),r}function Yf(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new C_;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(r)||(a.add(r),t=W_.bind(null,t,e,r),e.then(t,t))}function Jf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xf(t,e,r,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=vr(-1,1),e.tag=2,Hr(r,e,1))),r.lanes|=1),t)}var A_=Nr.ReactCurrentOwner,_t=!1;function ft(t,e,r,s){e.child=t===null?ug(e,null,r,s):bs(e,t.child,r,s)}function Qf(t,e,r,s,a){r=r.render;var o=e.ref;return hs(e,a),s=pu(t,e,r,s,o,a),r=gu(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,jr(t,e,a)):(Oe&&r&&nu(e),e.flags|=1,ft(t,e,s,a),e.child)}function em(t,e,r,s,a){if(t===null){var o=r.type;return typeof o=="function"&&!Su(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,zg(t,e,o,s,a)):(t=Qa(r.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&a)){var c=o.memoizedProps;if(r=r.compare,r=r!==null?r:ji,r(c,s)&&t.ref===e.ref)return jr(t,e,a)}return e.flags|=1,t=qr(o,s),t.ref=e.ref,t.return=e,e.child=t}function zg(t,e,r,s,a){if(t!==null){var o=t.memoizedProps;if(ji(o,s)&&t.ref===e.ref)if(_t=!1,e.pendingProps=s=o,(t.lanes&a)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,jr(t,e,a)}return rd(t,e,r,s,a)}function Bg(t,e,r){var s=e.pendingProps,a=s.children,o=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(os,kt),kt|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(os,kt),kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:r,Ee(os,kt),kt|=s}else o!==null?(s=o.baseLanes|r,e.memoizedState=null):s=r,Ee(os,kt),kt|=s;return ft(t,e,a,r),e.child}function Mg(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function rd(t,e,r,s,a){var o=jt(r)?Nn:dt.current;return o=ys(e,o),hs(e,a),r=pu(t,e,r,s,o,a),s=gu(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,jr(t,e,a)):(Oe&&s&&nu(e),e.flags|=1,ft(t,e,r,a),e.child)}function tm(t,e,r,s,a){if(jt(r)){var o=!0;po(e)}else o=!1;if(hs(e,a),e.stateNode===null)Ya(t,e),Rg(e,r,s),ed(e,r,s,a),s=!0;else if(t===null){var c=e.stateNode,u=e.memoizedProps;c.props=u;var h=c.context,m=r.contextType;typeof m=="object"&&m!==null?m=Mt(m):(m=jt(r)?Nn:dt.current,m=ys(e,m));var x=r.getDerivedStateFromProps,g=typeof x=="function"||typeof c.getSnapshotBeforeUpdate=="function";g||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==s||h!==m)&&Gf(e,c,s,m),Ar=!1;var y=e.memoizedState;c.state=y,bo(e,s,c,a),h=e.memoizedState,u!==s||y!==h||wt.current||Ar?(typeof x=="function"&&(Qc(e,r,x,s),h=e.memoizedState),(u=Ar||Zf(e,r,u,s,y,h,m))?(g||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=h),c.props=s,c.state=h,c.context=m,s=u):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{c=e.stateNode,fg(t,e),u=e.memoizedProps,m=e.type===e.elementType?u:Vt(e.type,u),c.props=m,g=e.pendingProps,y=c.context,h=r.contextType,typeof h=="object"&&h!==null?h=Mt(h):(h=jt(r)?Nn:dt.current,h=ys(e,h));var j=r.getDerivedStateFromProps;(x=typeof j=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==g||y!==h)&&Gf(e,c,s,h),Ar=!1,y=e.memoizedState,c.state=y,bo(e,s,c,a);var b=e.memoizedState;u!==g||y!==b||wt.current||Ar?(typeof j=="function"&&(Qc(e,r,j,s),b=e.memoizedState),(m=Ar||Zf(e,r,m,s,y,b,h)||!1)?(x||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,b,h),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,b,h)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=b),c.props=s,c.state=b,c.context=h,s=m):(typeof c.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),s=!1)}return nd(t,e,r,s,o,a)}function nd(t,e,r,s,a,o){Mg(t,e);var c=(e.flags&128)!==0;if(!s&&!c)return a&&Uf(e,r,!1),jr(t,e,o);s=e.stateNode,A_.current=e;var u=c&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&c?(e.child=bs(e,t.child,null,o),e.child=bs(e,null,u,o)):ft(t,e,u,o),e.memoizedState=s.state,a&&Uf(e,r,!0),e.child}function Ug(t){var e=t.stateNode;e.pendingContext?Mf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mf(t,e.context,!1),uu(t,e.containerInfo)}function rm(t,e,r,s,a){return vs(),iu(a),e.flags|=256,ft(t,e,r,s),e.child}var sd={dehydrated:null,treeContext:null,retryLane:0};function id(t){return{baseLanes:t,cachePool:null,transitions:null}}function $g(t,e,r){var s=e.pendingProps,a=Re.current,o=!1,c=(e.flags&128)!==0,u;if((u=c)||(u=t!==null&&t.memoizedState===null?!1:(a&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ee(Re,a&1),t===null)return Jc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=s.children,t=s.fallback,o?(s=e.mode,o=e.child,c={mode:"hidden",children:c},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=Yo(c,s,0,null),t=wn(t,s,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=id(r),e.memoizedState=sd,t):vu(e,c));if(a=t.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return O_(t,e,c,s,u,a,r);if(o){o=s.fallback,c=e.mode,a=t.child,u=a.sibling;var h={mode:"hidden",children:s.children};return!(c&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=h,e.deletions=null):(s=qr(a,h),s.subtreeFlags=a.subtreeFlags&14680064),u!==null?o=qr(u,o):(o=wn(o,c,r,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,c=t.child.memoizedState,c=c===null?id(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=t.childLanes&~r,e.memoizedState=sd,s}return o=t.child,t=o.sibling,s=qr(o,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function vu(t,e){return e=Yo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pa(t,e,r,s){return s!==null&&iu(s),bs(e,t.child,null,r),t=vu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function O_(t,e,r,s,a,o,c){if(r)return e.flags&256?(e.flags&=-257,s=dc(Error(Y(422))),Pa(t,e,c,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=s.fallback,a=e.mode,s=Yo({mode:"visible",children:s.children},a,0,null),o=wn(o,a,c,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,e.mode&1&&bs(e,t.child,null,c),e.child.memoizedState=id(c),e.memoizedState=sd,o);if(!(e.mode&1))return Pa(t,e,c,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var u=s.dgst;return s=u,o=Error(Y(419)),s=dc(o,s,void 0),Pa(t,e,c,s)}if(u=(c&t.childLanes)!==0,_t||u){if(s=Xe,s!==null){switch(c&-c){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|c)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,wr(t,a),Xt(s,t,a,-1))}return ku(),s=dc(Error(Y(421))),Pa(t,e,c,s)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=V_.bind(null,t),a._reactRetry=e,null):(t=o.treeContext,Et=Fr(a.nextSibling),Pt=e,Oe=!0,Gt=null,t!==null&&(It[Dt++]=xr,It[Dt++]=yr,It[Dt++]=kn,xr=t.id,yr=t.overflow,kn=e),e=vu(e,s.children),e.flags|=4096,e)}function nm(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Xc(t.return,e,r)}function uc(t,e,r,s,a){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=a)}function Fg(t,e,r){var s=e.pendingProps,a=s.revealOrder,o=s.tail;if(ft(t,e,s.children,r),s=Re.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nm(t,r,e);else if(t.tag===19)nm(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Ee(Re,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&_o(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),uc(e,!1,a,r,o);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&_o(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}uc(e,!0,r,null,o);break;case"together":uc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ya(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),En|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,r=qr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=qr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function L_(t,e,r){switch(e.tag){case 3:Ug(e),vs();break;case 5:mg(e);break;case 1:jt(e.type)&&po(e);break;case 4:uu(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;Ee(yo,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ee(Re,Re.current&1),e.flags|=128,null):r&e.child.childLanes?$g(t,e,r):(Ee(Re,Re.current&1),t=jr(t,e,r),t!==null?t.sibling:null);Ee(Re,Re.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return Fg(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ee(Re,Re.current),s)break;return null;case 22:case 23:return e.lanes=0,Bg(t,e,r)}return jr(t,e,r)}var Hg,ad,Wg,Vg;Hg=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ad=function(){};Wg=function(t,e,r,s){var a=t.memoizedProps;if(a!==s){t=e.stateNode,vn(dr.current);var o=null;switch(r){case"input":a=Pc(t,a),s=Pc(t,s),o=[];break;case"select":a=De({},a,{value:void 0}),s=De({},s,{value:void 0}),o=[];break;case"textarea":a=Ac(t,a),s=Ac(t,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=fo)}Lc(r,s);var c;r=null;for(m in a)if(!s.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var u=a[m];for(c in u)u.hasOwnProperty(c)&&(r||(r={}),r[c]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(gi.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in s){var h=s[m];if(u=a!=null?a[m]:void 0,s.hasOwnProperty(m)&&h!==u&&(h!=null||u!=null))if(m==="style")if(u){for(c in u)!u.hasOwnProperty(c)||h&&h.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in h)h.hasOwnProperty(c)&&u[c]!==h[c]&&(r||(r={}),r[c]=h[c])}else r||(o||(o=[]),o.push(m,r)),r=h;else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(gi.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&Te("scroll",t),o||u===h||(o=[])):(o=o||[]).push(m,h))}r&&(o=o||[]).push("style",r);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};Vg=function(t,e,r,s){r!==s&&(e.flags|=4)};function Js(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function R_(t,e,r){var s=e.pendingProps;switch(su(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return jt(e.type)&&mo(),ot(e),null;case 3:return s=e.stateNode,_s(),Ce(wt),Ce(dt),fu(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Sa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gt!==null&&(md(Gt),Gt=null))),ad(t,e),ot(e),null;case 5:hu(e);var a=vn(Pi.current);if(r=e.type,t!==null&&e.stateNode!=null)Wg(t,e,r,s,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Y(166));return ot(e),null}if(t=vn(dr.current),Sa(e)){s=e.stateNode,r=e.type;var o=e.memoizedProps;switch(s[lr]=e,s[Si]=o,t=(e.mode&1)!==0,r){case"dialog":Te("cancel",s),Te("close",s);break;case"iframe":case"object":case"embed":Te("load",s);break;case"video":case"audio":for(a=0;a<ni.length;a++)Te(ni[a],s);break;case"source":Te("error",s);break;case"img":case"image":case"link":Te("error",s),Te("load",s);break;case"details":Te("toggle",s);break;case"input":hf(s,o),Te("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Te("invalid",s);break;case"textarea":mf(s,o),Te("invalid",s)}Lc(r,o),a=null;for(var c in o)if(o.hasOwnProperty(c)){var u=o[c];c==="children"?typeof u=="string"?s.textContent!==u&&(o.suppressHydrationWarning!==!0&&ka(s.textContent,u,t),a=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&ka(s.textContent,u,t),a=["children",""+u]):gi.hasOwnProperty(c)&&u!=null&&c==="onScroll"&&Te("scroll",s)}switch(r){case"input":xa(s),ff(s,o,!0);break;case"textarea":xa(s),pf(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=fo)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{c=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vp(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=c.createElement(r,{is:s.is}):(t=c.createElement(r),r==="select"&&(c=t,s.multiple?c.multiple=!0:s.size&&(c.size=s.size))):t=c.createElementNS(t,r),t[lr]=e,t[Si]=s,Hg(t,e,!1,!1),e.stateNode=t;e:{switch(c=Rc(r,s),r){case"dialog":Te("cancel",t),Te("close",t),a=s;break;case"iframe":case"object":case"embed":Te("load",t),a=s;break;case"video":case"audio":for(a=0;a<ni.length;a++)Te(ni[a],t);a=s;break;case"source":Te("error",t),a=s;break;case"img":case"image":case"link":Te("error",t),Te("load",t),a=s;break;case"details":Te("toggle",t),a=s;break;case"input":hf(t,s),a=Pc(t,s),Te("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=De({},s,{value:void 0}),Te("invalid",t);break;case"textarea":mf(t,s),a=Ac(t,s),Te("invalid",t);break;default:a=s}Lc(r,a),u=a;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?wp(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&bp(t,h)):o==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&xi(t,h):typeof h=="number"&&xi(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(gi.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Te("scroll",t):h!=null&&Hd(t,o,h,c))}switch(r){case"input":xa(t),ff(t,s,!1);break;case"textarea":xa(t),pf(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Kr(s.value));break;case"select":t.multiple=!!s.multiple,o=s.value,o!=null?ls(t,!!s.multiple,o,!1):s.defaultValue!=null&&ls(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=fo)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)Vg(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Y(166));if(r=vn(Pi.current),vn(dr.current),Sa(e)){if(s=e.stateNode,r=e.memoizedProps,s[lr]=e,(o=s.nodeValue!==r)&&(t=Pt,t!==null))switch(t.tag){case 3:ka(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ka(s.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[lr]=e,e.stateNode=s}return ot(e),null;case 13:if(Ce(Re),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Et!==null&&e.mode&1&&!(e.flags&128))cg(),vs(),e.flags|=98560,o=!1;else if(o=Sa(e),s!==null&&s.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[lr]=e}else vs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),o=!1}else Gt!==null&&(md(Gt),Gt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Ze===0&&(Ze=3):ku())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return _s(),ad(t,e),t===null&&Ni(e.stateNode.containerInfo),ot(e),null;case 10:return lu(e.type._context),ot(e),null;case 17:return jt(e.type)&&mo(),ot(e),null;case 19:if(Ce(Re),o=e.memoizedState,o===null)return ot(e),null;if(s=(e.flags&128)!==0,c=o.rendering,c===null)if(s)Js(o,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=_o(t),c!==null){for(e.flags|=128,Js(o,!1),s=c.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)o=r,t=s,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,t=c.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ee(Re,Re.current&1|2),e.child}t=t.sibling}o.tail!==null&&Me()>js&&(e.flags|=128,s=!0,Js(o,!1),e.lanes=4194304)}else{if(!s)if(t=_o(c),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Js(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!Oe)return ot(e),null}else 2*Me()-o.renderingStartTime>js&&r!==1073741824&&(e.flags|=128,s=!0,Js(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(r=o.last,r!==null?r.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Me(),e.sibling=null,r=Re.current,Ee(Re,s?r&1|2:r&1),e):(ot(e),null);case 22:case 23:return Nu(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?kt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function I_(t,e){switch(su(e),e.tag){case 1:return jt(e.type)&&mo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _s(),Ce(wt),Ce(dt),fu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hu(e),null;case 13:if(Ce(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Re),null;case 4:return _s(),null;case 10:return lu(e.type._context),null;case 22:case 23:return Nu(),null;case 24:return null;default:return null}}var Ta=!1,lt=!1,D_=typeof WeakSet=="function"?WeakSet:Set,ie=null;function as(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){ze(t,e,s)}else r.current=null}function od(t,e,r){try{r()}catch(s){ze(t,e,s)}}var sm=!1;function z_(t,e){if(Wc=co,t=Yp(),ru(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var c=0,u=-1,h=-1,m=0,x=0,g=t,y=null;t:for(;;){for(var j;g!==r||a!==0&&g.nodeType!==3||(u=c+a),g!==o||s!==0&&g.nodeType!==3||(h=c+s),g.nodeType===3&&(c+=g.nodeValue.length),(j=g.firstChild)!==null;)y=g,g=j;for(;;){if(g===t)break t;if(y===r&&++m===a&&(u=c),y===o&&++x===s&&(h=c),(j=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=j}r=u===-1||h===-1?null:{start:u,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(Vc={focusedElem:t,selectionRange:r},co=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var w=b.memoizedProps,E=b.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?w:Vt(e.type,w),E);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(P){ze(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return b=sm,sm=!1,b}function fi(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var o=a.destroy;a.destroy=void 0,o!==void 0&&od(e,r,o)}a=a.next}while(a!==s)}}function Zo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function ld(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function qg(t){var e=t.alternate;e!==null&&(t.alternate=null,qg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[Si],delete e[Zc],delete e[v_],delete e[b_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kg(t){return t.tag===5||t.tag===3||t.tag===4}function im(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cd(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=fo));else if(s!==4&&(t=t.child,t!==null))for(cd(t,e,r),t=t.sibling;t!==null;)cd(t,e,r),t=t.sibling}function dd(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(dd(t,e,r),t=t.sibling;t!==null;)dd(t,e,r),t=t.sibling}var rt=null,Kt=!1;function Pr(t,e,r){for(r=r.child;r!==null;)Zg(t,e,r),r=r.sibling}function Zg(t,e,r){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Uo,r)}catch{}switch(r.tag){case 5:lt||as(r,e);case 6:var s=rt,a=Kt;rt=null,Pr(t,e,r),rt=s,Kt=a,rt!==null&&(Kt?(t=rt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):rt.removeChild(r.stateNode));break;case 18:rt!==null&&(Kt?(t=rt,r=r.stateNode,t.nodeType===8?sc(t.parentNode,r):t.nodeType===1&&sc(t,r),_i(t)):sc(rt,r.stateNode));break;case 4:s=rt,a=Kt,rt=r.stateNode.containerInfo,Kt=!0,Pr(t,e,r),rt=s,Kt=a;break;case 0:case 11:case 14:case 15:if(!lt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&od(r,e,c),a=a.next}while(a!==s)}Pr(t,e,r);break;case 1:if(!lt&&(as(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(u){ze(r,e,u)}Pr(t,e,r);break;case 21:Pr(t,e,r);break;case 22:r.mode&1?(lt=(s=lt)||r.memoizedState!==null,Pr(t,e,r),lt=s):Pr(t,e,r);break;default:Pr(t,e,r)}}function am(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new D_),e.forEach(function(s){var a=q_.bind(null,t,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Ht(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var o=t,c=e,u=c;e:for(;u!==null;){switch(u.tag){case 5:rt=u.stateNode,Kt=!1;break e;case 3:rt=u.stateNode.containerInfo,Kt=!0;break e;case 4:rt=u.stateNode.containerInfo,Kt=!0;break e}u=u.return}if(rt===null)throw Error(Y(160));Zg(o,c,a),rt=null,Kt=!1;var h=a.alternate;h!==null&&(h.return=null),a.return=null}catch(m){ze(a,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gg(e,t),e=e.sibling}function Gg(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),ir(t),s&4){try{fi(3,t,t.return),Zo(3,t)}catch(w){ze(t,t.return,w)}try{fi(5,t,t.return)}catch(w){ze(t,t.return,w)}}break;case 1:Ht(e,t),ir(t),s&512&&r!==null&&as(r,r.return);break;case 5:if(Ht(e,t),ir(t),s&512&&r!==null&&as(r,r.return),t.flags&32){var a=t.stateNode;try{xi(a,"")}catch(w){ze(t,t.return,w)}}if(s&4&&(a=t.stateNode,a!=null)){var o=t.memoizedProps,c=r!==null?r.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&xp(a,o),Rc(u,c);var m=Rc(u,o);for(c=0;c<h.length;c+=2){var x=h[c],g=h[c+1];x==="style"?wp(a,g):x==="dangerouslySetInnerHTML"?bp(a,g):x==="children"?xi(a,g):Hd(a,x,g,m)}switch(u){case"input":Tc(a,o);break;case"textarea":yp(a,o);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var j=o.value;j!=null?ls(a,!!o.multiple,j,!1):y!==!!o.multiple&&(o.defaultValue!=null?ls(a,!!o.multiple,o.defaultValue,!0):ls(a,!!o.multiple,o.multiple?[]:"",!1))}a[Si]=o}catch(w){ze(t,t.return,w)}}break;case 6:if(Ht(e,t),ir(t),s&4){if(t.stateNode===null)throw Error(Y(162));a=t.stateNode,o=t.memoizedProps;try{a.nodeValue=o}catch(w){ze(t,t.return,w)}}break;case 3:if(Ht(e,t),ir(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{_i(e.containerInfo)}catch(w){ze(t,t.return,w)}break;case 4:Ht(e,t),ir(t);break;case 13:Ht(e,t),ir(t),a=t.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(wu=Me())),s&4&&am(t);break;case 22:if(x=r!==null&&r.memoizedState!==null,t.mode&1?(lt=(m=lt)||x,Ht(e,t),lt=m):Ht(e,t),ir(t),s&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!x&&t.mode&1)for(ie=t,x=t.child;x!==null;){for(g=ie=x;ie!==null;){switch(y=ie,j=y.child,y.tag){case 0:case 11:case 14:case 15:fi(4,y,y.return);break;case 1:as(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){s=y,r=y.return;try{e=s,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(w){ze(s,r,w)}}break;case 5:as(y,y.return);break;case 22:if(y.memoizedState!==null){lm(g);continue}}j!==null?(j.return=y,ie=j):lm(g)}x=x.sibling}e:for(x=null,g=t;;){if(g.tag===5){if(x===null){x=g;try{a=g.stateNode,m?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,c=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=_p("display",c))}catch(w){ze(t,t.return,w)}}}else if(g.tag===6){if(x===null)try{g.stateNode.nodeValue=m?"":g.memoizedProps}catch(w){ze(t,t.return,w)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;x===g&&(x=null),g=g.return}x===g&&(x=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Ht(e,t),ir(t),s&4&&am(t);break;case 21:break;default:Ht(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Kg(r)){var s=r;break e}r=r.return}throw Error(Y(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(xi(a,""),s.flags&=-33);var o=im(t);dd(t,o,a);break;case 3:case 4:var c=s.stateNode.containerInfo,u=im(t);cd(t,u,c);break;default:throw Error(Y(161))}}catch(h){ze(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function B_(t,e,r){ie=t,Yg(t)}function Yg(t,e,r){for(var s=(t.mode&1)!==0;ie!==null;){var a=ie,o=a.child;if(a.tag===22&&s){var c=a.memoizedState!==null||Ta;if(!c){var u=a.alternate,h=u!==null&&u.memoizedState!==null||lt;u=Ta;var m=lt;if(Ta=c,(lt=h)&&!m)for(ie=a;ie!==null;)c=ie,h=c.child,c.tag===22&&c.memoizedState!==null?cm(a):h!==null?(h.return=c,ie=h):cm(a);for(;o!==null;)ie=o,Yg(o),o=o.sibling;ie=a,Ta=u,lt=m}om(t)}else a.subtreeFlags&8772&&o!==null?(o.return=a,ie=o):om(t)}}function om(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Zo(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!lt)if(r===null)s.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Vt(e.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Vf(e,o,s);break;case 3:var c=e.updateQueue;if(c!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Vf(e,c,r)}break;case 5:var u=e.stateNode;if(r===null&&e.flags&4){r=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var x=m.memoizedState;if(x!==null){var g=x.dehydrated;g!==null&&_i(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}lt||e.flags&512&&ld(e)}catch(y){ze(e,e.return,y)}}if(e===t){ie=null;break}if(r=e.sibling,r!==null){r.return=e.return,ie=r;break}ie=e.return}}function lm(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ie=r;break}ie=e.return}}function cm(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Zo(4,e)}catch(h){ze(e,r,h)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(h){ze(e,a,h)}}var o=e.return;try{ld(e)}catch(h){ze(e,o,h)}break;case 5:var c=e.return;try{ld(e)}catch(h){ze(e,c,h)}}}catch(h){ze(e,e.return,h)}if(e===t){ie=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ie=u;break}ie=e.return}}var M_=Math.ceil,No=Nr.ReactCurrentDispatcher,bu=Nr.ReactCurrentOwner,Bt=Nr.ReactCurrentBatchConfig,be=0,Xe=null,Ve=null,nt=0,kt=0,os=Yr(0),Ze=0,Oi=null,En=0,Go=0,_u=0,mi=null,vt=null,wu=0,js=1/0,pr=null,ko=!1,ud=null,Wr=null,Ca=!1,zr=null,So=0,pi=0,hd=null,Ja=-1,Xa=0;function mt(){return be&6?Me():Ja!==-1?Ja:Ja=Me()}function Vr(t){return t.mode&1?be&2&&nt!==0?nt&-nt:w_.transition!==null?(Xa===0&&(Xa=Rp()),Xa):(t=je,t!==0||(t=window.event,t=t===void 0?16:$p(t.type)),t):1}function Xt(t,e,r,s){if(50<pi)throw pi=0,hd=null,Error(Y(185));Mi(t,r,s),(!(be&2)||t!==Xe)&&(t===Xe&&(!(be&2)&&(Go|=r),Ze===4&&Lr(t,nt)),Nt(t,s),r===1&&be===0&&!(e.mode&1)&&(js=Me()+500,Vo&&Jr()))}function Nt(t,e){var r=t.callbackNode;wb(t,e);var s=lo(t,t===Xe?nt:0);if(s===0)r!==null&&yf(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&yf(r),e===1)t.tag===0?__(dm.bind(null,t)):ag(dm.bind(null,t)),x_(function(){!(be&6)&&Jr()}),r=null;else{switch(Ip(s)){case 1:r=Zd;break;case 4:r=Op;break;case 16:r=oo;break;case 536870912:r=Lp;break;default:r=oo}r=sx(r,Jg.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Jg(t,e){if(Ja=-1,Xa=0,be&6)throw Error(Y(327));var r=t.callbackNode;if(fs()&&t.callbackNode!==r)return null;var s=lo(t,t===Xe?nt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Eo(t,s);else{e=s;var a=be;be|=2;var o=Qg();(Xe!==t||nt!==e)&&(pr=null,js=Me()+500,_n(t,e));do try{F_();break}catch(u){Xg(t,u)}while(!0);ou(),No.current=o,be=a,Ve!==null?e=0:(Xe=null,nt=0,e=Ze)}if(e!==0){if(e===2&&(a=Mc(t),a!==0&&(s=a,e=fd(t,a))),e===1)throw r=Oi,_n(t,0),Lr(t,s),Nt(t,Me()),r;if(e===6)Lr(t,s);else{if(a=t.current.alternate,!(s&30)&&!U_(a)&&(e=Eo(t,s),e===2&&(o=Mc(t),o!==0&&(s=o,e=fd(t,o))),e===1))throw r=Oi,_n(t,0),Lr(t,s),Nt(t,Me()),r;switch(t.finishedWork=a,t.finishedLanes=s,e){case 0:case 1:throw Error(Y(345));case 2:un(t,vt,pr);break;case 3:if(Lr(t,s),(s&130023424)===s&&(e=wu+500-Me(),10<e)){if(lo(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){mt(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Kc(un.bind(null,t,vt,pr),e);break}un(t,vt,pr);break;case 4:if(Lr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,a=-1;0<s;){var c=31-Jt(s);o=1<<c,c=e[c],c>a&&(a=c),s&=~o}if(s=a,s=Me()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*M_(s/1960))-s,10<s){t.timeoutHandle=Kc(un.bind(null,t,vt,pr),s);break}un(t,vt,pr);break;case 5:un(t,vt,pr);break;default:throw Error(Y(329))}}}return Nt(t,Me()),t.callbackNode===r?Jg.bind(null,t):null}function fd(t,e){var r=mi;return t.current.memoizedState.isDehydrated&&(_n(t,e).flags|=256),t=Eo(t,e),t!==2&&(e=vt,vt=r,e!==null&&md(e)),t}function md(t){vt===null?vt=t:vt.push.apply(vt,t)}function U_(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],o=a.getSnapshot;a=a.value;try{if(!Qt(o(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lr(t,e){for(e&=~_u,e&=~Go,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Jt(e),s=1<<r;t[r]=-1,e&=~s}}function dm(t){if(be&6)throw Error(Y(327));fs();var e=lo(t,0);if(!(e&1))return Nt(t,Me()),null;var r=Eo(t,e);if(t.tag!==0&&r===2){var s=Mc(t);s!==0&&(e=s,r=fd(t,s))}if(r===1)throw r=Oi,_n(t,0),Lr(t,e),Nt(t,Me()),r;if(r===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,un(t,vt,pr),Nt(t,Me()),null}function ju(t,e){var r=be;be|=1;try{return t(e)}finally{be=r,be===0&&(js=Me()+500,Vo&&Jr())}}function Pn(t){zr!==null&&zr.tag===0&&!(be&6)&&fs();var e=be;be|=1;var r=Bt.transition,s=je;try{if(Bt.transition=null,je=1,t)return t()}finally{je=s,Bt.transition=r,be=e,!(be&6)&&Jr()}}function Nu(){kt=os.current,Ce(os)}function _n(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,g_(r)),Ve!==null)for(r=Ve.return;r!==null;){var s=r;switch(su(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&mo();break;case 3:_s(),Ce(wt),Ce(dt),fu();break;case 5:hu(s);break;case 4:_s();break;case 13:Ce(Re);break;case 19:Ce(Re);break;case 10:lu(s.type._context);break;case 22:case 23:Nu()}r=r.return}if(Xe=t,Ve=t=qr(t.current,null),nt=kt=e,Ze=0,Oi=null,_u=Go=En=0,vt=mi=null,yn!==null){for(e=0;e<yn.length;e++)if(r=yn[e],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,o=r.pending;if(o!==null){var c=o.next;o.next=a,s.next=c}r.pending=s}yn=null}return t}function Xg(t,e){do{var r=Ve;try{if(ou(),Za.current=jo,wo){for(var s=Ie.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}wo=!1}if(Sn=0,Je=Ke=Ie=null,hi=!1,Ti=0,bu.current=null,r===null||r.return===null){Ze=1,Oi=e,Ve=null;break}e:{var o=t,c=r.return,u=r,h=e;if(e=nt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h,x=u,g=x.tag;if(!(x.mode&1)&&(g===0||g===11||g===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var j=Jf(c);if(j!==null){j.flags&=-257,Xf(j,c,u,o,e),j.mode&1&&Yf(o,m,e),e=j,h=m;var b=e.updateQueue;if(b===null){var w=new Set;w.add(h),e.updateQueue=w}else b.add(h);break e}else{if(!(e&1)){Yf(o,m,e),ku();break e}h=Error(Y(426))}}else if(Oe&&u.mode&1){var E=Jf(c);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Xf(E,c,u,o,e),iu(ws(h,u));break e}}o=h=ws(h,u),Ze!==4&&(Ze=2),mi===null?mi=[o]:mi.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=Ig(o,h,e);Wf(o,_);break e;case 1:u=h;var v=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Wr===null||!Wr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var P=Dg(o,u,e);Wf(o,P);break e}}o=o.return}while(o!==null)}tx(r)}catch(R){e=R,Ve===r&&r!==null&&(Ve=r=r.return);continue}break}while(!0)}function Qg(){var t=No.current;return No.current=jo,t===null?jo:t}function ku(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),Xe===null||!(En&268435455)&&!(Go&268435455)||Lr(Xe,nt)}function Eo(t,e){var r=be;be|=2;var s=Qg();(Xe!==t||nt!==e)&&(pr=null,_n(t,e));do try{$_();break}catch(a){Xg(t,a)}while(!0);if(ou(),be=r,No.current=s,Ve!==null)throw Error(Y(261));return Xe=null,nt=0,Ze}function $_(){for(;Ve!==null;)ex(Ve)}function F_(){for(;Ve!==null&&!fb();)ex(Ve)}function ex(t){var e=nx(t.alternate,t,kt);t.memoizedProps=t.pendingProps,e===null?tx(t):Ve=e,bu.current=null}function tx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=I_(r,e),r!==null){r.flags&=32767,Ve=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Ve=null;return}}else if(r=R_(r,e,kt),r!==null){Ve=r;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Ze===0&&(Ze=5)}function un(t,e,r){var s=je,a=Bt.transition;try{Bt.transition=null,je=1,H_(t,e,r,s)}finally{Bt.transition=a,je=s}return null}function H_(t,e,r,s){do fs();while(zr!==null);if(be&6)throw Error(Y(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(jb(t,o),t===Xe&&(Ve=Xe=null,nt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ca||(Ca=!0,sx(oo,function(){return fs(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Bt.transition,Bt.transition=null;var c=je;je=1;var u=be;be|=4,bu.current=null,z_(t,r),Gg(r,t),c_(Vc),co=!!Wc,Vc=Wc=null,t.current=r,B_(r),mb(),be=u,je=c,Bt.transition=o}else t.current=r;if(Ca&&(Ca=!1,zr=t,So=a),o=t.pendingLanes,o===0&&(Wr=null),xb(r.stateNode),Nt(t,Me()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(ko)throw ko=!1,t=ud,ud=null,t;return So&1&&t.tag!==0&&fs(),o=t.pendingLanes,o&1?t===hd?pi++:(pi=0,hd=t):pi=0,Jr(),null}function fs(){if(zr!==null){var t=Ip(So),e=Bt.transition,r=je;try{if(Bt.transition=null,je=16>t?16:t,zr===null)var s=!1;else{if(t=zr,zr=null,So=0,be&6)throw Error(Y(331));var a=be;for(be|=4,ie=t.current;ie!==null;){var o=ie,c=o.child;if(ie.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var m=u[h];for(ie=m;ie!==null;){var x=ie;switch(x.tag){case 0:case 11:case 15:fi(8,x,o)}var g=x.child;if(g!==null)g.return=x,ie=g;else for(;ie!==null;){x=ie;var y=x.sibling,j=x.return;if(qg(x),x===m){ie=null;break}if(y!==null){y.return=j,ie=y;break}ie=j}}}var b=o.alternate;if(b!==null){var w=b.child;if(w!==null){b.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}ie=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,ie=c;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fi(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,ie=_;break e}ie=o.return}}var v=t.current;for(ie=v;ie!==null;){c=ie;var S=c.child;if(c.subtreeFlags&2064&&S!==null)S.return=c,ie=S;else e:for(c=v;ie!==null;){if(u=ie,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Zo(9,u)}}catch(R){ze(u,u.return,R)}if(u===c){ie=null;break e}var P=u.sibling;if(P!==null){P.return=u.return,ie=P;break e}ie=u.return}}if(be=a,Jr(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Uo,t)}catch{}s=!0}return s}finally{je=r,Bt.transition=e}}return!1}function um(t,e,r){e=ws(r,e),e=Ig(t,e,1),t=Hr(t,e,1),e=mt(),t!==null&&(Mi(t,1,e),Nt(t,e))}function ze(t,e,r){if(t.tag===3)um(t,t,r);else for(;e!==null;){if(e.tag===3){um(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Wr===null||!Wr.has(s))){t=ws(r,t),t=Dg(e,t,1),e=Hr(e,t,1),t=mt(),e!==null&&(Mi(e,1,t),Nt(e,t));break}}e=e.return}}function W_(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&r,Xe===t&&(nt&r)===r&&(Ze===4||Ze===3&&(nt&130023424)===nt&&500>Me()-wu?_n(t,0):_u|=r),Nt(t,e)}function rx(t,e){e===0&&(t.mode&1?(e=ba,ba<<=1,!(ba&130023424)&&(ba=4194304)):e=1);var r=mt();t=wr(t,e),t!==null&&(Mi(t,e,r),Nt(t,r))}function V_(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),rx(t,r)}function q_(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(Y(314))}s!==null&&s.delete(e),rx(t,r)}var nx;nx=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)_t=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return _t=!1,L_(t,e,r);_t=!!(t.flags&131072)}else _t=!1,Oe&&e.flags&1048576&&og(e,xo,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ya(t,e),t=e.pendingProps;var a=ys(e,dt.current);hs(e,r),a=pu(null,e,s,t,a,r);var o=gu();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(s)?(o=!0,po(e)):o=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,du(e),a.updater=Ko,e.stateNode=a,a._reactInternals=e,ed(e,s,t,r),e=nd(null,e,s,!0,o,r)):(e.tag=0,Oe&&o&&nu(e),ft(null,e,a,r),e=e.child),e;case 16:s=e.elementType;e:{switch(Ya(t,e),t=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=Z_(s),t=Vt(s,t),a){case 0:e=rd(null,e,s,t,r);break e;case 1:e=tm(null,e,s,t,r);break e;case 11:e=Qf(null,e,s,t,r);break e;case 14:e=em(null,e,s,Vt(s.type,t),r);break e}throw Error(Y(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Vt(s,a),rd(t,e,s,a,r);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Vt(s,a),tm(t,e,s,a,r);case 3:e:{if(Ug(e),t===null)throw Error(Y(387));s=e.pendingProps,o=e.memoizedState,a=o.element,fg(t,e),bo(e,s,null,r);var c=e.memoizedState;if(s=c.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){a=ws(Error(Y(423)),e),e=rm(t,e,s,r,a);break e}else if(s!==a){a=ws(Error(Y(424)),e),e=rm(t,e,s,r,a);break e}else for(Et=Fr(e.stateNode.containerInfo.firstChild),Pt=e,Oe=!0,Gt=null,r=ug(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vs(),s===a){e=jr(t,e,r);break e}ft(t,e,s,r)}e=e.child}return e;case 5:return mg(e),t===null&&Jc(e),s=e.type,a=e.pendingProps,o=t!==null?t.memoizedProps:null,c=a.children,qc(s,a)?c=null:o!==null&&qc(s,o)&&(e.flags|=32),Mg(t,e),ft(t,e,c,r),e.child;case 6:return t===null&&Jc(e),null;case 13:return $g(t,e,r);case 4:return uu(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=bs(e,null,s,r):ft(t,e,s,r),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Vt(s,a),Qf(t,e,s,a,r);case 7:return ft(t,e,e.pendingProps,r),e.child;case 8:return ft(t,e,e.pendingProps.children,r),e.child;case 12:return ft(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,o=e.memoizedProps,c=a.value,Ee(yo,s._currentValue),s._currentValue=c,o!==null)if(Qt(o.value,c)){if(o.children===a.children&&!wt.current){e=jr(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){c=o.child;for(var h=u.firstContext;h!==null;){if(h.context===s){if(o.tag===1){h=vr(-1,r&-r),h.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var x=m.pending;x===null?h.next=h:(h.next=x.next,x.next=h),m.pending=h}}o.lanes|=r,h=o.alternate,h!==null&&(h.lanes|=r),Xc(o.return,r,e),u.lanes|=r;break}h=h.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(Y(341));c.lanes|=r,u=c.alternate,u!==null&&(u.lanes|=r),Xc(c,r,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}ft(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,hs(e,r),a=Mt(a),s=s(a),e.flags|=1,ft(t,e,s,r),e.child;case 14:return s=e.type,a=Vt(s,e.pendingProps),a=Vt(s.type,a),em(t,e,s,a,r);case 15:return zg(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Vt(s,a),Ya(t,e),e.tag=1,jt(s)?(t=!0,po(e)):t=!1,hs(e,r),Rg(e,s,a),ed(e,s,a,r),nd(null,e,s,!0,t,r);case 19:return Fg(t,e,r);case 22:return Bg(t,e,r)}throw Error(Y(156,e.tag))};function sx(t,e){return Ap(t,e)}function K_(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,r,s){return new K_(t,e,r,s)}function Su(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Z_(t){if(typeof t=="function")return Su(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vd)return 11;if(t===qd)return 14}return 2}function qr(t,e){var r=t.alternate;return r===null?(r=zt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Qa(t,e,r,s,a,o){var c=2;if(s=t,typeof t=="function")Su(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case Jn:return wn(r.children,a,o,e);case Wd:c=8,a|=8;break;case Nc:return t=zt(12,r,e,a|2),t.elementType=Nc,t.lanes=o,t;case kc:return t=zt(13,r,e,a),t.elementType=kc,t.lanes=o,t;case Sc:return t=zt(19,r,e,a),t.elementType=Sc,t.lanes=o,t;case mp:return Yo(r,a,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hp:c=10;break e;case fp:c=9;break e;case Vd:c=11;break e;case qd:c=14;break e;case Cr:c=16,s=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=zt(c,r,e,a),e.elementType=t,e.type=s,e.lanes=o,e}function wn(t,e,r,s){return t=zt(7,t,s,e),t.lanes=r,t}function Yo(t,e,r,s){return t=zt(22,t,s,e),t.elementType=mp,t.lanes=r,t.stateNode={isHidden:!1},t}function hc(t,e,r){return t=zt(6,t,null,e),t.lanes=r,t}function fc(t,e,r){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function G_(t,e,r,s,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kl(0),this.expirationTimes=Kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Eu(t,e,r,s,a,o,c,u,h){return t=new G_(t,e,r,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=zt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},du(o),t}function Y_(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yn,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function ix(t){if(!t)return Zr;t=t._reactInternals;e:{if(Cn(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var r=t.type;if(jt(r))return ig(t,r,e)}return e}function ax(t,e,r,s,a,o,c,u,h){return t=Eu(r,s,!0,t,a,o,c,u,h),t.context=ix(null),r=t.current,s=mt(),a=Vr(r),o=vr(s,a),o.callback=e??null,Hr(r,o,a),t.current.lanes=a,Mi(t,a,s),Nt(t,s),t}function Jo(t,e,r,s){var a=e.current,o=mt(),c=Vr(a);return r=ix(r),e.context===null?e.context=r:e.pendingContext=r,e=vr(o,c),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Hr(a,e,c),t!==null&&(Xt(t,a,c,o),Ka(t,a,c)),c}function Po(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Pu(t,e){hm(t,e),(t=t.alternate)&&hm(t,e)}function J_(){return null}var ox=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tu(t){this._internalRoot=t}Xo.prototype.render=Tu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Jo(t,e,null,null)};Xo.prototype.unmount=Tu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pn(function(){Jo(null,t,null,null)}),e[_r]=null}};function Xo(t){this._internalRoot=t}Xo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bp();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Or.length&&e!==0&&e<Or[r].priority;r++);Or.splice(r,0,t),r===0&&Up(t)}};function Cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fm(){}function X_(t,e,r,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var m=Po(c);o.call(m)}}var c=ax(e,s,t,0,null,!1,!1,"",fm);return t._reactRootContainer=c,t[_r]=c.current,Ni(t.nodeType===8?t.parentNode:t),Pn(),c}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var u=s;s=function(){var m=Po(h);u.call(m)}}var h=Eu(t,0,!1,null,null,!1,!1,"",fm);return t._reactRootContainer=h,t[_r]=h.current,Ni(t.nodeType===8?t.parentNode:t),Pn(function(){Jo(e,h,r,s)}),h}function el(t,e,r,s,a){var o=r._reactRootContainer;if(o){var c=o;if(typeof a=="function"){var u=a;a=function(){var h=Po(c);u.call(h)}}Jo(e,c,t,a)}else c=X_(r,e,t,a,s);return Po(c)}Dp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ri(e.pendingLanes);r!==0&&(Gd(e,r|1),Nt(e,Me()),!(be&6)&&(js=Me()+500,Jr()))}break;case 13:Pn(function(){var s=wr(t,1);if(s!==null){var a=mt();Xt(s,t,1,a)}}),Pu(t,1)}};Yd=function(t){if(t.tag===13){var e=wr(t,134217728);if(e!==null){var r=mt();Xt(e,t,134217728,r)}Pu(t,134217728)}};zp=function(t){if(t.tag===13){var e=Vr(t),r=wr(t,e);if(r!==null){var s=mt();Xt(r,t,e,s)}Pu(t,e)}};Bp=function(){return je};Mp=function(t,e){var r=je;try{return je=t,e()}finally{je=r}};Dc=function(t,e,r){switch(e){case"input":if(Tc(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var a=Wo(s);if(!a)throw Error(Y(90));gp(s),Tc(s,a)}}}break;case"textarea":yp(t,r);break;case"select":e=r.value,e!=null&&ls(t,!!r.multiple,e,!1)}};kp=ju;Sp=Pn;var Q_={usingClientEntryPoint:!1,Events:[$i,ts,Wo,jp,Np,ju]},Xs={findFiberByHostInstance:xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ew={bundleType:Xs.bundleType,version:Xs.version,rendererPackageName:Xs.rendererPackageName,rendererConfig:Xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Tp(t),t===null?null:t.stateNode},findFiberByHostInstance:Xs.findFiberByHostInstance||J_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Aa.isDisabled&&Aa.supportsFiber)try{Uo=Aa.inject(ew),cr=Aa}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q_;Ct.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cu(e))throw Error(Y(200));return Y_(t,e,null,r)};Ct.createRoot=function(t,e){if(!Cu(t))throw Error(Y(299));var r=!1,s="",a=ox;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Eu(t,1,!1,null,null,r,!1,s,a),t[_r]=e.current,Ni(t.nodeType===8?t.parentNode:t),new Tu(e)};Ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Tp(e),t=t===null?null:t.stateNode,t};Ct.flushSync=function(t){return Pn(t)};Ct.hydrate=function(t,e,r){if(!Qo(e))throw Error(Y(200));return el(null,t,e,!0,r)};Ct.hydrateRoot=function(t,e,r){if(!Cu(t))throw Error(Y(405));var s=r!=null&&r.hydratedSources||null,a=!1,o="",c=ox;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),e=ax(e,null,t,1,r??null,a,!1,o,c),t[_r]=e.current,Ni(t),s)for(t=0;t<s.length;t++)r=s[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Xo(e)};Ct.render=function(t,e,r){if(!Qo(e))throw Error(Y(200));return el(null,t,e,!1,r)};Ct.unmountComponentAtNode=function(t){if(!Qo(t))throw Error(Y(40));return t._reactRootContainer?(Pn(function(){el(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1};Ct.unstable_batchedUpdates=ju;Ct.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Qo(r))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return el(t,e,r,!1,s)};Ct.version="18.3.1-next-f1338f8080-20240426";function lx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lx)}catch(t){console.error(t)}}lx(),lp.exports=Ct;var cx=lp.exports,mm=cx;wc.createRoot=mm.createRoot,wc.hydrateRoot=mm.hydrateRoot;const tw={common:{loading:"Ykleniyor...",save:"Kaydet",cancel:"ptal",confirm:"Onayla",delete:"Sil",edit:"Dzenle",back:"Geri",next:"leri",close:"Kapat",yes:"Evet",no:"Hayr",ok:"Tamam",error:"Hata",success:"Baarl",warning:"Uyar",info:"Bilgi",search:"Ara",filter:"Filtrele",export:"Da Aktar",refresh:"Yenile",viewAll:"Tmn Gr",noData:"Veri bulunamad",amount:"Tutar",status:"Durum",date:"Tarih",all:"Tm",active:"Aktif",inactive:"Pasif",pending:"Beklemede",completed:"Tamamland",cancelled:"ptal Edildi"},auth:{login:"Giri Yap",logout:"k Yap",register:"Kayt Ol",email:"E-posta",password:"ifre",confirmPassword:"ifre Tekrar",forgotPassword:"ifremi Unuttum",welcomeBack:"Tekrar Ho Geldiniz",createAccount:"Hesap Olutur",emailPlaceholder:"ornek@email.com",passwordPlaceholder:"ifrenizi girin",noAccount:"Hesabnz yok mu?",haveAccount:"Zaten hesabnz var m?",signUp:"Kayt Ol",signIn:"Giri Yap"},dashboard:{title:"Ana Sayfa",balance:"Bakiyeniz",deposit:"Para Yatr",withdraw:"Para ek",cryptoDeposit:"Kripto Yatr",cryptoWithdraw:"Kripto ek",findAgent:"Acente Bul",findAgentDesc:"En yakn deiim noktalarn bulun",recentActivity:"Son lemler",noTransactions:"Henz ilem yok",businessPanel:"letme Paneli",adminPanel:"Admin Paneli",pendingApprovals:"Bekleyen Onaylar",paymentConfirm:"deme Onay",paymentConfirmMsg:"Hesabnza para aktarlmtr, demeyi onaylyor musunuz?",approve:"Onaylyorum",reject:"Reddet"},deposit:{title:"Para Yatr",receiptOptional:"Dekont Ykleme stee Bal",receiptInfo:"Dekont yklerseniz ilem 20 dakika iinde otomatik onaylanr.",bankAccount:"Banka Hesabnz",addNew:"Yeni Ekle",addBankAccount:"Banka Hesab Ekle",addBankAccountDesc:"Para yatrmak iin bir banka hesab eklemelisiniz",depositAmount:"Yatrlacak Tutar (USDT)",minimum:"Minimum: 10 USDT",youWillPay:"deyeceiniz",findMatch:"Eleme Bul",searchingMatch:"En Uygun Eleme Aranyor...",searchingMatchDesc:"Size uygun satcy aryoruz",matchFound:"Uygun Eleme Bulundu!",matchFoundDesc:"Yatrm tutarnz iin uygun bir satc bulundu.",confirmAndView:"lemi Onayla & Bilgileri Gr",confirmNote:"lemi onayladnzda deme bilgileri gsterilecek ve 30 dakika sre balayacaktr.",pendingOrder:"Bekleyen leminiz Var",pendingOrderDesc:"Aktif bir ileminiz var. Yeni ilem iin nce bunu tamamlayn veya iptal edin.",cancelOrder:"lemi ptal Et",noMatchTitle:"Eleme Bulunamad",noMatchDesc:"Bu tutarda ekim talebi yok. En yakn tutarlar seebilirsiniz:",waitingMatch:"Eleme Bekleniyor",waitingMatchDesc:"Talebiniz havuza eklendi, ekim talebi geldiinde eleeceksiniz.",transactionType:"lem Tipi",buyOrder:"Yatrm (Al)",sellOrder:"ekim (Sat)",network:"A"},depositConfirm:{title:"deme Bilgileri",paymentInfo:"deme Bilgileri",iban:"IBAN",recipient:"Alc",bank:"Banka",amount:"Tutar",timeRemaining:"Kalan Sre",markAsPaid:"dedim",uploadReceipt:"Dekont Ykle",paymentSent:"deme Bildiriminiz Alnd!",paymentSentDesc:"deme bildiriminiz baaryla iletildi. Satc onayladnda bakiyeniz hesabnza geecektir.",timeExpired:"Sre Doldu!",timeExpiredDesc:"lem sresi doldu ve iptal edildi. Ltfen yeni bir ilem balatn."},withdraw:{title:"Para ek",withdrawAmount:"ekilecek Tutar (USDT)",youWillReceive:"Alacanz",selectBank:"Banka Hesab Sein",createRequest:"ekim Talebi Olutur",waitingMatch:"Eleme Bekleniyor",instantWithdraw:"Hzl ekim",p2pWithdraw:"P2P ekim",insufficientBalance:"Yetersiz Bakiye"},crypto:{depositTitle:"Kripto Yatrma",withdrawTitle:"Kripto ekme",selectNetwork:"A Sein",depositAddress:"Yatrma Adresi",clickToCopy:"Kopyalamak iin tklayn",qrCode:"QR Kod",minimumDeposit:"Minimum: 10 USDT",selectAsset:"Varlk Sein",withdrawAmount:"ekim Tutar",walletAddress:"Czdan Adresi",networkFee:"A creti",confirmWithdraw:"ekimi Onayla"},history:{title:"lem Gemii",deposit:"Yatrm",withdraw:"ekim",transfer:"Transfer",p2pBuy:"P2P Al",p2pSell:"P2P Sat",noHistory:"Henz ilem yok"},profile:{title:"Profil",accountSettings:"Hesap Ayarlar",editProfile:"Profili Dzenle",changePassword:"ifre Deitir",bankAccounts:"Banka Hesaplar",transactionLimits:"lem Limitleri",security:"Gvenlik",language:"Dil",privacyPolicy:"Gizlilik Politikas",termsOfService:"Kullanm artlar",appVersion:"Uygulama Srm"},profileEdit:{title:"Profili Dzenle",firstName:"Ad",lastName:"Soyad",firstNamePlaceholder:"Adnz girin",lastNamePlaceholder:"Soyadnz girin",save:"Kaydet"},changePassword:{title:"ifre Deitir",currentPassword:"Mevcut ifre",newPassword:"Yeni ifre",confirmNewPassword:"Yeni ifre (Tekrar)",updatePassword:"ifreyi Gncelle",currentPasswordPlaceholder:"Mevcut ifrenizi girin",newPasswordPlaceholder:"Yeni ifrenizi girin",confirmPasswordPlaceholder:"Yeni ifrenizi tekrar girin"},bankAccounts:{title:"Banka Hesaplar",addAccount:"Banka Hesab Ekle",bankName:"Banka Ad",iban:"IBAN",accountHolder:"Hesap Sahibi",deleteConfirm:"Bu hesab silmek istediinize emin misiniz?",noAccounts:"Henz banka hesab eklenmemi"},notifications:{title:"Bildirimler",markAllRead:"Tmn Okundu aretle",new:"Yeni",read:"Okundu",noNotifications:"Henz bildirim yok",justNow:"Az nce"},business:{title:"letme Paneli",totalBalance:"Toplam Bakiye",subAccounts:"Alt Hesaplar",paymentPortals:"deme Portallar",transactionHistory:"lem Gemii",invite:"Davet Et",requestPortal:"Portal Talep Et",portalName:"Portal Ad"},findAgent:{title:"Acente Bul",cashPoint:"deme Noktas",searchPlaceholder:"ehir veya blge ara...",getDirections:"Yol Tarifi Al",noAgents:"Bu blgede acente bulunamad"},nav:{home:"Ana Sayfa",scan:"Tara",settings:"Ayarlar"},alerts:{selectBank:"Banka Sein",selectBankMsg:"Ltfen nce bir banka hesab sein veya ekleyin.",minimumAmount:"Minimum Tutar",minimumAmountMsg:"Minimum 10 USDT",serverError:"Sunucu Hatas",connectionError:"Balant Hatas",unknownError:"Bilinmeyen bir hata olutu",tryAgain:"Ltfen tekrar deneyin"},languages:{tr:"Trke",en:"English"}},rw={common:{loading:"Loading...",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",edit:"Edit",back:"Back",next:"Next",close:"Close",yes:"Yes",no:"No",ok:"OK",error:"Error",success:"Success",warning:"Warning",info:"Info",search:"Search",filter:"Filter",export:"Export",refresh:"Refresh",viewAll:"View All",noData:"No data found",amount:"Amount",status:"Status",date:"Date",all:"All",active:"Active",inactive:"Inactive",pending:"Pending",completed:"Completed",cancelled:"Cancelled"},auth:{login:"Log In",logout:"Log Out",register:"Register",email:"Email",password:"Password",confirmPassword:"Confirm Password",forgotPassword:"Forgot Password",welcomeBack:"Welcome Back",createAccount:"Create Account",emailPlaceholder:"name@example.com",passwordPlaceholder:"Enter your password",noAccount:"Don't have an account?",haveAccount:"Already have an account?",signUp:"Sign Up",signIn:"Sign In"},dashboard:{title:"Dashboard",balance:"Your Balance",deposit:"Deposit",withdraw:"Withdraw",cryptoDeposit:"Crypto Deposit",cryptoWithdraw:"Crypto Withdraw",findAgent:"Find Agent",findAgentDesc:"Locate nearest exchange points",recentActivity:"Recent Activity",noTransactions:"No transactions yet",businessPanel:"Business Panel",adminPanel:"Admin Panel",pendingApprovals:"Pending Approvals",paymentConfirm:"Payment Confirmation",paymentConfirmMsg:"Payment has been made to your account. Do you confirm?",approve:"Approve",reject:"Reject"},deposit:{title:"Deposit",receiptOptional:"Receipt Upload Optional",receiptInfo:"If you upload a receipt, the transaction will be auto-approved within 20 minutes.",bankAccount:"Your Bank Account",addNew:"Add New",addBankAccount:"Add Bank Account",addBankAccountDesc:"You need to add a bank account to deposit",depositAmount:"Deposit Amount (USDT)",minimum:"Minimum: 10 USDT",youWillPay:"You will pay",findMatch:"Find Match",searchingMatch:"Searching for Best Match...",searchingMatchDesc:"Looking for a suitable seller",matchFound:"Match Found!",matchFoundDesc:"A suitable seller was found for your deposit.",confirmAndView:"Confirm & View Details",confirmNote:"Upon confirmation, payment details will be shown and a 30-minute timer will start.",pendingOrder:"You Have a Pending Order",pendingOrderDesc:"You have an active order. Complete or cancel it before creating a new one.",cancelOrder:"Cancel Order",noMatchTitle:"No Match Found",noMatchDesc:"No withdrawal request for this amount. You can select nearby amounts:",waitingMatch:"Waiting for Match",waitingMatchDesc:"Your request has been added to the pool. You will be matched when a withdrawal request comes.",transactionType:"Transaction Type",buyOrder:"Deposit (Buy)",sellOrder:"Withdrawal (Sell)",network:"Network"},depositConfirm:{title:"Payment Details",paymentInfo:"Payment Information",iban:"IBAN",recipient:"Recipient",bank:"Bank",amount:"Amount",timeRemaining:"Time Remaining",markAsPaid:"Mark as Paid",uploadReceipt:"Upload Receipt",paymentSent:"Payment Notification Received!",paymentSentDesc:"Your payment notification has been sent. Your balance will be credited when the seller confirms.",timeExpired:"Time Expired!",timeExpiredDesc:"Transaction time has expired and was cancelled. Please start a new transaction."},withdraw:{title:"Withdraw",withdrawAmount:"Withdraw Amount (USDT)",youWillReceive:"You will receive",selectBank:"Select Bank Account",createRequest:"Create Withdrawal Request",waitingMatch:"Waiting for Match",instantWithdraw:"Instant Withdraw",p2pWithdraw:"P2P Withdraw",insufficientBalance:"Insufficient Balance"},crypto:{depositTitle:"Crypto Deposit",withdrawTitle:"Crypto Withdraw",selectNetwork:"Select Network",depositAddress:"Deposit Address",clickToCopy:"Click to copy",qrCode:"QR Code",minimumDeposit:"Minimum: 10 USDT",selectAsset:"Select Asset",withdrawAmount:"Withdraw Amount",walletAddress:"Wallet Address",networkFee:"Network Fee",confirmWithdraw:"Confirm Withdrawal"},history:{title:"Transaction History",deposit:"Deposit",withdraw:"Withdraw",transfer:"Transfer",p2pBuy:"P2P Buy",p2pSell:"P2P Sell",noHistory:"No transactions yet"},profile:{title:"Profile",accountSettings:"Account Settings",editProfile:"Edit Profile",changePassword:"Change Password",bankAccounts:"Bank Accounts",transactionLimits:"Transaction Limits",security:"Security",language:"Language",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",appVersion:"App Version"},profileEdit:{title:"Edit Profile",firstName:"First Name",lastName:"Last Name",firstNamePlaceholder:"Enter your first name",lastNamePlaceholder:"Enter your last name",save:"Save"},changePassword:{title:"Change Password",currentPassword:"Current Password",newPassword:"New Password",confirmNewPassword:"Confirm New Password",updatePassword:"Update Password",currentPasswordPlaceholder:"Enter current password",newPasswordPlaceholder:"Enter new password",confirmPasswordPlaceholder:"Confirm new password"},bankAccounts:{title:"Bank Accounts",addAccount:"Add Bank Account",bankName:"Bank Name",iban:"IBAN",accountHolder:"Account Holder",deleteConfirm:"Are you sure you want to delete this account?",noAccounts:"No bank accounts added yet"},notifications:{title:"Notifications",markAllRead:"Mark All as Read",new:"New",read:"Read",noNotifications:"No notifications yet",justNow:"Just now"},business:{title:"Business Panel",totalBalance:"Total Balance",subAccounts:"Sub Accounts",paymentPortals:"Payment Portals",transactionHistory:"Transaction History",invite:"Invite",requestPortal:"Request Portal",portalName:"Portal Name"},findAgent:{title:"Find Agent",cashPoint:"Cash Point",searchPlaceholder:"Search city or region...",getDirections:"Get Directions",noAgents:"No agents found in this area"},nav:{home:"Home",scan:"Scan",settings:"Settings"},alerts:{selectBank:"Select Bank",selectBankMsg:"Please select or add a bank account first.",minimumAmount:"Minimum Amount",minimumAmountMsg:"Minimum 10 USDT",serverError:"Server Error",connectionError:"Connection Error",unknownError:"An unknown error occurred",tryAgain:"Please try again"},languages:{tr:"Trke",en:"English"}},dx=N.createContext(void 0),nw={tr:tw,en:rw},sw=({children:t})=>{const[e,r]=N.useState(()=>localStorage.getItem("language")||"tr"),s=o=>{r(o),localStorage.setItem("language",o)},a=o=>{const c=o.split(".");let u=nw[e];for(const h of c)if(u&&typeof u=="object"&&h in u)u=u[h];else return console.warn(`Translation missing: ${o}`),o;return typeof u=="string"?u:o};return n.jsx(dx.Provider,{value:{language:e,setLanguage:s,t:a},children:t})},ux=()=>{const t=N.useContext(dx);if(!t)throw new Error("useI18n must be used within I18nProvider");return t},hx=N.createContext(void 0),iw=({children:t})=>{const[e,r]=N.useState(()=>localStorage.getItem("theme")||"dark"),s=o=>{r(o),localStorage.setItem("theme",o)},a=()=>{s(e==="dark"?"light":"dark")};return N.useEffect(()=>{const o=document.documentElement;e==="dark"?(o.classList.add("dark"),o.classList.remove("light")):(o.classList.add("light"),o.classList.remove("dark"))},[e]),n.jsx(hx.Provider,{value:{theme:e,setTheme:s,toggleTheme:a,isDark:e==="dark"},children:t})},tl=()=>{const t=N.useContext(hx);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Li(){return Li=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Li.apply(this,arguments)}var Br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Br||(Br={}));const pm="popstate";function aw(t){t===void 0&&(t={});function e(a,o){let{pathname:c="/",search:u="",hash:h=""}=An(a.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),pd("",{pathname:c,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(a,o){let c=a.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let h=a.location.href,m=h.indexOf("#");u=m===-1?h:h.slice(0,m)}return u+"#"+(typeof o=="string"?o:fx(o))}function s(a,o){rl(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return lw(e,r,s,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ow(){return Math.random().toString(36).substr(2,8)}function gm(t,e){return{usr:t.state,key:t.key,idx:e}}function pd(t,e,r,s){return r===void 0&&(r=null),Li({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?An(e):e,{state:r,key:e&&e.key||s||ow()})}function fx(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function An(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function lw(t,e,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,c=a.history,u=Br.Pop,h=null,m=x();m==null&&(m=0,c.replaceState(Li({},c.state,{idx:m}),""));function x(){return(c.state||{idx:null}).idx}function g(){u=Br.Pop;let E=x(),_=E==null?null:E-m;m=E,h&&h({action:u,location:w.location,delta:_})}function y(E,_){u=Br.Push;let v=pd(w.location,E,_);r&&r(v,E),m=x()+1;let S=gm(v,m),P=w.createHref(v);try{c.pushState(S,"",P)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(P)}o&&h&&h({action:u,location:w.location,delta:1})}function j(E,_){u=Br.Replace;let v=pd(w.location,E,_);r&&r(v,E),m=x();let S=gm(v,m),P=w.createHref(v);c.replaceState(S,"",P),o&&h&&h({action:u,location:w.location,delta:0})}function b(E){let _=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof E=="string"?E:fx(E);return v=v.replace(/ $/,"%20"),qe(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let w={get action(){return u},get location(){return t(a,c)},listen(E){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(pm,g),h=E,()=>{a.removeEventListener(pm,g),h=null}},createHref(E){return e(a,E)},createURL:b,encodeLocation(E){let _=b(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:j,go(E){return c.go(E)}};return w}var xm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xm||(xm={}));function cw(t,e,r){return r===void 0&&(r="/"),dw(t,e,r)}function dw(t,e,r,s){let a=typeof e=="string"?An(e):e,o=gx(a.pathname||"/",r);if(o==null)return null;let c=mx(t);uw(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let m=jw(o);u=bw(c[h],m)}return u}function mx(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(o,c,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&(qe(h.relativePath.startsWith(s),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(s.length));let m=jn([s,h.relativePath]),x=r.concat(h);o.children&&o.children.length>0&&(qe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),mx(o.children,e,x,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:yw(m,o.index),routesMeta:x})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let h of px(o.path))a(o,c,h)}),e}function px(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let c=px(s.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),a&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function uw(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:vw(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const hw=/^:[\w-]+$/,fw=3,mw=2,pw=1,gw=10,xw=-2,ym=t=>t==="*";function yw(t,e){let r=t.split("/"),s=r.length;return r.some(ym)&&(s+=xw),e&&(s+=mw),r.filter(a=>!ym(a)).reduce((a,o)=>a+(hw.test(o)?fw:o===""?pw:gw),s)}function vw(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function bw(t,e,r){let{routesMeta:s}=t,a={},o="/",c=[];for(let u=0;u<s.length;++u){let h=s[u],m=u===s.length-1,x=o==="/"?e:e.slice(o.length)||"/",g=_w({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},x),y=h.route;if(!g)return null;Object.assign(a,g.params),c.push({params:a,pathname:jn([o,g.pathname]),pathnameBase:Pw(jn([o,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(o=jn([o,g.pathnameBase]))}return c}function _w(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=ww(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((m,x,g)=>{let{paramName:y,isOptional:j}=x;if(y==="*"){let w=u[g]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const b=u[g];return j&&!b?m[y]=void 0:m[y]=(b||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:t}}function ww(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),rl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function jw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}const Nw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kw=t=>Nw.test(t);function Sw(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:a=""}=typeof t=="string"?An(t):t,o;if(r)if(kw(r))o=r;else{if(r.includes("//")){let c=r;r=r.replace(/\/\/+/g,"/"),rl(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+r))}r.startsWith("/")?o=vm(r.substring(1),"/"):o=vm(r,e)}else o=e;return{pathname:o,search:Tw(s),hash:Cw(a)}}function vm(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function mc(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ew(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function xx(t,e){let r=Ew(t);return e?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function yx(t,e,r,s){s===void 0&&(s=!1);let a;typeof t=="string"?a=An(t):(a=Li({},t),qe(!a.pathname||!a.pathname.includes("?"),mc("?","pathname","search",a)),qe(!a.pathname||!a.pathname.includes("#"),mc("#","pathname","hash",a)),qe(!a.search||!a.search.includes("#"),mc("#","search","hash",a)));let o=t===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=r;else{let g=e.length-1;if(!s&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;a.pathname=y.join("/")}u=g>=0?e[g]:"/"}let h=Sw(a,u),m=c&&c!=="/"&&c.endsWith("/"),x=(o||c===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(m||x)&&(h.pathname+="/"),h}const jn=t=>t.join("/").replace(/\/\/+/g,"/"),Pw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Tw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Aw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vx=["post","put","patch","delete"];new Set(vx);const Ow=["get",...vx];new Set(Ow);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ri(){return Ri=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ri.apply(this,arguments)}const Au=N.createContext(null),Lw=N.createContext(null),Hi=N.createContext(null),nl=N.createContext(null),Xr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),bx=N.createContext(null);function Wi(){return N.useContext(nl)!=null}function On(){return Wi()||qe(!1),N.useContext(nl).location}function _x(t){N.useContext(Hi).static||N.useLayoutEffect(t)}function we(){let{isDataRoute:t}=N.useContext(Xr);return t?qw():Rw()}function Rw(){Wi()||qe(!1);let t=N.useContext(Au),{basename:e,future:r,navigator:s}=N.useContext(Hi),{matches:a}=N.useContext(Xr),{pathname:o}=On(),c=JSON.stringify(xx(a,r.v7_relativeSplatPath)),u=N.useRef(!1);return _x(()=>{u.current=!0}),N.useCallback(function(m,x){if(x===void 0&&(x={}),!u.current)return;if(typeof m=="number"){s.go(m);return}let g=yx(m,JSON.parse(c),o,x.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:jn([e,g.pathname])),(x.replace?s.replace:s.push)(g,x.state,x)},[e,s,c,o,t])}function Ou(){let{matches:t}=N.useContext(Xr),e=t[t.length-1];return e?e.params:{}}function Iw(t,e){return Dw(t,e)}function Dw(t,e,r,s){Wi()||qe(!1);let{navigator:a}=N.useContext(Hi),{matches:o}=N.useContext(Xr),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let m=On(),x;if(e){var g;let E=typeof e=="string"?An(e):e;h==="/"||(g=E.pathname)!=null&&g.startsWith(h)||qe(!1),x=E}else x=m;let y=x.pathname||"/",j=y;if(h!=="/"){let E=h.replace(/^\//,"").split("/");j="/"+y.replace(/^\//,"").split("/").slice(E.length).join("/")}let b=cw(t,{pathname:j}),w=$w(b&&b.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:jn([h,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:jn([h,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,r,s);return e&&w?N.createElement(nl.Provider,{value:{location:Ri({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Br.Pop}},w):w}function zw(){let t=Vw(),e=Aw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),r?N.createElement("pre",{style:a},r):null,null)}const Bw=N.createElement(zw,null);class Mw extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?N.createElement(Xr.Provider,{value:this.props.routeContext},N.createElement(bx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Uw(t){let{routeContext:e,match:r,children:s}=t,a=N.useContext(Au);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(Xr.Provider,{value:e},s)}function $w(t,e,r,s){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let c=t,u=(a=r)==null?void 0:a.errors;if(u!=null){let x=c.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);x>=0||qe(!1),c=c.slice(0,Math.min(c.length,x+1))}let h=!1,m=-1;if(r&&s&&s.v7_partialHydration)for(let x=0;x<c.length;x++){let g=c[x];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=x),g.route.id){let{loaderData:y,errors:j}=r,b=g.route.loader&&y[g.route.id]===void 0&&(!j||j[g.route.id]===void 0);if(g.route.lazy||b){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((x,g,y)=>{let j,b=!1,w=null,E=null;r&&(j=u&&g.route.id?u[g.route.id]:void 0,w=g.route.errorElement||Bw,h&&(m<0&&y===0?(Kw("route-fallback"),b=!0,E=null):m===y&&(b=!0,E=g.route.hydrateFallbackElement||null)));let _=e.concat(c.slice(0,y+1)),v=()=>{let S;return j?S=w:b?S=E:g.route.Component?S=N.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=x,N.createElement(Uw,{match:g,routeContext:{outlet:x,matches:_,isDataRoute:r!=null},children:S})};return r&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?N.createElement(Mw,{location:r.location,revalidation:r.revalidation,component:w,error:j,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var wx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wx||{}),jx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(jx||{});function Fw(t){let e=N.useContext(Au);return e||qe(!1),e}function Hw(t){let e=N.useContext(Lw);return e||qe(!1),e}function Ww(t){let e=N.useContext(Xr);return e||qe(!1),e}function Nx(t){let e=Ww(),r=e.matches[e.matches.length-1];return r.route.id||qe(!1),r.route.id}function Vw(){var t;let e=N.useContext(bx),r=Hw(),s=Nx();return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function qw(){let{router:t}=Fw(wx.UseNavigateStable),e=Nx(jx.UseNavigateStable),r=N.useRef(!1);return _x(()=>{r.current=!0}),N.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Ri({fromRouteId:e},o)))},[t,e])}const bm={};function Kw(t,e,r){bm[t]||(bm[t]=!0)}function Zw(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function _m(t){let{to:e,replace:r,state:s,relative:a}=t;Wi()||qe(!1);let{future:o,static:c}=N.useContext(Hi),{matches:u}=N.useContext(Xr),{pathname:h}=On(),m=we(),x=yx(e,xx(u,o.v7_relativeSplatPath),h,a==="path"),g=JSON.stringify(x);return N.useEffect(()=>m(JSON.parse(g),{replace:r,state:s,relative:a}),[m,g,a,r,s]),null}function xe(t){qe(!1)}function Gw(t){let{basename:e="/",children:r=null,location:s,navigationType:a=Br.Pop,navigator:o,static:c=!1,future:u}=t;Wi()&&qe(!1);let h=e.replace(/^\/*/,"/"),m=N.useMemo(()=>({basename:h,navigator:o,static:c,future:Ri({v7_relativeSplatPath:!1},u)}),[h,u,o,c]);typeof s=="string"&&(s=An(s));let{pathname:x="/",search:g="",hash:y="",state:j=null,key:b="default"}=s,w=N.useMemo(()=>{let E=gx(x,h);return E==null?null:{location:{pathname:E,search:g,hash:y,state:j,key:b},navigationType:a}},[h,x,g,y,j,b,a]);return w==null?null:N.createElement(Hi.Provider,{value:m},N.createElement(nl.Provider,{children:r,value:w}))}function Yw(t){let{children:e,location:r}=t;return Iw(gd(e),r)}new Promise(()=>{});function gd(t,e){e===void 0&&(e=[]);let r=[];return N.Children.forEach(t,(s,a)=>{if(!N.isValidElement(s))return;let o=[...e,a];if(s.type===N.Fragment){r.push.apply(r,gd(s.props.children,o));return}s.type!==xe&&qe(!1),!s.props.index||!s.props.children||qe(!1);let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=gd(s.props.children,o)),r.push(c)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Jw="6";try{window.__reactRouterVersion=Jw}catch{}const Xw="startTransition",wm=Wv[Xw];function Qw(t){let{basename:e,children:r,future:s,window:a}=t,o=N.useRef();o.current==null&&(o.current=aw({window:a,v5Compat:!0}));let c=o.current,[u,h]=N.useState({action:c.action,location:c.location}),{v7_startTransition:m}=s||{},x=N.useCallback(g=>{m&&wm?wm(()=>h(g)):h(g)},[h,m]);return N.useLayoutEffect(()=>c.listen(x),[c,x]),N.useEffect(()=>Zw(s),[s]),N.createElement(Gw,{basename:e,children:r,location:u.location,navigationType:u.action,navigator:c,future:s})}var jm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jm||(jm={}));var Nm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Nm||(Nm={}));const ej=()=>{const t=we(),[e,r]=N.useState(0),s=[{icon:"account_balance_wallet",iconBg:"bg-emerald-500",title:"Gvenli Kripto Czdan",description:"USDT varlklarnz gvenle saklayn ve ynetin. Gelimi gvenlik altyapsyla korunun."},{icon:"bolt",iconBg:"bg-amber-500",title:"En Hzl USDT Alma Yntemi",description:"P2P sistem ile USDT'nizi saniyeler iinde aln. Banka transferi ile annda TL'ye evirin, en hzl ve gvenli yol."},{icon:"language",iconBg:"bg-purple-500",title:"oklu A & cretsiz Transfer",description:"TRC20, ERC20, BEP20 a destei. NUSD kodu ile platform ii transferlerde sfr komisyon, annda gnderim."}],a=()=>{localStorage.setItem("welcomeShown","true"),t("/")},o=()=>{e<s.length-1?r(e+1):a()},c=()=>{a()};return n.jsxs("div",{className:"min-h-screen bg-white flex flex-col font-display relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute -top-32 -right-32 w-96 h-96 bg-emerald-100 rounded-full blur-3xl opacity-60"}),n.jsx("div",{className:"absolute -bottom-48 -left-48 w-[500px] h-[500px] bg-teal-100 rounded-full blur-3xl opacity-50"})]}),n.jsx("div",{className:"relative z-10 p-6 flex justify-end",children:n.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 text-sm font-medium transition-colors",children:"Atla"})}),n.jsxs("div",{className:"flex-1 relative z-10 flex flex-col items-center justify-center px-8 pb-8",children:[n.jsx("div",{className:"mb-10",children:n.jsx("div",{className:"w-28 h-28 bg-white rounded-3xl flex items-center justify-center shadow-xl shadow-gray-200/80 p-2 border border-gray-100",children:n.jsx("img",{src:"/logo.png",alt:"Nubit Logo",className:"w-full h-full object-contain"})})}),n.jsxs("div",{className:"text-center max-w-sm",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:`w-20 h-20 mx-auto ${s[e].iconBg} rounded-full flex items-center justify-center shadow-lg transform transition-all duration-500`,children:n.jsx("span",{className:"material-symbols-outlined text-4xl text-white",children:s[e].icon})})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4 transition-all duration-300",children:s[e].title}),n.jsx("p",{className:"text-gray-500 text-base leading-relaxed mb-8 transition-all duration-300",children:s[e].description})]}),n.jsx("div",{className:"flex gap-2 mb-10",children:s.map((u,h)=>n.jsx("button",{onClick:()=>r(h),className:`h-2 rounded-full transition-all duration-300 ${h===e?"w-8 bg-emerald-500":"w-2 bg-gray-200 hover:bg-gray-300"}`},h))}),n.jsxs("div",{className:"w-full max-w-sm space-y-3",children:[n.jsx("button",{onClick:o,className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white font-bold py-4 px-8 rounded-2xl text-lg shadow-lg shadow-emerald-500/30 transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:e===s.length-1?"Balayalm":"Devam"}),e===s.length-1&&n.jsx("div",{className:"text-center pt-2",children:n.jsxs("p",{className:"text-gray-400 text-xs",children:["Devam ederek"," ",n.jsx("button",{onClick:()=>t("/terms"),className:"text-emerald-600 underline",children:"Kullanm Koullar"})," ","ve"," ",n.jsx("button",{onClick:()=>t("/privacy"),className:"text-emerald-600 underline",children:"Gizlilik Politikas"}),"'n kabul etmi olursunuz"]})})]})]}),n.jsx("div",{className:"relative z-10 px-8 pb-4",children:n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 text-center",children:n.jsx("p",{className:"text-amber-700 text-[10px] leading-relaxed",children:" Kripto yatrmlar risk ierir. Bu platform 18+ kullanclar iindir ve yatrm tavsiyesi vermez."})})}),n.jsx("div",{className:"relative z-10 px-8 pb-8",children:n.jsxs("div",{className:"flex items-center justify-center gap-6 text-gray-400",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"material-symbols-outlined text-sm text-emerald-500",children:"lock"}),n.jsx("span",{className:"text-xs",children:"256-bit SSL"})]}),n.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"material-symbols-outlined text-sm text-emerald-500",children:"verified"}),n.jsx("span",{className:"text-xs",children:"Gvenli"})]}),n.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"material-symbols-outlined text-sm text-emerald-500",children:"speed"}),n.jsx("span",{className:"text-xs",children:"Hzl"})]})]})})]})},tj=()=>{const[t,e]=N.useState(null),[r,s]=N.useState(!1),[a,o]=N.useState(!1),c=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,u=/Android/.test(navigator.userAgent);N.useEffect(()=>{window.matchMedia("(display-mode: standalone)").matches&&s(!0),window.navigator.standalone===!0&&s(!0)},[]),N.useEffect(()=>{const m=g=>{g.preventDefault(),e(g)},x=()=>{s(!0),e(null)};return window.addEventListener("beforeinstallprompt",m),window.addEventListener("appinstalled",x),()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",x)}},[]),N.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(m=>{console.log("SW registered:",m.scope)}).catch(m=>{console.error("SW registration failed:",m)})},[]);const h=N.useCallback(async()=>{if(c){o(!0);return}if(t){await t.prompt();const{outcome:m}=await t.userChoice;console.log("Install outcome:",m),m==="accepted"&&s(!0),e(null)}},[t,c]);return{isInstallable:!!t||c,isInstalled:r,isIOS:c,isAndroid:u,installApp:h,showIOSInstructions:a,setShowIOSInstructions:o}},rj=()=>{const t=we(),{login:e}=it(),{isInstalled:r,installApp:s,showIOSInstructions:a,setShowIOSInstructions:o}=tj(),[c,u]=N.useState(""),[h,m]=N.useState(""),[x,g]=N.useState(!1),[y,j]=N.useState(!1),[b,w]=N.useState(null),E=async _=>{_.preventDefault(),g(!0),w(null);try{console.log("Attempting login with:",c);const v=await e(c,h);console.log("Login result:",v),v?t("/dashboard"):w("Giri baarsz. Ltfen bilgileri kontrol edin.")}catch(v){console.error("Login exception:",v),w(`Hata: ${v.message||"Sunucu balant hatas"}`)}finally{g(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display relative overflow-hidden",children:[a&&n.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx("span",{className:"text-3xl",children:""})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"iPhone'a Ykle"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Aadaki admlar takip edin:"})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 rounded-xl p-3",children:[n.jsx("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold shrink-0",children:"1"}),n.jsxs("p",{className:"text-gray-700 text-sm",children:["Safari'nin alt ksmndaki ",n.jsx("strong",{children:"Payla"})," butonuna () tklayn"]})]}),n.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 rounded-xl p-3",children:[n.jsx("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold shrink-0",children:"2"}),n.jsxs("p",{className:"text-gray-700 text-sm",children:["Aa kaydrn ve ",n.jsx("strong",{children:'"Ana Ekrana Ekle"'})," seeneini bulun"]})]}),n.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 rounded-xl p-3",children:[n.jsx("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold shrink-0",children:"3"}),n.jsxs("p",{className:"text-gray-700 text-sm",children:["Sa stteki ",n.jsx("strong",{children:'"Ekle"'})," butonuna tklayn"]})]})]}),n.jsx("button",{onClick:()=>o(!1),className:"w-full bg-emerald-500 text-white py-3 rounded-xl font-bold hover:bg-emerald-400 transition-colors",children:"Anladm"})]})}),n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-emerald-600/20 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute -bottom-32 -left-32 w-80 h-80 bg-teal-500/20 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute top-1/3 left-1/4 w-64 h-64 bg-emerald-400/10 rounded-full blur-2xl"})]}),n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 relative z-10",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsx("div",{className:"w-32 h-32 bg-white rounded-3xl flex items-center justify-center mx-auto mb-4 shadow-2xl shadow-emerald-900/50 overflow-hidden p-2",children:n.jsx("img",{src:"/logo.png",alt:"Nubit Logo",className:"w-full h-full object-contain"})}),n.jsx("h1",{className:"text-4xl font-extrabold text-white tracking-tight mb-1",children:"Nubit Wallet"}),n.jsx("p",{className:"text-emerald-300/80 text-sm font-medium",children:"Secure Crypto Management"})]}),n.jsxs("div",{className:"w-full max-w-sm",children:[n.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl p-8 shadow-2xl shadow-emerald-950/50",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Ho Geldiniz"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Hesabnza gvenle giri yapn"})]}),n.jsxs("form",{onSubmit:E,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"E-posta"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"mail"}),n.jsx("input",{type:"email",required:!0,className:"w-full pl-12 pr-4 py-4 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400",placeholder:"ornek@email.com",value:c,onChange:_=>u(_.target.value)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ifre"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"lock"}),n.jsx("input",{type:y?"text":"password",required:!0,className:"w-full pl-12 pr-12 py-4 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-bold focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400 placeholder:font-normal",placeholder:"ifrenizi girin",value:h,onChange:_=>m(_.target.value)}),n.jsx("button",{type:"button",onClick:()=>j(!y),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-xl",children:y?"visibility_off":"visibility"})})]})]}),b&&n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[n.jsx("span",{className:"material-symbols-outlined text-red-500 text-lg shrink-0",children:"error"}),n.jsx("p",{className:"text-red-600 text-sm",children:b})]}),n.jsx("button",{type:"submit",disabled:x,className:"w-full bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-emerald-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Giri yaplyor..."]}):n.jsxs(n.Fragment,{children:["Giri Yap",n.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]})]}),n.jsxs("div",{className:"mt-6 text-center",children:[n.jsx("p",{className:"text-emerald-200/80 text-sm mb-3",children:"Hesabnz yok mu?"}),n.jsx("button",{type:"button",onClick:()=>t("/register"),className:"w-full bg-white/10 backdrop-blur border border-white/20 hover:bg-white/20 hover:border-white/30 py-4 rounded-xl font-bold text-lg text-white transition-all",children:"Yeni Hesap Olutur"})]}),!r&&n.jsxs("div",{className:"mt-6",children:[n.jsx("p",{className:"text-emerald-200/80 text-xs text-center mb-3",children:"Uygulamay Telefonuna Ykle"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:s,className:"flex-1 bg-[#3DDC84]/20 border border-[#3DDC84]/40 hover:bg-[#3DDC84]/30 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all",children:[n.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"#3DDC84",children:n.jsx("path",{d:"M17.523 15.341l1.47-2.545a.31.31 0 00-.11-.42.305.305 0 00-.422.11l-1.488 2.575a9.587 9.587 0 00-3.968-.856 9.587 9.587 0 00-3.968.856L7.549 12.486a.306.306 0 00-.532.31l1.47 2.545C5.97 16.528 4.466 18.906 4.249 21.75h16.502c-.217-2.844-1.72-5.222-3.228-6.409zM8.457 18.57a.81.81 0 110-1.62.81.81 0 010 1.62zm7.086 0a.81.81 0 110-1.62.81.81 0 010 1.62z"})}),n.jsx("span",{className:"text-[#3DDC84] font-bold text-sm",children:"Android"})]}),n.jsxs("button",{onClick:s,className:"flex-1 bg-white/10 border border-white/20 hover:bg-white/20 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all",children:[n.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"white",children:n.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),n.jsx("span",{className:"text-white font-bold text-sm",children:"iPhone"})]})]})]}),r&&n.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-emerald-400",children:[n.jsx("span",{className:"material-symbols-outlined text-lg",children:"check_circle"}),n.jsx("span",{className:"text-sm font-medium",children:"Uygulama ykl"})]}),n.jsxs("p",{className:"text-center text-emerald-400/50 text-xs mt-8",children:["v2.0  ",r?"App":"Web"]})]})]})]})};var Lu={},To={};function nj(t,e,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{m(s.next(x))}catch(g){c(g)}}function h(x){try{m(s.throw(x))}catch(g){c(g)}}function m(x){x.done?o(x.value):a(x.value).then(u,h)}m((s=s.apply(t,e||[])).next())})}const sj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let sl=class extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}},kx=class extends sl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},xd=class extends sl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},yd=class extends sl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Co;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Co||(Co={}));class ij{constructor(e,{headers:r={},customFetch:s,region:a=Co.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=sj(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return nj(this,arguments,void 0,function*(r,s={}){var a;let o,c;try{const{headers:u,method:h,body:m,signal:x,timeout:g}=s;let y={},{region:j}=s;j||(j=this.region);const b=new URL(`${this.url}/${r}`);j&&j!=="any"&&(y["x-region"]=j,b.searchParams.set("forceFunctionRegion",j));let w;m&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",w=m):typeof m=="string"?(y["Content-Type"]="text/plain",w=m):typeof FormData<"u"&&m instanceof FormData?w=m:(y["Content-Type"]="application/json",w=JSON.stringify(m)):w=m;let E=x;g&&(c=new AbortController,o=setTimeout(()=>c.abort(),g),x?(E=c.signal,x.addEventListener("abort",()=>c.abort())):E=c.signal);const _=yield this.fetch(b.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:w,signal:E}).catch(R=>{throw new kx(R)}),v=_.headers.get("x-relay-error");if(v&&v==="true")throw new xd(_);if(!_.ok)throw new yd(_);let S=((a=_.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),P;return S==="application/json"?P=yield _.json():S==="application/octet-stream"||S==="application/pdf"?P=yield _.blob():S==="text/event-stream"?P=_:S==="multipart/form-data"?P=yield _.formData():P=yield _.text(),{data:P,error:null,response:_}}catch(u){return{data:null,error:u,response:u instanceof yd||u instanceof xd?u.context:void 0}}finally{o&&clearTimeout(o)}})}}const aj=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Co},FunctionsClient:ij,FunctionsError:sl,FunctionsFetchError:kx,FunctionsHttpError:yd,FunctionsRelayError:xd},Symbol.toStringTag,{value:"Module"})),Sx=zi(aj);var ct={},vd=function(t,e){return vd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},vd(t,e)};function Ex(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");vd(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ao=function(){return Ao=Object.assign||function(e){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ao.apply(this,arguments)};function Px(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r}function Tx(t,e,r,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,s);else for(var u=t.length-1;u>=0;u--)(c=t[u])&&(o=(a<3?c(o):a>3?c(e,r,o):c(e,r))||o);return a>3&&o&&Object.defineProperty(e,r,o),o}function Cx(t,e){return function(r,s){e(r,s,t)}}function Ax(t,e,r,s,a,o){function c(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var u=s.kind,h=u==="getter"?"get":u==="setter"?"set":"value",m=!e&&t?s.static?t:t.prototype:null,x=e||(m?Object.getOwnPropertyDescriptor(m,s.name):{}),g,y=!1,j=r.length-1;j>=0;j--){var b={};for(var w in s)b[w]=w==="access"?{}:s[w];for(var w in s.access)b.access[w]=s.access[w];b.addInitializer=function(_){if(y)throw new TypeError("Cannot add initializers after decoration has completed");o.push(c(_||null))};var E=(0,r[j])(u==="accessor"?{get:x.get,set:x.set}:x[h],b);if(u==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(g=c(E.get))&&(x.get=g),(g=c(E.set))&&(x.set=g),(g=c(E.init))&&a.unshift(g)}else(g=c(E))&&(u==="field"?a.unshift(g):x[h]=g)}m&&Object.defineProperty(m,s.name,x),y=!0}function Ox(t,e,r){for(var s=arguments.length>2,a=0;a<e.length;a++)r=s?e[a].call(t,r):e[a].call(t);return s?r:void 0}function Lx(t){return typeof t=="symbol"?t:"".concat(t)}function Rx(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Ix(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Dx(t,e,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{m(s.next(x))}catch(g){c(g)}}function h(x){try{m(s.throw(x))}catch(g){c(g)}}function m(x){x.done?o(x.value):a(x.value).then(u,h)}m((s=s.apply(t,e||[])).next())})}function zx(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=u(0),c.throw=u(1),c.return=u(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(m){return function(x){return h([m,x])}}function h(m){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(r=0)),r;)try{if(s=1,a&&(o=m[0]&2?a.return:m[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,m[1])).done)return o;switch(a=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,a=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){r.label=m[1];break}if(m[0]===6&&r.label<o[1]){r.label=o[1],o=m;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(m);break}o[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(x){m=[6,x],a=0}finally{s=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var il=Object.create?function(t,e,r,s){s===void 0&&(s=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,a)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]};function Bx(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&il(e,t,r)}function Oo(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ru(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),a,o=[],c;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)o.push(a.value)}catch(u){c={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(c)throw c.error}}return o}function Mx(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ru(arguments[e]));return t}function Ux(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<r;e++)for(var o=arguments[e],c=0,u=o.length;c<u;c++,a++)s[a]=o[c];return s}function $x(t,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,o;s<a;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return t.concat(o||Array.prototype.slice.call(e))}function Ns(t){return this instanceof Ns?(this.v=t,this):new Ns(t)}function Fx(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(t,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(j){return function(b){return Promise.resolve(b).then(j,g)}}function u(j,b){s[j]&&(a[j]=function(w){return new Promise(function(E,_){o.push([j,w,E,_])>1||h(j,w)})},b&&(a[j]=b(a[j])))}function h(j,b){try{m(s[j](b))}catch(w){y(o[0][3],w)}}function m(j){j.value instanceof Ns?Promise.resolve(j.value.v).then(x,g):y(o[0][2],j)}function x(j){h("next",j)}function g(j){h("throw",j)}function y(j,b){j(b),o.shift(),o.length&&h(o[0][0],o[0][1])}}function Hx(t){var e,r;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,o){e[a]=t[a]?function(c){return(r=!r)?{value:Ns(t[a](c)),done:!1}:o?o(c):c}:o}}function Wx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Oo=="function"?Oo(t):t[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(o){r[o]=t[o]&&function(c){return new Promise(function(u,h){c=t[o](c),a(u,h,c.done,c.value)})}}function a(o,c,u,h){Promise.resolve(h).then(function(m){o({value:m,done:u})},c)}}function Vx(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var oj=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},bd=function(t){return bd=Object.getOwnPropertyNames||function(e){var r=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[r.length]=s);return r},bd(t)};function qx(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=bd(t),s=0;s<r.length;s++)r[s]!=="default"&&il(e,t,r[s]);return oj(e,t),e}function Kx(t){return t&&t.__esModule?t:{default:t}}function Zx(t,e,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(t):s?s.value:e.get(t)}function Gx(t,e,r,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function Yx(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Jx(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],r&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:s,async:r})}else r&&t.stack.push({async:!0});return e}var lj=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var s=new Error(r);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function Xx(t){function e(o){t.error=t.hasError?new lj(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,s=0;function a(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(a);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function Qx(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,a,o,c){return s?e?".jsx":".js":a&&(!o||!c)?r:a+o+"."+c.toLowerCase()+"js"}):t}const cj={__extends:Ex,__assign:Ao,__rest:Px,__decorate:Tx,__param:Cx,__esDecorate:Ax,__runInitializers:Ox,__propKey:Lx,__setFunctionName:Rx,__metadata:Ix,__awaiter:Dx,__generator:zx,__createBinding:il,__exportStar:Bx,__values:Oo,__read:Ru,__spread:Mx,__spreadArrays:Ux,__spreadArray:$x,__await:Ns,__asyncGenerator:Fx,__asyncDelegator:Hx,__asyncValues:Wx,__makeTemplateObject:Vx,__importStar:qx,__importDefault:Kx,__classPrivateFieldGet:Zx,__classPrivateFieldSet:Gx,__classPrivateFieldIn:Yx,__addDisposableResource:Jx,__disposeResources:Xx,__rewriteRelativeImportExtension:Qx},dj=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Jx,get __assign(){return Ao},__asyncDelegator:Hx,__asyncGenerator:Fx,__asyncValues:Wx,__await:Ns,__awaiter:Dx,__classPrivateFieldGet:Zx,__classPrivateFieldIn:Yx,__classPrivateFieldSet:Gx,__createBinding:il,__decorate:Tx,__disposeResources:Xx,__esDecorate:Ax,__exportStar:Bx,__extends:Ex,__generator:zx,__importDefault:Kx,__importStar:qx,__makeTemplateObject:Vx,__metadata:Ix,__param:Cx,__propKey:Lx,__read:Ru,__rest:Px,__rewriteRelativeImportExtension:Qx,__runInitializers:Ox,__setFunctionName:Rx,__spread:Mx,__spreadArray:$x,__spreadArrays:Ux,__values:Oo,default:cj},Symbol.toStringTag,{value:"Module"})),Ts=zi(dj);var Oa={},La={},Ra={},Ia={},Da={},za={},km;function e0(){if(km)return za;km=1,Object.defineProperty(za,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return za.default=t,za}var Sm;function t0(){if(Sm)return Da;Sm=1,Object.defineProperty(Da,"__esModule",{value:!0});const e=Ts.__importDefault(e0());let r=class{constructor(a){var o,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let u=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var m,x,g,y;let j=null,b=null,w=null,E=h.status,_=h.statusText;if(h.ok){if(this.method!=="HEAD"){const R=await h.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?b=R:b=JSON.parse(R))}const S=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),P=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");S&&P&&P.length>1&&(w=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(j={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,w=null,E=406,_="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const S=await h.text();try{j=JSON.parse(S),Array.isArray(j)&&h.status===404&&(b=[],j=null,E=200,_="OK")}catch{h.status===404&&S===""?(E=204,_="No Content"):j={message:S}}if(j&&this.isMaybeSingle&&(!((y=j==null?void 0:j.details)===null||y===void 0)&&y.includes("0 rows"))&&(j=null,E=200,_="OK"),j&&this.shouldThrowOnError)throw new e.default(j)}return{error:j,data:b,count:w,status:E,statusText:_}});return this.shouldThrowOnError||(u=u.catch(h=>{var m,x,g,y,j,b;let w="";const E=h==null?void 0:h.cause;if(E){const _=(m=E==null?void 0:E.message)!==null&&m!==void 0?m:"",v=(x=E==null?void 0:E.code)!==null&&x!==void 0?x:"";w=`${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"FetchError"}: ${h==null?void 0:h.message}`,w+=`

Caused by: ${(y=E==null?void 0:E.name)!==null&&y!==void 0?y:"Error"}: ${_}`,v&&(w+=` (${v})`),E!=null&&E.stack&&(w+=`
${E.stack}`)}else w=(j=h==null?void 0:h.stack)!==null&&j!==void 0?j:"";return{error:{message:`${(b=h==null?void 0:h.name)!==null&&b!==void 0?b:"FetchError"}: ${h==null?void 0:h.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(a,o)}returns(){return this}overrideTypes(){return this}};return Da.default=r,Da}var Em;function r0(){if(Em)return Ia;Em=1,Object.defineProperty(Ia,"__esModule",{value:!0});const e=Ts.__importDefault(t0());let r=class extends e.default{select(a){let o=!1;const c=(a??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:c,foreignTable:u,referencedTable:h=u}={}){const m=h?`${h}.order`:"order",x=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${x?`${x},`:""}${a}.${o?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:c=o}={}){const u=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${a}`),this}range(a,o,{foreignTable:c,referencedTable:u=c}={}){const h=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${a}`),this.url.searchParams.set(m,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:c=!1,buffers:u=!1,wal:h=!1,format:m="text"}={}){var x;const g=[a?"analyze":null,o?"verbose":null,c?"settings":null,u?"buffers":null,h?"wal":null].filter(Boolean).join("|"),y=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${g};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};return Ia.default=r,Ia}var Pm;function Iu(){if(Pm)return Ra;Pm=1,Object.defineProperty(Ra,"__esModule",{value:!0});const e=Ts.__importDefault(r0()),r=new RegExp("[,()]");let s=class extends e.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}regexMatch(o,c){return this.url.searchParams.append(o,`match.${c}`),this}regexIMatch(o,c){return this.url.searchParams.append(o,`imatch.${c}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}isDistinct(o,c){return this.url.searchParams.append(o,`isdistinct.${c}`),this}in(o,c){const u=Array.from(new Set(c)).map(h=>typeof h=="string"&&r.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(o,`in.(${u})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:u,type:h}={}){let m="";h==="plain"?m="pl":h==="phrase"?m="ph":h==="websearch"&&(m="w");const x=u===void 0?"":`(${u})`;return this.url.searchParams.append(o,`${m}fts${x}.${c}`),this}match(o){return Object.entries(o).forEach(([c,u])=>{this.url.searchParams.append(c,`eq.${u}`)}),this}not(o,c,u){return this.url.searchParams.append(o,`not.${c}.${u}`),this}or(o,{foreignTable:c,referencedTable:u=c}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${o})`),this}filter(o,c,u){return this.url.searchParams.append(o,`${c}.${u}`),this}};return Ra.default=s,Ra}var Tm;function n0(){if(Tm)return La;Tm=1,Object.defineProperty(La,"__esModule",{value:!0});const e=Ts.__importDefault(Iu());let r=class{constructor(a,{headers:o={},schema:c,fetch:u}){this.url=a,this.headers=new Headers(o),this.schema=c,this.fetch=u}select(a,o){const{head:c=!1,count:u}=o??{},h=c?"HEAD":"GET";let m=!1;const x=(a??"*").split("").map(g=>/\s/.test(g)&&!m?"":(g==='"'&&(m=!m),g)).join("");return this.url.searchParams.set("select",x),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:c=!0}={}){var u;const h="POST";if(o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((x,g)=>x.concat(Object.keys(g)),[]);if(m.length>0){const x=[...new Set(m)].map(g=>`"${g}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:c=!1,count:u,defaultToNull:h=!0}={}){var m;const x="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((y,j)=>y.concat(Object.keys(j)),[]);if(g.length>0){const y=[...new Set(g)].map(j=>`"${j}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:o}={}){var c;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var o;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};return La.default=r,La}var Cm;function uj(){if(Cm)return Oa;Cm=1,Object.defineProperty(Oa,"__esModule",{value:!0});const t=Ts,e=t.__importDefault(n0()),r=t.__importDefault(Iu());let s=class s0{constructor(o,{headers:c={},schema:u,fetch:h}={}){this.url=o,this.headers=new Headers(c),this.schemaName=u,this.fetch=h}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s0(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:u=!1,get:h=!1,count:m}={}){var x;let g;const y=new URL(`${this.url}/rpc/${o}`);let j;u||h?(g=u?"HEAD":"GET",Object.entries(c).filter(([w,E])=>E!==void 0).map(([w,E])=>[w,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([w,E])=>{y.searchParams.append(w,E)})):(g="POST",j=c);const b=new Headers(this.headers);return m&&b.set("Prefer",`count=${m}`),new r.default({method:g,url:y,headers:b,schema:this.schemaName,body:j,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}};return Oa.default=s,Oa}Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const Cs=Ts,i0=Cs.__importDefault(uj());ct.PostgrestClient=i0.default;const a0=Cs.__importDefault(n0());ct.PostgrestQueryBuilder=a0.default;const o0=Cs.__importDefault(Iu());ct.PostgrestFilterBuilder=o0.default;const l0=Cs.__importDefault(r0());ct.PostgrestTransformBuilder=l0.default;const c0=Cs.__importDefault(t0());ct.PostgrestBuilder=c0.default;const d0=Cs.__importDefault(e0());ct.PostgrestError=d0.default;ct.default={PostgrestClient:i0.default,PostgrestQueryBuilder:a0.default,PostgrestFilterBuilder:o0.default,PostgrestTransformBuilder:l0.default,PostgrestBuilder:c0.default,PostgrestError:d0.default};class u0{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const hj="2.87.1",fj=`realtime-js/${hj}`,h0="1.0.0",mj="2.0.0",Am=h0,_d=1e4,pj=1e3,gj=100;var pn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pn||(pn={}));var He;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(He||(He={}));var Zt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Zt||(Zt={}));var wd;(function(t){t.websocket="websocket"})(wd||(wd={}));var gn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(gn||(gn={}));class xj{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,s;const a=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var r,s;const a=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,r,s){var a,o;const c=e.topic,u=(a=e.ref)!==null&&a!==void 0?a:"",h=(o=e.join_ref)!==null&&o!==void 0?o:"",m=e.payload.event,x=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},g=Object.keys(x).length===0?"":JSON.stringify(x);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+u.length+c.length+m.length+g.length,j=new ArrayBuffer(this.HEADER_LENGTH+y);let b=new DataView(j),w=0;b.setUint8(w++,this.KINDS.userBroadcastPush),b.setUint8(w++,h.length),b.setUint8(w++,u.length),b.setUint8(w++,c.length),b.setUint8(w++,m.length),b.setUint8(w++,g.length),b.setUint8(w++,r),Array.from(h,_=>b.setUint8(w++,_.charCodeAt(0))),Array.from(u,_=>b.setUint8(w++,_.charCodeAt(0))),Array.from(c,_=>b.setUint8(w++,_.charCodeAt(0))),Array.from(m,_=>b.setUint8(w++,_.charCodeAt(0))),Array.from(g,_=>b.setUint8(w++,_.charCodeAt(0)));var E=new Uint8Array(j.byteLength+s.byteLength);return E.set(new Uint8Array(j),0),E.set(new Uint8Array(s),j.byteLength),E.buffer}decode(e,r){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return r(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,o,c,u,h]=s;return r({join_ref:a,ref:o,topic:c,event:u,payload:h})}return r({})}_binaryDecode(e){const r=new DataView(e),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,a)}}_decodeUserBroadcast(e,r,s){const a=r.getUint8(1),o=r.getUint8(2),c=r.getUint8(3),u=r.getUint8(4);let h=this.HEADER_LENGTH+4;const m=s.decode(e.slice(h,h+a));h=h+a;const x=s.decode(e.slice(h,h+o));h=h+o;const g=s.decode(e.slice(h,h+c));h=h+c;const y=e.slice(h,e.byteLength),j=u===this.JSON_ENCODING?JSON.parse(s.decode(y)):y,b={type:this.BROADCAST_EVENT,event:x,payload:j};return c>0&&(b.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>r.includes(s)))}}class f0{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Se;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Se||(Se={}));const Om=(t,e,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=yj(c,t,e,a),o),{}):{}},yj=(t,e,r,s)=>{const a=e.find(u=>u.name===t),o=a==null?void 0:a.type,c=r[t];return o&&!s.includes(o)?m0(o,c):jd(c)},m0=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return wj(e,r)}switch(t){case Se.bool:return vj(e);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return bj(e);case Se.json:case Se.jsonb:return _j(e);case Se.timestamp:return jj(e);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return jd(e);default:return jd(e)}},jd=t=>t,vj=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},bj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},_j=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},wj=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let o;const c=t.slice(1,r);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(u=>m0(e,u))}return t},jj=t=>typeof t=="string"?t.replace(" ","T"):t,p0=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class pc{constructor(e,r,s={},a=_d){this.channel=e,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Nd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Nd||(Nd={}));let g0=class eo{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=eo.syncState(this.state,a,o,c),this.pendingDiffs.forEach(h=>{this.state=eo.syncDiff(this.state,h,o,c)}),this.pendingDiffs=[],u()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=eo.syncDiff(this.state,a,o,c),u())}),this.onJoin((a,o,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:c})}),this.onLeave((a,o,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,a){const o=this.cloneDeep(e),c=this.transformState(r),u={},h={};return this.map(o,(m,x)=>{c[m]||(h[m]=x)}),this.map(c,(m,x)=>{const g=o[m];if(g){const y=x.map(E=>E.presence_ref),j=g.map(E=>E.presence_ref),b=x.filter(E=>j.indexOf(E.presence_ref)<0),w=g.filter(E=>y.indexOf(E.presence_ref)<0);b.length>0&&(u[m]=b),w.length>0&&(h[m]=w)}else u[m]=x}),this.syncDiff(o,{joins:u,leaves:h},s,a)}static syncDiff(e,r,s,a){const{joins:o,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(u,h)=>{var m;const x=(m=e[u])!==null&&m!==void 0?m:[];if(e[u]=this.cloneDeep(h),x.length>0){const g=e[u].map(j=>j.presence_ref),y=x.filter(j=>g.indexOf(j.presence_ref)<0);e[u].unshift(...y)}s(u,x,h)}),this.map(c,(u,h)=>{let m=e[u];if(!m)return;const x=h.map(g=>g.presence_ref);m=m.filter(g=>x.indexOf(g.presence_ref)<0),e[u]=m,a(u,m,h),m.length===0&&delete e[u]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const a=e[s];return"metas"in a?r[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[s]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var kd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(kd||(kd={}));var ms;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ms||(ms={}));var or;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(or||(or={}));const Nj=He;let x0=class si{constructor(e,r={config:{}},s){var a,o;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=He.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new pc(this,Zt.join,this.params,this.timeout),this.rejoinTimer=new f0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=He.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=He.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=He.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=He.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=He.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zt.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new g0(this),this.broadcastEndpointURL=p0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==He.closed){const{config:{broadcast:c,presence:u,private:h}}=this.params,m=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(j=>j.filter))!==null&&a!==void 0?a:[],x=!!this.bindings[ms.PRESENCE]&&this.bindings[ms.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,g={},y={broadcast:c,presence:Object.assign(Object.assign({},u),{enabled:x}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(j=>e==null?void 0:e(or.CHANNEL_ERROR,j)),this._onClose(()=>e==null?void 0:e(or.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:j})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){e==null||e(or.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,E=(b=w==null?void 0:w.length)!==null&&b!==void 0?b:0,_=[];for(let v=0;v<E;v++){const S=w[v],{filter:{event:P,schema:R,table:A,filter:O}}=S,z=j&&j[v];if(z&&z.event===P&&si.isFilterValueEqual(z.schema,R)&&si.isFilterValueEqual(z.table,A)&&si.isFilterValueEqual(z.filter,O))_.push(Object.assign(Object.assign({},S),{id:z.id}));else{this.unsubscribe(),this.state=He.errored,e==null||e(or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(or.SUBSCRIBED);return}}).receive("error",j=>{this.state=He.errored,e==null||e(or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===He.joined&&e===ms.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,s)}async httpSend(e,r,s={}){var a;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(u.status===202)return{success:!0};let h=u.statusText;try{const m=await u.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(e,r={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,u,h;const m=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=He.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new pc(this,Zt.leave,{},e),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=He.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),c}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new pc(this,e,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>gj){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var a,o;const c=e.toLocaleLowerCase(),{close:u,error:h,leave:m,join:x}=Zt;if(s&&[u,h,m,x].indexOf(c)>=0&&s!==this._joinRef())return;let y=this._onMessage(c,r,s);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(j=>{var b,w,E;return((b=j.filter)===null||b===void 0?void 0:b.event)==="*"||((E=(w=j.filter)===null||w===void 0?void 0:w.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===c}).map(j=>j.callback(y,s)):(o=this.bindings[c])===null||o===void 0||o.filter(j=>{var b,w,E,_,v,S;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in j){const P=j.id,R=(b=j.filter)===null||b===void 0?void 0:b.event;return P&&((w=r.ids)===null||w===void 0?void 0:w.includes(P))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((E=r.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const P=(v=(_=j==null?void 0:j.filter)===null||_===void 0?void 0:_.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return P==="*"||P===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===c}).map(j=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:w,table:E,commit_timestamp:_,type:v,errors:S}=b;y=Object.assign(Object.assign({},{schema:w,table:E,commit_timestamp:_,eventType:v,new:{},old:{},errors:S}),this._getPayloadRecords(b))}j.callback(y,s)})}_isClosed(){return this.state===He.closed}_isJoined(){return this.state===He.joined}_isJoining(){return this.state===He.joining}_isLeaving(){return this.state===He.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const a=e.toLocaleLowerCase(),o={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&si.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Zt.close,{},e)}_onError(e){this._on(Zt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=He.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Om(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Om(e.columns,e.old_record)),r}};const gc=()=>{},Ba={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},kj=[1e3,2e3,5e3,1e4],Sj=1e4,Ej=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let Pj=class{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_d,this.transport=null,this.heartbeatIntervalMs=Ba.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gc,this.ref=0,this.reconnectTimer=null,this.vsn=Am,this.logger=gc,this.conn=null,this.sendBuffer=[],this.serializer=new xj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${wd.websocket}`,this.httpEndpoint=p0(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=u0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case pn.connecting:return gn.Connecting;case pn.open:return gn.Open;case pn.closing:return gn.Closing;default:return gn.Closed}}isConnected(){return this.connectionState()===gn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new x0(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:s,payload:a,ref:o}=e,c=()=>{this.encode(e,u=>{var h;(h=this.conn)===null||h===void 0||h.send(u)})};this.log("push",`${r} ${s} (${o})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(pj,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ba.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:c}=r,u=c?`(${c})`:"",h=o.status||"";this.log("receive",`${h} ${s} ${a} ${u}`.trim(),o),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(a,o,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===pn.open||this.conn.readyState===pn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Zt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${s}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([Ej],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,s=!1;if(e)r=e,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const o={access_token:r,version:fj};r&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(Zt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new f0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ba.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,a,o,c,u,h,m,x,g,y,j;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:_d,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Ba.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:gc,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:Am,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:b=>kj[b-1]||Sj,this.vsn){case h0:this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:(b,w)=>w(JSON.stringify(b)),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:(b,w)=>w(JSON.parse(b));break;case mj:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(j=e==null?void 0:e.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const Tj=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:Nj,get REALTIME_LISTEN_TYPES(){return ms},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return kd},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Nd},get REALTIME_SUBSCRIBE_STATES(){return or},RealtimeChannel:x0,RealtimeClient:Pj,RealtimePresence:g0,WebSocketFactory:u0},Symbol.toStringTag,{value:"Module"})),y0=zi(Tj);function ae(t,e,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{m(s.next(x))}catch(g){c(g)}}function h(x){try{m(s.throw(x))}catch(g){c(g)}}function m(x){x.done?o(x.value):a(x.value).then(u,h)}m((s=s.apply(t,e||[])).next())})}class Vi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ae(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class v0 extends Vi{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Lo extends Vi{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Du=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Cj=()=>Response,Sd=t=>{if(Array.isArray(t))return t.map(r=>Sd(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=Sd(s)}),e},Aj=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Oj=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),xc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Lj=(t,e,r)=>ae(void 0,void 0,void 0,function*(){const s=yield Cj();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const o=t.status||500,c=(a==null?void 0:a.statusCode)||o+"";e(new v0(xc(a),o,c))}).catch(a=>{e(new Lo(xc(a),a))}):e(new Lo(xc(t),t))}),Rj=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(Aj(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function qi(t,e,r,s,a,o){return ae(this,void 0,void 0,function*(){return new Promise((c,u)=>{t(r,Rj(e,s,a,o)).then(h=>{if(!h.ok)throw h;return s!=null&&s.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>Lj(h,u,s))})})}function Ii(t,e,r,s){return ae(this,void 0,void 0,function*(){return qi(t,"GET",e,r,s)})}function qt(t,e,r,s,a){return ae(this,void 0,void 0,function*(){return qi(t,"POST",e,s,a,r)})}function Ed(t,e,r,s,a){return ae(this,void 0,void 0,function*(){return qi(t,"PUT",e,s,a,r)})}function Ij(t,e,r,s){return ae(this,void 0,void 0,function*(){return qi(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function zu(t,e,r,s,a){return ae(this,void 0,void 0,function*(){return qi(t,"DELETE",e,s,a,r)})}class Dj{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ae(e))return{data:null,error:e};throw e}})}}var b0;class zj{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[b0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Dj(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ae(e))return{data:null,error:e};throw e}})}}b0=Symbol.toStringTag;const Bj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Mj{constructor(e,r={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=Du(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,a){return ae(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},Lm),a);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),h&&o.append("metadata",this.encodeMetadata(h)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),h&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(h))):(o=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,h&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(u=Object.assign(Object.assign({},u),a.headers));const m=this._removeEmptyFolders(r),x=this._getFinalPath(m),g=yield(e=="PUT"?Ed:qt)(this.fetch,`${this.url}/object/${x}`,o,Object.assign({headers:u},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:g.Id,fullPath:g.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ae(o))return{data:null,error:o};throw o}})}upload(e,r,s){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,a){return ae(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${c}`);u.searchParams.set("token",r);try{let h;const m=Object.assign({upsert:Lm.upsert},a),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",m.cacheControl)):(h=s,x["cache-control"]=`max-age=${m.cacheControl}`,x["content-type"]=m.contentType);const g=yield Ed(this.fetch,u.toString(),h,{headers:x});return{data:{path:o,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Ae(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,r){return ae(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield qt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+o.url),u=c.searchParams.get("token");if(!u)throw new Vi("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:u},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ae(s))return{data:null,error:s};throw s}})}update(e,r,s){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return ae(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ae(a))return{data:null,error:a};throw a}})}copy(e,r,s){return ae(this,void 0,void 0,function*(){try{return{data:{path:(yield qt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ae(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,s){return ae(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield qt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ae(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,s){return ae(this,void 0,void 0,function*(){try{const a=yield qt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ae(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),c=o?`?${o}`:"",u=this._getFinalPath(e),h=()=>Ii(this.fetch,`${this.url}/${a}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new zj(h,this.shouldThrowOnError)}info(e){return ae(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Ii(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Sd(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ae(s))return{data:null,error:s};throw s}})}exists(e){return ae(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Ij(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ae(s)&&s instanceof Lo){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});h!==""&&a.push(h);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${m}`)}}}remove(e){return ae(this,void 0,void 0,function*(){try{return{data:yield zu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}list(e,r,s){return ae(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Bj),r),{prefix:e||""});return{data:yield qt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ae(a))return{data:null,error:a};throw a}})}listV2(e,r){return ae(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield qt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ae(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const _0="2.87.1",w0={"X-Client-Info":`storage-js/${_0}`};class Uj{constructor(e,r={},s,a){this.shouldThrowOnError=!1;const o=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},w0),r),this.fetch=Du(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ae(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Ii(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}getBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}createBucket(e){return ae(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield qt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ae(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return ae(this,void 0,void 0,function*(){try{return{data:yield Ed(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ae(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield zu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Di=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $j(t,e,r){const s=new URL(e,t);if(r)for(const[a,o]of Object.entries(r))o!==void 0&&s.searchParams.set(a,o);return s.toString()}async function Fj(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Hj(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:a,body:o,headers:c}){const u=$j(t.baseUrl,s,a),h=await Fj(t.auth),m=await e(u,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...h,...c},body:o?JSON.stringify(o):void 0}),x=await m.text(),g=(m.headers.get("content-type")||"").includes("application/json"),y=g&&x?JSON.parse(x):x;if(!m.ok){const j=g?y:void 0,b=j==null?void 0:j.error;throw new Di((b==null?void 0:b.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:j})}return{status:m.status,headers:m.headers,data:y}}}}function Ma(t){return t.join("")}var Wj=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ma(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ma(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ma(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ma(t.namespace)}`}),!0}catch(e){if(e instanceof Di&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Di&&r.status===409)return;throw r}}};function Wn(t){return t.join("")}var Vj=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wn(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wn(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wn(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wn(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wn(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wn(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Di&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Di&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},qj=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Hj({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new Wj(this.client,e),this.tableOps=new Vj(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class j0{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},w0),r),this.fetch=Du(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}listBuckets(e){return ae(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Ii(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield zu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}from(e){if(!Oj(e))throw new Vi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new qj({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>ae(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(o,c){const u=o[c];return typeof u!="function"?u:(...h)=>ae(this,void 0,void 0,function*(){try{return{data:yield u.apply(o,h),error:null}}catch(m){if(s)throw m;return{data:null,error:m}}})}})}}const Bu={"X-Client-Info":`storage-js/${_0}`,"Content-Type":"application/json"};class Mu extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function bt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class to extends Mu{constructor(e,r,s){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class N0 extends Mu{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Pd;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Pd||(Pd={}));const al=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Kj=()=>Response,k0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Zj=t=>Array.from(new Float32Array(t)),Gj=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},Rm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Yj=(t,e,r)=>ae(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const a=t.status||500,o=t;if(typeof o.json=="function")o.json().then(c=>{const u=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new to(Rm(c),a,u))}).catch(()=>{const c=a+"",u=o.statusText||`HTTP ${a} error`;e(new to(u,a,c))});else{const c=a+"",u=o.statusText||`HTTP ${a} error`;e(new to(u,a,c))}}else e(new N0(Rm(t),t))}),Jj=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(k0(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),r)):a};function Xj(t,e,r,s,a,o){return ae(this,void 0,void 0,function*(){return new Promise((c,u)=>{t(r,Jj(e,s,a,o)).then(h=>{if(!h.ok)throw h;if(s!=null&&s.noResolveJson)return h;const m=h.headers.get("content-type");return!m||!m.includes("application/json")?{}:h.json()}).then(h=>c(h)).catch(h=>Yj(h,u,s))})})}function St(t,e,r,s,a){return ae(this,void 0,void 0,function*(){return Xj(t,"POST",e,s,a,r)})}class S0{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Bu),r),this.fetch=al(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}getIndex(e,r){return ae(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}})}listIndexes(e){return ae(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return ae(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}})}}class E0{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Bu),r),this.fetch=al(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield St(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}getVectors(e){return ae(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}listVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield St(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}queryVectors(e){return ae(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}deleteVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield St(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}}class P0{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Bu),r),this.fetch=al(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}getBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}listBuckets(){return ae(this,arguments,void 0,function*(e={}){try{return{data:yield St(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}}class T0 extends P0{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new C0(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ae(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ae(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ae(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ae(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class C0 extends S0{constructor(e,r,s,a){super(e,r,a),this.vectorBucketName=s}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ae(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ae(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ae(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ae(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new A0(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class A0 extends E0{constructor(e,r,s,a,o){super(e,r,o),this.vectorBucketName=s,this.indexName=a}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ae(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ae(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ae(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ae(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ae(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Qj extends Uj{constructor(e,r={},s,a){super(e,r,s,a)}from(e){return new Mj(this.url,this.headers,e,this.fetch)}get vectors(){return new T0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new j0(this.url+"/iceberg",this.headers,this.fetch)}}const eN=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:j0,StorageApiError:v0,StorageClient:Qj,StorageError:Vi,StorageUnknownError:Lo,StorageVectorsApiError:to,StorageVectorsClient:T0,StorageVectorsError:Mu,get StorageVectorsErrorCode(){return Pd},StorageVectorsUnknownError:N0,VectorBucketApi:P0,VectorBucketScope:C0,VectorDataApi:E0,VectorIndexApi:S0,VectorIndexScope:A0,isPlainObject:k0,isStorageError:Ae,isStorageVectorsError:bt,normalizeToFloat32:Zj,resolveFetch:al,resolveResponse:Kj,validateVectorDimension:Gj},Symbol.toStringTag,{value:"Module"})),tN=zi(eN);var O0={},ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.version=void 0;ol.version="2.87.1";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=ol;let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(O0);var L0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=a=>a?(...o)=>a(...o):(...o)=>fetch(...o);t.resolveFetch=e;const r=()=>Headers;t.resolveHeadersConstructor=r;const s=(a,o,c)=>{const u=(0,t.resolveFetch)(c),h=(0,t.resolveHeadersConstructor)();return async(m,x)=>{var g;const y=(g=await o())!==null&&g!==void 0?g:a;let j=new h(x==null?void 0:x.headers);return j.has("apikey")||j.set("apikey",a),j.has("Authorization")||j.set("Authorization",`Bearer ${y}`),u(m,Object.assign(Object.assign({},x),{headers:j}))}};t.fetchWithAuth=s})(L0);var Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.isBrowser=void 0;Qr.uuid=rN;Qr.ensureTrailingSlash=R0;Qr.applySettingDefaults=sN;Qr.validateSupabaseUrl=iN;function rN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t=="x"?e:e&3|8;return r.toString(16)})}function R0(t){return t.endsWith("/")?t:t+"/"}const nN=()=>typeof window<"u";Qr.isBrowser=nN;function sN(t,e){var r,s;const{db:a,auth:o,realtime:c,global:u}=t,{db:h,auth:m,realtime:x,global:g}=e,y={db:Object.assign(Object.assign({},h),a),auth:Object.assign(Object.assign({},m),o),realtime:Object.assign(Object.assign({},x),c),storage:{},global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(s=u==null?void 0:u.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function iN(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(R0(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ll={};function cl(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r}const I0="2.87.1",Zn=30*1e3,Td=3,yc=Td*Zn,aN="http://localhost:9999",oN="supabase.auth.token",lN={"X-Client-Info":`gotrue-js/${I0}`},Cd="X-Supabase-Api-Version",D0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dN=10*60*1e3;let ks=class extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}};function oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let z0=class extends ks{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}};function B0(t){return oe(t)&&t.name==="AuthApiError"}let Rr=class extends ks{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},kr=class extends ks{constructor(e,r,s,a){super(e,s,a),this.name=r,this.status=s}},yt=class extends kr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function M0(t){return oe(t)&&t.name==="AuthSessionMissingError"}let hn=class extends kr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ii=class extends kr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},ai=class extends kr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function U0(t){return oe(t)&&t.name==="AuthImplicitGrantRedirectError"}let Ad=class extends kr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ro=class extends kr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}};function ro(t){return oe(t)&&t.name==="AuthRetryableFetchError"}let Od=class extends kr{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}};function uN(t){return oe(t)&&t.name==="AuthWeakPasswordError"}let Io=class extends kr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Do="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Im=` 	
\r=`.split(""),hN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Im.length;e+=1)t[Im[e].charCodeAt(0)]=-2;for(let e=0;e<Do.length;e+=1)t[Do[e].charCodeAt(0)]=e;return t})();function Dm(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Do[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Do[s]),e.queuedBits-=6}}function $0(t,e,r){const s=hN[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function zm(t){const e=[],r=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=c=>{pN(c,s,r)};for(let c=0;c<t.length;c+=1)$0(t.charCodeAt(c),a,o);return e.join("")}function fN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function mN(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}fN(s,e)}}function pN(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ps(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)$0(t.charCodeAt(a),r,s);return new Uint8Array(e)}function gN(t){const e=[];return mN(t,r=>e.push(r)),new Uint8Array(e)}function bn(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>Dm(a,r,s)),Dm(null,r,s),e.join("")}function xN(t){return Math.round(Date.now()/1e3)+t}function yN(){return Symbol("auth-callback")}const tt=()=>typeof window<"u"&&typeof document<"u",on={tested:!1,writable:!1},F0=()=>{if(!tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(on.tested)return on.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),on.tested=!0,on.writable=!0}catch{on.tested=!0,on.writable=!1}return on.writable};function vN(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return r.searchParams.forEach((s,a)=>{e[a]=s}),e}const H0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),bN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Gn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ln=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},et=async(t,e)=>{await t.removeItem(e)};class dl{constructor(){this.promise=new dl.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}dl.promiseConstructor=Promise;function vc(t){const e=t.split(".");if(e.length!==3)throw new Io("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!cN.test(e[s]))throw new Io("JWT not in base64url format");return{header:JSON.parse(zm(e[0])),payload:JSON.parse(zm(e[1])),signature:ps(e[2]),raw:{header:e[0],payload:e[1]}}}async function _N(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function wN(t,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await t(o);if(!e(o,null,c)){s(c);return}}catch(c){if(!e(o,c)){a(c);return}}})()})}function jN(t){return("0"+t.toString(16)).substr(-2)}function NN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,jN).join("")}async function kN(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function SN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await kN(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vn(t,e,r=!1){const s=NN();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await Gn(t,`${e}-code-verifier`,a);const o=await SN(s);return[o,s===o?"plain":"s256"]}const EN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function PN(t){const e=t.headers.get(Cd);if(!e||!e.match(EN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function TN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function CN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const AN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qn(t){if(!AN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bc(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ON(t,e){return new Proxy(t,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,s,a)}})}function Bm(t){return JSON.parse(JSON.stringify(t))}const fn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),LN=[502,503,504];async function Mm(t){var e;if(!bN(t))throw new Ro(fn(t),0);if(LN.includes(t.status))throw new Ro(fn(t),t.status);let r;try{r=await t.json()}catch(o){throw new Rr(fn(o),o)}let s;const a=PN(t);if(a&&a.getTime()>=D0["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Od(fn(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new yt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new Od(fn(r),t.status,r.weak_password.reasons);throw new z0(fn(r),t.status||500,s)}const RN=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function he(t,e,r,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[Cd]||(o[Cd]=D0["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await IN(t,e,r+u,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(h):{data:Object.assign({},h),error:null}}async function IN(t,e,r,s,a,o){const c=RN(e,s,a,o);let u;try{u=await t(r,Object.assign({},c))}catch(h){throw console.error(h),new Ro(fn(h),0)}if(u.ok||await Mm(u),s!=null&&s.noResolveJson)return u;try{return await u.json()}catch(h){await Mm(h)}}function Wt(t){var e;let r=null;BN(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=xN(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function Um(t){const e=Wt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ir(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function DN(t){return{data:t,error:null}}function zN(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:o}=t,c=cl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:o},h=Object.assign({},c);return{data:{properties:u,user:h},error:null}}function $m(t){return t}function BN(t){return t.access_token&&t.refresh_token&&t.expires_in}const no=["global","local","others"];let Uu=class{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=H0(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=no[0]){if(no.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${no.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(oe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ir})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=cl(e,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:zN,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(oe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ir})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,a,o,c,u,h;try{const m={nextPage:null,lastPage:0,total:0},x=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:$m});if(x.error)throw x.error;const g=await x.json(),y=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,j=(h=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return j.length>0&&(j.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(b.split(";")[1].split("=")[1]);m[`${E}Page`]=w}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(oe(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){qn(e);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ir})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){qn(e);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ir})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){qn(e);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ir})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){qn(e.userId);try{const{data:r,error:s}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteFactor(e){qn(e.userId),qn(e.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,a,o,c,u,h;try{const m={nextPage:null,lastPage:0,total:0},x=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:$m});if(x.error)throw x.error;const g=await x.json(),y=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,j=(h=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return j.length>0&&(j.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(b.split(";")[1].split("=")[1]);m[`${E}Page`]=w}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(oe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(oe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}};function Fm(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const mn={debug:!!(globalThis&&F0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $u extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let W0=class extends $u{};class MN extends $u{}async function V0(t,e,r){mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),mn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new W0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(mn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const Hm={};async function UN(t,e,r){var s;const a=(s=Hm[t])!==null&&s!==void 0?s:Promise.resolve(),o=Promise.race([a.catch(()=>null),e>=0?new Promise((c,u)=>{setTimeout(()=>{u(new MN(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await r());return Hm[t]=o.catch(async c=>{if(c&&c.isAcquireTimeout)return await a,null;throw c}),await o}function $N(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function q0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function FN(t){return parseInt(t,16)}function HN(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function WN(t){var e;const{chainId:r,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:c,notBefore:u,requestId:h,resources:m,scheme:x,uri:g,version:y}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const j=q0(t.address),b=x?`${x}://${s}`:s,w=t.statement?`${t.statement}
`:"",E=`${b} wants you to sign in with your Ethereum account:
${j}

${w}`;let _=`URI: ${g}
Version: ${y}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(a&&(_+=`
Expiration Time: ${a.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),h&&(_+=`
Request ID: ${h}`),m){let v=`
Resources:`;for(const S of m){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);v+=`
- ${S}`}_+=v}return`${E}
${_}`}class We extends Error{constructor({message:e,code:r,cause:s,name:a}){var o;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class zo extends We{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function VN({error:t,options:e}){var r,s,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new We({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(K0(c)){if(o.rp.id!==c)return new We({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function qN({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new We({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(K0(s)){if(r.rpId!==s)return new We({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class KN{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ZN=new KN;function GN(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,a=cl(t,["challenge","user","excludeCredentials"]),o=ps(e).buffer,c=Object.assign(Object.assign({},r),{id:ps(r.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:o,user:c});if(s&&s.length>0){u.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const m=s[h];u.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:ps(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function YN(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=cl(t,["challenge","allowCredentials"]),a=ps(e).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];o.allowCredentials[c]=Object.assign(Object.assign({},u),{id:ps(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function JN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:bn(new Uint8Array(t.response.attestationObject)),clientDataJSON:bn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function XN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:bn(new Uint8Array(a.authenticatorData)),clientDataJSON:bn(new Uint8Array(a.clientDataJSON)),signature:bn(new Uint8Array(a.signature)),userHandle:a.userHandle?bn(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function K0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Wm(){var t,e;return!!(tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function QN(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new zo("Browser returned unexpected credential type",e)}:{data:null,error:new zo("Empty credential response",e)}}catch(e){return{data:null,error:VN({error:e,options:t})}}}async function ek(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new zo("Browser returned unexpected credential type",e)}:{data:null,error:new zo("Empty credential response",e)}}catch(e){return{data:null,error:qN({error:e,options:t})}}}const tk={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},rk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Bo(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const o in a){const c=a[o];if(c!==void 0)if(Array.isArray(c))s[o]=c;else if(r(c))s[o]=c;else if(e(c)){const u=s[o];e(u)?s[o]=Bo(u,c):s[o]=Bo(c)}else s[o]=c}return s}function nk(t,e){return Bo(tk,t,e||{})}function sk(t,e){return Bo(rk,t,e||{})}class ik{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:a},o){try{const{data:c,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!c)return{data:null,error:u};const h=a??ZN.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${s}`),m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=nk(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:x,error:g}=await QN({publicKey:m,signal:h});return x?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:g}}case"request":{const m=sk(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:x,error:g}=await ek(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:h}));return x?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:g}}}}catch(c){return oe(c)?{data:null,error:c}:{data:null,error:new Rr("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!r)return{data:null,error:new ks("rpId is required for WebAuthn authentication")};try{if(!Wm())return{data:null,error:new Rr("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:o});if(!c)return{data:null,error:u};const{webauthn:h}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:s,credential_response:h.credential_response}})}catch(c){return oe(c)?{data:null,error:c}:{data:null,error:new Rr("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!r)return{data:null,error:new ks("rpId is required for WebAuthn registration")};try{if(!Wm())return{data:null,error:new Rr("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(x=>{var g;return(g=x.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:u};const{data:h,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:o});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(c){return oe(c)?{data:null,error:c}:{data:null,error:new Rr("Unexpected error in register",c)}}}}$N();const ak={url:aN,storageKey:oN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Vm(t,e,r){return await r()}const Kn={};let Fu=class Ld{get jwks(){var e,r;return(r=(e=Kn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Kn[this.storageKey]=Object.assign(Object.assign({},Kn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Kn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Kn[this.storageKey]=Object.assign(Object.assign({},Kn[this.storageKey]),{cachedAt:e})}constructor(e){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},ak),e);if(this.storageKey=o.storageKey,this.instanceID=(r=Ld.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ld.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&tt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Uu({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=H0(o.fetch),this.lock=o.lock||Vm,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&tt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=V0:this.lock=Vm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ik(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:F0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fm(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Fm(this.memoryStorage)),tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${I0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},s="none";if(tt()&&(r=vN(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),tt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),U0(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return oe(r)?this._returnResult({error:r}):this._returnResult({error:new Rr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,a;try{const o=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Wt}),{data:c,error:u}=o;if(u||!c)return this._returnResult({data:{user:null,session:null},error:u});const h=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,s,a;try{let o;if("email"in e){const{email:x,password:g,options:y}=e;let j=null,b=null;this.flowType==="pkce"&&([j,b]=await Vn(this.storage,this.storageKey)),o=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:x,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:j,code_challenge_method:b},xform:Wt})}else if("phone"in e){const{phone:x,password:g,options:y}=e;o=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:g,data:(s=y==null?void 0:y.data)!==null&&s!==void 0?s:{},channel:(a=y==null?void 0:y.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Wt})}else throw new ii("You must provide either an email or phone number and a password");const{data:c,error:u}=o;if(u||!c)return await et(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const h=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:c,options:u}=e;r=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Um})}else if("phone"in e){const{phone:o,password:c,options:u}=e;r=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Um})}else throw new ii("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const o=new hn;return this._returnResult({data:{user:null,session:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,a,o,c,u,h,m,x,g,y;let j,b;if("message"in e)j=e.message,b=e.signature;else{const{chain:w,wallet:E,statement:_,options:v}=e;let S;if(tt())if(typeof E=="object")S=E;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")S=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=E}const P=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),R=await S.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=q0(R[0]);let O=(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!O){const I=await S.request({method:"eth_chainId"});O=FN(I)}const z={domain:P.host,address:A,statement:_,uri:P.href,version:"1",chainId:O,nonce:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(o=v==null?void 0:v.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(h=v==null?void 0:v.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=v==null?void 0:v.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(x=v==null?void 0:v.signInWithEthereum)===null||x===void 0?void 0:x.resources};j=WN(z),b=await S.request({method:"personal_sign",params:[HN(j),A]})}try{const{data:w,error:E}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:b},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Wt});if(E)throw E;if(!w||!w.session||!w.user){const _=new hn;return this._returnResult({data:{user:null,session:null},error:_})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:E})}catch(w){if(oe(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var r,s,a,o,c,u,h,m,x,g,y,j;let b,w;if("message"in e)b=e.message,w=e.signature;else{const{chain:E,wallet:_,statement:v,options:S}=e;let P;if(tt())if(typeof _=="object")P=_;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))P=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=_}const R=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in P&&P.signIn){const A=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),v?{statement:v}:null));let O;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")O=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)O=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)b=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),w=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${R.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(a=(s=S==null?void 0:S.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((m=S==null?void 0:S.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((g=(x=S==null?void 0:S.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||g===void 0)&&g.length?["Resources",...S.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const A=await P.signMessage(new TextEncoder().encode(b),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=A}}try{const{data:E,error:_}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:bn(w)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(j=e.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Wt});if(_)throw _;if(!E||!E.session||!E.user){const v=new hn;return this._returnResult({data:{user:null,session:null},error:v})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:_})}catch(E){if(oe(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const r=await ln(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:o,error:c}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Wt});if(await et(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const u=new hn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:c})}catch(o){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:s,token:a,access_token:o,nonce:c}=e,u=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Wt}),{data:h,error:m}=u;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h||!h.session||!h.user){const x=new hn;return this._returnResult({data:{user:null,session:null},error:x})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:m})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,s,a,o,c;try{if("email"in e){const{email:u,options:h}=e;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await Vn(this.storage,this.storageKey));const{error:g}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(s=h==null?void 0:h.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:x},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in e){const{phone:u,options:h}=e,{data:m,error:x}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:x})}throw new ii("You must provide either an email or phone number.")}catch(u){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var r,s;try{let a,o;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:u}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Wt});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,m=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(a){if(oe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,s,a,o,c;try{let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Vn(this.storage,this.storageKey));const m=await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:DN});return!((o=m.data)===null||o===void 0)&&o.url&&tt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(u){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new yt;const{error:a}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(oe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:c}=await he(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:c,error:u}=await he(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new ii("You must provide either an email or phone number and a type")}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ln(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<yc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await ln(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=bc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=ON(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ir}):await this._useSession(async r=>{var s,a,o;const{data:c,error:u}=r;if(u)throw u;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yt}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Ir})})}catch(r){if(oe(r))return M0(r)&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new yt;const c=a.session;let u=null,h=null;this.flowType==="pkce"&&e.email!=null&&([u,h]=await Vn(this.storage,this.storageKey));const{data:m,error:x}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:h}),jwt:c.access_token,xform:Ir});if(x)throw x;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new yt;const r=Date.now()/1e3;let s=r,a=!0,o=null;const{payload:c}=vc(e.access_token);if(c.exp&&(s=c.exp,a=s<=r),a){const{data:u,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(oe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:c,error:u}=r;if(u)throw u;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new yt;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!tt())throw new ai("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ai(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ad("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ai("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ad("No code detected.");const{data:v,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:c,expires_in:u,expires_at:h,token_type:m}=e;if(!o||!u||!c||!m)throw new ai("No session defined in URL");const x=Math.round(Date.now()/1e3),g=parseInt(u);let y=x+g;h&&(y=parseInt(h));const j=y-x;j*1e3<=Zn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${g}s`);const b=y-g;x-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,x):x-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,x);const{data:w,error:E}=await this._getUser(o);if(E)throw E;const _={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:g,expires_at:y,refresh_token:c,token_type:m,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:e.type},error:null})}catch(s){if(oe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ln(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return this._returnResult({error:o});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:u}=await this.admin.signOut(c,e);if(u&&!(B0(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=yN(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,a;try{const{data:{session:o},error:c}=r;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Vn(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:a}=await this._useSession(async o=>{var c,u,h,m,x;const{data:g,error:y}=o;if(y)throw y;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",j,{headers:this.headers,jwt:(x=(m=g.session)===null||m===void 0?void 0:m.access_token)!==null&&x!==void 0?x:void 0})});if(a)throw a;return tt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(oe(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:o}}=r;if(a)throw a;const{options:c,provider:u,token:h,access_token:m,nonce:x}=e,g=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:u,id_token:h,access_token:m,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Wt}),{data:y,error:j}=g;return j?this._returnResult({data:{user:null,session:null},error:j}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new hn}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:j}))}catch(a){if(await et(this.storage,`${this.storageKey}-code-verifier`),oe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,a;const{data:o,error:c}=r;if(c)throw c;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await wN(async a=>(a>0&&await _N(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Wt})),(a,o)=>{const c=200*Math.pow(2,a);return o&&ro(o)&&Date.now()+c-s<Zn})}catch(s){if(this._debug(r,"error",s),oe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),tt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ln(this.storage,this.storageKey);if(a&&this.userStorage){let c=await ln(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Gn(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:bc()}else if(a&&!a.user&&!a.user){const c=await ln(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await et(this.storage,this.storageKey+"-user"),await Gn(this.storage,this.storageKey,a)):a.user=bc()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<yc;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${yc}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),ro(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:u}=await this._getUser(a.access_token);!u&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new dl;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new yt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),oe(o)){const c={data:null,error:o};return ro(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,r)}catch(h){o.push(h)}});if(await Promise.all(c),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await et(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Gn(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=Bm(a);await Gn(this.storage,this.storageKey,o)}else{const a=Bm(r);await Gn(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await et(this.storage,this.storageKey),await et(this.storage,this.storageKey+"-code-verifier"),await et(this.storage,this.storageKey+"-user"),this.userStorage&&await et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Zn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Zn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Zn}ms, refresh threshold is ${Td} ticks`),a<=Td&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $u)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,c]=await Vn(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(u.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;return o?this._returnResult({data:null,error:o}):await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,a;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:m}=await he(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&h.type==="totp"&&(!((a=h==null?void 0:h.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?JN(e.webauthn.credential_response):XN(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:h}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:h}))})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:GN(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:YN(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=vc(s.access_token);let c=null;o.aal&&(c=o.aal);let u=c;((r=(e=s.user.factors)===null||e===void 0?void 0:e.filter(x=>x.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const m=o.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await he(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new yt})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new yt});const c=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return c.data&&c.data.redirect_url&&tt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new yt});const c=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return c.data&&c.data.redirect_url&&tt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;return s?this._returnResult({data:null,error:s}):r?await he(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new yt})})}catch(e){if(oe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?(await he(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new yt})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(u=>u.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(u=>u.kid===e),s&&this.jwks_cached_at+dN>a)return s;const{data:o,error:c}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(u=>u.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:j,error:b}=await this.getSession();if(b||!j.session)return this._returnResult({data:null,error:b});s=j.session.access_token}const{header:a,payload:o,signature:c,raw:{header:u,payload:h}}=vc(s);r!=null&&r.allowExpired||TN(o.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:j}=await this.getUser(s);if(j)throw j;return{data:{claims:o,header:a,signature:c},error:null}}const x=CN(a.alg),g=await crypto.subtle.importKey("jwk",m,x,!0,["verify"]);if(!await crypto.subtle.verify(x,g,c,gN(`${u}.${h}`)))throw new Io("Invalid JWT signature");return{data:{claims:o,header:a,signature:c},error:null}}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}};Fu.nextInstanceID={};const ok=Uu,lk=Fu,ck=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:ok,AuthApiError:z0,AuthClient:lk,AuthError:ks,AuthImplicitGrantRedirectError:ai,AuthInvalidCredentialsError:ii,AuthInvalidJwtError:Io,AuthInvalidTokenResponseError:hn,AuthPKCEGrantCodeExchangeError:Ad,AuthRetryableFetchError:Ro,AuthSessionMissingError:yt,AuthUnknownError:Rr,AuthWeakPasswordError:Od,CustomAuthError:kr,GoTrueAdminApi:Uu,GoTrueClient:Fu,NavigatorLockAcquireTimeoutError:W0,SIGN_OUT_SCOPES:no,isAuthApiError:B0,isAuthError:oe,isAuthImplicitGrantRedirectError:U0,isAuthRetryableFetchError:ro,isAuthSessionMissingError:M0,isAuthWeakPasswordError:uN,lockInternals:mn,navigatorLock:V0,processLock:UN},Symbol.toStringTag,{value:"Module"})),Z0=zi(ck);Object.defineProperty(ll,"__esModule",{value:!0});ll.SupabaseAuthClient=void 0;const dk=Z0;class uk extends dk.AuthClient{constructor(e){super(e)}}ll.SupabaseAuthClient=uk;Object.defineProperty(To,"__esModule",{value:!0});const hk=Sx,fk=ct,mk=y0,pk=tN,Ua=O0,gk=L0,qm=Qr,xk=ll;let yk=class{constructor(e,r,s){var a,o,c;this.supabaseUrl=e,this.supabaseKey=r;const u=(0,qm.validateSupabaseUrl)(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:Ua.DEFAULT_DB_OPTIONS,realtime:Ua.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},Ua.DEFAULT_AUTH_OPTIONS),{storageKey:h}),global:Ua.DEFAULT_GLOBAL_OPTIONS},x=(0,qm.applySettingDefaults)(s??{},m);this.storageKey=(a=x.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=x.global.headers)!==null&&o!==void 0?o:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=x.auth)!==null&&c!==void 0?c:{},this.headers,x.global.fetch),this.fetch=(0,gk.fetchWithAuth)(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new fk.PostgrestClient(new URL("rest/v1",u).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new pk.StorageClient(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new hk.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:c,flowType:u,lock:h,debug:m,throwOnError:x},g,y){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xk.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),g),storageKey:c,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,flowType:u,lock:h,debug:m,throwOnError:x,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new mk.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};To.default=yk;(function(t){var e=cn&&cn.__createBinding||(Object.create?function(x,g,y,j){j===void 0&&(j=y);var b=Object.getOwnPropertyDescriptor(g,y);(!b||("get"in b?!g.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return g[y]}}),Object.defineProperty(x,j,b)}:function(x,g,y,j){j===void 0&&(j=y),x[j]=g[y]}),r=cn&&cn.__exportStar||function(x,g){for(var y in x)y!=="default"&&!Object.prototype.hasOwnProperty.call(g,y)&&e(g,x,y)},s=cn&&cn.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const a=s(To);r(Z0,t);var o=ct;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return o.PostgrestError}});var c=Sx;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),r(y0,t);var u=To;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return s(u).default}});const h=(x,g,y)=>new a.default(x,g,y);t.createClient=h;function m(){if(typeof window<"u"||typeof process>"u")return!1;const x=process.version;if(x==null)return!1;const g=x.match(/^v(\d+)\./);return g?parseInt(g[1],10)<=18:!1}m()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Lu);const G0=Dd(Lu),vk=Ym({__proto__:null,default:G0},[Lu]),{PostgrestError:y1,FunctionsHttpError:v1,FunctionsFetchError:b1,FunctionsRelayError:_1,FunctionsError:w1,FunctionRegion:j1,SupabaseClient:N1,createClient:bk,GoTrueAdminApi:k1,GoTrueClient:S1,AuthAdminApi:E1,AuthClient:P1,navigatorLock:T1,NavigatorLockAcquireTimeoutError:C1,lockInternals:A1,processLock:O1,SIGN_OUT_SCOPES:L1,AuthError:R1,AuthApiError:I1,AuthUnknownError:D1,CustomAuthError:z1,AuthSessionMissingError:B1,AuthInvalidTokenResponseError:M1,AuthInvalidCredentialsError:U1,AuthImplicitGrantRedirectError:$1,AuthPKCEGrantCodeExchangeError:F1,AuthRetryableFetchError:H1,AuthWeakPasswordError:W1,AuthInvalidJwtError:V1,isAuthError:q1,isAuthApiError:K1,isAuthSessionMissingError:Z1,isAuthImplicitGrantRedirectError:G1,isAuthRetryableFetchError:Y1,isAuthWeakPasswordError:J1,RealtimePresence:X1,RealtimeChannel:Q1,RealtimeClient:e2,REALTIME_LISTEN_TYPES:t2,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:r2,REALTIME_PRESENCE_LISTEN_EVENTS:n2,REALTIME_SUBSCRIBE_STATES:s2,REALTIME_CHANNEL_STATES:i2}=G0||vk,_k="https://bzbzcnyipynpkzaqauxd.supabase.co",wk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ6YnpjbnlpcHlucGt6YXFhdXhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2MDg3ODIsImV4cCI6MjA4MTE4NDc4Mn0.1CfLmFr80h9B0_tvicYxQSJUAmaWBBi3V5ZkD451r-g",C=bk(_k,wk,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0}}),Z={login:async(t,e)=>{var r,s,a;try{const{data:o,error:c}=await C.auth.signInWithPassword({email:t,password:e||"demo123"});if(c)return console.error("Login error:",c.message),null;if(o.user){let{data:u}=await C.from("profiles").select("*").eq("id",o.user.id).single();if(!u){const{data:h,error:m}=await C.from("profiles").insert({id:o.user.id,email:o.user.email,name:((r=o.user.user_metadata)==null?void 0:r.name)||t.split("@")[0],role:"user",is_active:!0,balance:0}).select().single();m?console.error("Profile insert error:",m.message):u=h}return{token:(s=o.session)==null?void 0:s.access_token,user:{email:(u==null?void 0:u.email)||o.user.email,name:(u==null?void 0:u.name)||((a=o.user.user_metadata)==null?void 0:a.name)||"User",balance:(u==null?void 0:u.balance)||0,role:(u==null?void 0:u.role)||"user",isActive:(u==null?void 0:u.is_active)??!0,createdAt:u!=null&&u.created_at?new Date(u.created_at).getTime():Date.now(),trxAddress:u==null?void 0:u.trx_address,account_type:(u==null?void 0:u.account_type)||"personal",business_name:u==null?void 0:u.business_name,business_department_id:u==null?void 0:u.business_department_id}}}return null}catch(o){return console.error("Login error:",o),null}},register:async(t,e,r,s="personal",a)=>{var o;try{const{data:c,error:u}=await C.auth.signUp({email:e,password:r||"demo123",options:{data:{name:t,accountType:s,businessName:a}}});if(u)return console.error("Register error:",u.message),alert(u.message||"Registration failed"),null;if(c.user){let h=null;if(s==="business"&&a){const{data:y,error:j}=await C.from("departments").insert({name:a,category:"business",is_active:!0,color:"#FFD700",owner_id:c.user.id}).select().single();if(j)console.error("Department creation error:",j.message);else{h=y==null?void 0:y.id;const b=a.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,30)+"-"+Date.now().toString(36),{error:w}=await C.from("payment_panels").insert({department_id:h,public_slug:b,is_active:!0});w&&console.error("Payment panel creation error:",w.message)}}const m=y=>{const j=y.split("").reduce((w,E)=>(w<<5)-w+E.charCodeAt(0),0);return`NUSD-${Math.abs(j).toString(36).toUpperCase().slice(0,6)}`},x={id:c.user.id,email:c.user.email,name:s==="business"?a:t,role:"user",is_active:!0,balance:0,account_type:s,business_role:s==="business"?"owner":null,nusd_code:m(e)};s==="business"&&(x.business_name=a,x.business_department_id=h);const{error:g}=await C.from("profiles").upsert(x,{onConflict:"id"});return g&&console.error("Profile creation error:",g.message),{token:(o=c.session)==null?void 0:o.access_token,user:{email:c.user.email,name:s==="business"?a:t,balance:0,role:"user",isActive:!0,accountType:s,businessName:s==="business"?a:void 0}}}return null}catch(c){return console.error("Register error:",c),null}},logout:async()=>{await C.auth.signOut()},getUser:async t=>{try{const{data:e}=await C.from("profiles").select("*").eq("email",t).single();if(e)return{email:e.email,name:e.name,balance:e.balance||0,role:e.role||"user",isActive:e.is_active,createdAt:new Date(e.created_at).getTime(),trxAddress:e.trx_address,account_type:e.account_type||"personal",business_name:e.business_name,business_department_id:e.business_department_id}}catch(e){console.error("Get user error:",e)}return null},getNotifications:async t=>{try{const{data:e}=await C.from("profiles").select("id").eq("email",t).single();if(!e)return[];const{data:r}=await C.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return r||[]}catch{return[]}},markNotificationRead:async t=>{try{await C.from("notifications").update({is_read:!0}).eq("id",t)}catch(e){console.error("Mark notification read error:",e)}},getTransactions:async t=>{try{if(!t)return[];const{data:e,error:r}=await C.from("profiles").select("id").eq("email",t).single();if(r)return console.error("getTransactions profile error:",r.message),[];if(!e)return[];const{data:s,error:a}=await C.from("transactions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return a?(console.error("getTransactions tx error:",a.message),[]):(s||[]).map(o=>{var c,u;return{id:o.id,type:((c=o.type)==null?void 0:c.toLowerCase())||"unknown",amount:o.amount,currency:"NUSD",date:o.created_at,status:((u=o.status)==null?void 0:u.toLowerCase())||"pending",title:`${o.type||"Unknown"} Transaction`,network:o.network,txHash:o.tx_hash}})}catch(e){return console.error("getTransactions exception:",e.message),[]}},getBankAccounts:async t=>{try{const{data:e}=await C.from("profiles").select("id").eq("email",t).single();if(!e)return[];const{data:r}=await C.from("bank_accounts").select("*").eq("user_id",e.id);return(r||[]).map(s=>({id:s.id,bankName:s.bank_name,iban:s.iban,accountName:s.account_name,addedAt:s.added_at}))}catch{return[]}},addBankAccount:async(t,e,r,s)=>{try{const{data:a}=await C.from("profiles").select("id").eq("email",t).single();if(!a)return null;const{data:o,error:c}=await C.from("bank_accounts").insert({user_id:a.id,bank_name:e,iban:r,account_name:s}).select().single();return c?(console.error("Add bank account error:",c),null):{id:o.id,bankName:o.bank_name,iban:o.iban,accountName:o.account_name}}catch{return null}},deleteBankAccount:async(t,e)=>{try{const{error:r}=await C.from("bank_accounts").delete().eq("id",e);return!r}catch{return null}},createWithdrawal:async(t,e,r=!1,s="withdraw",a,o)=>{try{const{data:c,error:u}=await C.functions.invoke("create-withdrawal",{body:{amount:e,network:a,address:o}});if(u)throw u;return{success:!0,transaction:c}}catch(c){return console.error("Withdrawal error:",c),c.context&&c.context.json&&c.context.json().then(u=>console.error("Edge Function Error Body:",JSON.stringify(u,null,2))),{success:!1,error:c.message||"Withdrawal failed"}}},notifyDeposit:async(t,e,r,s,a)=>{try{const{data:o}=await C.from("profiles").select("id").eq("email",t).single();if(!o)return{success:!1,error:"User not found"};const{error:c}=await C.from("transactions").insert({user_id:o.id,type:"DEPOSIT",amount:e,status:"PENDING",network:r,tx_hash:s});return c?{success:!1,error:c.message}:{success:!0}}catch{return{success:!1,error:"Connection error"}}},getPendingApprovals:async t=>{try{const{data:e}=await C.from("profiles").select("id").eq("email",t).single();return e?[]:[]}catch{return[]}},getPublicAgents:async()=>{try{const{data:t}=await C.from("merchants").select("*").eq("is_agent",!0).eq("is_active",!0);return t||[]}catch{return[]}},getMerchantBySlug:async t=>{try{const{data:e}=await C.from("merchants").select("*, departments(*)").eq("slug",t).single();return e}catch{return null}},getAllUsers:async()=>{try{const{data:t}=await C.from("profiles").select("*").order("created_at",{ascending:!1});return(t||[]).map(e=>({email:e.email,name:e.name,balance:e.balance,role:e.role,isActive:e.is_active,createdAt:new Date(e.created_at).getTime()}))}catch{return[]}},getAllTransactions:async()=>{try{const{data:t}=await C.from("transactions").select("*, profiles(email, name)").order("created_at",{ascending:!1});return(t||[]).map(e=>{var r,s;return{id:e.id,type:e.type,amount:e.amount,status:e.status,network:e.network,txHash:e.tx_hash,timestamp:e.created_at,userEmail:(r=e.profiles)==null?void 0:r.email,userName:(s=e.profiles)==null?void 0:s.name}})}catch{return[]}},getSystemStats:async()=>{try{const{data:t}=await C.from("profiles").select("balance, is_active"),{data:e}=await C.from("transactions").select("type, amount, status"),{data:r}=await C.from("departments").select("id"),{data:s}=await C.from("vaults").select("balance"),a=(t==null?void 0:t.reduce((w,E)=>w+(E.balance||0),0))||0,o=(t==null?void 0:t.filter(w=>w.is_active).length)||0,c=(s==null?void 0:s.reduce((w,E)=>w+(E.balance||0),0))||0,u=e||[],h=u.length,m=u.filter(w=>w.status==="PENDING").length,g=u.filter(w=>w.type==="DEPOSIT"||w.amount>0&&w.status==="COMPLETED").reduce((w,E)=>w+Math.abs(E.amount),0),j=u.filter(w=>w.type==="WITHDRAW"||w.type==="P2P_SELL"||w.amount<0&&w.status==="COMPLETED").reduce((w,E)=>w+Math.abs(E.amount),0),b=u.reduce((w,E)=>w+Math.abs(E.amount||0),0);return{totalUserBalance:a,totalVaultBalance:c,totalDeposits:g,totalWithdrawals:j,vaultDeposits:0,vaultWithdrawals:0,pendingTransactions:m,totalTransactions:h,activeUsers:o,departmentCount:(r==null?void 0:r.length)||0,totalRevenue:0,totalVolume:b}}catch(t){return console.error("getSystemStats error:",t),{totalUserBalance:0,totalVaultBalance:0,totalDeposits:0,totalWithdrawals:0,vaultDeposits:0,vaultWithdrawals:0,pendingTransactions:0,totalTransactions:0,activeUsers:0,departmentCount:0,totalRevenue:0,totalVolume:0}}},toggleUserStatus:async t=>{try{const{data:e}=await C.from("profiles").select("id, is_active").eq("email",t).single();return e?(await C.from("profiles").update({is_active:!e.is_active}).eq("id",e.id),{success:!0}):{success:!1}}catch{return{success:!1}}},toggleUserRole:async t=>{try{const{data:e}=await C.from("profiles").select("id, role").eq("email",t).single();if(!e)return{success:!1};const r=e.role==="admin"?"user":"admin";return await C.from("profiles").update({role:r}).eq("id",e.id),{success:!0,newRole:r}}catch{return{success:!1}}},updateUserBalance:async(t,e)=>{try{const{error:r}=await C.from("profiles").update({balance:e}).eq("email",t);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r.message}}},toggleDepartmentStatus:async t=>{try{const{data:e}=await C.from("departments").select("id, is_active").eq("id",t).single();return e?(await C.from("departments").update({is_active:!e.is_active}).eq("id",t),{success:!0,newStatus:!e.is_active}):{success:!1}}catch{return{success:!1}}},deletePaymentPanel:async t=>{try{const{error:e}=await C.from("payment_panels").delete().eq("id",t);return e?{success:!1,error:e.message}:{success:!0}}catch(e){return{success:!1,error:e.message}}},toggleVaultStatus:async t=>{try{const{data:e}=await C.from("vaults").select("id, is_active").eq("id",t).single();return e?(await C.from("vaults").update({is_active:!e.is_active}).eq("id",t),{success:!0,newStatus:!e.is_active}):{success:!1}}catch{return{success:!1}}},checkBlockchainDeposits:async()=>{try{const{data:t,error:e}=await C.functions.invoke("check-deposits");return e?(console.error("Check deposits error:",e),{success:!1,error:e.message}):t||{success:!0}}catch(t){return{success:!1,error:t.message}}},processBlockchainWithdrawal:async(t,e)=>{try{const{data:r,error:s}=await C.functions.invoke("process-withdrawal",{body:{withdrawal_id:t,vault_id:e}});return s?(console.error("Process withdrawal error:",s),{success:!1,error:s.message}):r||{success:!0}}catch(r){return{success:!1,error:r.message}}},approveTransaction:async t=>{try{const{data:e,error:r}=await C.functions.invoke("approve-transaction",{body:{transactionId:t,action:"approve"}});return r?(console.error("Approve error:",r),!1):(e==null?void 0:e.success)||!1}catch(e){return console.error("Approve exception:",e),!1}},rejectTransaction:async t=>{try{const{data:e,error:r}=await C.functions.invoke("approve-transaction",{body:{transactionId:t,action:"reject"}});return r?(console.error("Reject error:",r),!1):(e==null?void 0:e.success)||!1}catch(e){return console.error("Reject exception:",e),!1}},getTransactionLogs:async t=>{try{const{data:e,error:r}=await C.from("transaction_audit_logs").select("*").eq("transaction_id",t).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(e){return console.error("Audit log fetch error:",e),[]}},getDepartments:async()=>{try{const{data:t,error:e}=await C.from("departments").select(`
          *,
          members:department_members(count)
        `).order("created_at",{ascending:!1});return e?(console.error("getDepartments error:",e),[]):t||[]}catch(t){return console.error("getDepartments exception:",t),[]}},createDepartment:async t=>{try{const{data:e,error:r}=await C.functions.invoke("create-department",{body:t});if(r)throw r;return e}catch(e){return console.error("createDepartment fully detailed error:",e),e.context&&e.context.json&&e.context.json().then(r=>console.error("Edge Function Error Body:",JSON.stringify(r,null,2))),{success:!1,error:e}}},updateDepartment:async(t,e)=>{try{const{data:r,error:s}=await C.from("departments").update({name:e.name,color:e.color,category:e.category,commission_type:e.commissionType,commission_rate:e.commissionRate}).eq("id",t).select().single();return s?null:r}catch{return null}},deleteDepartment:async t=>{try{const{error:e}=await C.from("departments").delete().eq("id",t);return!e}catch{return!1}},getDepartment:async t=>{try{const{data:e,error:r}=await C.from("departments").select(`
          *,
          panels:payment_panels(*),
          vaults(*),
          owner:profiles!departments_owner_id_fkey(id, email, full_name, balance, nusd_code, account_type)
        `).eq("id",t).single();if(r)throw r;return e}catch(e){return console.error("getDepartment error:",e),null}},createPaymentPanel:async t=>{try{const{data:e,error:r}=await C.functions.invoke("create-payment-panel",{body:t});if(r)throw r;return e}catch(e){return console.error("createPaymentPanel error:",e),{success:!1,error:e}}},getPanelBySlug:async t=>{try{const{data:e,error:r}=await C.from("payment_panels").select(`
                *,
                department:departments(name)
            `).eq("public_slug",t).single();if(r)throw r;return e}catch(e){return console.error("getPanelBySlug error:",e),null}},payViaPanel:async(t,e)=>{try{const{data:r,error:s}=await C.functions.invoke("create-transaction-from-panel",{body:{slug:t,amount:e}});if(s)throw s;return r}catch(r){return console.error("payViaPanel error:",r),{success:!1,error:r}}},getVaults:async()=>{try{const{data:t}=await C.from("vaults").select("*, departments(name, color)");return{vaults:t||[]}}catch{return{vaults:[]}}},getVaultByDepartment:async t=>{try{const{data:e,error:r}=await C.from("vaults").select("*").eq("department_id",t).eq("is_primary",!0).single();return r?(console.error("getVaultByDepartment error:",r),null):e}catch(e){return console.error("getVaultByDepartment exception:",e),null}},getAdminVaults:async()=>{try{const{data:t,error:e}=await C.from("vaults").select("*");return e?(console.error("Vaults fetch error:",e),{vaults:[],ledger:[]}):{vaults:t||[],ledger:[]}}catch(t){return console.error("Vaults exception:",t),{vaults:[],ledger:[]}}},getAllRequests:async()=>[],getAdminLogs:async t=>{try{let e=C.from("admin_logs").select("*").order("created_at",{ascending:!1}).limit((t==null?void 0:t.limit)||100);t!=null&&t.action_type&&(e=e.eq("action_type",t.action_type)),t!=null&&t.offset&&(e=e.range(t.offset,t.offset+((t==null?void 0:t.limit)||100)-1));const{data:r,error:s}=await e;return s?(console.error("getAdminLogs error:",s),[]):(r||[]).map(a=>{var o;return{id:a.id,formattedTime:new Date(a.created_at).toLocaleString("tr-TR"),type:((o=a.action_type)==null?void 0:o.toUpperCase())||"SYSTEM",action:a.action,description:a.description||a.action,user:a.user_email||"System",userName:a.user_name,status:a.status,metadata:a.metadata,targetType:a.target_type,targetId:a.target_id,createdAt:a.created_at}})}catch(e){return console.error("getAdminLogs error:",e),[]}},resetDB:async()=>{},cryptoDeposit:async()=>{},findMatches:async()=>null,lockMatch:async()=>!1,markPaymentSent:async(t,e,r,s)=>{},approveRelease:async()=>{},manualVaultDeposit:async(t,e,r,s,a)=>{try{const{data:o,error:c}=await C.from("vaults").select("balance").eq("id",t).single();if(c||!o)return console.error("Vault not found:",c),!1;const{error:u}=await C.from("vaults").update({balance:(o.balance||0)+e}).eq("id",t);if(u)return console.error("Failed to update vault balance:",u),!1;if(a&&r&&r!=="External Transfer"){const{data:h}=await C.from("profiles").select("id, balance").eq("email",r).single();h&&(await C.from("profiles").update({balance:(h.balance||0)+e}).eq("id",h.id),await C.from("transactions").insert({user_id:h.id,type:"DEPOSIT",amount:e,status:"COMPLETED",network:s}))}return!0}catch(o){return console.error("manualVaultDeposit error:",o),!1}},getAvailableVaults:async()=>{try{const{data:t,error:e}=await C.from("vaults").select("*").is("department_id",null);if(e)throw e;return t||[]}catch(t){return console.error("getAvailableVaults error:",t),[]}},assignVault:async(t,e)=>{try{const{data:r,error:s}=await C.functions.invoke("manage-vault",{body:{action:"assign",vault_id:t,department_id:e}});if(s)throw s;return!0}catch(r){return console.error("assignVault error:",r),!1}},unassignVault:async t=>{try{const{data:e,error:r}=await C.functions.invoke("manage-vault",{body:{action:"unassign",vault_id:t}});if(r)throw r;return!0}catch(e){return console.error("unassignVault error:",e),!1}},setPrimaryVault:async(t,e)=>{try{const{data:r,error:s}=await C.functions.invoke("manage-vault",{body:{action:"set_primary",vault_id:t,department_id:e}});if(s)throw s;return!0}catch(r){return console.error("setPrimaryVault error:",r),!1}},createP2POrder:async(t,e,r,s,a,o)=>{try{const c=t==="BUY"?"P2P_BUY":"P2P_SELL",{data:u,error:h}=await C.functions.invoke("create-withdrawal",{body:{amount:e,type:c,memo_code:c==="P2P_SELL"?`${a} - ${s}`:void 0,network:"P2P"}});let m=u;if(u&&u.error)throw{message:u.error,context:{json:()=>Promise.resolve(u)}}}catch(c){console.error("createP2POrder error:",c);let u=null,h="Unknown";if(c.context&&typeof c.context.json=="function")try{u=await c.context.json()}catch{}if(!u&&c.response&&typeof c.response.json=="function")try{u=await c.response.json()}catch{}if(u)console.error("Edge Function Error Body:",JSON.stringify(u,null,2)),h=u.stage||"Unknown",alert(`Sistem Hatas: ${u.error||"Bilinmeyen Hata"} (Stage: ${h})`);else{const m=JSON.stringify(c,Object.getOwnPropertyNames(c));console.error("Raw Error Object:",m),alert(`lem Baarsz: ${c.message||"Bilinmeyen Hata"} 

Detay: ${m.substring(0,200)}`)}return{success:!1,error:c.message}}},createP2POrderNew:async(t,e,r,s,a)=>{try{const{data:o,error:c}=await C.functions.invoke("p2p-create-order",{body:{side:t,amount_usd:e,iban:r,bank_name:s,account_name:a}});return c?(console.error("P2P create order error:",c),{success:!1,error:c.message||"Edge function error"}):(o==null?void 0:o.success)===!1?{success:!1,error:o.error||"Order creation failed"}:{success:!0,order:(o==null?void 0:o.order)||o}}catch(o){return console.error("P2P create order exception:",o),{success:!1,error:o.message||"Network error"}}},matchP2POrder:async t=>{try{const{data:e,error:r}=await C.functions.invoke("p2p-match",{body:{orderId:t}});return r?(console.error("P2P match error:",r),{success:!1,error:r.message||"Match error"}):(e==null?void 0:e.success)===!1?{success:!1,error:e.error||"No match found",waiting:e.waiting}:{success:!0,match:(e==null?void 0:e.match)||e}}catch(e){return console.error("P2P match exception:",e),{success:!1,error:e.message||"Network error"}}},getPendingWithdrawals:async t=>{try{const{data:e,error:r}=await C.functions.invoke("get-pending-withdrawals",{body:{targetAmount:t||0}});return r?(console.error("Get pending withdrawals error:",r),[]):(e==null?void 0:e.withdrawals)||[]}catch(e){return console.error("Get pending withdrawals exception:",e),[]}},approveWithdrawal:async t=>{try{const{error:e}=await C.from("transactions").update({status:"approved"}).eq("id",t);if(e)throw e;return{success:!0}}catch(e){return console.error("Approve withdrawal error:",e),{success:!1,error:e.message}}},rejectWithdrawal:async(t,e)=>{try{const{error:r}=await C.from("transactions").update({status:"rejected",notes:e}).eq("id",t);if(r)throw r;return{success:!0}}catch(r){return console.error("Reject withdrawal error:",r),{success:!1,error:r.message}}},markP2PPaid:async t=>{try{const{data:e,error:r}=await C.functions.invoke("p2p-mark-paid",{body:{orderId:t}});return r?(console.error("P2P mark paid error:",r),{success:!1,error:r.message}):e}catch(e){return console.error("P2P mark paid exception:",e),{success:!1,error:e.message}}},buyerConfirmP2P:async(t,e)=>{try{const{data:r,error:s}=await C.functions.invoke("p2p-buyer-confirm",{body:{orderId:t,confirm:e}});return s?(console.error("P2P buyer confirm error:",s),{success:!1,error:s.message}):r}catch(r){return console.error("P2P buyer confirm exception:",r),{success:!1,error:r.message}}},adminConfirmP2P:async(t,e)=>{try{const{data:r,error:s}=await C.functions.invoke("p2p-admin-confirm",{body:{orderId:t,confirm:e}});return s?(console.error("P2P admin confirm error:",s),{success:!1,error:s.message}):r}catch(r){return console.error("P2P admin confirm exception:",r),{success:!1,error:r.message}}},getP2POrderStatus:async t=>{try{const{data:e,error:r}=await C.from("p2p_orders").select("*").eq("id",t).single();return r?(console.error("P2P order status error:",r),null):e}catch(e){return console.error("P2P order status exception:",e),null}},getActiveP2POrder:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return null;const{data:e,error:r}=await C.from("p2p_orders").select("id, status, amount_usd, created_at").eq("seller_id",t.id).in("status",["OPEN","PAID"]).order("created_at",{ascending:!1}).limit(1);if(r&&console.error("getActiveP2POrder SELL error:",r),e&&e.length>0)return console.log("Active SELL order found:",e[0]),{...e[0],type:"SELL"};const{data:s,error:a}=await C.from("p2p_orders").select("id, status, amount_usd, created_at").eq("buyer_id",t.id).in("status",["OPEN","PAID"]).order("created_at",{ascending:!1}).limit(1);return a&&console.error("getActiveP2POrder BUY error:",a),s&&s.length>0?(console.log("Active BUY order found:",s[0]),{...s[0],type:"BUY"}):(console.log("No active P2P orders found"),null)}catch(t){return console.error("getActiveP2POrder error:",t),null}},cancelP2POrder:async t=>{try{const{data:e,error:r}=await C.functions.invoke("p2p-cancel-order",{body:{orderId:t}});return r?(console.error("Cancel P2P order error:",r),{success:!1,error:r.message}):(e==null?void 0:e.success)===!1?{success:!1,error:e.error||"Cancel failed"}:{success:!0,order:(e==null?void 0:e.order)||e}}catch(e){return console.error("Cancel P2P order exception:",e),{success:!1,error:e.message}}},getMyP2POrders:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return[];const{data:e,error:r}=await C.from("p2p_orders").select("*").or(`buyer_id.eq.${t.id},seller_id.eq.${t.id}`).order("created_at",{ascending:!1});if(r)return console.error("My P2P orders error:",r),[];const s=new Set;return(e||[]).filter(o=>{if(o.matched_order_id){const c=[o.id,o.matched_order_id].sort().join("|");if(s.has(c))return!1;s.add(c)}return!0})}catch(t){return console.error("My P2P orders exception:",t),[]}},getP2PEvents:async t=>{try{const{data:e,error:r}=await C.from("p2p_events").select("*").eq("order_id",t).order("created_at",{ascending:!0});return r?(console.error("P2P events error:",r),[]):e||[]}catch(e){return console.error("P2P events exception:",e),[]}},markP2PPaymentSent:async()=>({success:!1}),confirmP2PPaymentReceived:async()=>({success:!1}),getMyP2PActivity:async()=>({orders:[],trades:[]}),getAllMerchants:async()=>[],createMerchant:async()=>({success:!1}),updateMerchant:async()=>({success:!1}),deleteMerchant:async()=>!1,getDepartmentMerchant:async()=>null,p2pAction:async(t,e={})=>{try{const{data:r,error:s}=await C.functions.invoke("p2p-action",{body:{action:t,...e}});return s?(console.error("P2P action error:",s),{success:!1,error:s.message||"Edge function error"}):r||{success:!1,error:"No response"}}catch(r){return console.error("P2P action exception:",r),{success:!1,error:r.message||"Network error"}}},getProfile:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return null;const{data:e,error:r}=await C.from("profiles").select("*, business_department_id, business_name, account_type").eq("id",t.id).single();if(r)throw r;return e}catch(t){return console.error("getProfile error:",t),null}},getDepartmentTransactions:async t=>{try{const{data:e}=await C.from("departments").select("owner_id").eq("id",t).single();if(!(e!=null&&e.owner_id))return console.log("No owner_id for department:",t),[];const{data:r,error:s}=await C.from("transactions").select("*").eq("user_id",e.owner_id).order("created_at",{ascending:!1}).limit(50);if(s)throw s;return r||[]}catch(e){return console.error("getDepartmentTransactions error:",e),[]}},internalTransfer:async(t,e)=>{try{const{data:r,error:s}=await C.functions.invoke("internal-transfer",{body:{recipient_code:t,amount:e}});if(s)throw s;return r||{success:!1,error:"No response"}}catch(r){return console.error("internalTransfer error:",r),{success:!1,error:r.message||"Transfer failed"}}},updatePanelStatus:async(t,e)=>{try{const{data:r,error:s}=await C.from("payment_panels").update({is_active:e}).eq("id",t).select().single();if(s)throw s;return{success:!0,panel:r}}catch(r){return console.error("updatePanelStatus error:",r),{success:!1,error:r.message}}},createBusinessAccount:async t=>{try{const{data:e,error:r}=await C.functions.invoke("create-business-account",{body:{businessName:t}});if(r)throw r;return e||{success:!1,error:"No response"}}catch(e){return console.error("createBusinessAccount error:",e),{success:!1,error:e.message||"Failed to create business account"}}},getAllP2POrders:async()=>{try{const{data:t,error:e}=await C.from("p2p_orders").select(`
          *,
          buyer:profiles!p2p_orders_buyer_id_fkey(email, name),
          seller:profiles!p2p_orders_seller_id_fkey(email, name)
        `).order("created_at",{ascending:!1});if(e){console.error("getAllP2POrders error:",e);const{data:a}=await C.from("p2p_orders").select("*").order("created_at",{ascending:!1});return a||[]}const r=new Set;return(t||[]).filter(a=>{if(a.matched_order_id){const o=[a.id,a.matched_order_id].sort().join("|");if(r.has(o))return!1;r.add(o)}return!0})}catch(t){return console.error("getAllP2POrders error:",t),[]}},adminForceCompleteP2POrder:async t=>{try{const{data:e,error:r}=await C.functions.invoke("p2p-admin-action",{body:{action:"forceComplete",orderId:t}});return r?(console.error("Admin force complete error:",r),{success:!1,error:r.message}):e}catch(e){return console.error("adminForceCompleteP2POrder error:",e),{success:!1,error:e.message}}},adminForceCancelP2POrder:async t=>{try{const{data:e,error:r}=await C.functions.invoke("p2p-admin-action",{body:{action:"forceCancel",orderId:t}});return r?(console.error("Admin force cancel error:",r),{success:!1,error:r.message}):e}catch(e){return console.error("adminForceCancelP2POrder error:",e),{success:!1,error:e.message}}},getExchangeRate:async()=>{try{const{data:t,error:e}=await C.from("exchange_rates").select("rate, buy_rate, sell_rate, spread, fetched_at").eq("pair","USDT/TRY").order("fetched_at",{ascending:!1}).limit(1).single();return e?(console.error("getExchangeRate error:",e),{rate:42.5,buy_rate:42.6,sell_rate:42.4,spread:.1,fetched_at:new Date().toISOString(),is_fallback:!0}):{rate:t.rate,buy_rate:t.buy_rate,sell_rate:t.sell_rate,spread:t.spread,fetched_at:t.fetched_at,is_fallback:!1}}catch(t){return console.error("getExchangeRate exception:",t),{rate:42.5,buy_rate:42.6,sell_rate:42.4,spread:.1,fetched_at:new Date().toISOString(),is_fallback:!0}}},updateExchangeRate:async()=>{try{return await(await fetch("https://bzbzcnyipynpkzaqauxd.supabase.co/functions/v1/update-exchange-rate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ6YnpjbnlpcHlucGt6YXFhdXhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2MDg3ODIsImV4cCI6MjA4MTE4NDc4Mn0.1CfLmFr80h9B0_tvicYxQSJUAmaWBBi3V5ZkD451r-g"}})).json()}catch(t){return console.error("updateExchangeRate error:",t),{success:!1,error:t.message}}},getNotificationHistory:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return[];const{data:e,error:r}=await C.from("notifications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(15);return r?(console.error("getNotificationHistory error:",r),[]):e||[]}catch(t){return console.error("getNotificationHistory exception:",t),[]}},createNotification:async(t,e,r,s={})=>{try{const{data:{user:a}}=await C.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};const{data:o,error:c}=await C.from("notifications").insert({user_id:a.id,type:t,title:e,message:r,data:s}).select().single();if(c)return console.error("createNotification insert error:",c),{success:!1,error:c.message};const{data:u}=await C.from("notifications").select("id").eq("user_id",a.id).order("created_at",{ascending:!1});if(u&&u.length>15){const h=u.slice(15).map(m=>m.id);await C.from("notifications").delete().in("id",h)}return{success:!0,notification:o}}catch(a){return console.error("createNotification exception:",a),{success:!1,error:a.message}}},markNotificationAsRead:async t=>{try{const{error:e}=await C.from("notifications").update({read:!0}).eq("id",t);return e?(console.error("markNotificationAsRead error:",e),{success:!1,error:e.message}):{success:!0}}catch(e){return console.error("markNotificationAsRead exception:",e),{success:!1,error:e.message}}},markAllNotificationsAsRead:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return{success:!1,error:"Not authenticated"};const{error:e}=await C.from("notifications").update({read:!0}).eq("user_id",t.id).eq("read",!1);return e?(console.error("markAllNotificationsAsRead error:",e),{success:!1,error:e.message}):{success:!0}}catch(t){return console.error("markAllNotificationsAsRead exception:",t),{success:!1,error:t.message}}},getUnreadNotificationCount:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return 0;const{count:e,error:r}=await C.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",t.id).eq("read",!1);return r?(console.error("getUnreadNotificationCount error:",r),0):e||0}catch(t){return console.error("getUnreadNotificationCount exception:",t),0}},inviteBusinessMember:async(t,e="staff")=>{try{const{data:r,error:s}=await C.functions.invoke("invite-business-member",{body:{email:t,role:e}});return s?{success:!1,error:s.message}:{success:!0,...r}}catch(r){return{success:!1,error:r.message}}},acceptBusinessInvite:async t=>{try{const{data:e,error:r}=await C.functions.invoke("accept-business-invite",{body:{invite_code:t}});return r?{success:!1,error:r.message}:{success:!0,...e}}catch(e){return{success:!1,error:e.message}}},getBusinessTeam:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return{success:!1,error:"Unauthorized"};const{data:e}=await C.from("profiles").select("id, parent_business_id, business_role").eq("id",t.id).single(),r=(e==null?void 0:e.parent_business_id)||(e==null?void 0:e.id),{data:s,error:a}=await C.from("profiles").select("id, email, name, business_role, created_at").or(`id.eq.${r},parent_business_id.eq.${r}`);return a?{success:!1,error:a.message}:{success:!0,members:s||[]}}catch(t){return{success:!1,error:t.message}}},getBusinessInvites:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return{success:!1,error:"Unauthorized"};const{data:e,error:r}=await C.from("business_invites").select("*").eq("business_id",t.id).eq("status","pending");return r?{success:!1,error:r.message}:{success:!0,invites:e||[]}}catch(t){return{success:!1,error:t.message}}},cancelBusinessInvite:async t=>{try{const{error:e}=await C.from("business_invites").update({status:"cancelled"}).eq("id",t);return e?{success:!1,error:e.message}:{success:!0}}catch(e){return{success:!1,error:e.message}}},activateBusinessPanel:async(t,e=!0)=>{try{const{data:r,error:s}=await C.functions.invoke("activate-business-panel",{body:{userId:t,activate:e}});return s?(console.error("activateBusinessPanel error:",s),{success:!1,error:s.message}):r||{success:!0}}catch(r){return console.error("activateBusinessPanel exception:",r),{success:!1,error:r.message}}},createPortalRequest:async(t,e)=>{try{const{data:{user:r}}=await C.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:s}=await C.from("portal_requests").insert({department_id:t,requested_by:r.id,name:e,status:"pending"});return s?(console.error("createPortalRequest error:",s),{success:!1,error:s.message}):{success:!0}}catch(r){return{success:!1,error:r.message}}},getPortalRequests:async t=>{try{const{data:e,error:r}=await C.from("portal_requests").select("*, requester:profiles!portal_requests_requested_by_fkey(email, name)").eq("department_id",t).order("created_at",{ascending:!1});return r?(console.error("getPortalRequests error:",r),[]):e||[]}catch{return[]}},approvePortalRequest:async t=>{try{const{data:e,error:r}=await C.from("portal_requests").select("*").eq("id",t).single();if(r||!e)return{success:!1,error:"Request not found"};const s=e.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,30)+"-"+Date.now().toString(36),{error:a}=await C.from("payment_panels").insert({department_id:e.department_id,name:e.name,public_slug:s,is_active:!0});if(a)return console.error("Panel creation error:",a),{success:!1,error:a.message};const{data:{user:o}}=await C.auth.getUser();return await C.from("portal_requests").update({status:"approved",reviewed_at:new Date().toISOString(),reviewed_by:o==null?void 0:o.id}).eq("id",t),{success:!0}}catch(e){return{success:!1,error:e.message}}},rejectPortalRequest:async t=>{try{const{data:{user:e}}=await C.auth.getUser(),{error:r}=await C.from("portal_requests").update({status:"rejected",reviewed_at:new Date().toISOString(),reviewed_by:e==null?void 0:e.id}).eq("id",t);return r?{success:!1,error:r.message}:{success:!0}}catch(e){return{success:!1,error:e.message}}},submitVerification:async(t,e,r,s)=>{try{const{data:{user:a}}=await C.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};const{data:o}=await C.from("profiles").select("name, email").eq("id",a.id).single(),c=`${a.id}/${t}_${Date.now()}_1.${e.name.split(".").pop()}`,{error:u}=await C.storage.from("verification-docs").upload(c,e);if(u)return console.error("Upload error 1:",u),{success:!1,error:"Belge yklenemedi"};let h=null;if(r){h=`${a.id}/${t}_${Date.now()}_2.${r.name.split(".").pop()}`;const{error:y}=await C.storage.from("verification-docs").upload(h,r);y&&console.error("Upload error 2:",y)}const{data:m,error:x}=await C.from("verification_submissions").insert({user_id:a.id,user_email:(o==null?void 0:o.email)||a.email,user_name:o==null?void 0:o.name,submission_type:t,document_url:c,document_url_2:h,amount:t==="deposit"?s:null,status:"pending"}).select().single();if(x)return console.error("Insert error:",x),{success:!1,error:"Bavuru oluturulamad"};const{error:g}=await C.functions.invoke("send-telegram-verification",{body:{submission_id:m.id,submission_type:t,user_email:(o==null?void 0:o.email)||a.email,user_name:o==null?void 0:o.name,document_url:c,document_url_2:h,amount:s}});return g&&console.error("Telegram error:",g),{success:!0,submission_id:m.id}}catch(a){return console.error("submitVerification error:",a),{success:!1,error:a.message}}},getVerificationStatus:async t=>{try{const{data:{user:e}}=await C.auth.getUser();if(!e)return null;let r=C.from("verification_submissions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});t&&(r=r.eq("submission_type",t));const{data:s,error:a}=await r.limit(1).single();return a&&a.code!=="PGRST116"&&console.error("getVerificationStatus error:",a),s}catch(e){return console.error("getVerificationStatus error:",e),null}},getVerificationHistory:async t=>{try{const{data:{user:e}}=await C.auth.getUser();if(!e)return[];let r=C.from("verification_submissions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});t&&(r=r.eq("submission_type",t));const{data:s,error:a}=await r.limit(20);return a?(console.error("getVerificationHistory error:",a),[]):s||[]}catch(e){return console.error("getVerificationHistory error:",e),[]}},isKYCVerified:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return!1;const{data:e}=await C.from("profiles").select("kyc_verified").eq("id",t.id).single();return(e==null?void 0:e.kyc_verified)||!1}catch{return!1}},getUserLimits:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return null;const{data:e,error:r}=await C.rpc("get_user_limits",{p_user_id:t.id});return r?(console.error("getUserLimits error:",r),null):(e==null?void 0:e[0])||null}catch(t){return console.error("getUserLimits error:",t),null}},checkTransactionLimit:async(t,e=!1)=>{try{const{data:{user:r}}=await C.auth.getUser();if(!r)return{allowed:!1,error:"Oturum bulunamad"};const{data:s,error:a}=await C.rpc("check_transaction_limit",{p_user_id:r.id,p_amount:t,p_update:e});if(a)return console.error("checkTransactionLimit error:",a),{allowed:!1,error:"Limit kontrol yaplamad"};const o=s==null?void 0:s[0];return{allowed:(o==null?void 0:o.allowed)||!1,daily_remaining:(o==null?void 0:o.daily_remaining)||0,monthly_remaining:(o==null?void 0:o.monthly_remaining)||0,error:(o==null?void 0:o.error_message)||null}}catch(r){return console.error("checkTransactionLimit error:",r),{allowed:!1,error:"Beklenmeyen hata"}}},sendEmail:async(t,e,r)=>{try{const{data:s,error:a}=await C.functions.invoke("send-email",{body:{to:t,template:e,data:r}});return a?(console.error("sendEmail error:",a),{success:!1,error:a.message}):{success:!0,id:s==null?void 0:s.id}}catch(s){return console.error("sendEmail error:",s),{success:!1,error:"Email gnderilemedi"}}}},jk=()=>{const t=we(),{login:e}=it(),[r,s]=N.useState("personal"),[a,o]=N.useState(""),[c,u]=N.useState(""),[h,m]=N.useState(""),[x,g]=N.useState(""),[y,j]=N.useState(""),[b,w]=N.useState(!1),[E,_]=N.useState(!1),[v,S]=N.useState(!1),P=async()=>{var A;if(!a||!h||!x)return alert("Ltfen tm alanlar doldurun");if(x.length<6)return alert("ifre en az 6 karakter olmaldr");if(x!==y)return alert("ifreler elemiyor");if(r==="business"&&!c)return alert("Ticari hesaplar iin firma ad gereklidir");if(!v)return alert("Kullanm koullarn ve gizlilik politikasn kabul etmelisiniz");w(!0);const R=await Z.register(a,h,x,r,c);R&&((A=R.user)!=null&&A.email)&&(await e(R.user.email,x),t("/dashboard")),w(!1)};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-emerald-600/20 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute -bottom-32 -left-32 w-80 h-80 bg-teal-500/20 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute top-1/2 right-1/4 w-64 h-64 bg-emerald-400/10 rounded-full blur-2xl"})]}),n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 relative z-10",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-28 h-28 bg-white rounded-2xl flex items-center justify-center mx-auto mb-3 shadow-xl shadow-emerald-900/50 overflow-hidden p-1.5",children:n.jsx("img",{src:"/logo.png",alt:"Nubit Logo",className:"w-full h-full object-contain"})}),n.jsx("h1",{className:"text-2xl font-extrabold text-white mb-1",children:"Hesap Olutur"}),n.jsx("p",{className:"text-emerald-300/80 text-sm",children:"Nubit Wallet'a katln"})]}),n.jsxs("div",{className:"w-full max-w-sm",children:[n.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl p-6 shadow-2xl shadow-emerald-950/50",children:[n.jsxs("div",{className:"mb-5",children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:"Hesap Tr"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{type:"button",onClick:()=>s("personal"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${r==="personal"?"border-emerald-500 bg-emerald-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[n.jsx("span",{className:`material-symbols-outlined text-2xl mb-1 ${r==="personal"?"text-emerald-600":"text-gray-400"}`,children:"person"}),n.jsx("span",{className:`text-sm font-bold ${r==="personal"?"text-emerald-700":"text-gray-500"}`,children:"Kiisel"}),n.jsx("span",{className:"text-xs text-gray-400 mt-0.5",children:"Bireysel kullanm"})]}),n.jsxs("button",{type:"button",onClick:()=>s("business"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${r==="business"?"border-emerald-500 bg-emerald-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[n.jsx("span",{className:`material-symbols-outlined text-2xl mb-1 ${r==="business"?"text-emerald-600":"text-gray-400"}`,children:"store"}),n.jsx("span",{className:`text-sm font-bold ${r==="business"?"text-emerald-700":"text-gray-500"}`,children:"Ticari"}),n.jsx("span",{className:"text-xs text-gray-400 mt-0.5",children:"Firma hesab"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[r==="business"&&n.jsxs("div",{className:"animate-fadeIn",children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["Firma Ad ",n.jsx("span",{className:"text-emerald-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"business"}),n.jsx("input",{className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-emerald-300 bg-emerald-50 text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400",placeholder:"irket / letme Ad",value:c,onChange:R=>u(R.target.value)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:r==="business"?"Yetkili Kii Ad":"Ad Soyad"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"badge"}),n.jsx("input",{className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400",placeholder:r==="business"?"Yetkili kiinin ad":"Adnz Soyadnz",value:a,onChange:R=>o(R.target.value)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"E-posta"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"mail"}),n.jsx("input",{className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400",placeholder:"ornek@email.com",value:h,onChange:R=>m(R.target.value)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ifre"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"lock"}),n.jsx("input",{className:"w-full pl-12 pr-12 py-3.5 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-bold focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400 placeholder:font-normal",type:E?"text":"password",placeholder:"ifre oluturun",value:x,onChange:R=>g(R.target.value)}),n.jsx("button",{type:"button",onClick:()=>_(!E),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-xl",children:E?"visibility_off":"visibility"})})]}),n.jsx("p",{className:"text-xs text-gray-400 mt-1.5 ml-1",children:"En az 6 karakter"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ifre Tekrar"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"lock_reset"}),n.jsx("input",{className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-bold focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400 placeholder:font-normal",type:E?"text":"password",placeholder:"ifreyi tekrar girin",value:y,onChange:R=>j(R.target.value)})]})]}),n.jsxs("div",{className:"flex items-start gap-3 py-2",children:[n.jsx("input",{type:"checkbox",id:"terms",checked:v,onChange:R=>S(R.target.checked),className:"w-5 h-5 rounded border-gray-300 text-emerald-500 focus:ring-emerald-500 mt-0.5 shrink-0"}),n.jsxs("label",{htmlFor:"terms",className:"text-gray-500 text-xs leading-relaxed",children:[n.jsx("button",{type:"button",onClick:()=>t("/terms"),className:"text-emerald-600 underline",children:"Kullanm Koullar"})," ","ve"," ",n.jsx("button",{type:"button",onClick:()=>t("/privacy"),className:"text-emerald-600 underline",children:"Gizlilik Politikas"}),"'n okudum ve kabul ediyorum. 18 yandan byk olduumu beyan ederim."]})]}),n.jsx("button",{onClick:P,disabled:b||!v,className:"w-full bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-emerald-500/30 transition-all disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:b?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Hesap oluturuluyor..."]}):n.jsxs(n.Fragment,{children:[r==="business"?"Ticari Hesap Olutur":"Kayt Ol",n.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]})]}),n.jsxs("div",{className:"mt-5 text-center",children:[n.jsx("p",{className:"text-emerald-200/80 text-sm mb-2",children:"Zaten hesabnz var m?"}),n.jsx("button",{onClick:()=>t("/"),className:"w-full bg-white/10 backdrop-blur border border-white/20 hover:bg-white/20 hover:border-white/30 py-3.5 rounded-xl font-bold text-white transition-all",children:"Giri Yap"})]})]})]})]})},Y0=({isOpen:t,onClose:e,title:r,message:s,buttonText:a="Tamam"})=>t?n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-sm w-full overflow-hidden animate-scale-in",children:[n.jsx("div",{className:"pt-8 pb-4 flex justify-center",children:n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/30",children:n.jsx("span",{className:"material-symbols-outlined text-white text-4xl",children:"check_circle"})})}),n.jsxs("div",{className:"px-6 pb-4 text-center",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed",children:s})]}),n.jsx("div",{className:"px-6 pb-6",children:n.jsx("button",{onClick:e,className:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold rounded-2xl transition-all shadow-lg shadow-green-500/30 hover:shadow-green-500/50 active:scale-95",children:a})})]})}):null,Yt=({className:t=""})=>n.jsx("div",{className:`animate-pulse bg-gradient-to-r from-gray-800 via-gray-700 to-gray-800 bg-[length:200%_100%] rounded ${t}`,style:{animation:"shimmer 1.5s infinite"}}),Nk=()=>n.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a1a] to-[#242424] p-5 rounded-2xl border border-white/5",children:[n.jsx("div",{className:"flex items-center gap-2 mb-3",children:n.jsx(Yt,{className:"w-16 h-4"})}),n.jsx(Yt,{className:"w-32 h-10 mb-2"}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(Yt,{className:"w-20 h-4"})})]}),_c=()=>n.jsxs("div",{className:"flex items-center gap-4 p-3 bg-[#1a1a1a] rounded-xl border border-white/5",children:[n.jsx(Yt,{className:"w-10 h-10 rounded-full shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx(Yt,{className:"w-24 h-4 mb-2"}),n.jsx(Yt,{className:"w-16 h-3"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx(Yt,{className:"w-20 h-5 mb-1"}),n.jsx(Yt,{className:"w-14 h-3"})]})]}),kk=()=>n.jsxs("div",{className:"space-y-3",children:[n.jsx(_c,{}),n.jsx(_c,{}),n.jsx(_c,{})]}),Sk=()=>n.jsx("div",{className:"grid grid-cols-4 gap-3",children:[1,2,3,4].map(t=>n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(Yt,{className:"w-14 h-14 rounded-2xl"}),n.jsx(Yt,{className:"w-12 h-3"})]},t))}),Ek=()=>n.jsxs("div",{className:"px-5 space-y-6",children:[n.jsx(Nk,{}),n.jsx(Sk,{}),n.jsxs("div",{children:[n.jsx(Yt,{className:"w-28 h-5 mb-4"}),n.jsx(kk,{})]})]}),Pk=`
@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}
`;if(typeof document<"u"){const t=document.createElement("style");t.textContent=Pk,document.head.querySelector("[data-skeleton-shimmer]")||(t.setAttribute("data-skeleton-shimmer","true"),document.head.appendChild(t))}const Tk=()=>{var F,q;const t=we(),{user:e,refreshUser:r}=it(),{isDark:s}=tl(),[a,o]=N.useState([]),[c,u]=N.useState([]),[h,m]=N.useState(null),[x,g]=N.useState([]),[y,j]=N.useState(null),[b,w]=N.useState({isOpen:!1,title:"",message:""}),[E,_]=N.useState(!0),[v,S]=N.useState(!1),[P,R]=N.useState(null);N.useEffect(()=>{if(r(),e){A(),C.auth.getUser().then(({data:Q})=>{if(Q!=null&&Q.user){j(Q.user.id);const G=C.channel("p2p-realtime").on("postgres_changes",{event:"*",schema:"public",table:"p2p_orders",filter:`buyer_id=eq.${Q.user.id}`},le=>{console.log("[REALTIME] P2P order change (buyer):",le),A(),r()}).on("postgres_changes",{event:"*",schema:"public",table:"p2p_orders",filter:`seller_id=eq.${Q.user.id}`},le=>{console.log("[REALTIME] P2P order change (seller):",le),A(),r()}).subscribe(),M=C.channel("balance-realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${Q.user.id}`},le=>{console.log("[REALTIME] Balance updated:",le.new),r()}).subscribe();return()=>{C.removeChannel(G),C.removeChannel(M)}}});const $=setInterval(()=>{A()},3e4);return()=>{clearInterval($)}}},[e]);const A=async()=>{if(!e)return;const{data:{user:$}}=await C.auth.getUser();$&&j($.id);try{const[Q,G,M,le]=await Promise.all([Z.getTransactions(e.email),Z.getMyP2POrders(),Z.getPendingApprovals(e.email),Z.getNotifications(e.email)]),U=new Set,ce=(G||[]).filter(ee=>ee.status==="OPEN"||ee.status==="COMPLETED").filter(ee=>{if(ee.matched_order_id){const te=[ee.id,ee.matched_order_id].sort().join("|");if(U.has(te))return!1;U.add(te)}return!0}).map(ee=>{const te=ee.seller_id===y;return{id:ee.id,title:te?"P2P SELL Order":"P2P BUY Order",amount:te?-ee.amount_usd:ee.amount_usd,status:ee.status==="OPEN"?"PENDING":ee.status,date:ee.created_at,type:te?"P2P_SELL":"P2P_BUY"}}),J=[...Q,...ce].sort((ee,te)=>new Date(te.date).getTime()-new Date(ee.date).getTime());o(J.slice(0,4));const K=(G||[]).filter(ee=>ee.status==="MATCHED"||ee.status==="PAID"&&!ee.buyer_confirmed_at);g(K),u(M);const H=le.filter(ee=>!ee.read);if(H.length>0){const ee=H[0];m(te=>(te==null?void 0:te.id)===ee.id?te:ee)}}catch(Q){console.error("Dashboard loadData error:",Q)}finally{_(!1)}},O=async $=>{const Q=await Z.p2pAction("confirm",{orderId:$});Q!=null&&Q.success?(w({isOpen:!0,title:"Transfer Onayland!",message:"Bakiye alcya baaryla aktarld."}),A(),r()):alert("Hata: "+((Q==null?void 0:Q.error)||"lem baarsz"))},z=async $=>{const Q=await Z.p2pAction("reject",{orderId:$});Q!=null&&Q.success?(alert("lem reddedildi. Eleme iptal edildi."),A()):alert("Hata: "+((Q==null?void 0:Q.error)||"lem baarsz"))},I=async()=>{h&&(await Z.markNotificationRead(h.id),m(null),A())},W=async $=>{await Z.approveRelease($),r(),w({isOpen:!0,title:"Approved!",message:"Transaction has been approved successfully."})};return e?E?n.jsxs("div",{className:"min-h-screen bg-theme-primary flex flex-col font-display pb-20",children:[n.jsxs("div",{className:"px-5 py-4 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 animate-pulse"}),n.jsxs("div",{children:[n.jsx("div",{className:"w-24 h-4 bg-gray-800 rounded animate-pulse mb-1"}),n.jsx("div",{className:"w-16 h-3 bg-gray-800 rounded animate-pulse"})]})]}),n.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 animate-pulse"})]}),n.jsx(Ek,{})]}):n.jsxs("div",{className:"h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display overflow-hidden relative",children:[n.jsx(Y0,{isOpen:b.isOpen,onClose:()=>w({...b,isOpen:!1}),title:b.title,message:b.message}),n.jsxs("div",{className:"px-5 pt-6 pb-4 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-emerald-300/80 text-sm font-medium mb-1",children:"Welcome"}),n.jsx("h1",{className:"text-white text-2xl font-bold tracking-tight",children:e.name||((F=e.email)==null?void 0:F.split("@")[0])})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>t("/notifications"),className:"w-11 h-11 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center transition-colors relative hover:bg-white/20",children:[n.jsx("span",{className:"material-symbols-outlined text-white text-xl",children:"notifications"}),h&&n.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center px-1 shadow-md",children:"1"})]}),n.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-lime-400 to-emerald-500 p-0.5 shadow-lg shadow-emerald-500/40",children:n.jsx("div",{className:"w-full h-full rounded-full bg-emerald-800 flex items-center justify-center text-white font-bold text-lg",children:((q=e.name)==null?void 0:q.charAt(0))||"U"})})]})]}),h&&n.jsx("div",{className:"fixed top-20 left-4 right-4 z-50 animate-slide-in-top cursor-pointer",onClick:I,children:n.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-xl border border-lime-500/50 p-4 rounded-2xl shadow-2xl shadow-lime-500/10 flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-lime-500/20 text-lime-400 flex items-center justify-center shrink-0",children:n.jsx("span",{className:"material-symbols-outlined",children:"notifications_active"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-white font-bold text-sm",children:h.title}),n.jsx("p",{className:"text-gray-400 text-xs mt-1 leading-relaxed",children:h.message})]}),n.jsx("button",{onClick:$=>{$.stopPropagation(),I()},className:"text-gray-500 hover:text-white",children:n.jsx("span",{className:"material-symbols-outlined text-lg",children:"close"})})]})}),n.jsxs("div",{className:"px-5 flex-1 overflow-hidden",children:[c.length>0&&n.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 p-4 rounded-2xl mb-6 backdrop-blur-sm",children:[n.jsxs("h3",{className:"font-bold text-amber-400 flex items-center gap-2 mb-3 text-sm",children:[n.jsx("span",{className:"material-symbols-outlined text-lg",children:"notifications_active"}),"Pending Approvals"]}),c.map($=>n.jsxs("div",{className:"flex justify-between items-center bg-[#1a1a1a] p-3 rounded-xl mb-2 last:mb-0",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"REQUEST"}),n.jsxs("span",{className:"text-sm font-bold text-white",children:["From: ",$.lockedBy," ",n.jsxs("span",{className:"text-lime-400",children:["($",$.amount,")"]})]})]}),n.jsx("button",{onClick:()=>W($.id),className:"bg-lime-500 text-black px-4 py-2 rounded-lg text-xs font-bold hover:bg-lime-400 transition-colors",children:"Approve"})]},$.id))]}),x.filter($=>$.status==="PAID"&&$.seller_id===y).length>0&&n.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 max-w-xs w-full border border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-lime-500/20 flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"payments"})}),n.jsx("h3",{className:"text-white font-bold text-lg",children:"deme Onay"})]}),n.jsx("p",{className:"text-gray-400 text-sm mb-5",children:"Hesabnza para aktarlmtr demeyi onaylyor musunuz?"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{const $=x.find(Q=>Q.status==="PAID");$&&z($.id)},className:"flex-1 bg-[#2a2a2a] text-gray-300 py-3 rounded-xl font-semibold hover:bg-[#333] transition-colors",children:"Reddet"}),n.jsx("button",{onClick:()=>{const $=x.find(Q=>Q.status==="PAID");$&&O($.id)},className:"flex-1 bg-lime-500 text-black py-3 rounded-xl font-bold hover:bg-lime-400 transition-colors",children:"Onaylyorum"})]})]})}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"bg-emerald-700/50 backdrop-blur-sm p-6 rounded-3xl border border-emerald-600/30",children:[e.account_type==="business"&&n.jsxs("button",{onClick:()=>t("/business"),className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 active:scale-[0.98] transition-all text-white py-3 rounded-xl font-bold text-sm shadow-lg shadow-amber-500/30 mb-4",children:[n.jsx("span",{className:"material-symbols-outlined text-lg",children:"storefront"}),"letme Paneli"]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-emerald-200/70 text-sm mb-1 flex items-center justify-center gap-1",children:["Total Balance",n.jsx("span",{className:"material-symbols-outlined text-sm",children:"visibility"})]}),n.jsxs("h2",{className:"text-4xl font-extrabold text-white tracking-tight mb-3",children:["$",e.balance.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("span",{className:"inline-flex items-center gap-1 bg-emerald-600/50 px-3 py-1 rounded-full text-xs text-emerald-100 font-medium",children:["USD ",n.jsx("span",{className:"material-symbols-outlined text-sm",children:"expand_more"})]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-3 mt-6",children:[n.jsxs("button",{onClick:()=>t("/deposit"),className:"flex flex-col items-center gap-2 group",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-lime-400 flex items-center justify-center shadow-lg group-hover:scale-105 group-active:scale-95 transition-all",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-900 text-2xl",children:"arrow_downward"})}),n.jsx("span",{className:"text-emerald-100 text-[11px] font-medium",children:"Deposit"})]}),n.jsxs("button",{onClick:()=>t("/withdraw"),className:"flex flex-col items-center gap-2 group",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-lime-400 flex items-center justify-center shadow-lg group-hover:scale-105 group-active:scale-95 transition-all",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-900 text-2xl",children:"arrow_upward"})}),n.jsx("span",{className:"text-emerald-100 text-[11px] font-medium",children:"Withdraw"})]}),n.jsxs("button",{onClick:()=>t("/crypto/deposit"),className:"flex flex-col items-center gap-2 group",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-lime-400 flex items-center justify-center shadow-lg group-hover:scale-105 group-active:scale-95 transition-all",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-900 text-2xl",children:"download"})}),n.jsxs("span",{className:"text-emerald-100 text-[10px] font-medium text-center leading-tight",children:["Crypto",n.jsx("br",{}),"Deposit"]})]}),n.jsxs("button",{onClick:()=>t("/crypto/withdraw"),className:"flex flex-col items-center gap-2 group",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-lime-400 flex items-center justify-center shadow-lg group-hover:scale-105 group-active:scale-95 transition-all",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-900 text-2xl",children:"upload"})}),n.jsxs("span",{className:"text-emerald-100 text-[10px] font-medium text-center leading-tight",children:["Crypto",n.jsx("br",{}),"Withdraw"]})]})]})]})}),n.jsxs("button",{onClick:()=>t("/find-agent"),className:"w-full p-4 rounded-2xl flex items-center justify-between group transition-all bg-emerald-700/30 border border-emerald-600/30 hover:bg-emerald-700/50 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-11 h-11 rounded-xl bg-lime-400/20 flex items-center justify-center text-lime-400 group-hover:bg-lime-400 group-hover:text-emerald-900 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined",children:"location_on"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"font-bold text-sm text-white",children:"Find Agent"}),n.jsx("p",{className:"text-emerald-300/70 text-xs",children:"Locate nearest exchange points"})]})]}),n.jsx("span",{className:"material-symbols-outlined text-emerald-400 group-hover:text-white",children:"chevron_right"})]}),e.role==="admin"&&n.jsxs("button",{onClick:()=>t("/admin"),className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 active:scale-[0.98] transition-all text-white py-4 rounded-2xl font-bold text-sm shadow-xl shadow-purple-500/30 mb-3",children:[n.jsx("span",{className:"material-symbols-outlined text-lg",children:"admin_panel_settings"}),"Admin Panel"]}),n.jsxs("div",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-md bg-white rounded-t-3xl shadow-2xl shadow-black/30 transition-all duration-300 ease-out z-40",style:{height:v?"calc(100vh - 120px)":"280px"},children:[n.jsx("div",{className:"flex justify-center py-4 cursor-pointer touch-none",onClick:()=>S(!v),onTouchStart:$=>R($.touches[0].clientY),onTouchEnd:$=>{if(P===null)return;const Q=P-$.changedTouches[0].clientY;Q>50&&S(!0),Q<-50&&S(!1),R(null)},children:n.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),n.jsx("div",{className:"px-5",children:n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"font-bold text-lg text-gray-900",children:"Transaction History"}),n.jsxs("button",{onClick:()=>t("/history"),className:"text-emerald-500 text-xs font-bold flex items-center hover:text-emerald-400 transition-colors",children:["View All ",n.jsx("span",{className:"material-symbols-outlined text-sm ml-1",children:"arrow_forward"})]})]})}),n.jsx("div",{className:"px-5 space-y-3 overflow-y-auto pb-24",style:{height:v?"calc(100% - 80px)":"100px"},children:a.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 rounded-2xl bg-gray-50 text-gray-400",children:[n.jsx("span",{className:"material-symbols-outlined text-3xl mb-2 opacity-30",children:"history"}),n.jsx("p",{className:"text-sm font-medium",children:"No recent transactions"})]}):a.slice(0,v?a.length:1).map($=>{var Q,G;return n.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50 flex justify-between items-center transition-all hover:bg-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-11 h-11 rounded-xl flex items-center justify-center ${$.amount>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-500"}`,children:n.jsx("span",{className:"material-symbols-outlined text-xl",children:$.amount>0?"arrow_downward":"arrow_upward"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-sm text-gray-900",children:$.title}),n.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:((Q=$.date)==null?void 0:Q.split(",")[0])||((G=$.date)==null?void 0:G.split("T")[0])})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("span",{className:`font-bold text-base ${$.amount>0?"text-emerald-500":"text-gray-900"}`,children:[$.amount>0?"+":"","$",Math.abs($.amount).toFixed(2)]}),n.jsx("p",{className:"text-xs text-gray-400",children:$.status==="PAYMENT_REVIEW"?"Pending":$.status})]})]},$.id)})})]})]})]}):null},Hu=({isOpen:t,title:e,message:r,type:s="info",onClose:a,confirmText:o="Tamam"})=>{if(!t)return null;const c=()=>{switch(s){case"success":return{icon:"check_circle",color:"text-lime-400",bg:"bg-lime-500/20"};case"error":return{icon:"error",color:"text-red-400",bg:"bg-red-500/20"};case"warning":return{icon:"warning",color:"text-yellow-400",bg:"bg-yellow-500/20"};default:return{icon:"info",color:"text-blue-400",bg:"bg-blue-500/20"}}},{icon:u,color:h,bg:m}=c();return n.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:a}),n.jsxs("div",{className:"relative bg-[#1a1a1a] border border-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-scale-in",children:[n.jsx("div",{className:`w-16 h-16 ${m} rounded-full flex items-center justify-center mx-auto mb-4`,children:n.jsx("span",{className:`material-symbols-outlined text-4xl ${h}`,children:u})}),n.jsx("h2",{className:"text-white text-xl font-bold text-center mb-2",children:e}),n.jsx("p",{className:"text-gray-400 text-center mb-6",children:r}),n.jsx("button",{onClick:a,className:`w-full py-3 rounded-xl font-semibold text-black transition-all ${s==="error"?"bg-red-500 hover:bg-red-400":s==="warning"?"bg-yellow-500 hover:bg-yellow-400":"bg-lime-400 hover:bg-lime-300"}`,children:o})]})]})},Ck=()=>{var ce,J;const t=we(),{user:e}=it(),[r,s]=N.useState(""),[a,o]=N.useState(null),[c,u]=N.useState(!1),[h,m]=N.useState(null),[x,g]=N.useState([]),[y,j]=N.useState(!0),[b,w]=N.useState(null),[E,_]=N.useState(null),[v,S]=N.useState(null),[P,R]=N.useState(42.5),[A,O]=N.useState({isOpen:!1,type:"info",title:"",message:""}),[z,I]=N.useState(!1),[W,F]=N.useState([]);N.useEffect(()=>{$(),q()},[]);const q=async()=>{try{const K=await Z.getExchangeRate();K!=null&&K.buy_rate&&(R(K.buy_rate),console.log("[Deposit] Exchange rate fetched:",K.buy_rate))}catch(K){console.error("[Deposit] Failed to fetch exchange rate:",K)}};N.useEffect(()=>{(async()=>{if(e!=null&&e.email){const H=await Z.getBankAccounts(e.email);g(H||[]),H&&H.length>0&&m(H[0])}j(!1)})()},[e==null?void 0:e.email]),N.useEffect(()=>()=>{E&&clearInterval(E)},[E]);const $=async()=>{const K=await Z.getActiveP2POrder();K&&S(K)},Q=async()=>{if(!v)return;j(!0);const K=await Z.cancelP2POrder(v.id);K.success?(S(null),O({isOpen:!0,type:"success",title:"ptal Edildi",message:"lem iptal edildi"})):O({isOpen:!0,type:"error",title:"Hata",message:"ptal hatas: "+K.error}),j(!1)},G=async()=>{var K,H,ee,te;if(!h){O({isOpen:!0,type:"warning",title:"Banka Sein",message:"Ltfen nce bir banka hesab sein veya ekleyin."});return}j(!0);try{const X=await Z.createP2POrderNew("BUY",parseFloat(r));if(!X){O({isOpen:!0,type:"error",title:"Sunucu Hatas",message:"Sunucu hatas: Yant alnamad"}),j(!1);return}if(X.success&&X.order){const se=X.order.id;w(se);const ue=await Z.matchP2POrder(se);if(ue!=null&&ue.success&&(ue!=null&&ue.match)){console.log("[MATCH DEBUG] matchResult.match:",JSON.stringify(ue.match,null,2)),console.log("[MATCH DEBUG] matched_amount_usd:",ue.match.matched_amount_usd),console.log("[MATCH DEBUG] amount_usd:",ue.match.amount_usd),console.log("[MATCH DEBUG] result.order.amount_usd:",X.order.amount_usd);const Ue=ue.match.matched_amount_usd||ue.match.amount_usd||X.order.amount_usd;console.log("[MATCH DEBUG] Final sellerAmount:",Ue),o({id:ue.match.matchedOrderId,amount:Ue*P,amountUsd:Ue,sellerIBAN:((K=ue.match.counterparty)==null?void 0:K.iban)||"N/A",sellerName:((H=ue.match.counterparty)==null?void 0:H.account_name)||"Satc",sellerBank:((ee=ue.match.counterparty)==null?void 0:ee.bank_name)||"Banka",timeRemaining:ue.match.lock_expires_at}),w(null)}else{console.log("[DEPOSIT] No exact match, fetching suggestions...");const Ue=await Z.getPendingWithdrawals(parseFloat(r));Ue.success&&((te=Ue.withdrawals)==null?void 0:te.length)>0?(F(Ue.withdrawals),I(!0),await Z.cancelP2POrder(se),w(null)):(O({isOpen:!0,type:"info",title:"Eleme Bekleniyor",message:"Bu tutarda ekim talebi yok. Talebiniz havuza eklendi, ekim talebi geldiinde eleeceksiniz."}),M(se))}}else O({isOpen:!0,type:"error",title:"Hata",message:"stek oluturulamad: "+((X==null?void 0:X.error)||"Bilinmeyen hata")})}catch(X){console.error("Search error:",X),O({isOpen:!0,type:"error",title:"Balant Hatas",message:"Hata: "+(X.message||"Balant hatas")})}j(!1)},M=K=>{const H=C.channel(`order-${K}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"p2p_orders",filter:`id=eq.${K}`},te=>{console.log("[REALTIME] Order updated:",te.new);const X=te.new;X.status==="MATCHED"?(async()=>{const se=X.matched_order_id?await Z.getP2POrderStatus(X.matched_order_id):null,ue=(se==null?void 0:se.amount_usd)||X.amount_usd;u(!1),o({id:K,amount:ue*P,amountUsd:ue,sellerIBAN:X.seller_iban||"N/A",sellerName:X.seller_account_name||"Satc",sellerBank:X.seller_bank_name||"Banka"}),w(null),C.removeChannel(H),_(null)})():(X.status==="EXPIRED"||X.status==="CANCELLED")&&(C.removeChannel(H),_(null),O({isOpen:!0,type:"warning",title:"Sre Doldu",message:"Sipari sresi doldu veya iptal edildi"}))}).subscribe();_(H);const ee=setInterval(async()=>{const te=await Z.getP2POrderStatus(K);if(te&&te.status==="MATCHED"){const X=te.matched_order_id?await Z.getP2POrderStatus(te.matched_order_id):null,se=(X==null?void 0:X.amount_usd)||te.amount_usd;u(!1),o({id:K,amount:se*P,amountUsd:se,sellerIBAN:te.seller_iban||"N/A",sellerName:te.seller_account_name||"Satc",sellerBank:te.seller_bank_name||"Banka"}),w(null),clearInterval(ee),C.removeChannel(H),_(null)}else((te==null?void 0:te.status)==="EXPIRED"||(te==null?void 0:te.status)==="CANCELLED")&&(clearInterval(ee),C.removeChannel(H),_(null),alert("Sipari sresi doldu veya iptal edildi"))},15e3);setTimeout(()=>{clearInterval(ee),C.removeChannel(H),_(null),b&&O({isOpen:!0,type:"warning",title:"Eleme Bulunamad",message:"Eleme bulunamad. Ltfen daha sonra tekrar deneyin."})},10*60*1e3)},le=async K=>{var H,ee,te;I(!1),s(K.toString()),j(!0),console.log("[DEPOSIT] User selected suggestion:",K);try{const X=await Z.createP2POrderNew("BUY",K);if(X.success&&X.order){const se=X.order.id;w(se);const ue=await Z.matchP2POrder(se);ue!=null&&ue.success&&(ue!=null&&ue.match)?(o({id:ue.match.matchedOrderId,amount:K*P,amountUsd:K,sellerIBAN:((H=ue.match.counterparty)==null?void 0:H.iban)||"N/A",sellerName:((ee=ue.match.counterparty)==null?void 0:ee.account_name)||"Satc",sellerBank:((te=ue.match.counterparty)==null?void 0:te.bank_name)||"Banka",timeRemaining:ue.match.lock_expires_at}),w(null)):M(se)}else O({isOpen:!0,type:"error",title:"Hata",message:"stek oluturulamad"})}catch(X){console.error("Suggestion select error:",X),O({isOpen:!0,type:"error",title:"Hata",message:X.message||"Balant hatas"})}j(!1)},U=async()=>{a&&await Z.lockMatch(),t("/deposit/confirm",{state:{amount:(a==null?void 0:a.amountUsd)||parseFloat(r),matchId:a==null?void 0:a.id,orderId:b,matchedInvestorEmail:a==null?void 0:a.userId,bankAccount:h,matchDetails:a}})};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display pb-20",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[n.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Para Yatr"})]}),n.jsx("div",{className:"p-4 space-y-6",children:v?n.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center",children:[n.jsx("div",{className:"w-24 h-24 rounded-full bg-amber-500/20 flex items-center justify-center mb-6",children:n.jsx("span",{className:"material-symbols-outlined text-5xl text-amber-400",children:"pending"})}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Bekleyen leminiz Var"}),n.jsxs("p",{className:"text-gray-400 mb-6 max-w-xs",children:["Aktif bir ",v.type==="SELL"?"sat":"al"," emriniz bulunuyor. Yeni ilem oluturmak iin nce mevcut ilemi tamamlamanz veya iptal etmeniz gerekiyor."]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 w-full max-w-xs mb-6 shadow-lg",children:[n.jsxs("div",{className:"flex justify-between mb-2",children:[n.jsx("span",{className:"text-gray-500",children:"lem Tipi:"}),n.jsx("span",{className:`font-bold ${v.type==="SELL"?"text-red-500":"text-emerald-500"}`,children:v.type==="SELL"?"ekim (Sat)":"Yatrm (Al)"})]}),n.jsxs("div",{className:"flex justify-between mb-2",children:[n.jsx("span",{className:"text-gray-500",children:"Miktar:"}),n.jsxs("span",{className:"text-gray-900 font-bold",children:["$",v.amount_usd," USDT"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Durum:"}),n.jsx("span",{className:"text-amber-500 font-bold",children:v.status})]})]}),n.jsxs("div",{className:"space-y-3 w-full max-w-xs",children:[n.jsx("button",{onClick:Q,disabled:y||v.status==="PAID",className:"w-full bg-red-500/20 hover:bg-red-500/30 text-red-400 py-3 rounded-xl font-bold transition-colors disabled:opacity-50",children:y?"ptal Ediliyor...":v.status==="PAID"?"deme Yapld - ptal Edilemez":"lemi ptal Et"}),n.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-white/10 hover:bg-white/20 text-white py-3 rounded-xl font-bold transition-colors",children:"Dashboard'a Dn"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 flex gap-3 shadow-lg",children:[n.jsx("span",{className:"material-symbols-outlined text-emerald-500 shrink-0",children:"info"}),n.jsx("div",{children:n.jsxs("p",{className:"text-sm text-gray-600",children:[n.jsx("span",{className:"font-bold text-gray-900",children:"Dekont Ykleme stee Bal:"})," Dekont yklerseniz ilem 20 dakika iinde otomatik onaylanr."]})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-sm font-bold text-emerald-300",children:"Banka Hesabnz"}),n.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"text-xs text-lime-400 font-bold hover:underline flex items-center gap-1",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Yeni Ekle"]})]}),y?n.jsx("div",{className:"bg-white rounded-xl p-4 shadow animate-pulse",children:n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"})}):x.length===0?n.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"w-full bg-white rounded-xl p-4 border-2 border-dashed border-gray-300 hover:border-emerald-500 transition-colors text-center shadow",children:[n.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-3xl mb-2",children:"add_card"}),n.jsx("p",{className:"text-gray-900 font-bold",children:"Banka Hesab Ekle"}),n.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Para yatrmak iin bir banka hesab eklemelisiniz"})]}):n.jsx("div",{className:"space-y-2",children:x.map(K=>n.jsxs("button",{onClick:()=>m(K),className:`w-full p-4 rounded-xl transition-all text-left flex items-center gap-3 shadow ${(h==null?void 0:h.id)===K.id?"bg-emerald-50 border-2 border-emerald-500":"bg-white border border-gray-200 hover:border-emerald-300"}`,children:[n.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${(h==null?void 0:h.id)===K.id?"bg-emerald-100 text-emerald-600":"bg-blue-100 text-blue-500"}`,children:n.jsx("span",{className:"material-symbols-outlined",children:"account_balance"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-gray-900 font-bold truncate",children:K.bankName}),n.jsx("p",{className:"text-gray-500 text-xs font-mono truncate",children:K.iban})]}),(h==null?void 0:h.id)===K.id&&n.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]},K.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-emerald-300 mb-2",children:"Yatrlacak Tutar (USDT)"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-bold text-gray-400",children:"$"}),n.jsx("input",{className:"w-full pl-10 pr-4 py-3.5 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none bg-white text-gray-900 font-bold text-xl placeholder:text-gray-400 shadow",type:"number",placeholder:"0.00",value:r,onChange:K=>s(K.target.value)})]}),n.jsxs("p",{className:"text-xs text-emerald-200 mt-2",children:["Minimum: 10 USDT  deyeceiniz: ",(parseFloat(r||"0")*P).toLocaleString()," TL"]})]}),n.jsx("div",{className:"flex gap-2",children:[100,500,1e3,5e3].map(K=>n.jsxs("button",{onClick:()=>s(K.toString()),className:"flex-1 py-2 rounded-lg bg-white border border-gray-200 text-gray-700 font-bold text-sm hover:border-emerald-500 hover:text-emerald-600 transition-colors shadow-sm",children:["$",K]},K))}),b&&!a&&n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-2xl p-6 mt-4 text-center",children:[n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),n.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"En Uygun Eleme Aranyor..."}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Size uygun satcy aryoruz"})]}),a?n.jsxs("div",{className:"bg-[#1a1a1a] p-6 rounded-2xl border border-lime-500/30 text-center animate-fade-in mt-4",children:[n.jsxs("div",{className:"w-16 h-16 rounded-full bg-lime-500/20 flex items-center justify-center mx-auto mb-4 relative",children:[n.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl",children:"task_alt"}),n.jsx("div",{className:"absolute inset-0 rounded-full border border-lime-500/30 animate-ping"})]}),n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Uygun Eleme Bulundu!"}),n.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Yatrm tutarnz iin uygun bir satc bulundu."}),n.jsxs("div",{className:"bg-black/30 p-4 rounded-2xl mb-6 border border-white/5",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-gray-500 text-xs",children:"A"}),n.jsx("span",{className:"text-white text-xs font-bold",children:"P2P Secure"})]}),n.jsx("div",{className:"border-t border-white/5 my-2"}),n.jsx("p",{className:"text-xs text-gray-500 mb-1 mt-2",children:"lem Tutar"}),n.jsxs("p",{className:"text-3xl font-bold text-white tracking-tight",children:["",(ce=a.amount)==null?void 0:ce.toLocaleString()]}),n.jsxs("p",{className:"text-xs text-lime-500 mt-1 font-mono",children:[" ",((J=a.amountUsd)==null?void 0:J.toLocaleString())||parseFloat(r).toLocaleString()," USDT"]})]}),n.jsx("button",{onClick:U,className:"w-full bg-lime-500 hover:bg-lime-400 text-black font-bold py-4 rounded-xl text-lg transition-all shadow-lg shadow-lime-500/20 active:scale-95",children:"lemi Onayla & Bilgileri Gr"}),n.jsx("p",{className:"text-[10px] text-gray-500 mt-3",children:"lemi onayladnzda deme bilgileri gsterilecek ve 30 dakika sre balayacaktr."})]}):!b&&n.jsx("button",{onClick:G,disabled:!h||!r||y,className:"w-full bg-lime-500 hover:bg-lime-400 active:scale-[0.98] transition-all text-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-lime-500/20 mt-4 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Ykleniyor...":"Eleme Bul"})]})}),n.jsx(Hu,{isOpen:A.isOpen,type:A.type,title:A.title,message:A.message,onClose:()=>O({...A,isOpen:!1})}),z&&n.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>I(!1)}),n.jsxs("div",{className:"relative bg-[#1a1a1a] border border-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-scale-in",children:[n.jsx("div",{className:"w-16 h-16 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"material-symbols-outlined text-4xl text-amber-400",children:"search"})}),n.jsx("h2",{className:"text-white text-xl font-bold text-center mb-2",children:"Eleme Bulunamad"}),n.jsxs("p",{className:"text-gray-400 text-center text-sm mb-4",children:["$",r," tutarnda ekim talebi yok. En yakn bekleyen tutarlar seebilirsiniz:"]}),n.jsx("div",{className:"space-y-2 mb-6",children:W.map((K,H)=>n.jsxs("button",{onClick:()=>le(K.amount_usd),className:"w-full py-3 px-4 rounded-xl bg-[#252525] border border-white/10 hover:border-lime-500/50 hover:bg-lime-500/10 transition-all flex justify-between items-center",children:[n.jsxs("span",{className:"text-white font-bold",children:["$",K.amount_usd.toLocaleString()]}),n.jsxs("span",{className:"text-gray-500 text-sm",children:[" ",(K.amount_usd*P).toLocaleString()," TL"]})]},K.id||H))}),n.jsx("button",{onClick:()=>I(!1),className:"w-full py-3 rounded-xl border border-gray-600 text-gray-400 font-semibold hover:bg-white/5 transition-all",children:"ptal"})]})]})]})},Ak=()=>{var F;const t=we(),{state:e}=On(),{user:r}=it(),[s,a]=N.useState(1200),[o,c]=N.useState({name:"",bankAccount:null}),[u,h]=N.useState(null),[m,x]=N.useState(!1),[g,y]=N.useState(32.5),[j,b]=N.useState(!1),w=1200;N.useEffect(()=>{const q=setInterval(()=>{a($=>$<=1?(E(),0):$-1)},1e3);return()=>clearInterval(q)},[]);const E=async()=>{const q=(e==null?void 0:e.orderId)||(e==null?void 0:e.matchId);q?(console.log("[TIMEOUT] Order expired, cancelling:",q),await Z.cancelP2POrder(q),b(!0)):t("/dashboard")};N.useEffect(()=>{(async()=>{const $=await Z.getExchangeRate();$!=null&&$.buy_rate&&y($.buy_rate)})()},[]),N.useEffect(()=>{(async()=>{if(e!=null&&e.matchDetails)c({name:e.matchDetails.sellerName,bankAccount:{id:"temp_p2p",bankName:e.matchDetails.sellerBank,iban:e.matchDetails.sellerIBAN}});else if(e!=null&&e.matchedInvestorEmail){const $=await Z.getUser(e.matchedInvestorEmail),Q=await Z.getBankAccounts(e.matchedInvestorEmail);c({name:($==null?void 0:$.name)||"Unknown",bankAccount:Q[0]||null})}})()},[e]);const v=(q=>{const $=Math.floor(q/60),Q=q%60;return{m:$.toString().padStart(2,"0"),s:Q.toString().padStart(2,"0")}})(s),S=s/w*100,P=2*Math.PI*54,R=P-S/100*P,A=q=>{q.target.files&&q.target.files[0]&&h(q.target.files[0])},O=async()=>{const q=(e==null?void 0:e.orderId)||(e==null?void 0:e.matchId);if(u&&q)try{const{data:{user:$}}=await C.auth.getUser();if($){const Q=`${$.id}/dekont_${q}_${Date.now()}.${u.name.split(".").pop()}`,{error:G}=await C.storage.from("verification-docs").upload(Q,u);if(!G){const{data:M}=await C.from("verification_submissions").insert({user_id:$.id,user_email:r==null?void 0:r.email,user_name:r==null?void 0:r.name,submission_type:"deposit",document_url:Q,amount:(e==null?void 0:e.amount)||0,status:"pending"}).select().single();M&&await C.functions.invoke("send-telegram-verification",{body:{submission_id:M.id,submission_type:"deposit",user_email:r==null?void 0:r.email,user_name:r==null?void 0:r.name,document_url:Q,amount:(e==null?void 0:e.amount)||0}})}}}catch($){console.error("Dekont upload error:",$)}if(q){const $=await Z.markP2PPaid(q);$!=null&&$.success?x(!0):alert("Hata: "+(($==null?void 0:$.error)||"lem baarsz"))}else await Z.markPaymentSent((r==null?void 0:r.email)||"",e==null?void 0:e.matchId,e==null?void 0:e.amount,!0),x(!0)},z=()=>{x(!1),t("/dashboard")},I=(e==null?void 0:e.amount)||1e3,W=(I*g).toLocaleString("tr-TR",{minimumFractionDigits:0,maximumFractionDigits:0});return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsx(Y0,{isOpen:m,onClose:z,title:"deme Bildiriminiz Alnd!",message:"deme bildiriminiz baaryla iletildi. Satc onayladnda bakiyeniz hesabnza geecektir."}),n.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[n.jsx("button",{onClick:()=>t("/deposit"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"deme Onay"})]}),n.jsxs("div",{className:"p-4 pb-10",children:[n.jsx("div",{className:"text-center mb-6 mt-2",children:n.jsxs("h2",{className:"text-2xl font-extrabold text-white leading-tight",children:["Yatrmnz",n.jsx("br",{}),"Rezerve Edildi!"]})}),n.jsx("div",{className:"flex justify-center mb-8",children:n.jsxs("div",{className:"relative w-36 h-36",children:[n.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 120 120",children:[n.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#1a1a1a",strokeWidth:"8"}),n.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"url(#gradient)",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:P,strokeDashoffset:R,className:"transition-all duration-1000 ease-linear"}),n.jsx("defs",{children:n.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[n.jsx("stop",{offset:"0%",stopColor:"#10b981"}),n.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]}),n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[n.jsxs("span",{className:"text-3xl font-bold text-white tracking-tight",children:[v.m,":",v.s]}),n.jsx("span",{className:"text-xs text-gray-500 font-medium mt-1",children:"kald"})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg mb-6",children:[n.jsx("p",{className:"text-gray-500 font-medium text-sm mb-1",children:"Yatrlacak Tutar"}),n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsxs("h3",{className:"text-2xl font-extrabold text-gray-900",children:["",W," TRY"]}),n.jsxs("span",{className:"text-gray-500 font-medium",children:["($",I.toLocaleString()," USD)"]})]})]}),n.jsx("h3",{className:"font-bold text-white mb-3 px-1",children:"Banka Transfer Bilgileri"}),o.bankAccount?n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg divide-y divide-gray-100 mb-6",children:[n.jsxs("div",{className:"p-4",children:[n.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-1",children:"Alc Ad Soyad"}),n.jsx("p",{className:"font-bold text-gray-900 text-lg",children:o.name})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-1",children:"Banka"}),n.jsx("p",{className:"font-bold text-gray-900 text-base",children:o.bankAccount.bankName})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-1",children:"IBAN"}),n.jsx("p",{className:"font-bold text-emerald-600 text-base font-mono tracking-tight text-wrap break-all",children:(F=o.bankAccount.iban.match(/.{1,4}/g))==null?void 0:F.join(" ")})]})]}):n.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6 text-center",children:n.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 mb-2"}),n.jsx("p",{className:"text-gray-500",children:"Satc bilgileri ykleniyor..."})]})}),n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-3",children:n.jsxs("p",{className:"text-amber-700 text-xs flex items-start gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-sm shrink-0",children:"info"}),"Olas ikayetlerde kant olarak kullanlmak zere dekont yklemenizi neririz. Yklemek zorunlu deildir."]})}),n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-6 flex flex-col items-center relative bg-white hover:border-emerald-400 transition-colors",children:[n.jsx("input",{type:"file",accept:"image/*,application/pdf",capture:"environment",onChange:A,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),n.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-3 ${u?"bg-emerald-100":"bg-gray-100"}`,children:n.jsx("span",{className:`material-symbols-outlined text-2xl ${u?"text-emerald-500":"text-gray-400"}`,children:u?"check_circle":"upload_file"})}),n.jsx("p",{className:"text-gray-600 font-medium text-sm text-center",children:u?`Seildi: ${u.name}`:"Dekont Ykle (stee Bal)"}),u&&n.jsx("button",{onClick:q=>{q.stopPropagation(),h(null)},className:"mt-2 text-xs text-red-500 hover:underline",children:"Kaldr"})]})]}),n.jsx("button",{onClick:O,className:"w-full bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white py-4 rounded-2xl font-bold text-lg shadow-xl shadow-emerald-500/30 transition-all",children:"demeyi Gnderdim"})]}),n.jsx(Hu,{isOpen:j,type:"warning",title:"Sre Doldu!",message:"lem sresi doldu ve iptal edildi. Ltfen yeni bir ilem balatn.",onClose:()=>{b(!1),t("/dashboard")}})]})},Ok=()=>{var K;const t=we(),{user:e,refreshUser:r}=it(),[s,a]=N.useState(""),[o,c]=N.useState(!1),[u,h]=N.useState(1),[m,x]=N.useState(null),[g,y]=N.useState(null),[j,b]=N.useState(!1),[w,E]=N.useState(null),[_,v]=N.useState([]),[S,P]=N.useState(null),[R,A]=N.useState(!0),[O,z]=N.useState(null),[I,W]=N.useState(32),[F,q]=N.useState({isOpen:!1,type:"info",title:"",message:""});N.useEffect(()=>{$(),Q()},[]),N.useEffect(()=>{e!=null&&e.email&&M()},[e==null?void 0:e.email]),N.useEffect(()=>()=>{w&&clearInterval(w)},[w]);const $=async()=>{const H=await Z.getActiveP2POrder();H&&z(H)},Q=async()=>{const H=await Z.getExchangeRate();H!=null&&H.sell_rate&&W(H.sell_rate)},G=async()=>{if(!O)return;b(!0);const H=await Z.cancelP2POrder(O.id);H.success?(z(null),q({isOpen:!0,type:"success",title:"ptal Edildi",message:"lem iptal edildi"})):q({isOpen:!0,type:"error",title:"Hata",message:"ptal hatas: "+H.error}),b(!1)},M=async()=>{if(e!=null&&e.email){A(!0);try{const H=await Z.getBankAccounts(e.email);v(H||[]),H&&H.length>0&&!S&&P(H[0])}catch(H){console.error("Failed to load bank accounts:",H)}A(!1)}},le=()=>{if(!s||parseFloat(s)<10){q({isOpen:!0,type:"warning",title:"Minimum Tutar",message:"Minimum 10 USDT"});return}if(parseFloat(s)>((e==null?void 0:e.balance)||0)){q({isOpen:!0,type:"error",title:"Yetersiz Bakiye",message:"Yetersiz bakiye"});return}if(o)U();else{if(!S){q({isOpen:!0,type:"warning",title:"Banka Sein",message:"Ltfen bir banka hesab sein"});return}ce()}},U=async()=>{b(!0);try{if(!e)return;const{data:H,error:ee}=await C.functions.invoke("withdraw-request",{body:{amount:parseFloat(s),asset:"TRY"}});ee?q({isOpen:!0,type:"error",title:"Hata",message:ee.message||"Hata olutu"}):H!=null&&H.success?(q({isOpen:!0,type:"success",title:"Baarl",message:"ekim talebiniz oluturuldu. Onay bekliyor."}),r(),t("/dashboard")):q({isOpen:!0,type:"error",title:"Hata",message:(H==null?void 0:H.error)||"Hata olutu"})}catch(H){q({isOpen:!0,type:"error",title:"Hata",message:H.message||"Hata olutu"})}b(!1)},ce=async()=>{var H;if(S){b(!0);try{const ee=await Z.createP2POrderNew("SELL",parseFloat(s),S.iban,S.bankName,S.accountName);if(ee.success&&ee.order){const te=ee.order.id;x(te),h(2);const X=await Z.matchP2POrder(te);X.success&&X.match?y({tradeId:X.match.matchedOrderId,buyer:(H=X.match.counterparty)==null?void 0:H.email,amount:ee.order.amount_usd,fiatAmount:ee.order.amount_usd*I,status:"MATCHED"}):J(te)}else q({isOpen:!0,type:"error",title:"Hata",message:"Hata: "+(ee.error||"stek oluturulamad")})}catch(ee){q({isOpen:!0,type:"error",title:"Balant Hatas",message:ee.message||"Balant hatas"})}b(!1)}},J=H=>{const ee=C.channel(`withdraw-order-${H}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"p2p_orders",filter:`id=eq.${H}`},X=>{console.log("[REALTIME] Withdraw order updated:",X.new);const se=X.new;se.status==="MATCHED"?(y({tradeId:H,buyer:"Eleme bulundu",amount:se.amount_usd,fiatAmount:se.amount_usd*I,status:"MATCHED"}),C.removeChannel(ee),E(null)):(se.status==="EXPIRED"||se.status==="CANCELLED")&&(C.removeChannel(ee),E(null),q({isOpen:!0,type:"warning",title:"Sre Doldu",message:"Sipari sresi doldu veya iptal edildi"}),t("/dashboard"))}).subscribe();E(ee);const te=setInterval(async()=>{const X=await Z.getP2POrderStatus(H);X&&X.status==="MATCHED"?(y({tradeId:H,buyer:"Eleme bulundu",amount:X.amount_usd,fiatAmount:X.amount_usd*I,status:"MATCHED"}),clearInterval(te),C.removeChannel(ee),E(null)):((X==null?void 0:X.status)==="EXPIRED"||(X==null?void 0:X.status)==="CANCELLED")&&(clearInterval(te),C.removeChannel(ee),E(null),alert("Sipari sresi doldu veya iptal edildi"),t("/dashboard"))},15e3)};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display pb-20",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[n.jsx("button",{onClick:()=>u>1?h(1):t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:u===1?"ekim":"lem Durumu"})]}),n.jsxs("div",{className:"p-4 space-y-6",children:[O?n.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center",children:[n.jsx("div",{className:"w-24 h-24 rounded-full bg-amber-500/20 flex items-center justify-center mb-6",children:n.jsx("span",{className:"material-symbols-outlined text-5xl text-amber-400",children:"pending"})}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Bekleyen leminiz Var"}),n.jsxs("p",{className:"text-gray-400 mb-6 max-w-xs",children:["Aktif bir ",O.type==="SELL"?"sat":"al"," emriniz bulunuyor. Yeni ilem oluturmak iin nce mevcut ilemi tamamlamanz veya iptal etmeniz gerekiyor."]}),n.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 w-full max-w-xs mb-6",children:[n.jsxs("div",{className:"flex justify-between mb-2",children:[n.jsx("span",{className:"text-gray-500",children:"lem Tipi:"}),n.jsx("span",{className:`font-bold ${O.type==="SELL"?"text-red-400":"text-green-400"}`,children:O.type==="SELL"?"ekim (Sat)":"Yatrm (Al)"})]}),n.jsxs("div",{className:"flex justify-between mb-2",children:[n.jsx("span",{className:"text-gray-500",children:"Miktar:"}),n.jsxs("span",{className:"text-white font-bold",children:["$",O.amount_usd," USDT"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Durum:"}),n.jsx("span",{className:"text-amber-400 font-bold",children:O.status})]})]}),n.jsxs("div",{className:"space-y-3 w-full max-w-xs",children:[n.jsx("button",{onClick:G,disabled:j||O.status==="PAID",className:"w-full bg-red-500/20 hover:bg-red-500/30 text-red-400 py-3 rounded-xl font-bold transition-colors disabled:opacity-50",children:j?"ptal Ediliyor...":O.status==="PAID"?"deme Yapld - ptal Edilemez":"lemi ptal Et"}),n.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-white/10 hover:bg-white/20 text-white py-3 rounded-xl font-bold transition-colors",children:"Dashboard'a Dn"})]})]}):u===1&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[n.jsx("p",{className:"text-gray-500 font-medium text-sm mb-1",children:"Mevcut Bakiye"}),n.jsxs("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:[e==null?void 0:e.balance.toFixed(2)," ",n.jsx("span",{className:"text-xl font-bold text-gray-400",children:"NUSD"})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-sm font-bold text-emerald-300",children:"deme Alacanz Hesap"}),n.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"text-xs text-lime-400 font-bold hover:underline flex items-center gap-1",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Yeni Ekle"]})]}),R?n.jsx("div",{className:"bg-white rounded-xl p-4 shadow animate-pulse",children:n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"})}):_.length===0?n.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"w-full bg-white rounded-xl p-4 border-2 border-dashed border-gray-300 hover:border-emerald-500 transition-colors text-center shadow",children:[n.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-3xl mb-2",children:"add_card"}),n.jsx("p",{className:"text-gray-900 font-bold",children:"Banka Hesab Ekle"}),n.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"ekim yapmak iin bir banka hesab eklemelisiniz"})]}):n.jsx("div",{className:"space-y-2",children:_.map(H=>n.jsxs("button",{onClick:()=>P(H),className:`w-full p-4 rounded-xl transition-all text-left flex items-center gap-3 shadow ${(S==null?void 0:S.id)===H.id?"bg-emerald-50 border-2 border-emerald-500":"bg-white border border-gray-200 hover:border-emerald-300"}`,children:[n.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${(S==null?void 0:S.id)===H.id?"bg-emerald-100 text-emerald-600":"bg-blue-100 text-blue-500"}`,children:n.jsx("span",{className:"material-symbols-outlined",children:"account_balance"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-gray-900",children:H.bankName}),n.jsx("p",{className:"text-xs text-gray-500 font-mono",children:H.iban})]}),(S==null?void 0:S.id)===H.id&&n.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]},H.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-emerald-300 mb-2",children:"ekim Tutar (USDT)"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-bold text-gray-400",children:"$"}),n.jsx("input",{className:"w-full pl-10 pr-4 py-4 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none bg-white text-gray-900 font-bold text-lg placeholder:text-gray-400 shadow",type:"number",value:s,onChange:H=>a(H.target.value),placeholder:"0.00"})]}),n.jsxs("p",{className:"text-xs text-emerald-200 mt-2",children:["Minimum: 10 USDT  Alacanz: ",(parseFloat(s||"0")*I).toLocaleString()," TL"]})]}),n.jsx("div",{className:"flex gap-2",children:[50,100,500,1e3].map(H=>n.jsxs("button",{onClick:()=>a(H.toString()),className:"flex-1 py-2 rounded-lg bg-white border border-gray-200 text-gray-700 font-bold text-sm hover:border-emerald-500 hover:text-emerald-600 transition-colors shadow-sm",children:["$",H]},H))}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("button",{onClick:()=>c(!1),className:`p-4 rounded-2xl border-2 text-left transition-all shadow ${o?"bg-white border-gray-200 hover:border-emerald-300":"bg-emerald-50 border-emerald-500"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h3",{className:`font-bold text-lg ${o?"text-gray-900":"text-emerald-600"}`,children:"Standart"}),!o&&n.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]}),n.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"P2P Eleme"}),n.jsx("p",{className:"text-xs text-emerald-500 font-bold mt-1",children:"%0 Komisyon"})]}),n.jsxs("button",{onClick:()=>c(!0),className:`p-4 rounded-2xl border-2 text-left transition-all shadow ${o?"bg-emerald-50 border-emerald-500":"bg-white border-gray-200 hover:border-emerald-300"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h3",{className:`font-bold text-lg ${o?"text-emerald-600":"text-gray-900"}`,children:"Hzl"}),o&&n.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]}),n.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Sistem deme"}),n.jsx("p",{className:"text-xs text-red-500 font-bold mt-1",children:"%2 Komisyon"})]})]}),n.jsx("button",{onClick:le,disabled:j||!o&&!S,className:"w-full bg-lime-500 hover:bg-lime-400 disabled:opacity-50 active:scale-[0.98] transition-all text-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-lime-500/20",children:j?"leniyor...":"ekim Yap"})]}),u===2&&n.jsx("div",{className:"text-center py-8",children:g?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-20 h-20 rounded-full bg-lime-500/20 flex items-center justify-center mx-auto mb-6",children:n.jsx("span",{className:"material-symbols-outlined text-5xl text-lime-400",children:"check_circle"})}),n.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Eleme Bulundu!"}),n.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Alc demeyi yaptnda bakiyenizden dlecek."}),n.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 text-left space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Sat Tutar"}),n.jsxs("span",{className:"font-bold text-lime-400",children:[g.amount," USDT"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Alacanz"}),n.jsxs("span",{className:"font-bold text-white",children:[(K=g.fiatAmount)==null?void 0:K.toLocaleString()," TL"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Durum"}),n.jsx("span",{className:"text-amber-400 font-bold",children:g.status||"deme Bekleniyor"})]})]}),n.jsx("button",{onClick:()=>t("/dashboard"),className:"mt-6 w-full bg-white/10 hover:bg-white/20 text-white py-3 rounded-xl font-bold",children:"Dashboard'a Dn"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-20 h-20 border-4 border-lime-500/30 border-t-lime-500 rounded-full animate-spin mx-auto mb-6"}),n.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Alc Bekleniyor"}),n.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Sizin iin uygun bir alc aranyor..."}),n.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 text-left space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Sat Tutar"}),n.jsxs("span",{className:"font-bold text-white",children:[s," USDT"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Hesap"}),n.jsx("span",{className:"text-xs text-gray-400",children:S==null?void 0:S.bankName})]})]})]})})]}),n.jsx(Hu,{isOpen:F.isOpen,type:F.type,title:F.title,message:F.message,onClose:()=>q({...F,isOpen:!1})})]})},Lk=()=>{const t=we(),{user:e,refreshUser:r}=it(),[s,a]=N.useState(""),[o,c]=N.useState(""),[u,h]=N.useState("Tron (TRC20)"),[m,x]=N.useState(!1),[g,y]=N.useState(null),[j,b]=N.useState(!0),[w,E]=N.useState(!1),[_,v]=N.useState(!1),[S,P]=N.useState(0),[R,A]=N.useState("");N.useEffect(()=>{(async()=>{try{const{data:{user:M}}=await C.auth.getUser();if(!M)return;const{data:le}=await C.from("transactions").select("id, amount, created_at, network").eq("user_id",M.id).eq("type","WITHDRAW").eq("status","PENDING").limit(1);le&&le.length>0&&y(le[0])}catch(M){console.error("Check pending error:",M)}b(!1)})()},[]);const O=async()=>{if(g){E(!0);try{const{data:G,error:M}=await C.functions.invoke("cancel-withdrawal",{body:{transactionId:g.id}});M?alert(M.message||"ptal baarsz"):G!=null&&G.success?(alert(" ekim talebi iptal edildi. Bakiyeniz iade edildi."),y(null),r()):alert((G==null?void 0:G.error)||"ptal baarsz")}catch(G){alert(G.message||"ptal baarsz")}E(!1)}},z=o.toUpperCase().startsWith("NUSD-"),I=z?0:1,W=parseFloat(s)||0,F=W>I?W-I:0,q=o.length>5&&W>=10,$=()=>{e&&a(e.balance.toString())},Q=async()=>{if(q){x(!0);try{if(z){const{data:G,error:M}=await C.functions.invoke("internal-transfer",{body:{amount:W,recipient_code:o.toUpperCase()}});M?alert(M.message||"Transfer failed"):G!=null&&G.success?(P(W),A(o.toUpperCase()),v(!0),r()):alert((G==null?void 0:G.error)||"Transfer failed")}else{const{data:G,error:M}=await C.functions.invoke("withdraw-request",{body:{amount:W,asset:u}});M?alert(M.message||"Withdrawal failed"):G!=null&&G.success?(alert("Withdrawal Request Submitted (Pending)"),r(),t("/dashboard")):G!=null&&G.hasPendingWithdrawal?(y(G.pendingWithdrawal),alert(G.error)):alert((G==null?void 0:G.error)||"Withdrawal failed")}}catch(G){alert(G.message||"Transfer failed")}x(!1)}};return j?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex items-center justify-center",children:n.jsx("div",{className:"text-emerald-300",children:"Ykleniyor..."})}):g?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[n.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Send USDT"})]}),n.jsx("div",{className:"p-4 flex-1 flex flex-col items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full text-center shadow-xl",children:[n.jsx("span",{className:"material-symbols-outlined text-amber-500 text-5xl mb-4",children:"pending"}),n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Bekleyen ekim Talebi"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"Zaten bir ekim talebiniz ileniyor. Yeni talep oluturmak iin mevcut talebin tamamlanmasn bekleyin veya iptal edin."}),n.jsxs("div",{className:"bg-gray-100 rounded-xl p-4 mb-4",children:[n.jsxs("p",{className:"text-2xl font-bold text-amber-500",children:["$",g.amount]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(g.created_at).toLocaleString()}),n.jsx("p",{className:"text-xs text-gray-500",children:g.network})]}),n.jsx("button",{onClick:O,disabled:w,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-xl font-bold disabled:opacity-50 mb-3 transition-colors",children:w?"ptal Ediliyor...":"Talebi ptal Et"}),n.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-gray-100 text-gray-600 py-3 rounded-xl font-bold hover:bg-gray-200 transition-colors",children:"Bekle, Geri Dn"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[n.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Send USDT"})]}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[n.jsx("p",{className:"text-gray-500 font-medium text-sm mb-1",children:"Available Balance"}),n.jsxs("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:[e==null?void 0:e.balance.toLocaleString()," ",n.jsx("span",{className:"text-xl font-bold text-gray-400",children:"USDT"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-emerald-300 mb-2",children:"Recipient Address or NUSD Code"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{className:"w-full pl-4 pr-12 py-3.5 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none bg-white text-gray-900 font-medium placeholder:text-gray-400 shadow",placeholder:"NUSD-XXXX or TAeaxx...",value:o,onChange:G=>c(G.target.value)}),n.jsx("span",{className:`material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 ${z?"text-emerald-500":"text-gray-400"}`,children:z?"bolt":"qr_code_scanner"})]}),o.length>3&&n.jsxs("div",{className:`mt-2 px-3 py-1.5 rounded-lg text-xs font-bold inline-flex items-center gap-1 ${z?"bg-emerald-100 text-emerald-600":"bg-blue-100 text-blue-600"}`,children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:z?"bolt":"language"}),z?"Internal Transfer (Instant, No Fee)":"External Withdraw (Blockchain)"]})]}),!z&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-emerald-300 mb-2",children:"Network"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{className:"w-full px-4 py-3.5 rounded-xl border border-gray-200 focus:border-emerald-500 transition-all outline-none bg-white text-gray-900 font-medium appearance-none shadow",value:u,onChange:G=>h(G.target.value),children:[n.jsx("option",{children:"Tron (TRC20)"}),n.jsx("option",{children:"Ethereum (ERC20)"}),n.jsx("option",{children:"BSC (BEP20)"})]}),n.jsx("span",{className:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:"expand_more"})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-2",children:[n.jsx("label",{className:"block text-sm font-bold text-emerald-300",children:"Amount"}),n.jsx("button",{onClick:$,className:"text-lime-400 text-xs font-bold hover:text-lime-300",children:"MAX"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{className:"w-full pl-4 pr-16 py-3.5 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none bg-white text-gray-900 font-bold text-lg placeholder:text-gray-400 shadow",type:"number",placeholder:"Min 10.00",value:s,onChange:G=>a(G.target.value)}),n.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 font-bold text-gray-400",children:"USDT"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-500",children:"Fee"}),n.jsx("span",{className:`font-bold ${z?"text-emerald-500":"text-gray-900"}`,children:z?"FREE":`${I.toFixed(2)} USDT`})]}),n.jsxs("div",{className:"flex justify-between text-base border-t border-gray-100 pt-2 mt-2",children:[n.jsx("span",{className:"font-bold text-gray-900",children:"Receive Amount"}),n.jsxs("span",{className:"font-bold text-emerald-500",children:[(z?W:F).toFixed(2)," USDT"]})]})]}),n.jsx("button",{onClick:Q,disabled:!q||m,className:`w-full py-4 rounded-xl font-bold text-lg shadow-xl transition-all ${q&&!m?"bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white shadow-emerald-500/20":"bg-gray-300 text-gray-500 cursor-not-allowed shadow-none"}`,children:m?"Processing...":z?" Send Instantly":"Confirm Withdrawal"})]}),_&&n.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),n.jsxs("div",{className:"relative bg-white rounded-3xl p-8 w-full max-w-sm shadow-2xl animate-scale-in text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx("span",{className:"material-symbols-outlined text-5xl text-emerald-500",children:"check_circle"})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transfer Baarl!"}),n.jsxs("div",{className:"bg-gray-100 rounded-xl p-4 mb-4",children:[n.jsxs("p",{className:"text-3xl font-extrabold text-emerald-500",children:[S.toLocaleString()," USDT"]}),n.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"gnderildi"})]}),n.jsxs("div",{className:"bg-emerald-50 rounded-lg px-4 py-3 mb-6",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Alc"}),n.jsx("p",{className:"font-mono text-emerald-600 font-bold",children:R})]}),n.jsx("button",{onClick:()=>{v(!1),t("/dashboard")},className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white py-4 rounded-xl font-bold text-lg transition-all",children:"Tamam"})]})]})]})},Rk=()=>{const t=we(),{user:e,refreshUser:r}=it(),[s,a]=N.useState("TRC20"),[o,c]=N.useState(null),[u,h]=N.useState(""),[m,x]=N.useState(""),[g,y]=N.useState(!1),[j,b]=N.useState(!1),w="TAeaxxAUqqpdKJmvg9JPHajTNQLRfwdJ3F",E=(e==null?void 0:e.nusd_code)||(()=>{if(!(e!=null&&e.email))return"NUSD-XXXX";const S=e.email.split("").reduce((R,A)=>(R<<5)-R+A.charCodeAt(0),0);return`NUSD-${Math.abs(S).toString(36).toUpperCase().slice(0,6)}`})();N.useEffect(()=>{r==null||r()},[]);const _=(S,P)=>{navigator.clipboard.writeText(S),c(P),setTimeout(()=>c(null),2e3)},v=async S=>{if(S.preventDefault(),!u||parseFloat(u)<10){alert("Minimum deposit is 10 USDT");return}y(!0);try{const{data:P,error:R}=await C.functions.invoke("deposit-request",{body:{amount:parseFloat(u),asset:s,tx_hash:m||null}});R?alert(R.message||"Failed to submit deposit notification"):P!=null&&P.success?b(!0):alert((P==null?void 0:P.error)||"Failed to submit deposit notification")}catch{alert("Connection error")}y(!1)};return j?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[n.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Deposit USDT"})]}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl text-center max-w-sm",children:[n.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-3xl",children:"check_circle"})}),n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Deposit Submitted!"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"Your deposit notification has been submitted. An admin will verify and approve it shortly."}),n.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white py-3 rounded-xl font-bold transition-colors",children:"Back to Dashboard"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[n.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Deposit USDT"})]}),n.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-emerald-300 mb-2 text-sm",children:"Select Network"}),n.jsx("div",{className:"grid grid-cols-3 gap-2 bg-white p-1 rounded-xl shadow",children:["TRC20","ERC20","BEP20"].map(S=>n.jsx("button",{onClick:()=>a(S),className:`py-2 rounded-lg text-sm font-bold transition-all ${s===S?"bg-emerald-500 text-white":"text-gray-500 hover:bg-gray-100"}`,children:S},S))})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg",children:[n.jsxs("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-2",children:["Deposit Address (",s,")"]}),n.jsxs("div",{className:"bg-gray-100 rounded-xl p-3 flex items-center justify-between cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>_(w,"address"),children:[n.jsx("p",{className:"font-mono text-gray-900 font-medium text-sm truncate mr-2",children:w}),n.jsx("span",{className:`material-symbols-outlined transition-colors ${o==="address"?"text-emerald-500":"text-emerald-600"}`,children:o==="address"?"check":"content_copy"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/20 to-teal-500/20 rounded-2xl p-4 border border-emerald-500/30",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"material-symbols-outlined text-emerald-400 text-lg",children:"tag"}),n.jsx("p",{className:"text-xs text-emerald-300 font-bold uppercase tracking-wide",children:"Your MEMO Code (Important!)"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 border border-emerald-200 shadow",onClick:()=>_(E,"memo"),children:[n.jsx("p",{className:"font-mono text-gray-900 font-bold text-lg tracking-widest",children:E}),n.jsx("span",{className:`material-symbols-outlined transition-colors ${o==="memo"?"text-emerald-500":"text-emerald-600"}`,children:o==="memo"?"check":"content_copy"})]}),n.jsx("p",{className:"text-xs text-emerald-300/80 mt-2",children:"Add this code to the MEMO/Note field when sending funds."})]}),n.jsxs("form",{onSubmit:v,className:"bg-white rounded-2xl p-4 shadow-lg space-y-4",children:[n.jsxs("h3",{className:"font-bold text-gray-700 text-sm flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-lg text-emerald-500",children:"receipt_long"}),"Notify Deposit"]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 font-bold mb-1",children:"Amount (USDT)"}),n.jsx("input",{type:"number",value:u,onChange:S=>h(S.target.value),placeholder:"0.00",min:"10",step:"0.01",required:!0,className:"w-full border border-gray-200 bg-white rounded-xl p-3 text-lg text-gray-900 font-bold focus:outline-none focus:ring-2 focus:ring-emerald-500 placeholder:text-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 font-bold mb-1",children:"Transaction Hash (Optional)"}),n.jsx("input",{type:"text",value:m,onChange:S=>x(S.target.value),placeholder:"Paste TX hash...",className:"w-full border border-gray-200 bg-white rounded-xl p-3 font-mono text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 placeholder:text-gray-400"})]}),n.jsx("button",{type:"submit",disabled:g||!u,className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white py-3 rounded-xl font-bold disabled:opacity-50 transition-colors shadow-lg shadow-emerald-500/20",children:g?"Submitting...":"Submit Deposit Notification"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 flex gap-3 shadow-lg",children:[n.jsx("span",{className:"material-symbols-outlined text-amber-500 shrink-0",children:"warning"}),n.jsxs("div",{className:"text-gray-600 text-sm",children:[n.jsx("p",{className:"font-bold mb-1 text-gray-900",children:"Important:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-500",children:[n.jsxs("li",{children:["Send only ",n.jsxs("span",{className:"font-bold text-gray-700",children:["USDT (",s,")"]})]}),n.jsxs("li",{children:["Include your ",n.jsx("span",{className:"font-bold text-gray-700",children:"MEMO code"})]}),n.jsxs("li",{children:["Minimum deposit: ",n.jsx("span",{className:"font-bold text-gray-700",children:"10.00 USDT"})]})]})]})]})]})]})},Ik=()=>{const t=we(),[e,r]=N.useState([]),[s,a]=N.useState(!0);N.useEffect(()=>{(async()=>{try{const{data:{user:m}}=await C.auth.getUser();if(console.log("[History] Current user:",m==null?void 0:m.id,m==null?void 0:m.email),!m){console.log("[History] No user found"),a(!1);return}const{data:x,error:g}=await C.from("transactions").select("*").eq("user_id",m.id).order("created_at",{ascending:!1});g&&console.error("[History] Transactions error:",g);const{data:y,error:j}=await C.from("p2p_orders").select("*").or(`buyer_id.eq.${m.id},seller_id.eq.${m.id}`).in("status",["COMPLETED"]).order("created_at",{ascending:!1});j&&console.error("[History] P2P error:",j);const b=new Set,w=(y||[]).filter(_=>{if(_.matched_order_id){const v=[_.id,_.matched_order_id].sort().join("|");if(b.has(v))return!1;b.add(v)}return!0}).map(_=>{const v=_.seller_id===m.id;return{id:_.id,type:v?"P2P_SELL":"P2P_BUY",amount:v?-_.amount_usd:_.amount_usd,status:_.status,created_at:_.created_at}}),E=[...x||[],...w].sort((_,v)=>new Date(v.created_at).getTime()-new Date(_.created_at).getTime());console.log("[History] Combined result:",{count:E.length}),r(E)}catch(m){console.error("[History] Exception:",m)}a(!1)})()},[]);const o=h=>{switch(h==null?void 0:h.toUpperCase()){case"COMPLETED":return"text-emerald-500";case"PENDING":return"text-amber-500";case"CANCELLED":return"text-red-500";default:return"text-gray-500"}},c=h=>{switch(h==null?void 0:h.toUpperCase()){case"DEPOSIT":case"P2P_BUY":return"arrow_downward";case"WITHDRAW":case"P2P_SELL":return"arrow_upward";case"TRANSFER":return"swap_horiz";default:return"receipt_long"}},u=h=>new Date(h).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[n.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"lem Gemii"})]}),n.jsx("div",{className:"p-4 space-y-3 flex-1",children:s?n.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-emerald-300",children:[n.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-lime-400 mb-4"}),n.jsx("p",{className:"font-medium",children:"Ykleniyor..."})]}):e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-emerald-300",children:[n.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"history_toggle_off"}),n.jsx("p",{className:"font-medium",children:"Henz ilem yok"})]}):e.map(h=>n.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-lg flex items-center justify-between hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${["DEPOSIT","P2P_BUY"].includes(h.type)?"bg-emerald-100 text-emerald-600":["WITHDRAW","P2P_SELL"].includes(h.type)?"bg-red-100 text-red-500":"bg-blue-100 text-blue-500"}`,children:n.jsx("span",{className:"material-symbols-outlined",children:c(h.type)})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:h.type==="DEPOSIT"?"Yatrm":h.type==="WITHDRAW"?"ekim":h.type==="TRANSFER"?"Transfer":h.type==="P2P_BUY"?"P2P Al":h.type==="P2P_SELL"?"P2P Sat":h.type}),n.jsx("p",{className:"text-gray-400 text-xs font-medium mt-0.5",children:u(h.created_at)})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`font-bold text-base ${["DEPOSIT","P2P_BUY"].includes(h.type)?"text-emerald-500":"text-gray-900"}`,children:[["DEPOSIT","P2P_BUY"].includes(h.type)?"+":["WITHDRAW","P2P_SELL"].includes(h.type)?"-":"","$",Math.abs(h.amount).toLocaleString()," ",n.jsx("span",{className:"text-xs text-gray-400 font-bold ml-0.5",children:"USD"})]}),n.jsx("p",{className:`text-xs font-medium mt-0.5 capitalize ${o(h.status)}`,children:h.status==="COMPLETED"?"Tamamland":h.status==="PENDING"?"Beklemede":h.status==="CANCELLED"?"ptal Edildi":h.status})]})]},h.id))})]})},Km=["Ziraat Bankas","Trkiye  Bankas","Garanti BBVA","Yap Kredi","Akbank"],Dk=()=>{const t=we(),{user:e}=it(),[r,s]=N.useState([]),[a,o]=N.useState(Km[0]),[c,u]=N.useState(""),[h,m]=N.useState(""),[x,g]=N.useState(!1);N.useEffect(()=>{e&&Z.getBankAccounts(e.email).then(s)},[e]);const y=async()=>{if(!e)return;if(!c.trim()||!h.trim())return alert("Ltfen tm alanlar doldurunuz");const b=c.replace(/\s/g,"").toUpperCase();if(!b.startsWith("TR")||b.length!==26)return alert("Geersiz IBAN. TR ile balamal ve 26 karakter olmal.");g(!0);const w=await Z.addBankAccount(e.email,a,b,h);w&&(s([...r,w]),u(""),m(""),alert("Banka hesab eklendi!")),g(!1)},j=async b=>{e&&confirm("Bu hesab silmek istediinizden emin misiniz?")&&(await Z.deleteBankAccount(e.email,b),s(r.filter(w=>w.id!==b)))};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsxs("div",{className:"px-5 py-4 flex items-center gap-3 sticky top-0 z-10",children:[n.jsx("button",{onClick:()=>t(-1),className:"text-white hover:bg-white/10 p-2 rounded-full transition-colors",children:n.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),n.jsx("h1",{className:"font-extrabold text-lg text-white",children:"Banka Hesaplar"})]}),n.jsxs("div",{className:"px-5 py-6 flex-1 overflow-y-auto",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-6",children:[n.jsxs("h2",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"add_circle"}),"Yeni Hesap Ekle"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"Banka"}),n.jsx("select",{value:a,onChange:b=>o(b.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none",children:Km.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"Hesap Sahibi Ad Soyad"}),n.jsx("input",{value:h,onChange:b=>m(b.target.value),placeholder:"rn: Ahmet Ylmaz",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none placeholder-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"IBAN"}),n.jsx("input",{value:c,onChange:b=>u(b.target.value),placeholder:"TR00 0000 0000 0000 0000 0000 00",maxLength:34,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 font-mono focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none placeholder-gray-400"}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"TR ile balamal, 26 karakter olmal"})]}),n.jsx("button",{onClick:y,disabled:x||!c||!h,className:"w-full bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 rounded-xl font-bold shadow-lg shadow-emerald-500/20 transition-all",children:x?"Ekleniyor...":"Hesap Ekle"})]})]}),n.jsx("h2",{className:"font-bold text-emerald-300 mb-3 px-1",children:"Kaytl Hesaplar"}),r.length===0?n.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg text-center",children:[n.jsx("span",{className:"material-symbols-outlined text-5xl text-gray-300 mb-3",children:"account_balance"}),n.jsx("p",{className:"text-gray-500 font-medium",children:"Henz banka hesab eklemediniz"})]}):n.jsx("div",{className:"space-y-3",children:r.map(b=>{var w;return n.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-lg flex items-start justify-between hover:shadow-xl transition-all",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"account_balance"}),n.jsx("h3",{className:"font-bold text-gray-900",children:b.bankName})]}),n.jsx("p",{className:"font-mono text-sm text-gray-600 bg-gray-100 px-3 py-2 rounded-lg inline-block",children:(w=b.iban.match(/.{1,4}/g))==null?void 0:w.join(" ")}),n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:b.addedAt})]}),n.jsx("button",{onClick:()=>j(b.id),className:"text-red-500 hover:bg-red-50 p-2 rounded-full transition-colors ml-2",children:n.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]},b.id)})})]})]})},ht=({icon:t,iconBg:e,label:r,sublabel:s,onClick:a,badge:o,toggle:c,toggleValue:u})=>{const{isDark:h}=tl();return n.jsxs("button",{onClick:a,className:"w-full p-4 flex items-center gap-4 transition-colors text-left hover:bg-gray-50",children:[n.jsx("div",{className:`w-10 h-10 rounded-xl ${e} flex items-center justify-center`,children:n.jsx("span",{className:"material-symbols-outlined",children:t})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-bold text-gray-900",children:r}),o&&n.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full ${o.color}`,children:o.text})]}),s&&n.jsx("p",{className:"text-xs text-gray-500",children:s})]}),c?n.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${u?"bg-emerald-500":"bg-gray-400"}`,children:n.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-transform ${u?"translate-x-5":""}`})}):n.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]})},zk=()=>{var E;const{user:t,logout:e}=it(),r=we(),{language:s,setLanguage:a,t:o}=ux(),{isDark:c,toggleTheme:u}=tl(),[h,m]=N.useState(null),[x,g]=N.useState(!1),[y,j]=N.useState("none");N.useEffect(()=>{b(),w()},[]);const b=async()=>{try{const{data:{user:_}}=await C.auth.getUser();if(!_)return;const{data:v}=await C.from("profiles").select("first_name, last_name, birth_date, profile_completed").eq("id",_.id).single(),S=(v==null?void 0:v.profile_completed)||(v==null?void 0:v.first_name)&&(v==null?void 0:v.last_name)&&(v==null?void 0:v.birth_date);m(!!S)}catch(_){console.error("Check profile error:",_),m(!1)}},w=async()=>{try{const{data:{user:_}}=await C.auth.getUser();if(!_)return;const{data:v}=await C.from("profiles").select("kyc_verified").eq("id",_.id).single();if(v!=null&&v.kyc_verified){j("approved");return}const{data:S}=await C.from("verification_submissions").select("status").eq("user_id",_.id).eq("submission_type","kyc").order("created_at",{ascending:!1}).limit(1).single();j(S?S.status:"none")}catch(_){console.error("Check KYC status error:",_)}};return n.jsxs("div",{className:"h-screen flex flex-col font-display overflow-hidden bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950",children:[x&&n.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end sm:items-center justify-center p-4",children:n.jsxs("div",{className:"rounded-2xl p-5 w-full max-w-sm bg-white shadow-xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-bold text-lg text-gray-900",children:o("profile.language")}),n.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-900",children:n.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>{a("tr"),g(!1)},className:`w-full p-4 rounded-xl flex items-center justify-between ${s==="tr"?"bg-emerald-500/20 border border-emerald-500":"bg-gray-100 border border-transparent"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:""}),n.jsx("span",{className:"font-medium text-gray-900",children:"Trke"})]}),s==="tr"&&n.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]}),n.jsxs("button",{onClick:()=>{a("en"),g(!1)},className:`w-full p-4 rounded-xl flex items-center justify-between ${s==="en"?"bg-emerald-500/20 border border-emerald-500":"bg-gray-100 border border-transparent"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:""}),n.jsx("span",{className:"font-medium text-gray-900",children:"English"})]}),s==="en"&&n.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]})]})]})}),n.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0 z-10",children:[n.jsx("button",{onClick:()=>r("/dashboard"),className:"p-2 -ml-2 rounded-full transition-colors hover:bg-white/10",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg pr-8 text-white",children:"Ayarlar"})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[n.jsxs("div",{className:"rounded-3xl p-6 flex flex-col items-center text-center bg-white shadow-lg",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-full flex items-center justify-center shadow-lg shadow-emerald-500/20",children:n.jsx("span",{className:"text-white text-2xl font-bold",children:((E=t==null?void 0:t.name)==null?void 0:E.charAt(0))||"U"})}),n.jsx("button",{className:"absolute -bottom-1 -right-1 w-8 h-8 border-2 rounded-full flex items-center justify-center bg-white border-gray-200 shadow",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-sm",children:"edit"})})]}),n.jsx("h2",{className:"text-lg font-extrabold mt-3 mb-0.5 text-gray-900",children:(t==null?void 0:t.name)||"User"}),n.jsx("p",{className:"text-gray-500 font-medium text-sm mb-3",children:t==null?void 0:t.email}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:"bg-emerald-500/20 text-emerald-500 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide",children:(t==null?void 0:t.role)||"User"}),n.jsx("span",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide",children:"Aktif"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Hesap Dorulama"}),n.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:[n.jsx(ht,{icon:"verified_user",iconBg:y==="approved"?"bg-green-500/20 text-green-400":y==="rejected"?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400",label:"Kimlik Dorulama (KYC)",sublabel:y==="approved"?"Dorulanm hesap":y==="rejected"?"Reddedildi - Tekrar deneyin":"Limitleri artrmak iin dorulayn",badge:y==="approved"?{text:"Dorulanm",color:"bg-green-500/20 text-green-400"}:y==="pending"?{text:"Bekliyor",color:"bg-amber-500/20 text-amber-400"}:y==="rejected"?{text:"Reddedildi",color:"bg-red-500/20 text-red-400"}:{text:"Dorulanmad",color:"bg-gray-500/20 text-gray-400"},onClick:()=>r("/kyc")}),n.jsx(ht,{icon:"mail",iconBg:"bg-blue-500/20 text-blue-400",label:"E-posta Dorulama",sublabel:t==null?void 0:t.email,badge:{text:"Doruland",color:"bg-green-500/20 text-green-400"},onClick:()=>{}})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Hesap Bilgileri"}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:n.jsx(ht,{icon:"person",iconBg:"bg-emerald-500/20 text-emerald-500",label:"Profil Bilgileri",sublabel:h===null?"Kontrol ediliyor...":h?"Tamamland":"Eksik - Tamamlayn",badge:h?{text:"Tamam",color:"bg-green-500/20 text-green-400"}:h===!1?{text:"Eksik",color:"bg-red-500/20 text-red-400"}:void 0,onClick:()=>r("/profile/edit")})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Finans"}),n.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:[n.jsx(ht,{icon:"account_balance",iconBg:"bg-blue-500/20 text-blue-400",label:"Banka Hesaplar",sublabel:"Bal hesaplar ynet",onClick:()=>r("/bank-accounts")}),n.jsx(ht,{icon:"speed",iconBg:"bg-orange-500/20 text-orange-400",label:"lem Limitleri",sublabel:"Limitleri grntle ve artr",onClick:()=>r("/limits")})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Gvenlik"}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:n.jsx(ht,{icon:"lock",iconBg:"bg-red-500/20 text-red-400",label:"ifre Deitir",sublabel:"Hesap gvenlii iin ifrenizi deitirin",onClick:()=>r("/change-password")})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Bildirimler"}),n.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:[n.jsx(ht,{icon:"notifications",iconBg:"bg-yellow-500/20 text-yellow-400",label:"Push Bildirimleri",sublabel:"lem ve gvenlik uyarlar",toggle:!0,toggleValue:!0,onClick:()=>{}}),n.jsx(ht,{icon:"email",iconBg:"bg-sky-500/20 text-sky-400",label:"E-posta Bildirimleri",sublabel:"Haftalk zet ve kampanyalar",toggle:!0,toggleValue:!1,onClick:()=>{}})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Tercihler"}),n.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:[n.jsx(ht,{icon:"language",iconBg:"bg-violet-500/20 text-violet-400",label:o("profile.language"),sublabel:s==="tr"?"Trke":"English",onClick:()=>g(!0)}),n.jsx(ht,{icon:"currency_exchange",iconBg:"bg-emerald-500/20 text-emerald-500",label:"Para Birimi Gsterimi",sublabel:"TRY ()",onClick:()=>{}}),n.jsx(ht,{icon:"dark_mode",iconBg:"bg-slate-500/20 text-slate-400",label:c?"Karanlk Mod":"Light Mode",sublabel:c?"Aktif":"Active",toggle:!0,toggleValue:c,onClick:u})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Yardm & Destek"}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:n.jsx(ht,{icon:"support_agent",iconBg:"bg-green-500/20 text-green-400",label:"Canl Destek",sublabel:"7/24 destek ekibimizle sohbet et",onClick:()=>r("/support")})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Yasal"}),n.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:[n.jsx(ht,{icon:"description",iconBg:"bg-gray-500/20 text-gray-400",label:"Kullanm Koullar",onClick:()=>r("/terms")}),n.jsx(ht,{icon:"privacy_tip",iconBg:"bg-gray-500/20 text-gray-400",label:"Gizlilik Politikas",onClick:()=>r("/privacy")})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Uygulama"}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:n.jsx(ht,{icon:"info",iconBg:"bg-gray-500/20 text-gray-400",label:"Uygulama Hakknda",sublabel:"NUSD Wallet v2.0",onClick:()=>{}})})]}),n.jsxs("button",{onClick:()=>{e(),r("/")},className:"w-full bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 active:scale-[0.98] transition-all py-4 rounded-xl font-bold flex items-center justify-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"logout"}),"k Yap"]}),n.jsx("button",{className:"w-full text-gray-500 hover:text-red-400 py-3 text-sm font-medium transition-colors",children:"Hesabm Sil"}),n.jsx("div",{className:"h-40 w-full shrink-0"})]})]})},Bk=()=>{const t=we(),[e,r]=N.useState(""),s=()=>{e.trim()&&alert(`QR verisi: ${e}`)};return n.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col",children:[n.jsxs("div",{className:"bg-[#1a1a1a] px-5 py-4 flex items-center gap-3 shadow-lg border-b border-white/5",children:[n.jsx("button",{onClick:()=>t("/dashboard"),className:"text-gray-400 hover:text-lime-400 hover:bg-lime-400/10 p-2 rounded-full transition-colors",children:n.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),n.jsx("h1",{className:"font-extrabold text-lg text-white",children:"QR Kod Tara"})]}),n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[n.jsxs("div",{className:"relative w-full max-w-sm aspect-square mb-8",children:[n.jsx("div",{className:"absolute inset-0 border-4 border-lime-500 rounded-3xl bg-lime-500/5 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"material-symbols-outlined text-8xl text-lime-500 mb-4 animate-pulse",children:"qr_code_scanner"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"QR Kodu Kamerann nne Tutun"})]})}),n.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-lime-500 rounded-tl-3xl"}),n.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-lime-500 rounded-tr-3xl"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-lime-500 rounded-bl-3xl"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-lime-500 rounded-br-3xl"})]}),n.jsxs("div",{className:"w-full max-w-sm",children:[n.jsx("p",{className:"text-gray-500 text-sm text-center mb-4",children:"veya manuel girin:"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:e,onChange:a=>r(a.target.value),placeholder:"Czdan adresi veya deme kodu",className:"flex-1 px-4 py-3 rounded-xl border border-white/10 bg-[#1a1a1a] text-white placeholder-gray-600 focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none"}),n.jsx("button",{onClick:s,className:"bg-lime-500 hover:bg-lime-400 text-black p-3 rounded-xl transition-all active:scale-95",children:n.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})})]})]}),n.jsx("div",{className:"mt-8 text-center",children:n.jsx("p",{className:"text-gray-600 text-xs",children:"Gvenli deme yapmak iin QR kod tarayn"})})]})]})},Mk=()=>{const t=we();return n.jsxs("div",{className:"h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0 z-10",children:[n.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Gizlilik Politikas"})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 pb-20",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:n.jsx("span",{className:"material-symbols-outlined text-purple-500 text-3xl",children:"privacy_tip"})}),n.jsx("p",{className:"text-emerald-300 text-sm",children:"Son gncelleme: 9 Aralk 2025"})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-purple-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"info"}),"1. Giri"]}),n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"NUSD Wallet olarak gizliliinize nem veriyoruz. Bu politika, kripto para alc ve satclarn buluturan P2P platformumuzda bilgilerinizin nasl toplandn, kullanldn ve korunduunu aklar."})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-blue-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"folder_open"}),"2. Toplanan Bilgiler"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-emerald-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-emerald-700 font-bold text-sm mb-1",children:"Hesap Bilgileri"}),n.jsx("p",{className:"text-gray-500 text-xs",children:"Ad, e-posta adresi, telefon numaras"})]}),n.jsxs("div",{className:"bg-emerald-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-emerald-700 font-bold text-sm mb-1",children:"lem Verileri"}),n.jsx("p",{className:"text-gray-500 text-xs",children:"lem gemii, tutar bilgileri, tarih/saat kaytlar"})]}),n.jsxs("div",{className:"bg-emerald-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-emerald-700 font-bold text-sm mb-1",children:"Cihaz Bilgileri"}),n.jsx("p",{className:"text-gray-500 text-xs",children:"IP adresi, tarayc tr, iletim sistemi"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg border-2 border-amber-200 space-y-4",children:[n.jsxs("h2",{className:"text-amber-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"account_balance"}),"3. Banka Hesap Bilgileri Hakknda"]}),n.jsx("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:n.jsx("p",{className:"text-amber-700 text-sm leading-relaxed font-medium",children:" NEML UYARI"})}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[n.jsxs("li",{children:["Platformda paylalan banka hesap bilgileri (IBAN, hesap numaras vb.)",n.jsx("span",{className:"text-amber-600 font-bold",children:" kullanclar arasnda dorudan paylalr"}),"."]}),n.jsx("li",{children:"NUSD Wallet, bu bilgileri sadece ilem eletirmesi iin geici olarak saklar."}),n.jsx("li",{children:"Banka hesaplarnn doruluunu veya gvenliini garanti etmiyoruz."}),n.jsx("li",{children:"Kullanclar, banka bilgilerini paylamadan nce kar taraf dorulamaldr."}),n.jsx("li",{children:"Banka transferlerinden doan sorunlar kullanclarn sorumluluundadr."})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-green-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"check_circle"}),"4. Bilgilerin Kullanm"]}),n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Toplanan bilgiler aadaki amalarla kullanlr:"}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[n.jsx("li",{children:"P2P eletirme hizmetinin salanmas"}),n.jsx("li",{children:"Hesap gvenliinin korunmas"}),n.jsx("li",{children:"Dolandrclk nleme"}),n.jsx("li",{children:"Yasal ykmllklerin yerine getirilmesi"}),n.jsx("li",{children:"Mteri destei salanmas"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-red-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"share"}),"5. Bilgi Paylam"]}),n.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["Bilgileriniz aadaki durumlar dnda nc taraflarla",n.jsx("span",{className:"text-emerald-600 font-bold",children:" PAYLAILMAZ"}),":"]}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[n.jsx("li",{children:"Yasal zorunluluk durumunda (mahkeme karar, resmi talep)"}),n.jsx("li",{children:"P2P ilem taraflar arasnda (sadece gerekli bilgiler)"}),n.jsx("li",{children:"Gvenlik tehdidi tespit edildiinde"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-cyan-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"lock"}),"6. Veri Gvenlii"]}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[n.jsx("li",{children:"256-bit SSL ifreleme ile veri iletimi"}),n.jsx("li",{children:"ifreli veritaban depolama"}),n.jsx("li",{children:"ki faktrl kimlik dorulama seenei"}),n.jsx("li",{children:"Dzenli gvenlik denetimleri"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-orange-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"timer"}),"7. Veri Saklama Sresi"]}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[n.jsx("li",{children:"Aktif hesap bilgileri: Hesap aktif olduu srece"}),n.jsx("li",{children:"lem kaytlar: 5 yl (yasal zorunluluk)"}),n.jsx("li",{children:"Kapatlan hesaplar: 1 yl sonra tamamen silinir"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-emerald-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"person_raised_hand"}),"8. Kullanc Haklar"]}),n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"KVKK ve GDPR kapsamnda aadaki haklara sahipsiniz:"}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[n.jsx("li",{children:"Verilerinize eriim talep etme"}),n.jsx("li",{children:"Verilerin dzeltilmesini isteme"}),n.jsx("li",{children:"Verilerin silinmesini talep etme"}),n.jsx("li",{children:"Veri ilemeye itiraz etme"}),n.jsx("li",{children:"Veri tanabilirlii"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-gray-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"contact_support"}),"9. letiim"]}),n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Gizlilik ile ilgili sorularnz iin:"}),n.jsx("p",{className:"text-emerald-600 font-bold",children:"privacy@nusd.com"})]}),n.jsx("div",{className:"text-center pt-4 pb-10",children:n.jsx("p",{className:"text-emerald-300/70 text-xs",children:"NUSD Wallet' kullanarak bu gizlilik politikasn kabul etmi saylrsnz."})})]})]})},Uk=()=>{const t=we();return n.jsxs("div",{className:"h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0 z-10",children:[n.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Kullanm Koullar"})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 pb-20",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-3xl",children:"description"})}),n.jsx("p",{className:"text-emerald-300 text-sm",children:"Son gncelleme: 9 Aralk 2025"})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-emerald-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"gavel"}),"1. Hizmet Tanm"]}),n.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["NUSD Wallet, kripto para alm-satm yapmak isteyen kullanclar birbirleriyle buluturan bir ",n.jsx("span",{className:"text-emerald-600 font-bold",children:"eler aras (P2P) platform"}),"dur. Platform, kullanclar arasnda dorudan ilem yaplmasn kolaylatrmak amacyla tasarlanmtr."]}),n.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["NUSD Wallet, bir kripto para borsas, arac kurum veya finans kuruluu",n.jsx("span",{className:"text-red-500 font-bold",children:" DELDR"}),". Platform, yalnzca kullanclarn birbirini bulmasna ve iletiim kurmasna araclk eder."]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg border-2 border-red-200 space-y-4",children:[n.jsxs("h2",{className:"text-red-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"dangerous"}),"Ya Snr ve Risk Uyars"]}),n.jsx("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:n.jsx("p",{className:"text-red-700 text-sm leading-relaxed font-medium",children:" Bu platform yalnzca 18 ya ve zeri kullanclar iindir."})}),n.jsx("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:n.jsx("p",{className:"text-amber-700 text-sm leading-relaxed font-medium",children:" KRPTO PARA YATIRIMLARI RSK ERR. Yatrdnz tutarn tamamn kaybedebilirsiniz. Bu platform yatrm tavsiyesi vermez. Tm ilem kararlar tamamen sizin sorumluluunuzdadr."})})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg border-2 border-amber-200 space-y-4",children:[n.jsxs("h2",{className:"text-amber-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"warning"}),"2. Sorumluluk Reddi - Banka Hesaplar"]}),n.jsx("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:n.jsx("p",{className:"text-amber-700 text-sm leading-relaxed font-medium",children:" NEML: Kullanclar tarafndan platformda paylalan banka hesap bilgileri, IBAN numaralar ve dier finansal bilgiler tamamen kullanclarn kendi sorumluluundadr."})}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[n.jsx("li",{children:"NUSD Wallet, kullanclar arasnda gerekletirilen banka transferlerinden sorumlu tutulamaz."}),n.jsx("li",{children:"Banka hesap bilgilerinin doruluu kullanc tarafndan kontrol edilmelidir."}),n.jsx("li",{children:"Hatal hesap bilgisi nedeniyle oluan kayplardan platform sorumlu deildir."}),n.jsx("li",{children:"Kullanclar, paylatklar bilgilerin gvenliinden kendileri sorumludur."})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-blue-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"handshake"}),"3. P2P lem Koullar"]}),n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Tm ilemler, alc ve satc arasnda dorudan gerekletirilir. NUSD Wallet:"}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[n.jsx("li",{children:"lemlerin taraf deildir, yalnzca araclk hizmeti sunar."}),n.jsx("li",{children:"Kullanclar arasndaki anlamazlklarda taraf olmaz."}),n.jsx("li",{children:"Kripto para veya fiat para transferlerini dorudan gerekletirmez."}),n.jsx("li",{children:"lem srelerinde danmanlk veya garanti salamaz."})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-purple-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"person"}),"4. Kullanc Sorumluluklar"]}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[n.jsx("li",{children:"Doru ve gncel bilgiler salamak"}),n.jsx("li",{children:"lem yapmadan nce kar taraf dorulamak"}),n.jsx("li",{children:"Yerel yasalara ve dzenlemelere uymak"}),n.jsx("li",{children:"Hesap gvenliini salamak"}),n.jsx("li",{children:"pheli aktiviteleri bildirmek"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-red-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"block"}),"5. Yasaklanan Faaliyetler"]}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[n.jsx("li",{children:"Kara para aklama veya yasa d fon transferi"}),n.jsx("li",{children:"Dolandrclk veya sahte ilemler"}),n.jsx("li",{children:"Bakalarnn kimlik bilgilerini kullanma"}),n.jsx("li",{children:"Platform gvenliini tehlikeye atma"}),n.jsx("li",{children:"Spam veya zararl ierik paylam"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-cyan-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"verified_user"}),"6. Hesap Askya Alma"]}),n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"NUSD Wallet, bu koullar ihlal eden hesaplar nceden bildirimde bulunmakszn askya alma veya kalc olarak kapatma hakkn sakl tutar."})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("h2",{className:"text-gray-600 font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"contact_support"}),"7. letiim"]}),n.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["Sorularnz iin: ",n.jsx("span",{className:"text-emerald-600 font-bold",children:"support@nusd.com"})]})]}),n.jsx("div",{className:"text-center pt-4 pb-10",children:n.jsx("p",{className:"text-emerald-300/70 text-xs",children:"Bu koullar kabul ederek NUSD Wallet' kullanmaya devam edebilirsiniz."})})]})]})},er=({children:t,title:e})=>{const r=we(),s=On(),{logout:a}=it(),o=[{icon:"dashboard",label:"Dashboard",path:"/admin"},{icon:"group",label:"Users",path:"/admin/users"},{icon:"swap_horiz",label:"P2P Orders",path:"/admin/p2p-orders"},{icon:"currency_exchange",label:"Kur Ynetimi",path:"/admin/exchange-rate"},{icon:"lock",label:"Crypto Vaults",path:"/admin/vaults"},{icon:"business",label:"Departmanlar",path:"/admin/departments"},{icon:"terminal",label:"System Logs",path:"/admin/logs"},{icon:"support_agent",label:"Canl Destek",path:"/admin/support"},{icon:"analytics",label:"Raporlar",path:"/admin/reports"}];return n.jsxs("div",{className:"admin-layout flex h-screen bg-gray-100 font-display",children:[n.jsxs("div",{className:"w-64 bg-[#111827] text-white flex flex-col shadow-2xl z-20",children:[n.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-gray-800",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-sm",children:"admin_panel_settings"})}),n.jsx("span",{className:"font-bold text-lg tracking-tight",children:"NUSD Admin"})]}),n.jsx("div",{className:"flex-1 py-6 space-y-1 px-3",children:o.map(c=>{const u=s.pathname===c.path;return n.jsxs("button",{onClick:()=>r(c.path),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${u?"bg-blue-600 text-white font-bold shadow-lg shadow-blue-900/50":"text-gray-400 hover:bg-gray-800 hover:text-white font-medium"}`,children:[n.jsx("span",{className:"material-symbols-outlined",children:c.icon}),c.label]},c.path)})}),n.jsxs("div",{className:"p-4 border-t border-gray-800",children:[n.jsxs("button",{onClick:()=>r("/dashboard"),className:"w-full flex items-center gap-3 px-4 py-2 text-gray-400 hover:text-white transition-colors text-sm mb-2",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"exit_to_app"}),"Exit Admin Mode"]}),n.jsxs("button",{onClick:()=>{a(),r("/")},className:"w-full flex items-center gap-3 px-4 py-2 text-red-400 hover:text-red-300 transition-colors text-sm",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"logout"}),"Logout"]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden h-screen",children:[n.jsxs("div",{className:"bg-white shadow-sm border-b border-gray-200 px-8 py-4 flex justify-between items-center z-10",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-gray-600 text-sm",children:"person"})}),n.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Administrator"})]})]}),n.jsx("div",{className:"flex-1 overflow-auto p-8 bg-gray-50/50",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})]})},Tr=({icon:t,iconBg:e,label:r,value:s,sublabel:a,trend:o})=>n.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("div",{className:`w-12 h-12 ${e} rounded-xl flex items-center justify-center`,children:n.jsx("span",{className:"material-symbols-outlined",children:t})}),o&&n.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${o==="up"?"bg-green-100 text-green-600":o==="down"?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:o==="up"?"":o==="down"?"":""})]}),n.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider mb-1",children:r}),n.jsx("h3",{className:"text-2xl font-extrabold text-gray-900",children:s}),a&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:a})]}),$k=()=>{var E,_,v,S,P,R,A,O,z,I,W,F,q,$,Q;const[t,e]=N.useState(null),[r,s]=N.useState(!0),[a,o]=N.useState(0),[c,u]=N.useState(0),[h,m]=N.useState([]),[x,g]=N.useState(null),y=async()=>{try{const G=await Z.getPendingWithdrawals();m(G||[])}catch(G){console.error("Failed to load withdrawals:",G)}};N.useEffect(()=>{const G=async()=>{const le=await Z.getSystemStats();e(le),o((le==null?void 0:le.pendingTransactions)||0),s(!1)};G(),y();const M=setInterval(()=>{G(),y()},1e4);return()=>clearInterval(M)},[]);const j=async()=>{window.confirm("Emin misiniz? Tm ilemler silinecek ve bakiyeler sfrlanacak.")&&(await Z.resetDB(),window.location.reload())},b=async G=>{if(window.confirm("Withdraw'u onaylamak istediinize emin misiniz?")){g(G);try{await Z.approveWithdrawal(G),y()}catch(M){alert("Onaylama baarsz: "+M)}g(null)}},w=async G=>{const M=window.prompt("Red sebebi:");if(M){g(G);try{await Z.rejectWithdrawal(G,M),y()}catch(le){alert("Reddetme baarsz: "+le)}g(null)}};return n.jsxs(er,{title:"Sistem zeti",children:[a>0&&n.jsxs("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-2xl p-4",children:[n.jsxs("h3",{className:"font-bold text-amber-800 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"notifications_active"}),"Bildirimler"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:a>0&&n.jsxs("a",{href:"/#/admin/transactions",className:"flex items-center gap-2 bg-white px-4 py-2 rounded-xl border border-amber-200 hover:border-amber-400 transition-colors",children:[n.jsx("div",{className:"w-8 h-8 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center font-bold",children:a}),n.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Bekleyen lem"}),n.jsx("span",{className:"material-symbols-outlined text-gray-400 text-sm",children:"arrow_forward"})]})})]}),n.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 rounded-2xl p-6 mb-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-emerald-100 text-sm font-bold uppercase tracking-wider mb-1",children:"Toplam Sistem Bakiyesi"}),n.jsxs("h2",{className:"text-4xl font-extrabold",children:["$",r?"":(((t==null?void 0:t.totalUserBalance)||0)+((t==null?void 0:t.totalVaultBalance)||0)).toLocaleString()]}),n.jsxs("p",{className:"text-emerald-200 text-sm mt-2",children:["Kullanc: $",((E=t==null?void 0:t.totalUserBalance)==null?void 0:E.toLocaleString())||0,"  Vault: $",((_=t==null?void 0:t.totalVaultBalance)==null?void 0:_.toLocaleString())||0]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mb-2",children:n.jsx("span",{className:"material-symbols-outlined text-4xl",children:"account_balance_wallet"})}),n.jsx("p",{className:"text-xs text-emerald-200",children:"Canl Gncelleniyor"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(Tr,{icon:"south_west",iconBg:"bg-green-50 text-green-600",label:"Gelen Bakiye",value:`$${((v=t==null?void 0:t.totalDeposits)==null?void 0:v.toLocaleString())||0}`,sublabel:`Vault: $${((S=t==null?void 0:t.vaultDeposits)==null?void 0:S.toLocaleString())||0}`,trend:"up"}),n.jsx(Tr,{icon:"north_east",iconBg:"bg-red-50 text-red-600",label:"kan Bakiye",value:`$${((P=t==null?void 0:t.totalWithdrawals)==null?void 0:P.toLocaleString())||0}`,sublabel:`Vault: $${((R=t==null?void 0:t.vaultWithdrawals)==null?void 0:R.toLocaleString())||0}`,trend:"down"}),n.jsx(Tr,{icon:"lock",iconBg:"bg-purple-50 text-purple-600",label:"Vault Bakiye",value:`$${((A=t==null?void 0:t.totalVaultBalance)==null?void 0:A.toLocaleString())||0}`,sublabel:"Kripto kasas"}),n.jsx(Tr,{icon:"sync",iconBg:"bg-amber-50 text-amber-600",label:"Net Ak",value:`$${(((t==null?void 0:t.totalDeposits)||0)-((t==null?void 0:t.totalWithdrawals)||0)).toLocaleString()}`,sublabel:"Gelen - kan",trend:((t==null?void 0:t.totalDeposits)||0)>=((t==null?void 0:t.totalWithdrawals)||0)?"up":"down"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(Tr,{icon:"receipt_long",iconBg:"bg-blue-50 text-blue-600",label:"Toplam lem",value:((O=t==null?void 0:t.totalTransactions)==null?void 0:O.toString())||"0"}),n.jsx(Tr,{icon:"pending",iconBg:"bg-orange-50 text-orange-600",label:"Bekleyen lem",value:((z=t==null?void 0:t.pendingTransactions)==null?void 0:z.toString())||"0"}),n.jsx(Tr,{icon:"group",iconBg:"bg-cyan-50 text-cyan-600",label:"Aktif Kullanc",value:((I=t==null?void 0:t.activeUsers)==null?void 0:I.toString())||"0"}),n.jsx(Tr,{icon:"business",iconBg:"bg-indigo-50 text-indigo-600",label:"Departman",value:((W=t==null?void 0:t.departmentCount)==null?void 0:W.toString())||"0"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined",children:"attach_money"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider",children:"Toplam Gelir"}),n.jsxs("h3",{className:"text-3xl font-extrabold text-gray-900",children:["$",((F=t==null?void 0:t.totalRevenue)==null?void 0:F.toFixed(2))||"0.00"]})]})]}),n.jsx("p",{className:"text-xs text-gray-400",children:"Komisyon ve ilem cretlerinden"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-purple-50 text-purple-600 rounded-xl flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined",children:"bar_chart"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider",children:"Toplam Hacim"}),n.jsxs("h3",{className:"text-3xl font-extrabold text-gray-900",children:["$",((q=t==null?void 0:t.totalVolume)==null?void 0:q.toLocaleString())||"0.00"]})]})]}),n.jsx("p",{className:"text-xs text-gray-400",children:"Tm ilemlerin toplam deeri"})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 mb-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"insights"}),"Para Ak Grafii"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{className:"font-bold text-green-600",children:"Gelen"}),n.jsxs("span",{className:"font-bold text-green-600",children:["$",(($=t==null?void 0:t.totalDeposits)==null?void 0:$.toLocaleString())||0]})]}),n.jsx("div",{className:"h-6 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full transition-all duration-1000",style:{width:`${Math.min(100,((t==null?void 0:t.totalDeposits)||0)/Math.max(((t==null?void 0:t.totalDeposits)||0)+((t==null?void 0:t.totalWithdrawals)||0),1)*100)}%`}})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{className:"font-bold text-red-600",children:"kan"}),n.jsxs("span",{className:"font-bold text-red-600",children:["$",((Q=t==null?void 0:t.totalWithdrawals)==null?void 0:Q.toLocaleString())||0]})]}),n.jsx("div",{className:"h-6 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-red-400 to-rose-500 rounded-full transition-all duration-1000",style:{width:`${Math.min(100,((t==null?void 0:t.totalWithdrawals)||0)/Math.max(((t==null?void 0:t.totalDeposits)||0)+((t==null?void 0:t.totalWithdrawals)||0),1)*100)}%`}})})]}),n.jsxs("div",{className:"flex items-center justify-center gap-4 pt-2 border-t border-gray-100",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-3xl font-extrabold text-gray-900",children:[t&&t.totalDeposits+t.totalWithdrawals>0?Math.round(t.totalDeposits/(t.totalDeposits+t.totalWithdrawals)*100):0,"%"]}),n.jsx("p",{className:"text-xs text-gray-400",children:"Gelen Oran"})]}),n.jsx("div",{className:"w-px h-12 bg-gray-200"}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:(t==null?void 0:t.totalTransactions)||0}),n.jsx("p",{className:"text-xs text-gray-400",children:"Toplam lem"})]}),n.jsx("div",{className:"w-px h-12 bg-gray-200"}),n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:`text-3xl font-extrabold ${((t==null?void 0:t.totalDeposits)||0)>=((t==null?void 0:t.totalWithdrawals)||0)?"text-green-600":"text-red-600"}`,children:["$",Math.abs(((t==null?void 0:t.totalDeposits)||0)-((t==null?void 0:t.totalWithdrawals)||0)).toLocaleString()]}),n.jsx("p",{className:"text-xs text-gray-400",children:"Net Bakiye"})]})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 mb-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-orange-600",children:"pending_actions"}),"Bekleyen Kripto ekim stekleri",h.length>0&&n.jsx("span",{className:"ml-2 px-2 py-0.5 bg-orange-100 text-orange-600 rounded-full text-sm font-bold",children:h.length})]}),h.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-400",children:[n.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"check_circle"}),n.jsx("p",{children:"Bekleyen ekim istei yok"})]}):n.jsx("div",{className:"space-y-3",children:h.map(G=>{var M;return n.jsx("div",{className:"border border-gray-200 rounded-xl p-4 hover:border-orange-300 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded text-xs font-bold",children:G.network||"TRC20"}),n.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",parseFloat(G.amount||0).toFixed(2)," USDT"]})]}),n.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-bold",children:"Kullanc:"})," ",((M=G.profiles)==null?void 0:M.name)||G.user_email||"N/A"]}),n.jsxs("p",{className:"font-mono text-xs break-all",children:[n.jsx("span",{className:"font-bold font-sans",children:"Adres:"})," ",G.destination_address||G.wallet_address||"N/A"]}),n.jsx("p",{className:"text-xs text-gray-400",children:new Date(G.created_at).toLocaleString("tr-TR")})]})]}),n.jsxs("div",{className:"flex gap-2 ml-4",children:[n.jsxs("button",{onClick:()=>b(G.id),disabled:x===G.id,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-bold text-sm disabled:opacity-50 flex items-center gap-1",children:[x===G.id?n.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"progress_activity"}):n.jsx("span",{className:"material-symbols-outlined text-sm",children:"check"}),"Onayla"]}),n.jsxs("button",{onClick:()=>w(G.id),disabled:x===G.id,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold text-sm disabled:opacity-50 flex items-center gap-1",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"}),"Reddet"]})]})]})},G.id)})})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Hzl lemler"}),n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsxs("button",{onClick:async()=>{const G=await Z.checkBlockchainDeposits();G.success?alert(`Kontrol tamamland!
${G.checked||0} vault kontrol edildi
${G.newDeposits||0} yeni deposit algland`):alert("Hata: "+(G.error||"Kontrol baarsz"))},className:"px-6 py-3 bg-green-50 text-green-600 hover:bg-green-100 border border-green-100 rounded-xl font-bold transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"sync"}),"Blockchain Deposit Kontrol"]}),n.jsxs("button",{onClick:j,className:"px-6 py-3 bg-red-50 text-red-600 hover:bg-red-100 border border-red-100 rounded-xl font-bold transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"restart_alt"}),"Veritabann Sfrla"]}),n.jsxs("button",{className:"px-6 py-3 bg-gray-50 text-gray-600 hover:bg-gray-100 border border-gray-200 rounded-xl font-bold transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"build"}),"Bakm Modu"]})]})]})]})},Qs=25,Fk=()=>{const[t,e]=N.useState([]),[r,s]=N.useState(""),[a,o]=N.useState("all"),[c,u]=N.useState(1);N.useEffect(()=>{h()},[]);const h=()=>Z.getAllUsers().then(e),m=async E=>{window.confirm("Change user status?")&&(await Z.toggleUserStatus(E),h())},x=async(E,_)=>{const v=_==="admin"?"user":"admin";window.confirm(`Change role to ${v}?`)&&(await Z.toggleUserRole(E),h())},g=async(E,_)=>{const v=prompt(`Yeni bakiye (mevcut: $${_.toFixed(2)}):`,_.toString());if(v===null)return;const S=parseFloat(v);if(isNaN(S)){alert("Geersiz tutar");return}const P=await Z.updateUserBalance(E,S);P.success?h():alert("Hata: "+(P.error||"Gncelleme baarsz"))},y=t.filter(E=>{const _=r===""||E.name.toLowerCase().includes(r.toLowerCase())||E.email.toLowerCase().includes(r.toLowerCase()),v=a==="all"||E.role===a;return _&&v}),j=Math.ceil(y.length/Qs),b=y.slice((c-1)*Qs,c*Qs),w=()=>{const E=["Ad","Email","Rol","Bakiye","Durum","TRX Adres"],_=y.map(A=>{var O;return[A.name,A.email,A.role,((O=A.balance)==null?void 0:O.toFixed(2))||"0",A.isActive?"Aktif":"Pasif",A.trxAddress||""]}),v=[E,..._].map(A=>A.map(O=>`"${O}"`).join(",")).join(`
`),S=new Blob([v],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(S),R=document.createElement("a");R.href=P,R.download=`users_${new Date().toISOString().split("T")[0]}.csv`,R.click()};return n.jsxs(er,{title:"User Management",children:[n.jsxs("div",{className:"mb-4 flex gap-4 items-center",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"search"}),n.jsx("input",{type:"text",placeholder:"sim veya email ara...",value:r,onChange:E=>s(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsx("div",{className:"flex gap-2",children:["all","admin","user"].map(E=>n.jsx("button",{onClick:()=>o(E),className:`px-3 py-2 rounded-lg text-xs font-bold capitalize transition-colors ${a===E?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:E==="all"?"Tm":E},E))}),n.jsxs("span",{className:"text-sm text-gray-500",children:[y.length," kullanc"]}),n.jsxs("button",{onClick:w,className:"ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-bold flex items-center gap-2 transition-colors",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"download"}),"CSV ndir"]})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"TRX Wallet"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Balance"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:b.map(E=>{var _;return n.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[n.jsx("td",{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-900 text-white flex items-center justify-center text-xs font-bold",children:E.name.substring(0,1)}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-gray-900 text-sm",children:E.name}),n.jsx("p",{className:"text-gray-500 text-xs",children:E.email})]})]})}),n.jsx("td",{className:"p-4",children:n.jsx("p",{className:"font-mono text-xs text-gray-600 max-w-[150px] truncate",title:E.trxAddress,children:E.trxAddress||"-"})}),n.jsx("td",{className:"p-4",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${E.role==="admin"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:E.role})}),n.jsx("td",{className:"p-4",children:n.jsxs("button",{onClick:()=>g(E.email,E.balance||0),className:"font-mono font-bold text-gray-700 hover:text-blue-600 cursor-pointer",children:["$",(_=E.balance)==null?void 0:_.toFixed(2)," "]})}),n.jsx("td",{className:"p-4",children:n.jsxs("span",{className:`flex items-center gap-1.5 text-xs font-bold ${E.isActive?"text-green-600":"text-red-600"}`,children:[n.jsx("span",{className:`w-2 h-2 rounded-full ${E.isActive?"bg-green-600":"bg-red-600"}`}),E.isActive?"Active":"Suspended"]})}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>x(E.email,E.role),className:"text-xs font-bold px-3 py-1.5 rounded-lg border border-purple-200 text-purple-600 hover:bg-purple-50 transition-colors",children:E.role==="admin"?" User":" Admin"}),n.jsx("button",{onClick:()=>m(E.email),className:`text-xs font-bold px-3 py-1.5 rounded-lg border transition-colors ${E.isActive?"border-red-200 text-red-600 hover:bg-red-50":"border-green-200 text-green-600 hover:bg-green-50"}`,children:E.isActive?"Suspend":"Activate"})]})})]},E.email)})})]})})}),j>1&&n.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm text-gray-500",children:[y.length," sonutan ",(c-1)*Qs+1,"-",Math.min(c*Qs,y.length)," gsteriliyor"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>u(E=>Math.max(1,E-1)),disabled:c===1,className:"px-4 py-2 text-sm font-bold rounded-lg border border-gray-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:" nceki"}),n.jsxs("span",{className:"px-4 py-2 text-sm font-bold bg-blue-600 text-white rounded-lg",children:[c," / ",j]}),n.jsx("button",{onClick:()=>u(E=>Math.min(j,E+1)),disabled:c===j,className:"px-4 py-2 text-sm font-bold rounded-lg border border-gray-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Sonraki "})]})]})]})},Hk=({transactionId:t})=>{const[e,r]=N.useState([]),[s,a]=N.useState(!0);return N.useEffect(()=>{t&&(async()=>{a(!0);const c=await Z.getTransactionLogs(t);r(c),a(!1)})()},[t]),s?n.jsx("div",{className:"p-4 text-gray-500 text-sm",children:"Loading logs..."}):e.length===0?n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg text-gray-500 text-sm italic",children:"No audit logs found for this transaction. This might be an old transaction created before the audit system was active."}):n.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[n.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-base",children:"history_edu"}),"Transaction Audit Trail"]}),n.jsx("div",{className:"space-y-4",children:e.map(o=>n.jsxs("div",{className:"relative pl-6 pb-2 border-l-2 border-slate-200 last:border-0 last:pb-0",children:[n.jsx("div",{className:`absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white 
                            ${o.action==="APPROVE"?"bg-green-500":o.action==="REJECT"?"bg-red-500":o.action==="CREATE"?"bg-blue-500":"bg-slate-400"}`}),n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded mr-2 
                                    ${o.action==="APPROVE"?"bg-green-100 text-green-700":o.action==="REJECT"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:o.action}),n.jsxs("span",{className:"text-xs text-slate-500 font-mono",children:["by ",o.actor_role,o.actor_role==="admin"?"":" (system)"]})]}),n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:new Date(o.created_at).toLocaleString("tr-TR")})]}),o.metadata&&Object.keys(o.metadata).length>0&&n.jsx("div",{className:"mt-2 bg-white border border-slate-200 rounded p-2 text-xs font-mono text-slate-600 overflow-x-auto",children:n.jsx("pre",{className:"m-0 whitespace-pre-wrap",children:JSON.stringify(o.metadata,null,2)})})]},o.id))})]})},Wk=()=>{const[t,e]=N.useState([]),[r,s]=N.useState("all"),[a,o]=N.useState(null),[c,u]=N.useState({}),[h,m]=N.useState(null);N.useEffect(()=>{Z.getAllTransactions().then(e)},[]);const x=t.filter(w=>r==="all"||w.status===r),g=async w=>{if(!w.txHash){alert("No TX hash provided for this transaction");return}o(w.id);try{const _=await(await fetch(`/api/admin/verify-tx/${w.txHash}?expectedAmount=${w.amount}&transactionId=${w.id}`)).json();u(v=>({...v,[w.id]:_})),Z.getAllTransactions().then(e)}catch{u(_=>({..._,[w.id]:{valid:!1,error:"API request failed"}}))}o(null)},y=async w=>{confirm("Approve this transaction?")&&(await Z.approveTransaction(w.id)?Z.getAllTransactions().then(e):alert("Failed to approve"))},j=async w=>{confirm("ptal etmek istediinize emin misiniz? Bu ilem geri alnamaz.")&&(await Z.rejectTransaction(w.id)?Z.getAllTransactions().then(e):alert("Failed to reject"))},b=w=>{m(E=>E===w?null:w)};return n.jsxs(er,{title:"Transactions",children:[n.jsx("div",{className:"mb-6 flex gap-2",children:["all","completed","pending","cancelled"].map(w=>n.jsx("button",{onClick:()=>s(w),className:`px-4 py-2 rounded-lg text-sm font-bold capitalize transition-colors ${r===w?"bg-blue-600 text-white shadow-md shadow-blue-500/20":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:w},w))}),n.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"ID"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Amount"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"TX Hash"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Status"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:x.map(w=>{var v;const E=c[w.id],_=h===w.id;return n.jsxs(gs.Fragment,{children:[n.jsxs("tr",{className:`hover:bg-gray-50/50 transition-colors ${_?"bg-slate-50":""}`,children:[n.jsxs("td",{className:"p-4 text-xs text-gray-400 font-mono",children:[w.id.substring(0,12),"..."]}),n.jsx("td",{className:"p-4 text-sm font-bold text-gray-700",children:w.owner}),n.jsx("td",{className:"p-4",children:n.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase tracking-wider ${w.type.startsWith("P2P")?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:w.type})}),n.jsxs("td",{className:`p-4 font-mono font-bold ${w.amount>0?"text-green-600":"text-gray-900"}`,children:[w.amount>0?"+":"",w.amount.toLocaleString()," ",w.currency]}),n.jsx("td",{className:"p-4",children:w.txHash?n.jsxs("a",{href:`https://tronscan.org/#/transaction/${w.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-mono text-blue-600 hover:underline",children:[w.txHash.substring(0,16),"..."]}):n.jsx("span",{className:"text-xs text-gray-400",children:"No TX hash"})}),n.jsx("td",{className:"p-4 text-right",children:n.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase tracking-wide ${w.status==="completed"||w.status==="COMPLETED"?"bg-green-50 text-green-600":w.status==="pending"||w.status==="PENDING"?"bg-amber-50 text-amber-600":w.status==="cancelled"||w.status==="CANCELLED"?"bg-red-50 text-red-600":"bg-gray-50 text-gray-500"}`,children:w.status})}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{onClick:()=>b(w.id),className:`p-1 rounded hover:bg-gray-200 text-gray-500 transition-colors ${_?"bg-gray-200 text-gray-800":""}`,title:"View Audit Logs",children:n.jsx("span",{className:"material-symbols-outlined text-base",children:"history"})}),w.status==="PENDING"&&w.txHash&&n.jsx("button",{onClick:()=>g(w),disabled:a===w.id,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm flex items-center gap-1",children:a===w.id?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"animate-spin",children:""})," Verifying..."]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"search"}),"Verify TX"]})}),w.status==="PENDING"&&n.jsx("button",{onClick:()=>y(w),className:"bg-green-500 hover:bg-green-600 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:"Approve"}),w.status==="PENDING"&&n.jsx("button",{onClick:()=>j(w),className:"bg-red-500 hover:bg-red-600 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:"ptal"})]})})]}),E&&n.jsx("tr",{className:`${E.valid?E.recommendApprove?"bg-green-50":"bg-amber-50":"bg-red-50"}`,children:n.jsx("td",{colSpan:7,className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsx("span",{className:`material-symbols-outlined text-xl ${E.valid?E.recommendApprove?"text-green-600":"text-amber-600":"text-red-600"}`,children:E.valid?E.recommendApprove?"check_circle":"warning":"cancel"}),E.valid?n.jsxs("div",{className:"flex gap-6 flex-wrap",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500 text-xs",children:"Blockchain Amount:"}),n.jsxs("span",{className:"ml-2 font-bold",children:[(v=E.amount)==null?void 0:v.toFixed(2)," USDT"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500 text-xs",children:"Confirmed:"}),n.jsx("span",{className:`ml-2 font-bold ${E.confirmed?"text-green-600":"text-amber-600"}`,children:E.confirmed?"Yes":"Pending"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500 text-xs",children:"Vault Match:"}),n.jsx("span",{className:`ml-2 font-bold ${E.vaultMatch?"text-green-600":"text-red-600"}`,children:E.vaultMatch?" Correct":" Wrong Address"})]}),E.recommendApprove&&n.jsx("span",{className:"bg-green-600 text-white text-xs font-bold px-2 py-1 rounded",children:" RECOMMENDED TO APPROVE"})]}):n.jsx("span",{className:"text-red-600 font-medium",children:E.error})]})})}),_&&n.jsx("tr",{children:n.jsxs("td",{colSpan:7,className:"p-4 bg-slate-50 border-b border-gray-100",children:[w.metadata&&w.metadata.source==="payment_panel"&&n.jsxs("div",{className:"mb-4 bg-white p-4 rounded-lg border border-blue-100 shadow-sm",children:[n.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-blue-500 text-base",children:"payments"}),"Payment Panel Details"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Panel Name"}),n.jsx("div",{className:"font-bold",children:w.metadata.panel_name||"Unknown Panel"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Source Slug"}),n.jsx("a",{href:`/#/pay/${w.metadata.public_slug}`,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline font-mono text-xs",children:w.metadata.public_slug})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Commission"}),n.jsxs("div",{className:"font-bold text-red-500",children:["-",w.metadata.commission," ",w.asset_type,n.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["(",w.metadata.commission_type==="percentage"?`%${w.metadata.commission_val}`:"Fixed",")"]})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Net Amount to User"}),n.jsxs("div",{className:"font-bold text-green-600 text-lg",children:[w.metadata.net_amount," ",w.asset_type]})]})]})]}),n.jsx(Hk,{transactionId:w.id})]})})]},w.id)})})]})})})]})},Vk=()=>{const[t,e]=N.useState([]),[r,s]=N.useState("all"),[a,o]=N.useState(!0),[c,u]=N.useState(null);N.useEffect(()=>{h();const b=setInterval(h,5e3);return()=>clearInterval(b)},[]);const h=async()=>{o(!0);const b=await Z.getAllP2POrders();e(b),o(!1)},m=t.filter(b=>r==="all"||b.status===r.toUpperCase()),x=async b=>{if(!confirm("Bu siparii zorla tamamlamak istediinize emin misiniz?"))return;u(b);const w=await Z.adminForceCompleteP2POrder(b);u(null),w.success?(alert("Sipari baaryla tamamland"),h()):alert(`Hata: ${w.error}`)},g=async b=>{if(!confirm("Bu siparii zorla iptal etmek istediinize emin misiniz?"))return;u(b);const w=await Z.adminForceCancelP2POrder(b);u(null),w.success?(alert("Sipari baaryla iptal edildi"),h()):alert(`Hata: ${w.error}`)},y=b=>{switch(b){case"OPEN":return"bg-blue-50 text-blue-600";case"MATCHED":return"bg-purple-50 text-purple-600";case"PAID":return"bg-amber-50 text-amber-600";case"COMPLETED":return"bg-green-50 text-green-600";case"CANCELLED":return"bg-red-50 text-red-600";default:return"bg-gray-50 text-gray-600"}},j=b=>new Date(b).toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return n.jsxs(er,{title:"P2P Orders",children:[n.jsxs("div",{className:"mb-6 flex gap-2 flex-wrap",children:[["all","open","matched","paid","completed","cancelled"].map(b=>n.jsx("button",{onClick:()=>s(b),className:`px-4 py-2 rounded-lg text-sm font-bold capitalize transition-colors ${r===b?"bg-purple-600 text-white shadow-md shadow-purple-500/20":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:b==="all"?"Tm":b},b)),n.jsxs("button",{onClick:h,className:"ml-auto px-4 py-2 rounded-lg text-sm font-bold bg-gray-100 hover:bg-gray-200 text-gray-600 transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-base",children:"refresh"}),"Yenile"]})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"ID"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Alc (Buyer)"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Satc (Seller)"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Miktar"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Durum"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Tarih"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"lemler"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:a?n.jsx("tr",{children:n.jsxs("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:[n.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full"}),n.jsx("p",{className:"mt-2",children:"Ykleniyor..."})]})}):m.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"Gsterilecek sipari yok"})}):m.map(b=>n.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[n.jsxs("td",{className:"p-4 text-xs text-gray-400 font-mono",children:[b.id.substring(0,8),"..."]}),n.jsx("td",{className:"p-4",children:b.buyer?n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-gray-700",children:b.buyer.name||"N/A"}),n.jsx("div",{className:"text-xs text-gray-400",children:b.buyer.email})]}):n.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),n.jsx("td",{className:"p-4",children:b.seller?n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-gray-700",children:b.seller.name||"N/A"}),n.jsx("div",{className:"text-xs text-gray-400",children:b.seller.email})]}):n.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),n.jsxs("td",{className:"p-4 font-mono font-bold text-gray-900",children:["$",b.amount_usd.toLocaleString()]}),n.jsx("td",{className:"p-4",children:n.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase tracking-wide ${y(b.status)}`,children:b.status})}),n.jsx("td",{className:"p-4 text-xs text-gray-500",children:j(b.created_at)}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex gap-2 justify-end",children:[["OPEN","MATCHED","PAID"].includes(b.status)&&n.jsx("button",{onClick:()=>x(b.id),disabled:c===b.id,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:c===b.id?"...":"Zorla Tamamla"}),["OPEN","MATCHED","PAID"].includes(b.status)&&n.jsx("button",{onClick:()=>g(b.id),disabled:c===b.id,className:"bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:c===b.id?"...":"Zorla ptal"}),["COMPLETED","CANCELLED"].includes(b.status)&&n.jsx("span",{className:"text-xs text-gray-400",children:"-"})]})})]},b.id))})]})})}),n.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-5 gap-4",children:["OPEN","MATCHED","PAID","COMPLETED","CANCELLED"].map(b=>n.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[n.jsx("div",{className:`text-2xl font-bold ${y(b).replace("bg-","text-").replace("-50","-600")}`,children:t.filter(w=>w.status===b).length}),n.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:b})]},b))})]})},qk=[{value:"",label:"Tm"},{value:"auth",label:"Kimlik Dorulama"},{value:"transaction",label:"lem"},{value:"kyc",label:"KYC"},{value:"p2p",label:"P2P"},{value:"admin",label:"Admin"},{value:"user",label:"Kullanc"},{value:"system",label:"Sistem"},{value:"security",label:"Gvenlik"}],Kk=t=>{switch(t==null?void 0:t.toLowerCase()){case"auth":return"text-blue-400";case"transaction":return"text-emerald-400";case"kyc":return"text-purple-400";case"p2p":return"text-yellow-400";case"admin":return"text-pink-400";case"user":return"text-cyan-400";case"system":return"text-gray-400";case"security":return"text-red-400";default:return"text-gray-400"}},Zk=t=>{switch(t){case"success":return"bg-emerald-500/20 text-emerald-400";case"failed":return"bg-red-500/20 text-red-400";case"pending":return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}},Gk=()=>{const[t,e]=N.useState([]),[r,s]=N.useState(!0),[a,o]=N.useState(""),[c,u]=N.useState("");N.useEffect(()=>{const m=async()=>{s(!0);const g=await Z.getAdminLogs({action_type:a||void 0,limit:200});e(g),s(!1)};m();const x=setInterval(m,5e3);return()=>clearInterval(x)},[a]);const h=c?t.filter(m=>{var x,g,y;return((x=m.description)==null?void 0:x.toLowerCase().includes(c.toLowerCase()))||((g=m.user)==null?void 0:g.toLowerCase().includes(c.toLowerCase()))||((y=m.action)==null?void 0:y.toLowerCase().includes(c.toLowerCase()))}):t;return n.jsxs(er,{title:"Aktivite Loglar",children:[n.jsxs("div",{className:"bg-[#1E1E1E] rounded-xl p-4 mb-4 border border-gray-800 flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-gray-500 text-xs mb-1 block",children:"Ara"}),n.jsx("input",{type:"text",value:c,onChange:m=>u(m.target.value),placeholder:"Aklama, kullanc veya ilem ara...",className:"w-full bg-[#2D2D2D] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none"})]}),n.jsxs("div",{className:"w-full sm:w-48",children:[n.jsx("label",{className:"text-gray-500 text-xs mb-1 block",children:"Tr"}),n.jsx("select",{value:a,onChange:m=>o(m.target.value),className:"w-full bg-[#2D2D2D] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none",children:qk.map(m=>n.jsx("option",{value:m.value,children:m.label},m.value))})]})]}),n.jsxs("div",{className:"bg-[#1E1E1E] rounded-xl shadow-lg border border-gray-800 overflow-hidden",children:[n.jsxs("div",{className:"bg-[#2D2D2D] px-4 py-2 border-b border-gray-700 flex justify-between items-center",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),n.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),n.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-gray-400 text-xs",children:[h.length," kayt"]}),n.jsxs("span",{className:"flex items-center gap-1 text-emerald-400 text-xs",children:[n.jsx("span",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),"Canl"]})]})]}),n.jsx("div",{className:"font-mono text-sm h-[600px] overflow-y-auto",children:r&&t.length===0?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("div",{className:"w-8 h-8 border-2 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin"})}):h.length===0?n.jsx("div",{className:"flex items-center justify-center h-full text-gray-600",children:c||a?"Sonu bulunamad":"Henz log kayd yok..."}):n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-[#252525] sticky top-0",children:n.jsxs("tr",{className:"text-gray-500 text-xs",children:[n.jsx("th",{className:"text-left p-3 font-medium",children:"Zaman"}),n.jsx("th",{className:"text-left p-3 font-medium",children:"Tr"}),n.jsx("th",{className:"text-left p-3 font-medium",children:"Durum"}),n.jsx("th",{className:"text-left p-3 font-medium",children:"Aklama"}),n.jsx("th",{className:"text-left p-3 font-medium",children:"Kullanc"})]})}),n.jsx("tbody",{children:h.map(m=>n.jsxs("tr",{className:"border-b border-gray-800/50 hover:bg-white/5 transition-colors",children:[n.jsx("td",{className:"p-3 text-gray-500 whitespace-nowrap",children:m.formattedTime}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:`font-bold ${Kk(m.type)}`,children:m.type})}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Zk(m.status)}`,children:m.status==="success"?"":m.status==="failed"?"":""})}),n.jsx("td",{className:"p-3 text-gray-300 max-w-md truncate",children:m.description}),n.jsx("td",{className:"p-3 text-gray-500 text-xs",children:m.userName||m.user})]},m.id))})]})})]})]})},Wu="f8f57351-2bcf-428c-92d0-7d8652807847",Vu="https://api.trongrid.io",J0="TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",Yk=async t=>{try{const e=await fetch(`${Vu}/v1/accounts/${t}`,{headers:{"TRON-PRO-API-KEY":Wu}});if(!e.ok)return 0;const r=await e.json();return r.data&&r.data.length>0?(r.data[0].balance||0)/1e6:0}catch{return 0}},Jk=async t=>{try{const e=await fetch(`${Vu}/v1/accounts/${t}/tokens?token_id=${J0}`,{headers:{"TRON-PRO-API-KEY":Wu}});if(!e.ok)return 0;const r=await e.json();return r.data&&r.data.length>0?(parseFloat(r.data[0].balance)||0)/1e6:0}catch{return 0}},Xk=async t=>{const[e,r]=await Promise.all([Yk(t),Jk(t)]);return{trx:e,usdt:r}},Qk=async(t,e=20)=>{try{const r=await fetch(`${Vu}/v1/accounts/${t}/transactions/trc20?limit=${e}&contract_address=${J0}`,{headers:{"TRON-PRO-API-KEY":Wu}});return r.ok?(await r.json()).data||[]:[]}catch{return[]}},eS=()=>{const[t,e]=N.useState({vaults:[],ledger:[]}),[r,s]=N.useState(!0),[a,o]=N.useState({}),[c,u]=N.useState(!1),[h,m]=N.useState(null),[x,g]=N.useState(""),[y,j]=N.useState(""),[b,w]=N.useState(!1),[E,_]=N.useState(!1),[v,S]=N.useState(null),[P,R]=N.useState([]),[A,O]=N.useState(!1);N.useEffect(()=>{const F=()=>Z.getAdminVaults().then($=>{e($),s(!1)});F();const q=setInterval(F,5e3);return()=>clearInterval(q)},[]),N.useEffect(()=>{const F=async()=>{for(const q of t.vaults)if(q.address&&q.address.startsWith("T")){o($=>({...$,[q.id]:{trx:0,usdt:0,loading:!0}}));try{const $=await Xk(q.address);o(Q=>({...Q,[q.id]:{...$,loading:!1}}))}catch{o(Q=>({...Q,[q.id]:{trx:0,usdt:0,loading:!1}}))}}};t.vaults.length>0&&F()},[t.vaults]);const z=F=>{navigator.clipboard.writeText(F)},I=async(F,q)=>{O(!0),S(q);const $=await Qk(F);R($),O(!1)},W=async F=>{if(F.preventDefault(),!h||!x)return;_(!0),await Z.manualVaultDeposit(h.id,parseFloat(x),y||"External Transfer","TRC20",b)?(u(!1),g(""),j(""),w(!1),_(!1),Z.getAdminVaults().then(e)):(alert("Failed to deposit"),_(!1))};return n.jsx(er,{title:"Crypto Vaults (TRX)",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-[calc(100vh-140px)] relative",children:[c&&h&&n.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm rounded-2xl",children:n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl w-96 max-w-full",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:["Add Funds to ",h.name]}),n.jsxs("form",{onSubmit:W,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Amount (USDT)"}),n.jsx("input",{type:"number",value:x,onChange:F=>g(F.target.value),className:"w-full border border-gray-300 rounded-lg p-2",placeholder:"0.00",step:"0.01",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Sender Email (Optional)"}),n.jsx("input",{type:"text",value:y,onChange:F=>j(F.target.value),className:"w-full border border-gray-300 rounded-lg p-2",placeholder:"external@sender.com"})]}),y&&n.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"addToUser",checked:b,onChange:F=>w(F.target.checked),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("label",{htmlFor:"addToUser",className:"text-sm text-gray-700 font-medium select-none",children:"Also credit user's balance"})]}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm font-bold",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-bold",children:E?"Processing...":"Add Funds"})]})]})]})}),n.jsxs("div",{className:"lg:w-1/3 flex flex-col bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center",children:[n.jsx("h2",{className:"font-bold text-gray-800",children:"Vault Accounts"}),n.jsxs("span",{className:"text-xs font-bold text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[t.vaults.length," Active"]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.vaults.map(F=>{const q=a[F.id];return n.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition-all group relative",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-red-50 text-red-500 flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-sm",children:"account_balance_wallet"})}),n.jsx("h3",{className:"font-bold text-gray-700 text-sm",children:F.name}),n.jsx("button",{onClick:async $=>{$.stopPropagation(),(await Z.toggleVaultStatus(F.id)).success&&Z.getAdminVaults().then(e)},className:`px-2 py-0.5 rounded text-[10px] font-bold ${F.is_active!==!1?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:F.is_active!==!1?"AKTF":"PASF"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsxs("span",{className:"text-lg font-extrabold text-[#111827]",children:["$",F.balance.toLocaleString()]}),n.jsx("p",{className:"text-[10px] text-gray-400",children:"Platform Balance"})]}),n.jsx("button",{onClick:$=>{$.stopPropagation(),m(F),u(!0)},className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-colors",title:"Add Funds Manually",children:n.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})})]})]}),F.address&&F.address.startsWith("T")&&n.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-2 mb-2 border border-green-100",children:[n.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-1",children:" Blockchain Balance"}),q!=null&&q.loading?n.jsx("p",{className:"text-xs text-gray-400 animate-pulse",children:"Loading..."}):q?n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("span",{className:"text-sm font-bold text-green-600",children:[q.usdt.toLocaleString()," USDT"]}),n.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[q.trx.toFixed(2)," TRX"]})]}):n.jsx("p",{className:"text-xs text-gray-400",children:"-"})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 flex justify-between items-center cursor-pointer hover:bg-gray-100 group-hover:bg-blue-50 transition-colors",onClick:()=>z(F.address),title:"Click to copy",children:[n.jsx("p",{className:"font-mono text-xs text-gray-500 truncate w-48",children:F.address}),n.jsx("span",{className:"material-symbols-outlined text-gray-400 text-xs group-hover:text-blue-500",children:"content_copy"})]}),n.jsxs("button",{onClick:()=>I(F.address,F.id),className:"mt-2 w-full px-3 py-2 bg-purple-50 hover:bg-purple-100 text-purple-600 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-colors",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"history"}),v===F.id&&A?"Ykleniyor...":"Blockchain Gemii"]}),v===F.id&&!A&&P.length>0&&n.jsx("div",{className:"mt-2 bg-white rounded-lg border border-purple-100 max-h-48 overflow-y-auto",children:P.slice(0,10).map(($,Q)=>{var G,M;return n.jsxs("div",{className:"p-2 border-b border-gray-50 last:border-b-0 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:$.to===F.address?"text-green-600 font-bold":"text-red-600 font-bold",children:[$.to===F.address?"+":"-",(parseFloat($.value)/1e6).toFixed(2)," USDT"]}),n.jsx("span",{className:"text-gray-400",children:new Date($.block_timestamp).toLocaleDateString()})]}),n.jsx("p",{className:"text-gray-400 truncate",children:$.to===F.address?`From: ${(G=$.from)==null?void 0:G.slice(0,10)}...`:`To: ${(M=$.to)==null?void 0:M.slice(0,10)}...`})]},Q)})}),v===F.id&&!A&&P.length===0&&n.jsx("p",{className:"mt-2 text-xs text-gray-400 text-center",children:"Henz blockchain ilemi yok"})]},F.id)})})]}),n.jsxs("div",{className:"flex-1 flex flex-col bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:n.jsx("h2",{className:"font-bold text-gray-800",children:"Vault Ledger"})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{className:"bg-white border-b border-gray-100 sticky top-0 z-10 shadow-sm",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Time"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Network"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Amount"}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Type"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:t.ledger.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:5,className:"p-12 text-center text-gray-400 italic",children:[n.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-20",children:"receipt_long"}),n.jsx("p",{children:"No transaction history"})]})}):t.ledger.map(F=>n.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[n.jsx("td",{className:"p-4 text-xs text-gray-500 whitespace-nowrap",children:new Date(F.timestamp).toLocaleString()}),n.jsx("td",{className:"p-4 text-xs font-bold text-gray-700",children:F.userEmail}),n.jsx("td",{className:"p-4",children:n.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider bg-blue-100 text-blue-700",children:F.network})}),n.jsxs("td",{className:`p-4 font-mono font-bold text-sm ${F.type==="withdraw"?"text-red-600":"text-green-600"}`,children:[F.type==="withdraw"?"-":"+","$",F.amount.toLocaleString()]}),n.jsx("td",{className:"p-4 text-right",children:n.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${F.type==="withdraw"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:F.type})})]},F.id))})]})})]})]})})},tS=[{id:"Kobi",label:"Kobi",color:"bg-green-100 text-green-700"},{id:"Forex",label:"Forex",color:"bg-blue-100 text-blue-700"},{id:"Cash Point",label:"Cash Point",color:"bg-purple-100 text-purple-700"}],rS=["#10B981","#3B82F6","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6366F1"],nS=()=>{const t=we(),[e,r]=N.useState([]),[s,a]=N.useState(!0),[o,c]=N.useState(!1),[u,h]=N.useState({name:"",category:"Kobi",color:"#10B981",is_active:!0}),[m,x]=N.useState(!1);N.useEffect(()=>{g()},[]);const g=async()=>{a(!0);const j=await Z.getDepartments();r(j),a(!1)},y=async j=>{j.preventDefault(),x(!0);const b=await Z.createDepartment(u);b&&b.success?(c(!1),h({name:"",category:"Kobi",color:"#10B981",is_active:!0}),g()):alert("Failed to create department"),x(!1)};return n.jsxs(er,{title:"Departman Ynetimi",children:[n.jsx("div",{className:"flex gap-6 h-[calc(100vh-140px)]",children:n.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"font-bold text-gray-700",children:"Departmanlar"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:g,className:"p-2 bg-white rounded-full text-gray-400 hover:text-gray-600 shadow-sm border border-gray-100",children:n.jsx("span",{className:"material-symbols-outlined text-lg",children:"refresh"})}),n.jsx("button",{onClick:()=>c(!0),className:"p-2 bg-green-100 rounded-full text-green-600 hover:bg-green-200 shadow-sm",children:n.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})})]})]}),n.jsx("div",{className:"space-y-4",children:s?n.jsx("div",{className:"text-center py-10 text-gray-400",children:"Loading..."}):e.length===0?n.jsx("div",{className:"text-center py-10 text-gray-400 bg-white rounded-xl border border-dashed border-gray-200",children:"No departments found."}):e.map(j=>{var b;return n.jsxs("div",{onClick:()=>t(`/admin/departments/${j.id}`),className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md hover:border-blue-200 transition-all cursor-pointer group",children:[n.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white text-xl font-bold shadow-sm",style:{backgroundColor:j.color||u.color||"#10B981"},children:n.jsx("span",{className:"material-symbols-outlined",children:"business"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-blue-600 transition-colors",children:j.name}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex gap-2",children:[n.jsxs("span",{children:[j.vaults_count||1," vault"]}),n.jsx("span",{children:""}),n.jsxs("span",{children:[j.members&&((b=j.members[0])==null?void 0:b.count)||0," ye"]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-400 font-bold uppercase mb-1",children:"Bakiye"}),n.jsx("div",{className:"font-bold text-gray-800",children:"$0"})]}),n.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-400 font-bold uppercase mb-1",children:"lem"}),n.jsx("div",{className:"font-bold text-gray-800",children:"0"})]})]})]},j.id)})})]})}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6 shadow-2xl transform transition-all scale-100",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Yeni Departman"}),n.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),n.jsxs("form",{onSubmit:y,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Kategori / Tip"}),n.jsx("div",{className:"flex gap-2",children:tS.map(j=>n.jsx("button",{type:"button",onClick:()=>h({...u,category:j.id}),className:`flex-1 py-2 rounded-lg text-xs font-bold border transition-colors ${u.category===j.id?"bg-white border-green-500 text-green-600 shadow-sm ring-1 ring-green-500":"bg-gray-50 border-gray-200 text-gray-500 hover:bg-gray-100"}`,children:j.label},j.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Departman Ad"}),n.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition-all font-bold text-gray-800",placeholder:"rn: Firma A",value:u.name,onChange:j=>h({...u,name:j.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Renk Etiketi"}),n.jsx("div",{className:"flex gap-3",children:rS.map(j=>n.jsx("button",{type:"button",onClick:()=>h({...u,color:j}),className:`w-8 h-8 rounded-full transition-transform ${u.color===j?"scale-125 ring-2 ring-offset-2 ring-gray-300":"hover:scale-110"}`,style:{backgroundColor:j}},j))})]}),n.jsxs("div",{className:"pt-6 flex gap-3",children:[n.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 py-3 bg-white border border-gray-200 hover:bg-gray-50 text-gray-700 font-bold rounded-xl transition-colors",children:"ptal"}),n.jsx("button",{type:"submit",disabled:m,className:"flex-1 py-3 bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white font-bold rounded-xl shadow-lg shadow-green-500/30 transition-all",children:m?"...":"Olutur"})]})]})]})})]})},sS=()=>{var F,q,$,Q,G;const{id:t}=Ou(),e=we(),[r,s]=N.useState(null),[a,o]=N.useState([]),[c,u]=N.useState([]),[h,m]=N.useState([]),[x,g]=N.useState(!0),[y,j]=N.useState("portal"),[b,w]=N.useState(!1),[E,_]=N.useState(!1),[v,S]=N.useState([]),[P,R]=N.useState({name:"",commission_mode:"percentage",commission_value:0,asset:"USDT",settlement_type:"external",is_active:!0});N.useEffect(()=>{t&&(A(),I(),O(),z())},[t]);const A=async()=>{const M=await Z.getDepartment(t);M?s(M):e("/admin/departments"),g(!1)},O=async()=>{const M=await Z.getDepartmentTransactions(t);m(M)},z=async()=>{const M=await Z.getPortalRequests(t);S(M)},I=async()=>{const M=await Z.getAvailableVaults();u(M)},W=async M=>{M.preventDefault();const le=await Z.createPaymentPanel({department_id:t,...P});le!=null&&le.success?(_(!1),A()):alert("Error creating panel")};return x||!r?n.jsx(er,{title:"...",children:"Loading..."}):(r.vaults,n.jsxs(er,{title:"",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[n.jsx("span",{className:"cursor-pointer hover:text-gray-600",onClick:()=>e("/admin/departments"),children:"Departmanlar"}),n.jsx("span",{children:"/"}),n.jsx("span",{className:"text-gray-800 font-bold",children:r.name})]}),n.jsxs("button",{onClick:async()=>{var U,ce;const M=((U=r.owner)==null?void 0:U.account_type)==="business",le=await Z.activateBusinessPanel((ce=r.owner)==null?void 0:ce.id,!M);le.success?(alert(M?"letme Paneli deaktif edildi!":"letme Paneli aktifletirildi!"),A()):alert("Hata: "+(le.error||"lem baarsz"))},className:`px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center gap-2 ${((F=r.owner)==null?void 0:F.account_type)==="business"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-orange-100 text-orange-700 hover:bg-orange-200"}`,children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:((q=r.owner)==null?void 0:q.account_type)==="business"?"storefront":"add_business"}),(($=r.owner)==null?void 0:$.account_type)==="business"?"letme Paneli Aktif":"letme Paneli Aktifletir"]}),n.jsxs("button",{onClick:async()=>{const M=await Z.toggleDepartmentStatus(r.id);M.success?(alert(M.newStatus?"Departman aktif edildi!":"Departman pasif edildi!"),A()):alert("Hata: lem baarsz")},className:`px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center gap-2 ${r.is_active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:r.is_active?"check_circle":"cancel"}),r.is_active?"Departman Aktif":"Departman Pasif"]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[n.jsx("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("h3",{className:"text-green-600 font-bold text-2xl",children:["$",(((Q=r.owner)==null?void 0:Q.balance)||0).toLocaleString()]}),n.jsx("p",{className:"text-green-800 text-xs font-bold uppercase mt-1",children:"Toplam Bakiye"})]})}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("h3",{className:"text-blue-600 font-bold text-2xl",children:["$",h.filter(M=>M.type==="DEPOSIT"||M.amount>0).reduce((M,le)=>M+Math.abs(le.amount||0),0).toLocaleString()]}),n.jsx("p",{className:"text-blue-800 text-xs font-bold uppercase mt-1",children:"Yatrmlar"})]})}),n.jsx("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("h3",{className:"text-red-600 font-bold text-2xl",children:["$",h.filter(M=>M.type==="WITHDRAW"||M.amount<0).reduce((M,le)=>M+Math.abs(le.amount||0),0).toLocaleString()]}),n.jsx("p",{className:"text-red-800 text-xs font-bold uppercase mt-1",children:"ekimler"})]})}),n.jsx("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-purple-600 font-bold text-2xl",children:h.length}),n.jsx("p",{className:"text-purple-800 text-xs font-bold uppercase mt-1",children:"lemler"})]})})]}),n.jsx("div",{className:"flex gap-8 border-b border-gray-100 mb-6",children:["transactions","members","portal"].map(M=>n.jsx("button",{onClick:()=>j(M),className:`pb-3 text-sm font-bold capitalize transition-colors ${y===M?"text-green-600 border-b-2 border-green-500":"text-gray-400 hover:text-gray-600"}`,children:M==="transactions"?"lemler":M==="members"?"yeler":"deme Portal"},M))}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 min-h-[400px]",children:[y==="transactions"&&n.jsx("div",{className:"p-6",children:h.length===0?n.jsx("div",{className:"text-center text-gray-400 py-12",children:"Henz ilem yok."}):n.jsx("div",{className:"space-y-3",children:h.map(M=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${M.type==="DEPOSIT"||M.amount>0?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:n.jsx("span",{className:"material-symbols-outlined text-sm",children:M.type==="DEPOSIT"||M.amount>0?"arrow_downward":"arrow_upward"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-gray-800",children:M.type==="DEPOSIT"?"Yatrm":M.type==="WITHDRAW"?"ekim":M.type==="TRANSFER"?"Transfer":M.type}),n.jsx("p",{className:"text-xs text-gray-500",children:new Date(M.created_at).toLocaleString("tr-TR")})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`font-bold ${M.amount>0?"text-green-600":"text-red-600"}`,children:[M.amount>0?"+":"",Math.abs(M.amount).toLocaleString()," USDT"]}),n.jsx("p",{className:`text-xs ${M.status==="COMPLETED"?"text-green-500":M.status==="PENDING"?"text-amber-500":"text-gray-500"}`,children:M.status==="COMPLETED"?"Tamamland":M.status==="PENDING"?"Beklemede":M.status})]})]},M.id))})}),y==="members"&&n.jsx("div",{className:"p-8 text-center text-gray-400",children:"Henz ye yok."}),y==="portal"&&n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl border border-green-200 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-green-600 font-bold uppercase mb-1",children:"# NUSD Adresi"}),n.jsx("p",{className:"font-mono font-bold text-xl text-green-700",children:((G=r.owner)==null?void 0:G.nusd_code)||"NUSD kod bulunamad"})]}),n.jsxs("button",{onClick:()=>{var le;const M=(le=r.owner)==null?void 0:le.nusd_code;M&&(navigator.clipboard.writeText(M),alert("Kopyaland!"))},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"content_copy"}),"Kopyala"]})]})}),v.filter(M=>M.status==="pending").length>0&&n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:[n.jsxs("h4",{className:"font-bold text-amber-800 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"pending_actions"}),"Bekleyen Portal Talepleri (",v.filter(M=>M.status==="pending").length,")"]}),n.jsx("div",{className:"space-y-2",children:v.filter(M=>M.status==="pending").map(M=>{var le;return n.jsxs("div",{className:"bg-white p-3 rounded-lg flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-gray-800",children:M.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[((le=M.requester)==null?void 0:le.email)||"Bilinmiyor"," - ",new Date(M.created_at).toLocaleDateString("tr-TR")]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{const U=await Z.approvePortalRequest(M.id);U.success?(alert("Portal oluturuldu!"),A(),z()):alert("Hata: "+(U.error||"Onaylama baarsz"))},className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-lg text-xs font-bold",children:"Onayla"}),n.jsx("button",{onClick:async()=>{(await Z.rejectPortalRequest(M.id)).success&&z()},className:"bg-red-100 hover:bg-red-200 text-red-600 px-3 py-1.5 rounded-lg text-xs font-bold",children:"Reddet"})]})]},M.id)})})]}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h3",{className:"font-bold text-gray-800",children:"deme Portallar"}),n.jsx("button",{onClick:()=>_(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold px-4 py-2 rounded-lg",children:"+ Yeni Portal"})]}),r.panels&&r.panels.length>0?n.jsx("div",{className:"space-y-4",children:r.panels.map(M=>n.jsxs("div",{className:"border border-gray-200 p-4 rounded-xl",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center text-green-700 font-bold text-xl",children:M.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-800",children:M.name}),n.jsxs("p",{className:"text-xs text-gray-400",children:["/",M.public_slug]})]})]}),n.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${M.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:M.is_active?"AKTF":"PASF"})]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg flex items-center gap-2",children:[n.jsxs("code",{className:"flex-1 text-xs text-gray-600 truncate font-mono",children:[window.location.origin,"/#/pay/",M.public_slug]}),n.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md text-xs font-bold transition-colors",onClick:()=>window.open(`/#/pay/${M.public_slug}`,"_blank"),children:"Portal A "}),n.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1.5 rounded-md text-xs font-bold transition-colors",children:"Kopyala"}),n.jsx("button",{onClick:async()=>{if(window.confirm(`"${M.name}" portaln silmek istediinize emin misiniz?`)){const le=await Z.deletePaymentPanel(M.id);le.success?(alert("Portal silindi!"),A()):alert("Hata: "+(le.error||"Silme baarsz"))}},className:"bg-red-100 hover:bg-red-200 text-red-600 px-3 py-1.5 rounded-md text-xs font-bold transition-colors",children:"Sil"})]})]},M.id))}):n.jsx("div",{className:"text-center py-10 text-gray-400 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:"Henz portal oluturulmam."})]})]})]}),E&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[n.jsx("h3",{className:"font-bold text-lg mb-4",children:"Yeni Portal Olutur"}),n.jsxs("form",{onSubmit:W,className:"space-y-4",children:[n.jsx("input",{className:"w-full p-3 border rounded-lg",placeholder:"Portal Ad",value:P.name,onChange:M=>R({...P,name:M.target.value}),required:!0}),n.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-xl font-bold",children:"Olutur"}),n.jsx("button",{type:"button",onClick:()=>_(!1),className:"w-full text-gray-500 mt-2",children:"ptal"})]})]})})]}))},iS=()=>{const[t,e]=N.useState(null),[r,s]=N.useState(!0),[a,o]=N.useState(!1),[c,u]=N.useState(null),[h,m]=N.useState(null);N.useEffect(()=>{x()},[]);const x=async()=>{s(!0);try{const b=await Z.getExchangeRate();e(b),b.fetched_at&&u(new Date(b.fetched_at))}catch(b){console.error("Load rate error:",b)}finally{s(!1)}},g=async()=>{o(!0),m(null);try{const b=await Z.updateExchangeRate();b.success?(m({success:!0,message:`Kur gncellendi: 1 USDT = ${b.rate.toFixed(2)} TRY`}),e({rate:b.rate,buy_rate:b.buy_rate,sell_rate:b.sell_rate,spread:b.spread,fetched_at:b.fetched_at,is_fallback:!1}),u(new Date(b.fetched_at))):m({success:!1,message:b.error||"Gncelleme baarsz"})}catch(b){m({success:!1,message:b.message||"Balant hatas"})}finally{o(!1)}},y=b=>b.toLocaleString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),j=()=>{if(!c)return"Bilinmiyor";const b=Date.now()-c.getTime(),w=Math.floor(b/6e4);if(w<1)return"Az nce";if(w<60)return`${w} dakika nce`;const E=Math.floor(w/60);return E<24?`${E} saat nce`:y(c)};return n.jsx(er,{title:"Kur Ynetimi",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-white",children:"Kur Ynetimi"}),n.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"USDT/TRY dviz kuru ayarlar"})]}),n.jsx("button",{onClick:g,disabled:a,className:`px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-all ${a?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-lime-500 text-black hover:bg-lime-400 active:scale-[0.98]"}`,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Gncelleniyor..."]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"material-symbols-outlined",children:"refresh"}),"Kuru Gncelle"]})})]}),h&&n.jsx("div",{className:`mb-6 p-4 rounded-xl border ${h.success?"bg-lime-500/10 border-lime-500/30 text-lime-400":"bg-red-500/10 border-red-500/30 text-red-400"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:h.success?"check_circle":"error"}),h.message]})}),r?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx("div",{className:"w-10 h-10 border-2 border-lime-500/30 border-t-lime-500 rounded-full animate-spin"})}):t?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-white/5",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-blue-400 text-2xl",children:"show_chart"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Piyasa Kuru"}),n.jsx("p",{className:"text-xs text-gray-500",children:"CoinGecko"})]})]}),n.jsxs("p",{className:"text-3xl font-bold text-white",children:["",t.rate.toFixed(2)]}),n.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"1 USDT"})]}),n.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-lime-500/20",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-lime-500/20 rounded-xl flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-lime-400 text-2xl",children:"add_circle"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Alm Kuru"}),n.jsxs("p",{className:"text-xs text-lime-400",children:["+",t.spread.toFixed(2)," spread"]})]})]}),n.jsxs("p",{className:"text-3xl font-bold text-lime-400",children:["",t.buy_rate.toFixed(2)]}),n.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Kullanc USDT alrken der"})]}),n.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-red-500/20",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-red-400 text-2xl",children:"remove_circle"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Satm Kuru"}),n.jsxs("p",{className:"text-xs text-red-400",children:["-",t.spread.toFixed(2)," spread"]})]})]}),n.jsxs("p",{className:"text-3xl font-bold text-red-400",children:["",t.sell_rate.toFixed(2)]}),n.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Kullanc USDT satarken alr"})]})]}):null,n.jsxs("div",{className:"mt-6 bg-[#1a1a1a] rounded-2xl p-6 border border-white/5",children:[n.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"info"}),"Kur Bilgileri"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[n.jsx("span",{className:"text-gray-400",children:"Son Gncelleme"}),n.jsx("span",{className:"text-white",children:j()})]}),n.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[n.jsx("span",{className:"text-gray-400",children:"Kaynak"}),n.jsx("span",{className:"text-white",children:"CoinGecko API"})]}),n.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[n.jsx("span",{className:"text-gray-400",children:"Spread"}),n.jsxs("span",{className:"text-white",children:["",(t==null?void 0:t.spread.toFixed(2))||"0.10"]})]}),n.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[n.jsx("span",{className:"text-gray-400",children:"Veri Tipi"}),n.jsx("span",{className:t!=null&&t.is_fallback?"text-amber-400":"text-lime-400",children:t!=null&&t.is_fallback?"Fallback (Varsaylan)":"Gerek Zamanl"})]})]})]}),n.jsxs("div",{className:"mt-6 bg-amber-500/10 rounded-2xl p-6 border border-amber-500/20",children:[n.jsxs("h3",{className:"text-amber-400 font-bold mb-2 flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"calculate"}),"Spread Nasl alr?"]}),n.jsx("p",{className:"text-gray-300 text-sm",children:"Her ilemde 0.10 spread uygulanr:"}),n.jsxs("ul",{className:"list-none mt-2 space-y-1",children:[n.jsxs("li",{children:[" ",n.jsx("strong",{className:"text-lime-400",children:"Alm:"})," Kullanc USDT satn alrken piyasa kuru + 0.10 der"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{className:"text-red-400",children:"Satm:"})," Kullanc USDT satarken piyasa kuru - 0.10 alr"]})]})]})]})})};function X0(t,e){const r=N.useRef(e);N.useEffect(function(){e!==r.current&&t.attributionControl!=null&&(r.current!=null&&t.attributionControl.removeAttribution(r.current),e!=null&&t.attributionControl.addAttribution(e)),r.current=e},[t,e])}const aS=1;function oS(t){return Object.freeze({__version:aS,map:t})}function lS(t,e){return Object.freeze({...t,...e})}const Q0=N.createContext(null),ey=Q0.Provider;function qu(){const t=N.useContext(Q0);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function cS(t){function e(r,s){const{instance:a,context:o}=t(r).current;return N.useImperativeHandle(s,()=>a),r.children==null?null:gs.createElement(ey,{value:o},r.children)}return N.forwardRef(e)}function dS(t){function e(r,s){const[a,o]=N.useState(!1),{instance:c}=t(r,o).current;N.useImperativeHandle(s,()=>c),N.useEffect(function(){a&&c.update()},[c,a,r.children]);const u=c._contentNode;return u?cx.createPortal(r.children,u):null}return N.forwardRef(e)}function uS(t){function e(r,s){const{instance:a}=t(r).current;return N.useImperativeHandle(s,()=>a),null}return N.forwardRef(e)}function ty(t,e){const r=N.useRef();N.useEffect(function(){return e!=null&&t.instance.on(e),r.current=e,function(){r.current!=null&&t.instance.off(r.current),r.current=null}},[t,e])}function Ku(t,e){const r=t.pane??e.pane;return r?{...t,pane:r}:t}function hS(t,e){return function(s,a){const o=qu(),c=t(Ku(s,o),o);return X0(o.map,s.attribution),ty(c.current,s.eventHandlers),e(c.current,o,s,a),c}}var Rd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(r,s){s(e)})(cn,function(r){var s="1.9.4";function a(i){var l,d,f,p;for(d=1,f=arguments.length;d<f;d++){p=arguments[d];for(l in p)i[l]=p[l]}return i}var o=Object.create||function(){function i(){}return function(l){return i.prototype=l,new i}}();function c(i,l){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var f=d.call(arguments,2);return function(){return i.apply(l,f.length?f.concat(d.call(arguments)):arguments)}}var u=0;function h(i){return"_leaflet_id"in i||(i._leaflet_id=++u),i._leaflet_id}function m(i,l,d){var f,p,k,T;return T=function(){f=!1,p&&(k.apply(d,p),p=!1)},k=function(){f?p=arguments:(i.apply(d,arguments),setTimeout(T,l),f=!0)},k}function x(i,l,d){var f=l[1],p=l[0],k=f-p;return i===f&&d?i:((i-p)%k+k)%k+p}function g(){return!1}function y(i,l){if(l===!1)return i;var d=Math.pow(10,l===void 0?6:l);return Math.round(i*d)/d}function j(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function b(i){return j(i).split(/\s+/)}function w(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?o(i.options):{});for(var d in l)i.options[d]=l[d];return i.options}function E(i,l,d){var f=[];for(var p in i)f.push(encodeURIComponent(d?p.toUpperCase():p)+"="+encodeURIComponent(i[p]));return(!l||l.indexOf("?")===-1?"?":"&")+f.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function v(i,l){return i.replace(_,function(d,f){var p=l[f];if(p===void 0)throw new Error("No value provided for variable "+d);return typeof p=="function"&&(p=p(l)),p})}var S=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function P(i,l){for(var d=0;d<i.length;d++)if(i[d]===l)return d;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var O=0;function z(i){var l=+new Date,d=Math.max(0,16-(l-O));return O=l+d,window.setTimeout(i,d)}var I=window.requestAnimationFrame||A("RequestAnimationFrame")||z,W=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function F(i,l,d){if(d&&I===z)i.call(l);else return I.call(window,c(i,l))}function q(i){i&&W.call(window,i)}var $={__proto__:null,extend:a,create:o,bind:c,get lastId(){return u},stamp:h,throttle:m,wrapNum:x,falseFn:g,formatNum:y,trim:j,splitWords:b,setOptions:w,getParamString:E,template:v,isArray:S,indexOf:P,emptyImageUrl:R,requestFn:I,cancelFn:W,requestAnimFrame:F,cancelAnimFrame:q};function Q(){}Q.extend=function(i){var l=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,f=o(d);f.constructor=l,l.prototype=f;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(l[p]=this[p]);return i.statics&&a(l,i.statics),i.includes&&(G(i.includes),a.apply(null,[f].concat(i.includes))),a(f,i),delete f.statics,delete f.includes,f.options&&(f.options=d.options?o(d.options):{},a(f.options,i.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,T=f._initHooks.length;k<T;k++)f._initHooks[k].call(this)}},l},Q.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},Q.mergeOptions=function(i){return a(this.prototype.options,i),this},Q.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function G(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=S(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var M={on:function(i,l,d){if(typeof i=="object")for(var f in i)this._on(f,i[f],l);else{i=b(i);for(var p=0,k=i.length;p<k;p++)this._on(i[p],l,d)}return this},off:function(i,l,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var f in i)this._off(f,i[f],l);else{i=b(i);for(var p=arguments.length===1,k=0,T=i.length;k<T;k++)p?this._off(i[k]):this._off(i[k],l,d)}return this},_on:function(i,l,d,f){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,d)===!1){d===this&&(d=void 0);var p={fn:l,ctx:d};f&&(p.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(p)}},_off:function(i,l,d){var f,p,k;if(this._events&&(f=this._events[i],!!f)){if(arguments.length===1){if(this._firingCount)for(p=0,k=f.length;p<k;p++)f[p].fn=g;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var T=this._listens(i,l,d);if(T!==!1){var D=f[T];this._firingCount&&(D.fn=g,this._events[i]=f=f.slice()),f.splice(T,1)}}},fire:function(i,l,d){if(!this.listens(i,d))return this;var f=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var p=this._events[i];if(p){this._firingCount=this._firingCount+1||1;for(var k=0,T=p.length;k<T;k++){var D=p[k],B=D.fn;D.once&&this.off(i,B,D.ctx),B.call(D.ctx||this,f)}this._firingCount--}}return d&&this._propagateEvent(f),this},listens:function(i,l,d,f){typeof i!="string"&&console.warn('"string" type argument expected');var p=l;typeof l!="function"&&(f=!!l,p=void 0,d=void 0);var k=this._events&&this._events[i];if(k&&k.length&&this._listens(i,p,d)!==!1)return!0;if(f){for(var T in this._eventParents)if(this._eventParents[T].listens(i,l,d,f))return!0}return!1},_listens:function(i,l,d){if(!this._events)return!1;var f=this._events[i]||[];if(!l)return!!f.length;d===this&&(d=void 0);for(var p=0,k=f.length;p<k;p++)if(f[p].fn===l&&f[p].ctx===d)return p;return!1},once:function(i,l,d){if(typeof i=="object")for(var f in i)this._on(f,i[f],l,!0);else{i=b(i);for(var p=0,k=i.length;p<k;p++)this._on(i[p],l,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[h(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[h(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};M.addEventListener=M.on,M.removeEventListener=M.clearAllEventListeners=M.off,M.addOneTimeEventListener=M.once,M.fireEvent=M.fire,M.hasEventListeners=M.listens;var le=Q.extend(M);function U(i,l,d){this.x=d?Math.round(i):i,this.y=d?Math.round(l):l}var ce=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(i){return this.clone()._add(J(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(J(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new U(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new U(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(i){i=J(i);var l=i.x-this.x,d=i.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(i){return i=J(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=J(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function J(i,l,d){return i instanceof U?i:S(i)?new U(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new U(i.x,i.y):new U(i,l,d)}function K(i,l){if(i)for(var d=l?[i,l]:i,f=0,p=d.length;f<p;f++)this.extend(d[f])}K.prototype={extend:function(i){var l,d;if(!i)return this;if(i instanceof U||typeof i[0]=="number"||"x"in i)l=d=J(i);else if(i=H(i),l=i.min,d=i.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,d;return typeof i[0]=="number"||i instanceof U?i=J(i):i=H(i),i instanceof K?(l=i.min,d=i.max):l=d=i,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=H(i);var l=this.min,d=this.max,f=i.min,p=i.max,k=p.x>=l.x&&f.x<=d.x,T=p.y>=l.y&&f.y<=d.y;return k&&T},overlaps:function(i){i=H(i);var l=this.min,d=this.max,f=i.min,p=i.max,k=p.x>l.x&&f.x<d.x,T=p.y>l.y&&f.y<d.y;return k&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,d=this.max,f=Math.abs(l.x-d.x)*i,p=Math.abs(l.y-d.y)*i;return H(J(l.x-f,l.y-p),J(d.x+f,d.y+p))},equals:function(i){return i?(i=H(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function H(i,l){return!i||i instanceof K?i:new K(i,l)}function ee(i,l){if(i)for(var d=l?[i,l]:i,f=0,p=d.length;f<p;f++)this.extend(d[f])}ee.prototype={extend:function(i){var l=this._southWest,d=this._northEast,f,p;if(i instanceof X)f=i,p=i;else if(i instanceof ee){if(f=i._southWest,p=i._northEast,!f||!p)return this}else return i?this.extend(se(i)||te(i)):this;return!l&&!d?(this._southWest=new X(f.lat,f.lng),this._northEast=new X(p.lat,p.lng)):(l.lat=Math.min(f.lat,l.lat),l.lng=Math.min(f.lng,l.lng),d.lat=Math.max(p.lat,d.lat),d.lng=Math.max(p.lng,d.lng)),this},pad:function(i){var l=this._southWest,d=this._northEast,f=Math.abs(l.lat-d.lat)*i,p=Math.abs(l.lng-d.lng)*i;return new ee(new X(l.lat-f,l.lng-p),new X(d.lat+f,d.lng+p))},getCenter:function(){return new X((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new X(this.getNorth(),this.getWest())},getSouthEast:function(){return new X(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof X||"lat"in i?i=se(i):i=te(i);var l=this._southWest,d=this._northEast,f,p;return i instanceof ee?(f=i.getSouthWest(),p=i.getNorthEast()):f=p=i,f.lat>=l.lat&&p.lat<=d.lat&&f.lng>=l.lng&&p.lng<=d.lng},intersects:function(i){i=te(i);var l=this._southWest,d=this._northEast,f=i.getSouthWest(),p=i.getNorthEast(),k=p.lat>=l.lat&&f.lat<=d.lat,T=p.lng>=l.lng&&f.lng<=d.lng;return k&&T},overlaps:function(i){i=te(i);var l=this._southWest,d=this._northEast,f=i.getSouthWest(),p=i.getNorthEast(),k=p.lat>l.lat&&f.lat<d.lat,T=p.lng>l.lng&&f.lng<d.lng;return k&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=te(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function te(i,l){return i instanceof ee?i:new ee(i,l)}function X(i,l,d){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,d!==void 0&&(this.alt=+d)}X.prototype={equals:function(i,l){if(!i)return!1;i=se(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+y(this.lat,i)+", "+y(this.lng,i)+")"},distanceTo:function(i){return Ue.distance(this,se(i))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return te([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new X(this.lat,this.lng,this.alt)}};function se(i,l,d){return i instanceof X?i:S(i)&&typeof i[0]!="object"?i.length===3?new X(i[0],i[1],i[2]):i.length===2?new X(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new X(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new X(i,l,d)}var ue={latLngToPoint:function(i,l){var d=this.projection.project(i),f=this.scale(l);return this.transformation._transform(d,f)},pointToLatLng:function(i,l){var d=this.scale(l),f=this.transformation.untransform(i,d);return this.projection.unproject(f)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(i),f=this.transformation.transform(l.min,d),p=this.transformation.transform(l.max,d);return new K(f,p)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?x(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?x(i.lat,this.wrapLat,!0):i.lat,f=i.alt;return new X(d,l,f)},wrapLatLngBounds:function(i){var l=i.getCenter(),d=this.wrapLatLng(l),f=l.lat-d.lat,p=l.lng-d.lng;if(f===0&&p===0)return i;var k=i.getSouthWest(),T=i.getNorthEast(),D=new X(k.lat-f,k.lng-p),B=new X(T.lat-f,T.lng-p);return new ee(D,B)}},Ue=a({},ue,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var d=Math.PI/180,f=i.lat*d,p=l.lat*d,k=Math.sin((l.lat-i.lat)*d/2),T=Math.sin((l.lng-i.lng)*d/2),D=k*k+Math.cos(f)*Math.cos(p)*T*T,B=2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D));return this.R*B}}),Zi=6378137,As={R:Zi,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,d=this.MAX_LATITUDE,f=Math.max(Math.min(d,i.lat),-d),p=Math.sin(f*l);return new U(this.R*i.lng*l,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(i){var l=180/Math.PI;return new X((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:function(){var i=Zi*Math.PI;return new K([-i,-i],[i,i])}()};function Ln(i,l,d,f){if(S(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=d,this._d=f}Ln.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new U((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function ne(i,l,d,f){return new Ln(i,l,d,f)}var Pe=a({},Ue,{code:"EPSG:3857",projection:As,transformation:function(){var i=.5/(Math.PI*As.R);return ne(i,.5,-i,.5)}()}),en=a({},Pe,{code:"EPSG:900913"});function Gi(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ju(i,l){var d="",f,p,k,T,D,B;for(f=0,k=i.length;f<k;f++){for(D=i[f],p=0,T=D.length;p<T;p++)B=D[p],d+=(p?"L":"M")+B.x+" "+B.y;d+=l?de.svg?"z":"x":""}return d||"M0 0"}var ul=document.documentElement.style,Yi="ActiveXObject"in window,ay=Yi&&!document.addEventListener,Xu="msLaunchUri"in navigator&&!("documentMode"in document),hl=tr("webkit"),Qu=tr("android"),eh=tr("android 2")||tr("android 3"),oy=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ly=Qu&&tr("Google")&&oy<537&&!("AudioNode"in window),fl=!!window.opera,th=!Xu&&tr("chrome"),rh=tr("gecko")&&!hl&&!fl&&!Yi,cy=!th&&tr("safari"),nh=tr("phantom"),sh="OTransition"in ul,dy=navigator.platform.indexOf("Win")===0,ih=Yi&&"transition"in ul,ml="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!eh,ah="MozPerspective"in ul,uy=!window.L_DISABLE_3D&&(ih||ml||ah)&&!sh&&!nh,Os=typeof orientation<"u"||tr("mobile"),hy=Os&&hl,fy=Os&&ml,oh=!window.PointerEvent&&window.MSPointerEvent,lh=!!(window.PointerEvent||oh),ch="ontouchstart"in window||!!window.TouchEvent,my=!window.L_NO_TOUCH&&(ch||lh),py=Os&&fl,gy=Os&&rh,xy=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,yy=function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return i}(),vy=function(){return!!document.createElement("canvas").getContext}(),pl=!!(document.createElementNS&&Gi("svg").createSVGRect),by=!!pl&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),_y=!pl&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),wy=navigator.platform.indexOf("Mac")===0,jy=navigator.platform.indexOf("Linux")===0;function tr(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var de={ie:Yi,ielt9:ay,edge:Xu,webkit:hl,android:Qu,android23:eh,androidStock:ly,opera:fl,chrome:th,gecko:rh,safari:cy,phantom:nh,opera12:sh,win:dy,ie3d:ih,webkit3d:ml,gecko3d:ah,any3d:uy,mobile:Os,mobileWebkit:hy,mobileWebkit3d:fy,msPointer:oh,pointer:lh,touch:my,touchNative:ch,mobileOpera:py,mobileGecko:gy,retina:xy,passiveEvents:yy,canvas:vy,svg:pl,vml:_y,inlineSvg:by,mac:wy,linux:jy},dh=de.msPointer?"MSPointerDown":"pointerdown",uh=de.msPointer?"MSPointerMove":"pointermove",hh=de.msPointer?"MSPointerUp":"pointerup",fh=de.msPointer?"MSPointerCancel":"pointercancel",gl={touchstart:dh,touchmove:uh,touchend:hh,touchcancel:fh},mh={touchstart:Ty,touchmove:Ji,touchend:Ji,touchcancel:Ji},Rn={},ph=!1;function Ny(i,l,d){return l==="touchstart"&&Py(),mh[l]?(d=mh[l].bind(this,d),i.addEventListener(gl[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function ky(i,l,d){if(!gl[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(gl[l],d,!1)}function Sy(i){Rn[i.pointerId]=i}function Ey(i){Rn[i.pointerId]&&(Rn[i.pointerId]=i)}function gh(i){delete Rn[i.pointerId]}function Py(){ph||(document.addEventListener(dh,Sy,!0),document.addEventListener(uh,Ey,!0),document.addEventListener(hh,gh,!0),document.addEventListener(fh,gh,!0),ph=!0)}function Ji(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Rn)l.touches.push(Rn[d]);l.changedTouches=[l],i(l)}}function Ty(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Qe(l),Ji(i,l)}function Cy(i){var l={},d,f;for(f in i)d=i[f],l[f]=d&&d.bind?d.bind(i):d;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Ay=200;function Oy(i,l){i.addEventListener("dblclick",l);var d=0,f;function p(k){if(k.detail!==1){f=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var T=_h(k);if(!(T.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!T.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var D=Date.now();D-d<=Ay?(f++,f===2&&l(Cy(k))):f=1,d=D}}}return i.addEventListener("click",p),{dblclick:l,simDblclick:p}}function Ly(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var xl=ea(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ls=ea(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xh=Ls==="webkitTransition"||Ls==="OTransition"?Ls+"End":"transitionend";function yh(i){return typeof i=="string"?document.getElementById(i):i}function Rs(i,l){var d=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(i,null);d=f?f[l]:null}return d==="auto"?null:d}function _e(i,l,d){var f=document.createElement(i);return f.className=l||"",d&&d.appendChild(f),f}function Le(i){var l=i.parentNode;l&&l.removeChild(i)}function Xi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function In(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function Dn(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function yl(i,l){if(i.classList!==void 0)return i.classList.contains(l);var d=Qi(i);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function pe(i,l){if(i.classList!==void 0)for(var d=b(l),f=0,p=d.length;f<p;f++)i.classList.add(d[f]);else if(!yl(i,l)){var k=Qi(i);vl(i,(k?k+" ":"")+l)}}function Be(i,l){i.classList!==void 0?i.classList.remove(l):vl(i,j((" "+Qi(i)+" ").replace(" "+l+" "," ")))}function vl(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function Qi(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Ot(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&Ry(i,l)}function Ry(i,l){var d=!1,f="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(f)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):i.style.filter+=" progid:"+f+"(opacity="+l+")"}function ea(i){for(var l=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in l)return i[d];return!1}function tn(i,l,d){var f=l||new U(0,0);i.style[xl]=(de.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(d?" scale("+d+")":"")}function $e(i,l){i._leaflet_pos=l,de.any3d?tn(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function rn(i){return i._leaflet_pos||new U(0,0)}var Is,Ds,bl;if("onselectstart"in document)Is=function(){me(window,"selectstart",Qe)},Ds=function(){ke(window,"selectstart",Qe)};else{var zs=ea(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Is=function(){if(zs){var i=document.documentElement.style;bl=i[zs],i[zs]="none"}},Ds=function(){zs&&(document.documentElement.style[zs]=bl,bl=void 0)}}function _l(){me(window,"dragstart",Qe)}function wl(){ke(window,"dragstart",Qe)}var ta,jl;function Nl(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(ra(),ta=i,jl=i.style.outlineStyle,i.style.outlineStyle="none",me(window,"keydown",ra))}function ra(){ta&&(ta.style.outlineStyle=jl,ta=void 0,jl=void 0,ke(window,"keydown",ra))}function vh(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function kl(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var Iy={__proto__:null,TRANSFORM:xl,TRANSITION:Ls,TRANSITION_END:xh,get:yh,getStyle:Rs,create:_e,remove:Le,empty:Xi,toFront:In,toBack:Dn,hasClass:yl,addClass:pe,removeClass:Be,setClass:vl,getClass:Qi,setOpacity:Ot,testProp:ea,setTransform:tn,setPosition:$e,getPosition:rn,get disableTextSelection(){return Is},get enableTextSelection(){return Ds},disableImageDrag:_l,enableImageDrag:wl,preventOutline:Nl,restoreOutline:ra,getSizedParentNode:vh,getScale:kl};function me(i,l,d,f){if(l&&typeof l=="object")for(var p in l)El(i,p,l[p],d);else{l=b(l);for(var k=0,T=l.length;k<T;k++)El(i,l[k],d,f)}return this}var rr="_leaflet_events";function ke(i,l,d,f){if(arguments.length===1)bh(i),delete i[rr];else if(l&&typeof l=="object")for(var p in l)Pl(i,p,l[p],d);else if(l=b(l),arguments.length===2)bh(i,function(D){return P(l,D)!==-1});else for(var k=0,T=l.length;k<T;k++)Pl(i,l[k],d,f);return this}function bh(i,l){for(var d in i[rr]){var f=d.split(/\d/)[0];(!l||l(f))&&Pl(i,f,null,null,d)}}var Sl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function El(i,l,d,f){var p=l+h(d)+(f?"_"+h(f):"");if(i[rr]&&i[rr][p])return this;var k=function(D){return d.call(f||i,D||window.event)},T=k;!de.touchNative&&de.pointer&&l.indexOf("touch")===0?k=Ny(i,l,k):de.touch&&l==="dblclick"?k=Oy(i,k):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(Sl[l]||l,k,de.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(k=function(D){D=D||window.event,Cl(i,D)&&T(D)},i.addEventListener(Sl[l],k,!1)):i.addEventListener(l,T,!1):i.attachEvent("on"+l,k),i[rr]=i[rr]||{},i[rr][p]=k}function Pl(i,l,d,f,p){p=p||l+h(d)+(f?"_"+h(f):"");var k=i[rr]&&i[rr][p];if(!k)return this;!de.touchNative&&de.pointer&&l.indexOf("touch")===0?ky(i,l,k):de.touch&&l==="dblclick"?Ly(i,k):"removeEventListener"in i?i.removeEventListener(Sl[l]||l,k,!1):i.detachEvent("on"+l,k),i[rr][p]=null}function nn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Tl(i){return El(i,"wheel",nn),this}function Bs(i){return me(i,"mousedown touchstart dblclick contextmenu",nn),i._leaflet_disable_click=!0,this}function Qe(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function sn(i){return Qe(i),nn(i),this}function _h(i){if(i.composedPath)return i.composedPath();for(var l=[],d=i.target;d;)l.push(d),d=d.parentNode;return l}function wh(i,l){if(!l)return new U(i.clientX,i.clientY);var d=kl(l),f=d.boundingClientRect;return new U((i.clientX-f.left)/d.x-l.clientLeft,(i.clientY-f.top)/d.y-l.clientTop)}var Dy=de.linux&&de.chrome?window.devicePixelRatio:de.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function jh(i){return de.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Dy:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Cl(i,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var zy={__proto__:null,on:me,off:ke,stopPropagation:nn,disableScrollPropagation:Tl,disableClickPropagation:Bs,preventDefault:Qe,stop:sn,getPropagationPath:_h,getMousePosition:wh,getWheelDelta:jh,isExternalTarget:Cl,addListener:me,removeListener:ke},Nh=le.extend({run:function(i,l,d,f){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=rn(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var d=this._startPos.add(this._offset.multiplyBy(i));l&&d._round(),$e(this._el,d),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),ve=le.extend({options:{crs:Pe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=w(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(se(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ls&&de.any3d&&!de.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,xh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(se(i),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var f=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,d.zoom):this._tryAnimatedPan(i,d.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,d){var f=this.getZoomScale(l),p=this.getSize().divideBy(2),k=i instanceof U?i:this.latLngToContainerPoint(i),T=k.subtract(p).multiplyBy(1-1/f),D=this.containerPointToLatLng(p.add(T));return this.setView(D,l,{zoom:d})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():te(i);var d=J(l.paddingTopLeft||l.padding||[0,0]),f=J(l.paddingBottomRight||l.padding||[0,0]),p=this.getBoundsZoom(i,!1,d.add(f));if(p=typeof l.maxZoom=="number"?Math.min(l.maxZoom,p):p,p===1/0)return{center:i.getCenter(),zoom:p};var k=f.subtract(d).divideBy(2),T=this.project(i.getSouthWest(),p),D=this.project(i.getNorthEast(),p),B=this.unproject(T.add(D).divideBy(2).add(k),p);return{center:B,zoom:p}},fitBounds:function(i,l){if(i=te(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=J(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Nh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){pe(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,d){if(d=d||{},d.animate===!1||!de.any3d)return this.setView(i,l,d);this._stop();var f=this.project(this.getCenter()),p=this.project(i),k=this.getSize(),T=this._zoom;i=se(i),l=l===void 0?T:l;var D=Math.max(k.x,k.y),B=D*this.getZoomScale(T,l),V=p.distanceTo(f)||1,re=1.42,fe=re*re;function ge(Fe){var ma=Fe?-1:1,kv=Fe?B:D,Sv=B*B-D*D+ma*fe*fe*V*V,Ev=2*kv*fe*V,$l=Sv/Ev,sf=Math.sqrt($l*$l+1)-$l,Pv=sf<1e-9?-18:Math.log(sf);return Pv}function ut(Fe){return(Math.exp(Fe)-Math.exp(-Fe))/2}function Ge(Fe){return(Math.exp(Fe)+Math.exp(-Fe))/2}function Rt(Fe){return ut(Fe)/Ge(Fe)}var xt=ge(0);function Fn(Fe){return D*(Ge(xt)/Ge(xt+re*Fe))}function _v(Fe){return D*(Ge(xt)*Rt(xt+re*Fe)-ut(xt))/fe}function wv(Fe){return 1-Math.pow(1-Fe,1.5)}var jv=Date.now(),rf=(ge(1)-xt)/re,Nv=d.duration?1e3*d.duration:1e3*rf*.8;function nf(){var Fe=(Date.now()-jv)/Nv,ma=wv(Fe)*rf;Fe<=1?(this._flyToFrame=F(nf,this),this._move(this.unproject(f.add(p.subtract(f).multiplyBy(_v(ma)/V)),T),this.getScaleZoom(D/Fn(ma),T),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),nf.call(this),this},flyToBounds:function(i,l){var d=this._getBoundsCenterZoom(i,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(i){return i=te(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var d=this.getCenter(),f=this._limitCenter(d,this._zoom,te(i));return d.equals(f)||this.panTo(f,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),f=J(l.paddingBottomRight||l.padding||[0,0]),p=this.project(this.getCenter()),k=this.project(i),T=this.getPixelBounds(),D=H([T.min.add(d),T.max.subtract(f)]),B=D.getSize();if(!D.contains(k)){this._enforcingBounds=!0;var V=k.subtract(D.getCenter()),re=D.extend(k).getSize().subtract(B);p.x+=V.x<0?-re.x:re.x,p.y+=V.y<0?-re.y:re.y,this.panTo(this.unproject(p),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),f=l.divideBy(2).round(),p=d.divideBy(2).round(),k=f.subtract(p);return!k.x&&!k.y?this:(i.animate&&i.pan?this.panBy(k):(i.pan&&this._rawPanBy(k),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=c(this._handleGeolocationResponse,this),d=c(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,i):navigator.geolocation.getCurrentPosition(l,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,d=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,d=i.coords.longitude,f=new X(l,d),p=f.toBounds(i.coords.accuracy*2),k=this._locateOptions;if(k.setView){var T=this.getBoundsZoom(p);this.setView(f,k.maxZoom?Math.min(T,k.maxZoom):T)}var D={latlng:f,bounds:p,timestamp:i.timestamp};for(var B in i.coords)typeof i.coords[B]=="number"&&(D[B]=i.coords[B]);this.fire("locationfound",D)}},addHandler:function(i,l){if(!l)return this;var d=this[i]=new l(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Le(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Le(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),f=_e("div",d,l||this._mapPane);return i&&(this._panes[i]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new ee(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,d){i=te(i),d=J(d||[0,0]);var f=this.getZoom()||0,p=this.getMinZoom(),k=this.getMaxZoom(),T=i.getNorthWest(),D=i.getSouthEast(),B=this.getSize().subtract(d),V=H(this.project(D,f),this.project(T,f)).getSize(),re=de.any3d?this.options.zoomSnap:1,fe=B.x/V.x,ge=B.y/V.y,ut=l?Math.max(fe,ge):Math.min(fe,ge);return f=this.getScaleZoom(ut,f),re&&(f=Math.round(f/(re/100))*(re/100),f=l?Math.ceil(f/re)*re:Math.floor(f/re)*re),Math.max(p,Math.min(k,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var d=this._getTopLeftPoint(i,l);return new K(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(i)/d.scale(l)},getScaleZoom:function(i,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var f=d.zoom(i*d.scale(l));return isNaN(f)?1/0:f},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(se(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(i),l)},layerPointToLatLng:function(i){var l=J(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(se(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(se(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(te(i))},distance:function(i,l){return this.options.crs.distance(se(i),se(l))},containerPointToLayerPoint:function(i){return J(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return J(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(J(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(se(i)))},mouseEventToContainerPoint:function(i){return wh(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=yh(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&de.any3d,pe(i,"leaflet-container"+(de.touch?" leaflet-touch":"")+(de.retina?" leaflet-retina":"")+(de.ielt9?" leaflet-oldie":"")+(de.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Rs(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),$e(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pe(i.markerPane,"leaflet-zoom-hide"),pe(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,d){$e(this._mapPane,new U(0,0));var f=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var p=this._zoom!==l;this._moveStart(p,d)._move(i,l)._moveEnd(p),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,d,f){l===void 0&&(l=this._zoom);var p=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),f?d&&d.pinch&&this.fire("zoom",d):((p||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){$e(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[h(this._container)]=this;var l=i?ke:me;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),de.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var d=[],f,p=l==="mouseout"||l==="mouseover",k=i.target||i.srcElement,T=!1;k;){if(f=this._targets[h(k)],f&&(l==="click"||l==="preclick")&&this._draggableMoved(f)){T=!0;break}if(f&&f.listens(l,!0)&&(p&&!Cl(k,i)||(d.push(f),p))||k===this._container)break;k=k.parentNode}return!d.length&&!T&&!p&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var d=i.type;d==="mousedown"&&Nl(l),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,d){if(i.type==="click"){var f=a({},i);f.type="preclick",this._fireDOMEvent(f,f.type,d)}var p=this._findEventTargets(i,l);if(d){for(var k=[],T=0;T<d.length;T++)d[T].listens(l,!0)&&k.push(d[T]);p=k.concat(p)}if(p.length){l==="contextmenu"&&Qe(i);var D=p[0],B={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var V=D.getLatLng&&(!D._radius||D._radius<=10);B.containerPoint=V?this.latLngToContainerPoint(D.getLatLng()):this.mouseEventToContainerPoint(i),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=V?D.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(T=0;T<p.length;T++)if(p[T].fire(l,B,!0),B.originalEvent._stopped||p[T].options.bubblingMouseEvents===!1&&P(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return rn(this._mapPane)||new U(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var d=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var d=this.getSize()._divideBy(2);return this.project(i,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,d){var f=this._getNewPixelOrigin(d,l);return this.project(i,l)._subtract(f)},_latLngBoundsToNewLayerBounds:function(i,l,d){var f=this._getNewPixelOrigin(d,l);return H([this.project(i.getSouthWest(),l)._subtract(f),this.project(i.getNorthWest(),l)._subtract(f),this.project(i.getSouthEast(),l)._subtract(f),this.project(i.getNorthEast(),l)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,d){if(!d)return i;var f=this.project(i,l),p=this.getSize().divideBy(2),k=new K(f.subtract(p),f.add(p)),T=this._getBoundsOffset(k,d,l);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?i:this.unproject(f.add(T),l)},_limitOffset:function(i,l){if(!l)return i;var d=this.getPixelBounds(),f=new K(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(f,l))},_getBoundsOffset:function(i,l,d){var f=H(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),p=f.min.subtract(i.min),k=f.max.subtract(i.max),T=this._rebound(p.x,-k.x),D=this._rebound(p.y,-k.y);return new U(T,D)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),d=this.getMaxZoom(),f=de.any3d?this.options.zoomSnap:1;return f&&(i=Math.round(i/f)*f),Math.max(l,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var d=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var i=this._proxy=_e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var d=xl,f=this._proxy.style[d];tn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),f===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Le(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();tn(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(l),p=this._getCenterOffset(i)._divideBy(1-1/f);return d.animate!==!0&&!this.getSize().contains(p)?!1:(F(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,d,f){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function By(i,l){return new ve(i,l)}var $t=Q.extend({options:{position:"topright"},initialize:function(i){w(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),d=this.getPosition(),f=i._controlCorners[d];return pe(l,"leaflet-control"),d.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Le(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Ms=function(i){return new $t(i)};ve.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",d=this._controlContainer=_e("div",l+"control-container",this._container);function f(p,k){var T=l+p+" "+l+k;i[p+k]=_e("div",T,d)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Le(this._controlCorners[i]);Le(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var kh=$t.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,d,f){return d<f?-1:f<d?1:0}},initialize:function(i,l,d){w(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in i)this._addLayer(i[f],f);for(f in l)this._addLayer(l[f],f,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return $t.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=_e("div",i),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Bs(l),Tl(l);var f=this._section=_e("section",i+"-list");d&&(this._map.on("click",this.collapse,this),me(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=_e("a",i+"-toggle",l);p.href="#",p.title="Layers",p.setAttribute("role","button"),me(p,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){Qe(k),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=_e("div",i+"-base",f),this._separator=_e("div",i+"-separator",f),this._overlaysList=_e("div",i+"-overlays",f),l.appendChild(f)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(c(function(f,p){return this.options.sortFunction(f.layer,p.layer,f.name,p.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xi(this._baseLayersList),Xi(this._overlaysList),this._layerControlInputs=[];var i,l,d,f,p=0;for(d=0;d<this._layers.length;d++)f=this._layers[d],this._addItem(f),l=l||f.overlay,i=i||!f.overlay,p+=f.overlay?0:1;return this.options.hideSingleBase&&(i=i&&p>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(h(i.target)),d=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(i,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=d,f.firstChild},_addItem:function(i){var l=document.createElement("label"),d=this._map.hasLayer(i.layer),f;i.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=d):f=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(f),f.layerId=h(i.layer),me(f,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+i.name;var k=document.createElement("span");l.appendChild(k),k.appendChild(f),k.appendChild(p);var T=i.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,d,f=[],p=[];this._handlingClick=!0;for(var k=i.length-1;k>=0;k--)l=i[k],d=this._getLayer(l.layerId).layer,l.checked?f.push(d):l.checked||p.push(d);for(k=0;k<p.length;k++)this._map.hasLayer(p[k])&&this._map.removeLayer(p[k]);for(k=0;k<f.length;k++)this._map.hasLayer(f[k])||this._map.addLayer(f[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,d,f=this._map.getZoom(),p=i.length-1;p>=0;p--)l=i[p],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&f<d.options.minZoom||d.options.maxZoom!==void 0&&f>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,me(i,"click",Qe),this.expand();var l=this;setTimeout(function(){ke(i,"click",Qe),l._preventClick=!1})}}),My=function(i,l,d){return new kh(i,l,d)},Al=$t.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",d=_e("div",l+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,d,f,p){var k=_e("a",d,f);return k.innerHTML=i,k.href="#",k.title=l,k.setAttribute("role","button"),k.setAttribute("aria-label",l),Bs(k),me(k,"click",sn),me(k,"click",p,this),me(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";Be(this._zoomInButton,l),Be(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(pe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(pe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});ve.mergeOptions({zoomControl:!0}),ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Al,this.addControl(this.zoomControl))});var Uy=function(i){return new Al(i)},Sh=$t.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",d=_e("div",l),f=this.options;return this._addScales(f,l+"-line",d),i.on(f.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,d){i.metric&&(this._mScale=_e("div",l,d)),i.imperial&&(this._iScale=_e("div",l,d))},_update:function(){var i=this._map,l=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/i)},_updateImperial:function(i){var l=i*3.2808399,d,f,p;l>5280?(d=l/5280,f=this._getRoundNum(d),this._updateScale(this._iScale,f+" mi",f/d)):(p=this._getRoundNum(l),this._updateScale(this._iScale,p+" ft",p/l))},_updateScale:function(i,l,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),d=i/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),$y=function(i){return new Sh(i)},Fy='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ol=$t.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(de.inlineSvg?Fy+" ":"")+"Leaflet</a>"},initialize:function(i){w(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=_e("div","leaflet-control-attribution"),Bs(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});ve.mergeOptions({attributionControl:!0}),ve.addInitHook(function(){this.options.attributionControl&&new Ol().addTo(this)});var Hy=function(i){return new Ol(i)};$t.Layers=kh,$t.Zoom=Al,$t.Scale=Sh,$t.Attribution=Ol,Ms.layers=My,Ms.zoom=Uy,Ms.scale=$y,Ms.attribution=Hy;var nr=Q.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nr.addTo=function(i,l){return i.addHandler(l,this),this};var Wy={Events:M},Eh=de.touch?"touchstart mousedown":"mousedown",Sr=le.extend({options:{clickTolerance:3},initialize:function(i,l,d,f){w(this,f),this._element=i,this._dragStartTarget=l||i,this._preventOutline=d},enable:function(){this._enabled||(me(this._dragStartTarget,Eh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Sr._dragging===this&&this.finishDrag(!0),ke(this._dragStartTarget,Eh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!yl(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Sr._dragging===this&&this.finishDrag();return}if(!(Sr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Sr._dragging=this,this._preventOutline&&Nl(this._element),_l(),Is(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,d=vh(this._element);this._startPoint=new U(l.clientX,l.clientY),this._startPos=rn(this._element),this._parentScale=kl(d);var f=i.type==="mousedown";me(document,f?"mousemove":"touchmove",this._onMove,this),me(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,d=new U(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Qe(i),this._moved||(this.fire("dragstart"),this._moved=!0,pe(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),$e(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){Be(document.body,"leaflet-dragging"),this._lastTarget&&(Be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ke(document,"mousemove touchmove",this._onMove,this),ke(document,"mouseup touchend touchcancel",this._onUp,this),wl(),Ds();var l=this._moved&&this._moving;this._moving=!1,Sr._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ph(i,l,d){var f,p=[1,4,2,8],k,T,D,B,V,re,fe,ge;for(k=0,re=i.length;k<re;k++)i[k]._code=an(i[k],l);for(D=0;D<4;D++){for(fe=p[D],f=[],k=0,re=i.length,T=re-1;k<re;T=k++)B=i[k],V=i[T],B._code&fe?V._code&fe||(ge=na(V,B,fe,l,d),ge._code=an(ge,l),f.push(ge)):(V._code&fe&&(ge=na(V,B,fe,l,d),ge._code=an(ge,l),f.push(ge)),f.push(B));i=f}return i}function Th(i,l){var d,f,p,k,T,D,B,V,re;if(!i||i.length===0)throw new Error("latlngs not passed");Lt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var fe=se([0,0]),ge=te(i),ut=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());ut<1700&&(fe=Ll(i));var Ge=i.length,Rt=[];for(d=0;d<Ge;d++){var xt=se(i[d]);Rt.push(l.project(se([xt.lat-fe.lat,xt.lng-fe.lng])))}for(D=B=V=0,d=0,f=Ge-1;d<Ge;f=d++)p=Rt[d],k=Rt[f],T=p.y*k.x-k.y*p.x,B+=(p.x+k.x)*T,V+=(p.y+k.y)*T,D+=T*3;D===0?re=Rt[0]:re=[B/D,V/D];var Fn=l.unproject(J(re));return se([Fn.lat+fe.lat,Fn.lng+fe.lng])}function Ll(i){for(var l=0,d=0,f=0,p=0;p<i.length;p++){var k=se(i[p]);l+=k.lat,d+=k.lng,f++}return se([l/f,d/f])}var Vy={__proto__:null,clipPolygon:Ph,polygonCenter:Th,centroid:Ll};function Ch(i,l){if(!l||!i.length)return i.slice();var d=l*l;return i=Zy(i,d),i=Ky(i,d),i}function Ah(i,l,d){return Math.sqrt(Us(i,l,d,!0))}function qy(i,l,d){return Us(i,l,d)}function Ky(i,l){var d=i.length,f=typeof Uint8Array<"u"?Uint8Array:Array,p=new f(d);p[0]=p[d-1]=1,Rl(i,p,l,0,d-1);var k,T=[];for(k=0;k<d;k++)p[k]&&T.push(i[k]);return T}function Rl(i,l,d,f,p){var k=0,T,D,B;for(D=f+1;D<=p-1;D++)B=Us(i[D],i[f],i[p],!0),B>k&&(T=D,k=B);k>d&&(l[T]=1,Rl(i,l,d,f,T),Rl(i,l,d,T,p))}function Zy(i,l){for(var d=[i[0]],f=1,p=0,k=i.length;f<k;f++)Gy(i[f],i[p])>l&&(d.push(i[f]),p=f);return p<k-1&&d.push(i[k-1]),d}var Oh;function Lh(i,l,d,f,p){var k=f?Oh:an(i,d),T=an(l,d),D,B,V;for(Oh=T;;){if(!(k|T))return[i,l];if(k&T)return!1;D=k||T,B=na(i,l,D,d,p),V=an(B,d),D===k?(i=B,k=V):(l=B,T=V)}}function na(i,l,d,f,p){var k=l.x-i.x,T=l.y-i.y,D=f.min,B=f.max,V,re;return d&8?(V=i.x+k*(B.y-i.y)/T,re=B.y):d&4?(V=i.x+k*(D.y-i.y)/T,re=D.y):d&2?(V=B.x,re=i.y+T*(B.x-i.x)/k):d&1&&(V=D.x,re=i.y+T*(D.x-i.x)/k),new U(V,re,p)}function an(i,l){var d=0;return i.x<l.min.x?d|=1:i.x>l.max.x&&(d|=2),i.y<l.min.y?d|=4:i.y>l.max.y&&(d|=8),d}function Gy(i,l){var d=l.x-i.x,f=l.y-i.y;return d*d+f*f}function Us(i,l,d,f){var p=l.x,k=l.y,T=d.x-p,D=d.y-k,B=T*T+D*D,V;return B>0&&(V=((i.x-p)*T+(i.y-k)*D)/B,V>1?(p=d.x,k=d.y):V>0&&(p+=T*V,k+=D*V)),T=i.x-p,D=i.y-k,f?T*T+D*D:new U(p,k)}function Lt(i){return!S(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Rh(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Lt(i)}function Ih(i,l){var d,f,p,k,T,D,B,V;if(!i||i.length===0)throw new Error("latlngs not passed");Lt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var re=se([0,0]),fe=te(i),ge=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());ge<1700&&(re=Ll(i));var ut=i.length,Ge=[];for(d=0;d<ut;d++){var Rt=se(i[d]);Ge.push(l.project(se([Rt.lat-re.lat,Rt.lng-re.lng])))}for(d=0,f=0;d<ut-1;d++)f+=Ge[d].distanceTo(Ge[d+1])/2;if(f===0)V=Ge[0];else for(d=0,k=0;d<ut-1;d++)if(T=Ge[d],D=Ge[d+1],p=T.distanceTo(D),k+=p,k>f){B=(k-f)/p,V=[D.x-B*(D.x-T.x),D.y-B*(D.y-T.y)];break}var xt=l.unproject(J(V));return se([xt.lat+re.lat,xt.lng+re.lng])}var Yy={__proto__:null,simplify:Ch,pointToSegmentDistance:Ah,closestPointOnSegment:qy,clipSegment:Lh,_getEdgeIntersection:na,_getBitCode:an,_sqClosestPointOnSegment:Us,isFlat:Lt,_flat:Rh,polylineCenter:Ih},Il={project:function(i){return new U(i.lng,i.lat)},unproject:function(i){return new X(i.y,i.x)},bounds:new K([-180,-90],[180,90])},Dl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,d=this.R,f=i.lat*l,p=this.R_MINOR/d,k=Math.sqrt(1-p*p),T=k*Math.sin(f),D=Math.tan(Math.PI/4-f/2)/Math.pow((1-T)/(1+T),k/2);return f=-d*Math.log(Math.max(D,1e-10)),new U(i.lng*l*d,f)},unproject:function(i){for(var l=180/Math.PI,d=this.R,f=this.R_MINOR/d,p=Math.sqrt(1-f*f),k=Math.exp(-i.y/d),T=Math.PI/2-2*Math.atan(k),D=0,B=.1,V;D<15&&Math.abs(B)>1e-7;D++)V=p*Math.sin(T),V=Math.pow((1-V)/(1+V),p/2),B=Math.PI/2-2*Math.atan(k*V)-T,T+=B;return new X(T*l,i.x*l/d)}},Jy={__proto__:null,LonLat:Il,Mercator:Dl,SphericalMercator:As},Xy=a({},Ue,{code:"EPSG:3395",projection:Dl,transformation:function(){var i=.5/(Math.PI*Dl.R);return ne(i,.5,-i,.5)}()}),Dh=a({},Ue,{code:"EPSG:4326",projection:Il,transformation:ne(1/180,1,-1/180,.5)}),Qy=a({},ue,{projection:Il,transformation:ne(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var d=l.lng-i.lng,f=l.lat-i.lat;return Math.sqrt(d*d+f*f)},infinite:!0});ue.Earth=Ue,ue.EPSG3395=Xy,ue.EPSG3857=Pe,ue.EPSG900913=en,ue.EPSG4326=Dh,ue.Simple=Qy;var Ft=le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[h(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[h(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});ve.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=h(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return h(i)in this._layers},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},_addLayers:function(i){i=i?S(i)?i:[i]:[];for(var l=0,d=i.length;l<d;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[h(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=h(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,d=this._getZoomSpan();for(var f in this._zoomBoundLayers){var p=this._zoomBoundLayers[f].options;i=p.minZoom===void 0?i:Math.min(i,p.minZoom),l=p.maxZoom===void 0?l:Math.max(l,p.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var zn=Ft.extend({initialize:function(i,l){w(this,l),this._layers={};var d,f;if(i)for(d=0,f=i.length;d<f;d++)this.addLayer(i[d])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),d,f;for(d in this._layers)f=this._layers[d],f[i]&&f[i].apply(f,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return h(i)}}),ev=function(i,l){return new zn(i,l)},ur=zn.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),zn.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),zn.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new ee;for(var l in this._layers){var d=this._layers[l];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),tv=function(i,l){return new ur(i,l)},Bn=Q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){w(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(f,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(i,l){var d=this.options,f=d[l+"Size"];typeof f=="number"&&(f=[f,f]);var p=J(f),k=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||p&&p.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(d.className||""),k&&(i.style.marginLeft=-k.x+"px",i.style.marginTop=-k.y+"px"),p&&(i.style.width=p.x+"px",i.style.height=p.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return de.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function rv(i){return new Bn(i)}var $s=Bn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof $s.imagePath!="string"&&($s.imagePath=this._detectIconPath()),(this.options.imagePath||$s.imagePath)+Bn.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(d,f,p){var k=f.exec(d);return k&&k[p]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=_e("div","leaflet-default-icon-path",document.body),l=Rs(i,"background-image")||Rs(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),zh=nr.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Sr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pe(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,d=l._map,f=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,k=rn(l._icon),T=d.getPixelBounds(),D=d.getPixelOrigin(),B=H(T.min._subtract(D).add(p),T.max._subtract(D).subtract(p));if(!B.contains(k)){var V=J((Math.max(B.max.x,k.x)-B.max.x)/(T.max.x-B.max.x)-(Math.min(B.min.x,k.x)-B.min.x)/(T.min.x-B.min.x),(Math.max(B.max.y,k.y)-B.max.y)/(T.max.y-B.max.y)-(Math.min(B.min.y,k.y)-B.min.y)/(T.min.y-B.min.y)).multiplyBy(f);d.panBy(V,{animate:!1}),this._draggable._newPos._add(V),this._draggable._startPos._add(V),$e(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=F(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,d=l._shadow,f=rn(l._icon),p=l._map.layerPointToLatLng(f);d&&$e(d,f),l._latlng=p,i.latlng=p,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),sa=Ft.extend({options:{icon:new $s,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){w(this,l),this._latlng=se(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=se(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),f=!1;d!==this._icon&&(this._icon&&this._removeIcon(),f=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),pe(d,l),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(d,"focus",this._panOnFocus,this);var p=i.icon.createShadow(this._shadow),k=!1;p!==this._shadow&&(this._removeShadow(),k=!0),p&&(pe(p,l),p.alt=""),this._shadow=p,i.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&k&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ke(this._icon,"focus",this._panOnFocus,this),Le(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Le(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&$e(this._icon,i),this._shadow&&$e(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),zh)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new zh(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Ot(this._icon,i),this._shadow&&Ot(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),f=l.iconAnchor?J(l.iconAnchor):J(0,0);i.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:d.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nv(i,l){return new sa(i,l)}var Er=Ft.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return w(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ia=Er.extend({options:{fill:!0,radius:10},initialize:function(i,l){w(this,l),this._latlng=se(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=se(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return Er.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,d=this._clickTolerance(),f=[i+d,l+d];this._pxBounds=new K(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function sv(i,l){return new ia(i,l)}var zl=ia.extend({initialize:function(i,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),w(this,l),this._latlng=se(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new ee(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Er.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,d=this._map,f=d.options.crs;if(f.distance===Ue.distance){var p=Math.PI/180,k=this._mRadius/Ue.R/p,T=d.project([l+k,i]),D=d.project([l-k,i]),B=T.add(D).divideBy(2),V=d.unproject(B).lat,re=Math.acos((Math.cos(k*p)-Math.sin(l*p)*Math.sin(V*p))/(Math.cos(l*p)*Math.cos(V*p)))/p;(isNaN(re)||re===0)&&(re=k/Math.cos(Math.PI/180*l)),this._point=B.subtract(d.getPixelOrigin()),this._radius=isNaN(re)?0:B.x-d.project([V,i-re]).x,this._radiusY=B.y-T.y}else{var fe=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(fe).x}this._updateBounds()}});function iv(i,l,d){return new zl(i,l,d)}var hr=Er.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){w(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,d=null,f=Us,p,k,T=0,D=this._parts.length;T<D;T++)for(var B=this._parts[T],V=1,re=B.length;V<re;V++){p=B[V-1],k=B[V];var fe=f(i,p,k,!0);fe<l&&(l=fe,d=f(i,p,k))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ih(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=se(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new ee,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Lt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],d=Lt(i),f=0,p=i.length;f<p;f++)d?(l[f]=se(i[f]),this._bounds.extend(l[f])):l[f]=this._convertLatLngs(i[f]);return l},_project:function(){var i=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new U(i,i);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,d){var f=i[0]instanceof X,p=i.length,k,T;if(f){for(T=[],k=0;k<p;k++)T[k]=this._map.latLngToLayerPoint(i[k]),d.extend(T[k]);l.push(T)}else for(k=0;k<p;k++)this._projectLatlngs(i[k],l,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,f,p,k,T,D,B;for(d=0,p=0,k=this._rings.length;d<k;d++)for(B=this._rings[d],f=0,T=B.length;f<T-1;f++)D=Lh(B[f],B[f+1],i,f,!0),D&&(l[p]=l[p]||[],l[p].push(D[0]),(D[1]!==B[f+1]||f===T-2)&&(l[p].push(D[1]),p++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,d=0,f=i.length;d<f;d++)i[d]=Ch(i[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var d,f,p,k,T,D,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,k=this._parts.length;d<k;d++)for(D=this._parts[d],f=0,T=D.length,p=T-1;f<T;p=f++)if(!(!l&&f===0)&&Ah(i,D[p],D[f])<=B)return!0;return!1}});function av(i,l){return new hr(i,l)}hr._flat=Rh;var Mn=hr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Th(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=hr.prototype._convertLatLngs.call(this,i),d=l.length;return d>=2&&l[0]instanceof X&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(i){hr.prototype._setLatLngs.call(this,i),Lt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Lt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,d=new U(l,l);if(i=new K(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,p=this._rings.length,k;f<p;f++)k=Ph(this._rings[f],i,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,d,f,p,k,T,D,B,V;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(k=0,B=this._parts.length;k<B;k++)for(d=this._parts[k],T=0,V=d.length,D=V-1;T<V;D=T++)f=d[T],p=d[D],f.y>i.y!=p.y>i.y&&i.x<(p.x-f.x)*(i.y-f.y)/(p.y-f.y)+f.x&&(l=!l);return l||hr.prototype._containsPoint.call(this,i,!0)}});function ov(i,l){return new Mn(i,l)}var fr=ur.extend({initialize:function(i,l){w(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=S(i)?i:i.features,d,f,p;if(l){for(d=0,f=l.length;d<f;d++)p=l[d],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var k=this.options;if(k.filter&&!k.filter(i))return this;var T=aa(i,k);return T?(T.feature=ca(i),T.defaultOptions=T.options,this.resetStyle(T),k.onEachFeature&&k.onEachFeature(i,T),this.addLayer(T)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function aa(i,l){var d=i.type==="Feature"?i.geometry:i,f=d?d.coordinates:null,p=[],k=l&&l.pointToLayer,T=l&&l.coordsToLatLng||Bl,D,B,V,re;if(!f&&!d)return null;switch(d.type){case"Point":return D=T(f),Bh(k,i,D,l);case"MultiPoint":for(V=0,re=f.length;V<re;V++)D=T(f[V]),p.push(Bh(k,i,D,l));return new ur(p);case"LineString":case"MultiLineString":return B=oa(f,d.type==="LineString"?0:1,T),new hr(B,l);case"Polygon":case"MultiPolygon":return B=oa(f,d.type==="Polygon"?1:2,T),new Mn(B,l);case"GeometryCollection":for(V=0,re=d.geometries.length;V<re;V++){var fe=aa({geometry:d.geometries[V],type:"Feature",properties:i.properties},l);fe&&p.push(fe)}return new ur(p);case"FeatureCollection":for(V=0,re=d.features.length;V<re;V++){var ge=aa(d.features[V],l);ge&&p.push(ge)}return new ur(p);default:throw new Error("Invalid GeoJSON object.")}}function Bh(i,l,d,f){return i?i(l,d):new sa(d,f&&f.markersInheritOptions&&f)}function Bl(i){return new X(i[1],i[0],i[2])}function oa(i,l,d){for(var f=[],p=0,k=i.length,T;p<k;p++)T=l?oa(i[p],l-1,d):(d||Bl)(i[p]),f.push(T);return f}function Ml(i,l){return i=se(i),i.alt!==void 0?[y(i.lng,l),y(i.lat,l),y(i.alt,l)]:[y(i.lng,l),y(i.lat,l)]}function la(i,l,d,f){for(var p=[],k=0,T=i.length;k<T;k++)p.push(l?la(i[k],Lt(i[k])?0:l-1,d,f):Ml(i[k],f));return!l&&d&&p.length>0&&p.push(p[0].slice()),p}function Un(i,l){return i.feature?a({},i.feature,{geometry:l}):ca(l)}function ca(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Ul={toGeoJSON:function(i){return Un(this,{type:"Point",coordinates:Ml(this.getLatLng(),i)})}};sa.include(Ul),zl.include(Ul),ia.include(Ul),hr.include({toGeoJSON:function(i){var l=!Lt(this._latlngs),d=la(this._latlngs,l?1:0,!1,i);return Un(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Mn.include({toGeoJSON:function(i){var l=!Lt(this._latlngs),d=l&&!Lt(this._latlngs[0]),f=la(this._latlngs,d?2:l?1:0,!0,i);return l||(f=[f]),Un(this,{type:(d?"Multi":"")+"Polygon",coordinates:f})}}),zn.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(i).geometry.coordinates)}),Un(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var d=l==="GeometryCollection",f=[];return this.eachLayer(function(p){if(p.toGeoJSON){var k=p.toGeoJSON(i);if(d)f.push(k.geometry);else{var T=ca(k);T.type==="FeatureCollection"?f.push.apply(f,T.features):f.push(T)}}}),d?Un(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Mh(i,l){return new fr(i,l)}var lv=Mh,da=Ft.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,d){this._url=i,this._bounds=te(l),w(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Le(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&In(this._image),this},bringToBack:function(){return this._map&&Dn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=te(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:_e("img");if(pe(l,"leaflet-image-layer"),this._zoomAnimated&&pe(l,"leaflet-zoom-animated"),this.options.className&&pe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=c(this.fire,this,"load"),l.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;tn(this._image,d,l)},_reset:function(){var i=this._image,l=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();$e(i,l.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){Ot(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),cv=function(i,l,d){return new da(i,l,d)},Uh=da.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:_e("video");if(pe(l,"leaflet-image-layer"),this._zoomAnimated&&pe(l,"leaflet-zoom-animated"),this.options.className&&pe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=c(this.fire,this,"load"),i){for(var d=l.getElementsByTagName("source"),f=[],p=0;p<d.length;p++)f.push(d[p].src);this._url=d.length>0?f:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var T=_e("source");T.src=this._url[k],l.appendChild(T)}}});function dv(i,l,d){return new Uh(i,l,d)}var $h=da.extend({_initImage:function(){var i=this._image=this._url;pe(i,"leaflet-image-layer"),this._zoomAnimated&&pe(i,"leaflet-zoom-animated"),this.options.className&&pe(i,this.options.className),i.onselectstart=g,i.onmousemove=g}});function uv(i,l,d){return new $h(i,l,d)}var sr=Ft.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof X||S(i))?(this._latlng=se(i),w(this,l)):(w(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Ot(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Ot(this._container,1),this.bringToFront(),this.options.interactive&&(pe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Ot(this._container,0),this._removeTimeout=setTimeout(c(Le,void 0,this._container),200)):Le(this._container),this.options.interactive&&(Be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=se(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&In(this._container),this},bringToBack:function(){return this._map&&Dn(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof ur){l=null;var d=this._source._layers;for(var f in d)if(d[f]._map){l=d[f];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?$e(this._container,i.add(d)):l=l.add(i).add(d);var f=this._containerBottom=-l.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=f+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});ve.include({_initOverlay:function(i,l,d,f){var p=l;return p instanceof i||(p=new i(f).setContent(l)),d&&p.setLatLng(d),p}}),Ft.include({_initOverlay:function(i,l,d,f){var p=d;return p instanceof i?(w(p,f),p._source=this):(p=l&&!f?l:new i(f,this),p.setContent(d)),p}});var ua=sr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,sr.prototype.openOn.call(this,i)},onAdd:function(i){sr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Er||this._source.on("preclick",nn))},onRemove:function(i){sr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Er||this._source.off("preclick",nn))},getEvents:function(){var i=sr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=_e("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=_e("div",i+"-content-wrapper",l);if(this._contentNode=_e("div",i+"-content",d),Bs(l),Tl(this._contentNode),me(l,"contextmenu",nn),this._tipContainer=_e("div",i+"-tip-container",l),this._tip=_e("div",i+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=_e("a",i+"-close-button",l);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',me(f,"click",function(p){Qe(p),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var f=i.offsetHeight,p=this.options.maxHeight,k="leaflet-popup-scrolled";p&&f>p?(l.height=p+"px",pe(i,k)):Be(i,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();$e(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(Rs(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,f=this._containerWidth,p=new U(this._containerLeft,-d-this._containerBottom);p._add(rn(this._container));var k=i.layerPointToContainerPoint(p),T=J(this.options.autoPanPadding),D=J(this.options.autoPanPaddingTopLeft||T),B=J(this.options.autoPanPaddingBottomRight||T),V=i.getSize(),re=0,fe=0;k.x+f+B.x>V.x&&(re=k.x+f-V.x+B.x),k.x-re-D.x<0&&(re=k.x-D.x),k.y+d+B.y>V.y&&(fe=k.y+d-V.y+B.y),k.y-fe-D.y<0&&(fe=k.y-D.y),(re||fe)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([re,fe]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),hv=function(i,l){return new ua(i,l)};ve.mergeOptions({closePopupOnClick:!0}),ve.include({openPopup:function(i,l,d){return this._initOverlay(ua,i,l,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Ft.include({bindPopup:function(i,l){return this._popup=this._initOverlay(ua,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof ur||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){sn(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof Er)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ha=sr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){sr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){sr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=sr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=_e("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,d,f=this._map,p=this._container,k=f.latLngToContainerPoint(f.getCenter()),T=f.layerPointToContainerPoint(i),D=this.options.direction,B=p.offsetWidth,V=p.offsetHeight,re=J(this.options.offset),fe=this._getAnchor();D==="top"?(l=B/2,d=V):D==="bottom"?(l=B/2,d=0):D==="center"?(l=B/2,d=V/2):D==="right"?(l=0,d=V/2):D==="left"?(l=B,d=V/2):T.x<k.x?(D="right",l=0,d=V/2):(D="left",l=B+(re.x+fe.x)*2,d=V/2),i=i.subtract(J(l,d,!0)).add(re).add(fe),Be(p,"leaflet-tooltip-right"),Be(p,"leaflet-tooltip-left"),Be(p,"leaflet-tooltip-top"),Be(p,"leaflet-tooltip-bottom"),pe(p,"leaflet-tooltip-"+D),$e(p,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Ot(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fv=function(i,l){return new ha(i,l)};ve.include({openTooltip:function(i,l,d){return this._initOverlay(ha,i,l,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Ft.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ha,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof ur||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(me(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),me(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,d,f;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),f=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(l)}});var Fh=Bn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Xi(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var f=J(d.bgPos);l.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function mv(i){return new Fh(i)}Bn.Default=$s;var Fs=Ft.extend({options:{tileSize:256,opacity:1,updateWhenIdle:de.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){w(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Le(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Dn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof U?i:new U(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,d=-i(-1/0,1/0),f=0,p=l.length,k;f<p;f++)k=l[f].style.zIndex,l[f]!==this._container&&k&&(d=i(d,+k));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!de.ielt9){Ot(this._container,this.options.opacity);var i=+new Date,l=!1,d=!1;for(var f in this._tiles){var p=this._tiles[f];if(!(!p.current||!p.loaded)){var k=Math.min(1,(i-p.loaded)/200);Ot(p.el,k),k<1?l=!0:(p.active?d=!0:this._onOpaqueTile(p),p.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(q(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=_e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=l-Math.abs(i-d),this._onUpdateLevel(d)):(Le(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var f=this._levels[i],p=this._map;return f||(f=this._levels[i]={},f.el=_e("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=l,f.origin=p.project(p.unproject(p.getPixelOrigin()),i).round(),f.zoom=i,this._setZoomTransform(f,p.getCenter(),p.getZoom()),g(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var i,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var f=l.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Le(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,d,f){var p=Math.floor(i/2),k=Math.floor(l/2),T=d-1,D=new U(+p,+k);D.z=+T;var B=this._tileCoordsToKey(D),V=this._tiles[B];return V&&V.active?(V.retain=!0,!0):(V&&V.loaded&&(V.retain=!0),T>f?this._retainParent(p,k,T,f):!1)},_retainChildren:function(i,l,d,f){for(var p=2*i;p<2*i+2;p++)for(var k=2*l;k<2*l+2;k++){var T=new U(p,k);T.z=d+1;var D=this._tileCoordsToKey(T),B=this._tiles[D];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);d+1<f&&this._retainChildren(p,k,d+1,f)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,d,f){var p=Math.round(l);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var k=this.options.updateWhenZooming&&p!==this._tileZoom;(!f||k)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,l)},_setZoomTransform:function(i,l,d){var f=this._map.getZoomScale(d,i.zoom),p=i.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(l,d)).round();de.any3d?tn(i.el,p,f):$e(i.el,p)},_resetGrid:function(){var i=this._map,l=i.options.crs,d=this._tileSize=this.getTileSize(),f=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],f).x/d.x),Math.ceil(i.project([0,l.wrapLng[1]],f).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],f).y/d.x),Math.ceil(i.project([l.wrapLat[1],0],f).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),f=l.getZoomScale(d,this._tileZoom),p=l.project(i,this._tileZoom).floor(),k=l.getSize().divideBy(f*2);return new K(p.subtract(k),p.add(k))},_update:function(i){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(i),p=this._pxBoundsToTileRange(f),k=p.getCenter(),T=[],D=this.options.keepBuffer,B=new K(p.getBottomLeft().subtract([D,-D]),p.getTopRight().add([D,-D]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var V in this._tiles){var re=this._tiles[V].coords;(re.z!==this._tileZoom||!B.contains(new U(re.x,re.y)))&&(this._tiles[V].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var fe=p.min.y;fe<=p.max.y;fe++)for(var ge=p.min.x;ge<=p.max.x;ge++){var ut=new U(ge,fe);if(ut.z=this._tileZoom,!!this._isValidTile(ut)){var Ge=this._tiles[this._tileCoordsToKey(ut)];Ge?Ge.current=!0:T.push(ut)}}if(T.sort(function(xt,Fn){return xt.distanceTo(k)-Fn.distanceTo(k)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Rt=document.createDocumentFragment();for(ge=0;ge<T.length;ge++)this._addTile(T[ge],Rt);this._level.el.appendChild(Rt)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!l.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(i);return te(this.options.bounds).overlaps(f)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,d=this.getTileSize(),f=i.scaleBy(d),p=f.add(d),k=l.unproject(f,i.z),T=l.unproject(p,i.z);return[k,T]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),d=new ee(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),d=new U(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(i){var l=this._tiles[i];l&&(Le(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){pe(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=g,i.onmousemove=g,de.ielt9&&this.options.opacity<1&&Ot(i,this.options.opacity)},_addTile:function(i,l){var d=this._getTilePos(i),f=this._tileCoordsToKey(i),p=this.createTile(this._wrapCoords(i),c(this._tileReady,this,i));this._initTile(p),this.createTile.length<2&&F(c(this._tileReady,this,i,null,p)),$e(p,d),this._tiles[f]={el:p,coords:i,current:!0},l.appendChild(p),this.fire("tileloadstart",{tile:p,coords:i})},_tileReady:function(i,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:i});var f=this._tileCoordsToKey(i);d=this._tiles[f],d&&(d.loaded=+new Date,this._map._fadeAnimated?(Ot(d.el,0),q(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(pe(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),de.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new U(this._wrapX?x(i.x,this._wrapX):i.x,this._wrapY?x(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new K(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function pv(i){return new Fs(i)}var $n=Fs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=w(this,l),l.detectRetina&&de.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var d=document.createElement("img");return me(d,"load",c(this._tileOnLoad,this,l,d)),me(d,"error",c(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var l={r:de.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=d),l["-y"]=d}return v(this._url,a(l,this.options))},_tileOnLoad:function(i,l){de.ielt9?setTimeout(c(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,d){var f=this.options.errorTileUrl;f&&l.getAttribute("src")!==f&&(l.src=f),i(d,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,f=this.options.zoomOffset;return d&&(i=l-i),i+f},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=g,l.onerror=g,!l.complete)){l.src=R;var d=this._tiles[i].coords;Le(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",R),Fs.prototype._removeTile.call(this,i)},_tileReady:function(i,l,d){if(!(!this._map||d&&d.getAttribute("src")===R))return Fs.prototype._tileReady.call(this,i,l,d)}});function Hh(i,l){return new $n(i,l)}var Wh=$n.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var d=a({},this.defaultWmsParams);for(var f in l)f in this.options||(d[f]=l[f]);l=w(this,l);var p=l.detectRetina&&de.retina?2:1,k=this.getTileSize();d.width=k.x*p,d.height=k.y*p,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,$n.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),d=this._crs,f=H(d.project(l[0]),d.project(l[1])),p=f.min,k=f.max,T=(this._wmsVersion>=1.3&&this._crs===Dh?[p.y,p.x,k.y,k.x]:[p.x,p.y,k.x,k.y]).join(","),D=$n.prototype.getTileUrl.call(this,i);return D+E(this.wmsParams,D,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function gv(i,l){return new Wh(i,l)}$n.WMS=Wh,Hh.wms=gv;var mr=Ft.extend({options:{padding:.1},initialize:function(i){w(this,i),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var d=this._map.getZoomScale(l,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,l),k=f.multiplyBy(-d).add(p).subtract(this._map._getNewPixelOrigin(i,l));de.any3d?tn(this._container,k,d):$e(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new K(d,d.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vh=mr.extend({options:{tolerance:0},getEvents:function(){var i=mr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");me(i,"mousemove",this._onMouseMove,this),me(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,Le(this._container),ke(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mr.prototype._update.call(this);var i=this._bounds,l=this._container,d=i.getSize(),f=de.retina?2:1;$e(l,i.min),l.width=f*d.x,l.height=f*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",de.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){mr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[h(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,d=l.next,f=l.prev;d?d.prev=f:this._drawLast=f,f?f.next=d:this._drawFirst=d,delete i._order,delete this._layers[h(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),d=[],f,p;for(p=0;p<l.length;p++){if(f=Number(l[p]),isNaN(f))return;d.push(f)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)i=f.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var d,f,p,k,T=i._parts,D=T.length,B=this._ctx;if(D){for(B.beginPath(),d=0;d<D;d++){for(f=0,p=T[d].length;f<p;f++)k=T[d][f],B[f?"lineTo":"moveTo"](k.x,k.y);l&&B.closePath()}this._fillStroke(B,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,d=this._ctx,f=Math.max(Math.round(i._radius),1),p=(Math.max(Math.round(i._radiusY),1)||f)/f;p!==1&&(d.save(),d.scale(1,p)),d.beginPath(),d.arc(l.x,l.y/p,f,0,Math.PI*2,!1),p!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,l){var d=l.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),d,f,p=this._drawFirst;p;p=p.next)d=p.layer,d.options.interactive&&d._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(f=d);this._fireEvent(f?[f]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(Be(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var d,f,p=this._drawFirst;p;p=p.next)d=p.layer,d.options.interactive&&d._containsPoint(l)&&(f=d);f!==this._hoveredLayer&&(this._handleMouseOut(i),f&&(pe(this._container,"leaflet-interactive"),this._fireEvent([f],i,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,d){this._map._fireDOMEvent(l,d||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var d=l.next,f=l.prev;if(d)d.prev=f;else return;f?f.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var d=l.next,f=l.prev;if(f)f.next=d;else return;d?d.prev=f:f&&(this._drawLast=f),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function qh(i){return de.canvas?new Vh(i):null}var Hs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),xv={_initContainer:function(){this._container=_e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=Hs("shape");pe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=Hs("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[h(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;Le(l),i.removeInteractiveTarget(l),delete this._layers[h(i)]},_updateStyle:function(i){var l=i._stroke,d=i._fill,f=i.options,p=i._container;p.stroked=!!f.stroke,p.filled=!!f.fill,f.stroke?(l||(l=i._stroke=Hs("stroke")),p.appendChild(l),l.weight=f.weight+"px",l.color=f.color,l.opacity=f.opacity,f.dashArray?l.dashStyle=S(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=f.lineCap.replace("butt","flat"),l.joinstyle=f.lineJoin):l&&(p.removeChild(l),i._stroke=null),f.fill?(d||(d=i._fill=Hs("fill")),p.appendChild(d),d.color=f.fillColor||f.color,d.opacity=f.fillOpacity):d&&(p.removeChild(d),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),d=Math.round(i._radius),f=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+f+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){In(i._container)},_bringToBack:function(i){Dn(i._container)}},fa=de.vml?Hs:Gi,Ws=mr.extend({_initContainer:function(){this._container=fa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Le(this._container),ke(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),$e(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=fa("path");i.options.className&&pe(l,i.options.className),i.options.interactive&&pe(l,"leaflet-interactive"),this._updateStyle(i),this._layers[h(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Le(i._path),i.removeInteractiveTarget(i._path),delete this._layers[h(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,d=i.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Ju(i._parts,l))},_updateCircle:function(i){var l=i._point,d=Math.max(Math.round(i._radius),1),f=Math.max(Math.round(i._radiusY),1)||d,p="a"+d+","+f+" 0 1,0 ",k=i._empty()?"M0 0":"M"+(l.x-d)+","+l.y+p+d*2+",0 "+p+-d*2+",0 ";this._setPath(i,k)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){In(i._path)},_bringToBack:function(i){Dn(i._path)}});de.vml&&Ws.include(xv);function Kh(i){return de.svg||de.vml?new Ws(i):null}ve.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&qh(i)||Kh(i)}});var Zh=Mn.extend({initialize:function(i,l){Mn.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=te(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function yv(i,l){return new Zh(i,l)}Ws.create=fa,Ws.pointsToPath=Ju,fr.geometryToLayer=aa,fr.coordsToLatLng=Bl,fr.coordsToLatLngs=oa,fr.latLngToCoords=Ml,fr.latLngsToCoords=la,fr.getFeature=Un,fr.asFeature=ca,ve.mergeOptions({boxZoom:!0});var Gh=nr.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Le(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Is(),_l(),this._startPoint=this._map.mouseEventToContainerPoint(i),me(document,{contextmenu:sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=_e("div","leaflet-zoom-box",this._container),pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new K(this._point,this._startPoint),d=l.getSize();$e(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Le(this._box),Be(this._container,"leaflet-crosshair")),Ds(),wl(),ke(document,{contextmenu:sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var l=new ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ve.addInitHook("addHandler","boxZoom",Gh),ve.mergeOptions({doubleClickZoom:!0});var Yh=nr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,d=l.getZoom(),f=l.options.zoomDelta,p=i.originalEvent.shiftKey?d-f:d+f;l.options.doubleClickZoom==="center"?l.setZoom(p):l.setZoomAround(i.containerPoint,p)}});ve.addInitHook("addHandler","doubleClickZoom",Yh),ve.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Jh=nr.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Sr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Be(this._map._container,"leaflet-grab"),Be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=te(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),d=this._initialWorldOffset,f=this._draggable._newPos.x,p=(f-l+d)%i+l-d,k=(f+l+d)%i-l-d,T=Math.abs(p+d)<Math.abs(k+d)?p:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(i){var l=this._map,d=l.options,f=!d.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),f)l.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,T=d.easeLinearity,D=p.multiplyBy(T/k),B=D.distanceTo([0,0]),V=Math.min(d.inertiaMaxSpeed,B),re=D.multiplyBy(V/B),fe=V/(d.inertiaDeceleration*T),ge=re.multiplyBy(-fe/2).round();!ge.x&&!ge.y?l.fire("moveend"):(ge=l._limitOffset(ge,l.options.maxBounds),F(function(){l.panBy(ge,{duration:fe,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});ve.addInitHook("addHandler","dragging",Jh),ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Xh=nr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),me(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ke(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,d=i.scrollTop||l.scrollTop,f=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(f,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},d=this.keyCodes,f,p;for(f=0,p=d.left.length;f<p;f++)l[d.left[f]]=[-1*i,0];for(f=0,p=d.right.length;f<p;f++)l[d.right[f]]=[i,0];for(f=0,p=d.down.length;f<p;f++)l[d.down[f]]=[0,i];for(f=0,p=d.up.length;f<p;f++)l[d.up[f]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},d=this.keyCodes,f,p;for(f=0,p=d.zoomIn.length;f<p;f++)l[d.zoomIn[f]]=i;for(f=0,p=d.zoomOut.length;f<p;f++)l[d.zoomOut[f]]=-i},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,d=this._map,f;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(f=this._panKeys[l],i.shiftKey&&(f=J(f).multiplyBy(3)),d.options.maxBounds&&(f=d._limitOffset(J(f),d.options.maxBounds)),d.options.worldCopyJump){var p=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(f)));d.panTo(p)}else d.panBy(f)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;sn(i)}}});ve.addInitHook("addHandler","keyboard",Xh),ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Qh=nr.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=jh(i),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var f=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),f),sn(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,k=d?Math.ceil(p/d)*d:p,T=i._limitZoom(l+(this._delta>0?k:-k))-l;this._delta=0,this._startTime=null,T&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+T):i.setZoomAround(this._lastMousePos,l+T))}});ve.addInitHook("addHandler","scrollWheelZoom",Qh);var vv=600;ve.mergeOptions({tapHold:de.touchNative&&de.safari&&de.mobile,tapTolerance:15});var ef=nr.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new U(l.clientX,l.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",Qe),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),vv),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){ke(document,"touchend",Qe),ke(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),ke(document,"touchend touchcancel contextmenu",this._cancel,this),ke(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new U(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});ve.addInitHook("addHandler","tapHold",ef),ve.mergeOptions({touchZoom:de.touch,bounceAtZoomLimits:!0});var tf=nr.extend({addHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Be(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(i.touches[0]),f=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(f)._divideBy(2))),this._startDist=d.distanceTo(f),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),Qe(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(i.touches[0]),f=l.mouseEventToContainerPoint(i.touches[1]),p=d.distanceTo(f)/this._startDist;if(this._zoom=l.getScaleZoom(p,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&p<1||this._zoom>l.getMaxZoom()&&p>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var k=d._add(f)._divideBy(2)._subtract(this._centerPoint);if(p===1&&k.x===0&&k.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var T=c(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(T,this,!0),Qe(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ve.addInitHook("addHandler","touchZoom",tf),ve.BoxZoom=Gh,ve.DoubleClickZoom=Yh,ve.Drag=Jh,ve.Keyboard=Xh,ve.ScrollWheelZoom=Qh,ve.TapHold=ef,ve.TouchZoom=tf,r.Bounds=K,r.Browser=de,r.CRS=ue,r.Canvas=Vh,r.Circle=zl,r.CircleMarker=ia,r.Class=Q,r.Control=$t,r.DivIcon=Fh,r.DivOverlay=sr,r.DomEvent=zy,r.DomUtil=Iy,r.Draggable=Sr,r.Evented=le,r.FeatureGroup=ur,r.GeoJSON=fr,r.GridLayer=Fs,r.Handler=nr,r.Icon=Bn,r.ImageOverlay=da,r.LatLng=X,r.LatLngBounds=ee,r.Layer=Ft,r.LayerGroup=zn,r.LineUtil=Yy,r.Map=ve,r.Marker=sa,r.Mixin=Wy,r.Path=Er,r.Point=U,r.PolyUtil=Vy,r.Polygon=Mn,r.Polyline=hr,r.Popup=ua,r.PosAnimation=Nh,r.Projection=Jy,r.Rectangle=Zh,r.Renderer=mr,r.SVG=Ws,r.SVGOverlay=$h,r.TileLayer=$n,r.Tooltip=ha,r.Transformation=Ln,r.Util=$,r.VideoOverlay=Uh,r.bind=c,r.bounds=H,r.canvas=qh,r.circle=iv,r.circleMarker=sv,r.control=Ms,r.divIcon=mv,r.extend=a,r.featureGroup=tv,r.geoJSON=Mh,r.geoJson=lv,r.gridLayer=pv,r.icon=rv,r.imageOverlay=cv,r.latLng=se,r.latLngBounds=te,r.layerGroup=ev,r.map=By,r.marker=nv,r.point=J,r.polygon=ov,r.polyline=av,r.popup=hv,r.rectangle=yv,r.setOptions=w,r.stamp=h,r.svg=Kh,r.svgOverlay=uv,r.tileLayer=Hh,r.tooltip=fv,r.transformation=ne,r.version=s,r.videoOverlay=dv;var bv=window.L;r.noConflict=function(){return window.L=bv,this},window.L=r})})(Rd,Rd.exports);var Ki=Rd.exports;const Zu=Dd(Ki);function Gu(t,e,r){return Object.freeze({instance:t,context:e,container:r})}function Yu(t,e){return e==null?function(s,a){const o=N.useRef();return o.current||(o.current=t(s,a)),o}:function(s,a){const o=N.useRef();o.current||(o.current=t(s,a));const c=N.useRef(s),{instance:u}=o.current;return N.useEffect(function(){c.current!==s&&(e(u,s,c.current),c.current=s)},[u,s,a]),o}}function fS(t,e){N.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function ry(t){return function(r){const s=qu(),a=t(Ku(r,s),s);return X0(s.map,r.attribution),ty(a.current,r.eventHandlers),fS(a.current,s),a}}function mS(t,e){const r=Yu(t,e),s=ry(r);return cS(s)}function pS(t,e){const r=Yu(t),s=hS(r,e);return dS(s)}function gS(t,e){const r=Yu(t,e),s=ry(r);return uS(s)}function xS(t,e,r){const{opacity:s,zIndex:a}=e;s!=null&&s!==r.opacity&&t.setOpacity(s),a!=null&&a!==r.zIndex&&t.setZIndex(a)}function yS(){return qu().map}function Id(){return Id=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Id.apply(this,arguments)}function vS({bounds:t,boundsOptions:e,center:r,children:s,className:a,id:o,placeholder:c,style:u,whenReady:h,zoom:m,...x},g){const[y]=N.useState({className:a,id:o,style:u}),[j,b]=N.useState(null);N.useImperativeHandle(g,()=>(j==null?void 0:j.map)??null,[j]);const w=N.useCallback(_=>{if(_!==null&&j===null){const v=new Ki.Map(_,x);r!=null&&m!=null?v.setView(r,m):t!=null&&v.fitBounds(t,e),h!=null&&v.whenReady(h),b(oS(v))}},[]);N.useEffect(()=>()=>{j==null||j.map.remove()},[j]);const E=j?gs.createElement(ey,{value:j},s):c??null;return gs.createElement("div",Id({},y,{ref:w}),E)}const bS=N.forwardRef(vS),_S=mS(function({position:e,...r},s){const a=new Ki.Marker(e,r);return Gu(a,lS(s,{overlayContainer:a}))},function(e,r,s){r.position!==s.position&&e.setLatLng(r.position),r.icon!=null&&r.icon!==s.icon&&e.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==s.zIndexOffset&&e.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==s.opacity&&e.setOpacity(r.opacity),e.dragging!=null&&r.draggable!==s.draggable&&(r.draggable===!0?e.dragging.enable():e.dragging.disable())}),wS=pS(function(e,r){const s=new Ki.Popup(e,r.overlayContainer);return Gu(s,r)},function(e,r,{position:s},a){N.useEffect(function(){const{instance:c}=e;function u(m){m.popup===c&&(c.update(),a(!0))}function h(m){m.popup===c&&a(!1)}return r.map.on({popupopen:u,popupclose:h}),r.overlayContainer==null?(s!=null&&c.setLatLng(s),c.openOn(r.map)):r.overlayContainer.bindPopup(c),function(){var x;r.map.off({popupopen:u,popupclose:h}),(x=r.overlayContainer)==null||x.unbindPopup(),r.map.removeLayer(c)}},[e,r,a,s])}),jS=gS(function({url:e,...r},s){const a=new Ki.TileLayer(e,Ku(r,s));return Gu(a,s)},function(e,r,s){xS(e,r,s);const{url:a}=r;a!=null&&a!==s.url&&e.setUrl(a)}),NS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",kS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let SS=Zu.icon({iconUrl:NS,shadowUrl:kS,iconSize:[25,41],iconAnchor:[12,41]});Zu.Marker.prototype.options.icon=SS;const ES=new Zu.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),PS=({agent:t})=>{const e=yS();return N.useEffect(()=>{t&&t.latitude&&t.longitude&&e.flyTo([t.latitude,t.longitude],15,{duration:1.5})},[t,e]),null},TS=()=>{const t=we(),[e,r]=N.useState([]),[s,a]=N.useState(null);return N.useEffect(()=>{Z.getPublicAgents().then(r)},[]),n.jsxs("div",{className:"flex flex-col h-screen bg-[#111]",children:[n.jsxs("div",{className:"p-4 bg-[#1a1a1a] border-b border-white/5 flex items-center justify-between z-20 shadow-xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>t("/"),className:"w-10 h-10 rounded-full bg-[#222] hover:bg-[#333] flex items-center justify-center text-gray-400 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"location_on"}),"Agent Locator"]}),n.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:"Verified Exchange Points"})]})]}),n.jsxs("div",{className:"bg-[#222] px-4 py-2 rounded-lg border border-white/5 hidden md:block",children:[n.jsx("span",{className:"text-gray-400 text-xs",children:"Nearby Agents:"}),n.jsx("span",{className:"ml-2 text-lime-400 font-bold",children:e.length})]})]}),n.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[n.jsxs("div",{className:"w-full md:w-96 bg-[#1a1a1a] border-r border-white/5 flex flex-col z-10 shadow-2xl absolute md:relative h-1/3 md:h-full bottom-0 md:bottom-auto",children:[n.jsx("div",{className:"p-4 border-b border-white/5 bg-[#1a1a1a] sticky top-0",children:n.jsx("input",{type:"text",placeholder:"Inter city or region...",className:"w-full bg-[#111] border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-lime-500/50 transition-all text-sm"})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 pb-20 md:pb-4",children:e.length===0?n.jsxs("div",{className:"text-center py-10 text-gray-600",children:[n.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-30",children:"map"}),n.jsx("p",{children:"No agents found yet."})]}):e.map(o=>n.jsxs("div",{onClick:()=>a(o),className:`p-4 rounded-xl border cursor-pointer transition-all group ${(s==null?void 0:s.id)===o.id?"bg-lime-500/10 border-lime-500/50":"bg-[#222] border-transparent hover:border-white/10"}`,children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("h3",{className:"font-bold text-white group-hover:text-lime-400 transition-colors",children:o.name}),n.jsx("span",{className:"bg-lime-500/20 text-lime-400 text-[10px] px-2 py-0.5 rounded uppercase font-bold tracking-wider",children:"Verified"})]}),n.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-start gap-1",children:[n.jsx("span",{className:"material-symbols-outlined text-[14px] mt-0.5 shrink-0",children:"store"}),o.address||"No address provided"]}),n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("p",{className:"text-[10px] text-gray-500 font-mono flex items-center gap-1",children:[n.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"schedule"}),o.hours||"09:00 - 18:00"]}),n.jsx("button",{className:"text-lime-400 hover:text-white transition-colors",children:n.jsx("span",{className:"material-symbols-outlined",children:"directions"})})]})]},o.id))})]}),n.jsxs("div",{className:"flex-1 relative bg-[#0c0c0c]",children:[n.jsxs(bS,{center:[41.0082,28.9784],zoom:12,style:{height:"100%",width:"100%"},zoomControl:!1,children:[n.jsx(jS,{attribution:' <a href="https://carto.com/">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),n.jsx(PS,{agent:s}),e.map(o=>o.latitude&&o.longitude&&n.jsx(_S,{position:[o.latitude,o.longitude],icon:ES,eventHandlers:{click:()=>a(o)},children:n.jsx(wS,{className:"agent-popup",children:n.jsxs("div",{className:"p-1 min-w-[200px]",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.logo&&n.jsx("img",{src:o.logo,className:"w-8 h-8 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-black text-sm leading-tight",children:o.name}),n.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Authorized Agent"})]})]}),n.jsx("p",{className:"text-gray-600 text-xs mb-3 leading-snug",children:o.address}),n.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${o.latitude},${o.longitude}`,target:"_blank",rel:"noreferrer",className:"block w-full bg-black text-white text-center py-2 rounded-lg font-bold text-xs hover:bg-gray-800 transition-colors shadow-lg",children:"Get Directions on Google Maps"})]})})},o.id))]}),n.jsx("div",{className:"absolute top-4 right-4 z-[400] flex flex-col gap-2",children:n.jsx("button",{className:"w-10 h-10 bg-[#1a1a1a] text-white rounded-lg shadow-xl flex items-center justify-center hover:bg-[#222]",onClick:()=>window.location.reload(),children:n.jsx("span",{className:"material-symbols-outlined",children:"my_location"})})})]})]})]})},CS=()=>{const t=we();return N.useEffect(()=>{(()=>{try{console.log("AutoLogin processing URL:",window.location.href);let r=new URLSearchParams(window.location.search),s=r.get("token"),a=r.get("email");if(!s){const o=window.location.hash.split("?");if(o.length>1){const c=new URLSearchParams(o[1]);s=c.get("token"),a=c.get("email")}}s&&a?(console.log("Found Credentials. Logging in..."),localStorage.setItem("nusd_auth_token",s),localStorage.setItem("nusd_current_user",a),setTimeout(()=>{window.location.href=window.location.origin+"/#/admin",window.location.reload()},500)):(console.warn("No credentials found in URL"),alert("AutoLogin Error: No token found in link."),t("/"))}catch(r){console.error("Auto-login failed:",r),t("/")}})()},[]),n.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col items-center justify-center font-display",children:[n.jsx("div",{className:"w-16 h-16 border-4 border-lime-500 border-t-transparent rounded-full animate-spin mb-6"}),n.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Securely Logging In..."}),n.jsx("p",{className:"text-gray-500",children:"Connecting to Admin Panel..."})]})},AS=()=>{var S;const{slug:t}=Ou(),[e,r]=N.useState(null),[s,a]=N.useState(null),[o,c]=N.useState(!0),[u,h]=N.useState(null),[m,x]=N.useState("deposit"),[g,y]=N.useState(""),[j,b]=N.useState("");N.useEffect(()=>{t&&w()},[t]);const w=async()=>{c(!0);const P=await Z.getPanelBySlug(t);if(P){if(r(P),P.department_id){const R=await Z.getDepartment(P.department_id);R&&a(R)}}else h("Portal not found");c(!1)},E=((S=s==null?void 0:s.owner)==null?void 0:S.nusd_code)||"Adres Bulunamad",_=P=>{navigator.clipboard.writeText(P),alert("Kopyaland!")},v=async()=>{alert("ekim talebi gnderildi. Admin onay bekleniyor.")};return o?n.jsx("div",{className:"min-h-screen bg-[#0F172A] flex items-center justify-center text-white",children:"Loading Portal..."}):u||!e?n.jsx("div",{className:"min-h-screen bg-[#0F172A] flex items-center justify-center text-white",children:u||"Not Found"}):n.jsxs("div",{className:"min-h-screen bg-[#0F172A] flex flex-col items-center justify-center p-4 font-sans text-slate-300",children:[n.jsxs("div",{className:"mb-6 flex flex-col items-center animate-fade-in-down",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20 mb-3",children:n.jsx("span",{className:"text-white text-2xl font-bold",children:""})}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:e.name}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:s==null?void 0:s.name})]}),n.jsxs("div",{className:"bg-[#1E293B] w-full max-w-md rounded-3xl p-2 shadow-2xl border border-slate-700/50",children:[n.jsxs("div",{className:"bg-[#0F172A]/50 p-1 rounded-2xl flex mb-6",children:[n.jsx("button",{onClick:()=>x("deposit"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${m==="deposit"?"bg-white text-slate-900 shadow-md":"text-slate-400 hover:text-white"}`,children:"Yatrm (Deposit)"}),n.jsx("button",{onClick:()=>x("withdraw"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${m==="withdraw"?"bg-white text-slate-900 shadow-md":"text-slate-400 hover:text-white"}`,children:"ekim (Withdraw)"})]}),n.jsx("div",{className:"px-6 pb-6 space-y-5",children:m==="deposit"?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("div",{className:"w-16 h-16 bg-green-500/20 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"material-symbols-outlined text-3xl",children:"account_balance_wallet"})}),n.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Yatrm Adresi"}),n.jsxs("p",{className:"text-sm text-slate-400 mb-4",children:["Bu NUSD adresine ",n.jsx("b",{className:"text-white",children:"kendi czdannzdan"})," transfer yapn"]}),n.jsxs("div",{className:"bg-lime-500/10 border-2 border-lime-500/50 p-4 rounded-xl mb-4",children:[n.jsx("p",{className:"text-xs text-lime-400 font-bold uppercase mb-2",children:"# NUSD Adresi (nemli!)"}),n.jsxs("div",{className:"flex items-center justify-between bg-[#0F172A] p-3 rounded-lg cursor-pointer group",onClick:()=>_(E),children:[n.jsx("span",{className:"text-lime-300 font-mono font-bold text-lg tracking-widest",children:E}),n.jsx("span",{className:"material-symbols-outlined text-lime-400 opacity-60 group-hover:opacity-100",children:"content_copy"})]}),n.jsx("p",{className:"text-[10px] text-slate-500 mt-2",children:"Czdannzdan transfer yaparken bu adresi kullann"})]}),n.jsxs("div",{className:"bg-[#0F172A] p-4 rounded-xl text-left space-y-2",children:[n.jsxs("p",{className:"text-xs text-slate-400",children:[n.jsx("span",{className:"text-indigo-400 font-bold",children:"1."}),' Wallet uygulamanzda "Gnder" butonuna basn']}),n.jsxs("p",{className:"text-xs text-slate-400",children:[n.jsx("span",{className:"text-indigo-400 font-bold",children:"2."})," Alc olarak yukardaki NUSD adresini girin"]}),n.jsxs("p",{className:"text-xs text-slate-400",children:[n.jsx("span",{className:"text-indigo-400 font-bold",children:"3."})," Transfer annda tamamlanr"]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Tutar"}),n.jsx("input",{type:"number",className:"w-full bg-[#334155]/50 border border-slate-600 rounded-xl p-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:outline-none",placeholder:"100",value:g,onChange:P=>y(P.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Czdan Adresi (NUSD veya TRX)"}),n.jsx("input",{type:"text",className:"w-full bg-[#334155]/50 border border-slate-600 rounded-xl p-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:outline-none",placeholder:"NUSD-XXXXXX veya T...",value:j,onChange:P=>b(P.target.value)})]}),n.jsx("button",{onClick:v,className:"w-full bg-gradient-to-r from-rose-600 to-pink-600 text-white py-3.5 rounded-xl font-bold text-sm hover:from-rose-500 hover:to-pink-500 transition-all shadow-lg shadow-rose-500/20",children:"ekim Talebi Gnder"})]})})]}),n.jsx("p",{className:"text-xs text-slate-600 mt-8",children:"Powered by NUSD Wallet"})]})},OS=()=>{var Ln;const{user:t,logout:e}=it(),r=we(),[s,a]=N.useState(null),[o,c]=N.useState(null),[u,h]=N.useState([]),[m,x]=N.useState(!0),[g,y]=N.useState(null),[j,b]=N.useState(!1),[w,E]=N.useState(""),[_,v]=N.useState(""),[S,P]=N.useState(!1),[R,A]=N.useState(!1),[O,z]=N.useState([]),[I,W]=N.useState(null),[F,q]=N.useState(!1),[$,Q]=N.useState([]),[G,M]=N.useState([]),[le,U]=N.useState(""),[ce,J]=N.useState("staff"),[K,H]=N.useState(!1),ee=(t==null?void 0:t.nusd_code)||"NUSD-XXXX";N.useEffect(()=>{te()},[t]);const te=async()=>{var ne;x(!0);try{const Pe=await Z.getProfile();if(!Pe||Pe.account_type!=="business"){y("letme hesab bulunamad");return}if(Pe.business_department_id){const en=await Z.getDepartment(Pe.business_department_id);a(en),((ne=en==null?void 0:en.panels)==null?void 0:ne.length)>0&&c(en.panels[0]);const Gi=await Z.getDepartmentTransactions(Pe.business_department_id);h(Gi||[])}}catch(Pe){console.error(Pe),y("Veriler yklenemedi")}x(!1)},X=async()=>{if(!w||!_||parseFloat(_)<=0){alert("Ltfen geerli bilgiler girin");return}P(!0);try{const ne=await Z.internalTransfer(w,parseFloat(_));ne.success?(alert("Transfer baarl!"),b(!1),E(""),v(""),te()):alert(ne.error||"Transfer baarsz")}catch{alert("Transfer hatas")}P(!1)},se=async()=>{if(!o)return;const ne=!o.is_active,Pe=await Z.updatePanelStatus(o.id,ne);Pe!=null&&Pe.success&&c({...o,is_active:ne})},ue=ne=>{navigator.clipboard.writeText(ne),alert("Kopyaland!")},Ue=async()=>{const ne=await Z.getBusinessTeam();ne.success&&Q(ne.members||[]);const Pe=await Z.getBusinessInvites();Pe.success&&M(Pe.invites||[])},Zi=async()=>{if(!le){alert("Email gerekli");return}H(!0);const ne=await Z.inviteBusinessMember(le,ce);ne.success?(alert(`Davet gnderildi!

Davet linki: ${ne.invite_link}`),U(""),Ue()):alert(ne.error||"Davet gnderilemedi"),H(!1)},As=async ne=>{(await Z.cancelBusinessInvite(ne)).success&&Ue()};return m?n.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:n.jsx("div",{className:"text-white",children:"Ykleniyor..."})}):g?n.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-4",children:[n.jsx("div",{className:"text-red-400 mb-4",children:g}),n.jsx("button",{onClick:()=>r("/"),className:"text-lime-400",children:"Ana Sayfaya Dn"})]}):n.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-10 h-10 bg-lime-500 rounded-full flex items-center justify-center text-black font-bold",children:((Ln=s==null?void 0:s.name)==null?void 0:Ln[0])||"F"}),n.jsxs("div",{children:[n.jsx("h1",{className:"font-bold text-lg",children:s==null?void 0:s.name}),n.jsx("p",{className:"text-xs text-gray-500",children:"letme Paneli"})]})]})}),n.jsx("button",{onClick:()=>r("/"),className:"text-gray-400",children:n.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),n.jsxs("div",{className:"bg-gradient-to-r from-lime-600/20 to-green-600/20 border border-lime-500/30 rounded-2xl p-4 mb-4",children:[n.jsx("p",{className:"text-xs text-lime-400 font-bold uppercase mb-1",children:"# NUSD Adresiniz"}),n.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>ue(ee),children:[n.jsx("span",{className:"font-mono font-bold text-xl text-lime-300",children:ee}),n.jsx("span",{className:"material-symbols-outlined text-lime-400 text-lg",children:"content_copy"})]}),n.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Bu adrese gelen transferler bakiyenize eklenir"})]}),n.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 mb-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Bakiye"}),n.jsxs("p",{className:"text-4xl font-bold text-white",children:["$",((t==null?void 0:t.balance)||0).toLocaleString()]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[n.jsxs("button",{onClick:()=>b(!0),className:"bg-lime-500 text-black font-bold py-3 rounded-xl flex flex-col items-center justify-center gap-1",children:[n.jsx("span",{className:"material-symbols-outlined",children:"send"}),n.jsx("span",{className:"text-xs",children:"Gnder"})]}),n.jsxs("button",{onClick:()=>A(!0),className:"bg-[#1a1a1a] text-white font-bold py-3 rounded-xl flex flex-col items-center justify-center gap-1 border border-gray-700",children:[n.jsx("span",{className:"material-symbols-outlined",children:"account_balance"}),n.jsx("span",{className:"text-xs",children:"ekim"})]}),n.jsxs("button",{onClick:()=>{q(!0),Ue()},className:"bg-[#1a1a1a] text-white font-bold py-3 rounded-xl flex flex-col items-center justify-center gap-1 border border-gray-700",children:[n.jsx("span",{className:"material-symbols-outlined",children:"groups"}),n.jsx("span",{className:"text-xs",children:"Ekip"})]})]}),R&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-end justify-center z-50",children:n.jsxs("div",{className:"bg-[#1a1a1a] w-full max-w-lg rounded-t-3xl p-6 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"font-bold text-lg",children:"ekim Talepleri"}),n.jsx("button",{onClick:()=>A(!1),children:n.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"close"})})]}),O.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"inbox"}),n.jsx("p",{children:"Bekleyen ekim talebi yok"})]}):n.jsx("div",{className:"space-y-3",children:O.map(ne=>n.jsxs("div",{className:"bg-[#0a0a0a] rounded-xl p-4 border border-white/5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"font-bold text-white",children:["$",ne.amount]}),n.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/20 px-2 py-1 rounded",children:ne.status})]}),n.jsxs("p",{className:"text-sm text-gray-400 mb-1",children:["Adres: ",ne.wallet_address]}),n.jsx("p",{className:"text-xs text-gray-500 mb-3",children:new Date(ne.created_at).toLocaleString()}),n.jsx("button",{onClick:async()=>{W(ne.id),alert("ekim tamamland olarak iaretlendi"),W(null)},disabled:I===ne.id,className:"w-full bg-lime-500 text-black py-2 rounded-lg font-bold text-sm disabled:opacity-50",children:I===ne.id?"leniyor...":"Gnderildi Olarak aretle"})]},ne.id))})]})}),n.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"storefront"}),"Portallarm"]}),n.jsxs("button",{onClick:async()=>{const ne=prompt("Portal ad girin:");if(!ne)return;if(!(s!=null&&s.id)){alert("Departman bulunamad");return}const Pe=await Z.createPortalRequest(s.id,ne);Pe.success?alert("Portal talebi gnderildi! Admin onayndan sonra aktif olacak."):alert("Hata: "+(Pe.error||"Talep gnderilemedi"))},className:"bg-lime-500/20 text-lime-400 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Portal Talep Et"]})]}),o?n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"bg-[#0a0a0a] rounded-xl p-4 border border-white/5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${o.is_active?"bg-green-400":"bg-red-400"}`}),n.jsx("span",{className:"font-medium text-white",children:(s==null?void 0:s.name)||"Portal"})]}),n.jsx("button",{onClick:se,className:`px-3 py-1 rounded-full text-xs font-bold transition-colors ${o.is_active?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"}`,children:o.is_active?"AKTF":"KAPALI"})]}),n.jsxs("div",{className:"bg-[#1a1a1a] p-3 rounded-lg flex items-center justify-between cursor-pointer hover:bg-[#222] transition-colors",onClick:()=>ue(`${window.location.origin}/#/pay/${o.public_slug}`),children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Portal Linki"}),n.jsxs("p",{className:"text-sm text-lime-400 font-mono",children:[window.location.origin,"/#/pay/",o.public_slug]})]}),n.jsx("span",{className:"material-symbols-outlined text-lime-500",children:"content_copy"})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsxs("button",{onClick:()=>window.open(`${window.location.origin}/#/pay/${o.public_slug}`,"_blank"),className:"flex-1 bg-[#1a1a1a] text-white py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-1 hover:bg-[#222] transition-colors",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"open_in_new"}),"nizle"]}),n.jsxs("button",{onClick:()=>ue(`${window.location.origin}/#/pay/${o.public_slug}`),className:"flex-1 bg-[#1a1a1a] text-white py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-1 hover:bg-[#222] transition-colors",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"share"}),"Payla"]})]})]})}):n.jsxs("div",{className:"text-center py-6 text-gray-500",children:[n.jsx("span",{className:"material-symbols-outlined text-3xl mb-2",children:"storefront"}),n.jsx("p",{className:"text-sm",children:"Henz portal yok"}),n.jsx("button",{onClick:()=>alert("Portal oluturma yaknda"),className:"mt-3 text-lime-400 text-sm font-medium",children:"lk portaln olutur "})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-bold mb-3",children:"Son Yatrmlar"}),u.length===0?n.jsx("div",{className:"bg-[#1a1a1a] rounded-xl p-6 text-center text-gray-500",children:"Henz yatrm yok"}):n.jsx("div",{className:"space-y-2",children:u.slice(0,5).map(ne=>n.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-green-400 text-sm",children:"arrow_downward"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:ne.sender_email||"Transfer"}),n.jsx("p",{className:"text-xs text-gray-500",children:new Date(ne.created_at).toLocaleDateString()})]})]}),n.jsxs("p",{className:"text-green-400 font-bold",children:["+$",ne.amount]})]},ne.id))})]}),j&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-end justify-center z-50",children:n.jsxs("div",{className:"bg-[#1a1a1a] w-full max-w-lg rounded-t-3xl p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"font-bold text-lg",children:"NUSD Gnder"}),n.jsx("button",{onClick:()=>b(!1),children:n.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"close"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-2",children:"Alc NUSD Adresi"}),n.jsx("input",{type:"text",value:w,onChange:ne=>E(ne.target.value),placeholder:"NUSD-XXXXXX",className:"w-full bg-[#0a0a0a] border border-gray-700 rounded-xl p-3 text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-2",children:"Tutar"}),n.jsx("input",{type:"number",value:_,onChange:ne=>v(ne.target.value),placeholder:"0.00",className:"w-full bg-[#0a0a0a] border border-gray-700 rounded-xl p-3 text-white"})]}),n.jsx("button",{onClick:X,disabled:S,className:"w-full bg-lime-500 text-black font-bold py-4 rounded-xl disabled:opacity-50",children:S?"Gnderiliyor...":"Gnder"})]})]})}),F&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-end justify-center z-50",children:n.jsxs("div",{className:"bg-[#1a1a1a] w-full max-w-lg rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"groups"}),"Ekip Ynetimi"]}),n.jsx("button",{onClick:()=>q(!1),children:n.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"close"})})]}),n.jsxs("div",{className:"bg-[#0a0a0a] rounded-xl p-4 mb-6",children:[n.jsx("h3",{className:"font-bold text-sm mb-3 text-gray-300",children:"Yeni ye Davet Et"}),n.jsx("input",{type:"email",value:le,onChange:ne=>U(ne.target.value),placeholder:"Email adresi",className:"w-full bg-[#1a1a1a] border border-gray-700 rounded-lg p-3 text-white mb-3"}),n.jsxs("select",{value:ce,onChange:ne=>J(ne.target.value),className:"w-full bg-[#1a1a1a] border border-gray-700 rounded-lg p-3 text-white mb-3",children:[n.jsx("option",{value:"staff",children:"Staff (Sadece Grntleme)"}),n.jsx("option",{value:"manager",children:"Manager (lem Yapabilir)"})]}),n.jsx("button",{onClick:Zi,disabled:K||!le,className:"w-full bg-lime-500 text-black font-bold py-3 rounded-lg disabled:opacity-50",children:K?"Gnderiliyor...":"Davet Gnder"})]}),G.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-bold text-sm mb-3 text-gray-300",children:"Bekleyen Davetler"}),n.jsx("div",{className:"space-y-2",children:G.map(ne=>n.jsxs("div",{className:"bg-[#0a0a0a] rounded-lg p-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium",children:ne.email}),n.jsx("p",{className:"text-xs text-amber-400",children:ne.role})]}),n.jsx("button",{onClick:()=>As(ne.id),className:"text-red-400 text-xs",children:"ptal"})]},ne.id))})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-sm mb-3 text-gray-300",children:["Ekip yeleri (",$.length,")"]}),n.jsx("div",{className:"space-y-2",children:$.map(ne=>{var Pe;return n.jsxs("div",{className:"bg-[#0a0a0a] rounded-lg p-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${ne.business_role==="owner"?"bg-lime-500/20 text-lime-400":"bg-gray-700 text-gray-300"}`,children:n.jsx("span",{className:"material-symbols-outlined text-sm",children:ne.business_role==="owner"?"star":"person"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium",children:ne.name||((Pe=ne.email)==null?void 0:Pe.split("@")[0])}),n.jsx("p",{className:"text-xs text-gray-500",children:ne.email})]})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded ${ne.business_role==="owner"?"bg-lime-500/20 text-lime-400":ne.business_role==="manager"?"bg-blue-500/20 text-blue-400":"bg-gray-700 text-gray-400"}`,children:ne.business_role==="owner"?"Sahip":ne.business_role==="manager"?"Ynetici":"Personel"})]},ne.id)})})]})]})})]})},LS=()=>{const{inviteCode:t}=Ou(),e=we(),{user:r,refreshUser:s}=it(),[a,o]=N.useState(!1),[c,u]=N.useState(null),[h,m]=N.useState(null),x=async()=>{if(!t){u("Geersiz davet kodu");return}if(!r){e(`/login?redirect=/join/${t}`);return}o(!0),u(null);const g=await Z.acceptBusinessInvite(t);g.success?(m(g.message||"Ekibe baaryla katldnz!"),s(),setTimeout(()=>{e("/business")},2e3)):u(g.error||"Davet kabul edilemedi"),o(!1)};return n.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-6 text-white",children:n.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-8 max-w-sm w-full text-center border border-white/10",children:[n.jsx("div",{className:"w-20 h-20 bg-lime-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx("span",{className:"material-symbols-outlined text-5xl text-lime-400",children:"group_add"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"letme Daveti"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Bir iletme sizi ekibine davet etti. Katlmak iin aadaki butona tklayn."}),!r&&n.jsx("p",{className:"text-amber-400 text-sm mb-4",children:"Daveti kabul etmek iin nce giri yapmalsnz."}),c&&n.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-400 p-3 rounded-lg mb-4 text-sm",children:c}),h&&n.jsx("div",{className:"bg-lime-500/20 border border-lime-500/30 text-lime-400 p-3 rounded-lg mb-4 text-sm",children:h}),n.jsx("button",{onClick:x,disabled:a||!!h,className:"w-full bg-lime-500 hover:bg-lime-400 text-black font-bold py-4 rounded-xl disabled:opacity-50 transition-all mb-4",children:a?"Katlnyor...":r?"Ekibe Katl":"Giri Yap ve Katl"}),n.jsx("button",{onClick:()=>e("/"),className:"w-full text-gray-400 py-2",children:"Ana Sayfaya Dn"})]})})},RS=()=>{const t=we(),{user:e,refreshUser:r}=it(),[s,a]=N.useState(1),[o,c]=N.useState(null),[u,h]=N.useState(null),[m,x]=N.useState(!1),[g,y]=N.useState(null),[j,b]=N.useState(!0);N.useEffect(()=>{w()},[]);const w=async()=>{b(!0);try{const v=await Z.getVerificationStatus("kyc");v&&(y(v),v.status==="approved"?a(3):v.status==="pending"&&a(4))}catch(v){console.error("Check KYC status error:",v)}finally{b(!1)}},E=v=>{var P;const S=(P=v.target.files)==null?void 0:P[0];if(S){c(S);const R=new FileReader;R.onloadend=()=>{h(R.result)},R.readAsDataURL(S)}},_=async()=>{if(o){x(!0);try{const v=await Z.submitVerification("kyc",o);v.success?(a(4),await r()):alert(v.error||"Bir hata olutu")}catch(v){console.error("KYC error:",v),alert("Bir hata olutu. Ltfen tekrar deneyin.")}finally{x(!1)}}};return j?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-white/30 border-t-white rounded-full"})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0",children:[n.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Kimlik Dorulama"})]}),n.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[n.jsx("div",{className:"flex items-center justify-center gap-2",children:[1,2,3].map(v=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all ${s>=v?s===v?"bg-emerald-500 text-white":"bg-emerald-100 text-emerald-600":"bg-white/20 text-white/50"}`,children:s>v?n.jsx("span",{className:"material-symbols-outlined text-lg",children:"check"}):v}),v<3&&n.jsx("div",{className:`w-8 h-0.5 ${s>v?"bg-emerald-500":"bg-white/20"}`})]},v))}),s===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:n.jsx("span",{className:"material-symbols-outlined text-amber-500 text-4xl",children:"badge"})}),n.jsx("h2",{className:"text-white font-bold text-xl mb-2",children:"Kimlik Dorulama"}),n.jsx("p",{className:"text-emerald-200 text-sm",children:"lem limitlerini artrmak ve hesabnz gvence altna almak iin kimlik belgenizi dorulayn."})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg space-y-3",children:[n.jsxs("h3",{className:"text-gray-900 font-bold text-sm flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"info"}),"Gerekli Belgeler"]}),n.jsxs("ul",{className:"text-gray-600 text-sm space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-lg",children:"check_circle"}),"Kimlik kartnzn n yz (net ve okunakl)"]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-lg",children:"check_circle"}),"Fotoraf zerinde kesinti veya yansma olmamal"]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-lg",children:"check_circle"}),"Tm keler grnr olmal"]})]})]}),n.jsxs("button",{onClick:()=>a(2),className:"w-full bg-emerald-500 text-white py-4 rounded-2xl font-bold text-base hover:bg-emerald-400 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-emerald-500/20",children:["Bala",n.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]}),s===2&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-white font-bold text-xl mb-2",children:"Kimlik Belgesi Ykle"}),n.jsx("p",{className:"text-emerald-200 text-sm",children:"Kimlik kartnzn veya pasaportunuzun fotorafn ykleyin."})]}),n.jsxs("label",{className:"block cursor-pointer",children:[n.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:E,className:"hidden"}),n.jsx("div",{className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all ${u?"border-emerald-500 bg-emerald-50":"border-gray-300 bg-white hover:border-emerald-400"} shadow-lg`,children:u?n.jsxs("div",{className:"space-y-3",children:[n.jsx("img",{src:u,alt:"ID Preview",className:"max-h-48 mx-auto rounded-xl object-cover"}),n.jsx("p",{className:"text-emerald-600 text-sm font-medium",children:" Fotoraf yklendi - Deitirmek iin tklayn"})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto",children:n.jsx("span",{className:"material-symbols-outlined text-gray-400 text-3xl",children:"add_photo_alternate"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-900 font-medium",children:"Fotoraf ek veya Ykle"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Kamera veya galeri kullanabilirsiniz"})]})]})})]}),n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-lg border-l-4 border-amber-500",children:n.jsxs("p",{className:"text-gray-600 text-sm flex items-start gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-lg shrink-0 text-amber-500",children:"tips_and_updates"}),"pucu: yi aydnlatlm bir ortamda, dz bir zemin zerinde fotoraf ekin."]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>a(1),className:"flex-1 bg-white text-gray-700 py-4 rounded-2xl font-bold text-base hover:bg-gray-50 transition-colors shadow",children:"Geri"}),n.jsx("button",{onClick:_,disabled:!o||m,className:`flex-1 py-4 rounded-2xl font-bold text-base transition-all flex items-center justify-center gap-2 shadow-lg ${o&&!m?"bg-emerald-500 text-white hover:bg-emerald-400 shadow-emerald-500/20":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:m?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Gnderiliyor..."]}):n.jsxs(n.Fragment,{children:["Gnder",n.jsx("span",{className:"material-symbols-outlined",children:"send"})]})})]})]}),s===3&&n.jsxs("div",{className:"space-y-6 text-center py-10",children:[n.jsx("div",{className:"w-24 h-24 bg-emerald-100 rounded-full flex items-center justify-center mx-auto shadow-lg",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-5xl",children:"verified_user"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-bold text-2xl mb-2",children:"Kimlik Doruland!"}),n.jsx("p",{className:"text-emerald-200 text-sm",children:"Tebrikler! Hesabnz baaryla doruland. Artk tm zelliklere eriebilirsiniz."})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-500 text-sm",children:"Durum"}),n.jsxs("span",{className:"text-emerald-600 font-bold flex items-center gap-1",children:[n.jsx("span",{className:"material-symbols-outlined text-lg",children:"check_circle"}),"Dorulanm"]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-500 text-sm",children:"Gnlk Limit"}),n.jsx("span",{className:"text-gray-900 font-bold",children:"$10,000"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-500 text-sm",children:"Aylk Limit"}),n.jsx("span",{className:"text-gray-900 font-bold",children:"$100,000"})]})]}),n.jsx("button",{onClick:()=>t("/profile"),className:"w-full bg-emerald-500 text-white py-4 rounded-2xl font-bold text-base hover:bg-emerald-400 transition-colors shadow-lg shadow-emerald-500/20",children:"Tamam"})]}),s===4&&n.jsxs("div",{className:"space-y-6 text-center py-10",children:[n.jsx("div",{className:"w-24 h-24 bg-amber-100 rounded-full flex items-center justify-center mx-auto shadow-lg",children:n.jsx("span",{className:"material-symbols-outlined text-amber-500 text-5xl",children:"schedule"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-bold text-2xl mb-2",children:"nceleme Bekliyor"}),n.jsx("p",{className:"text-emerald-200 text-sm",children:"Belgeleriniz Telegram zerinden admin ekibimize iletildi. En ksa srede incelenecektir."})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-500 text-sm",children:"Durum"}),n.jsxs("span",{className:"text-amber-600 font-bold flex items-center gap-1",children:[n.jsx("span",{className:"material-symbols-outlined text-lg",children:"pending"}),"Beklemede"]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-500 text-sm",children:"Gnderim Tarihi"}),n.jsx("span",{className:"text-gray-900 font-medium text-sm",children:g!=null&&g.created_at?new Date(g.created_at).toLocaleString("tr-TR"):new Date().toLocaleString("tr-TR")})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:n.jsxs("p",{className:"text-blue-700 text-sm flex items-start gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-lg shrink-0",children:"notifications_active"}),"Onaylandnda size bildirim gndereceiz."]})}),n.jsx("button",{onClick:()=>t("/profile"),className:"w-full bg-emerald-500 text-white py-4 rounded-2xl font-bold text-base hover:bg-emerald-400 transition-colors shadow-lg shadow-emerald-500/20",children:"Tamam"}),n.jsx("button",{onClick:()=>{a(2),c(null),h(null)},className:"w-full text-white/70 py-2 text-sm hover:text-white transition-colors",children:"Yeni Belge Gnder"})]}),(g==null?void 0:g.status)==="rejected"&&s!==2&&n.jsxs("div",{className:"space-y-6 text-center py-10",children:[n.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto shadow-lg",children:n.jsx("span",{className:"material-symbols-outlined text-red-500 text-5xl",children:"cancel"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-bold text-2xl mb-2",children:"Dorulama Reddedildi"}),n.jsx("p",{className:"text-emerald-200 text-sm",children:(g==null?void 0:g.rejection_reason)||"Belgeleriniz uygun bulunmad. Ltfen geerli belgelerle tekrar deneyin."})]}),n.jsx("button",{onClick:()=>{a(2),c(null),h(null),y(null)},className:"w-full bg-emerald-500 text-white py-4 rounded-2xl font-bold text-base hover:bg-emerald-400 transition-colors shadow-lg shadow-emerald-500/20",children:"Tekrar Dene"})]})]})]})},IS=()=>{const t=we(),{refreshUser:e}=it(),[r,s]=N.useState(""),[a,o]=N.useState(""),[c,u]=N.useState(""),[h,m]=N.useState(!1),[x,g]=N.useState(!1),[y,j]=N.useState(!1);N.useEffect(()=>{b()},[]);const b=async()=>{m(!0);try{const{data:{user:_}}=await C.auth.getUser();if(!_)return;const{data:v}=await C.from("profiles").select("first_name, last_name, birth_date").eq("id",_.id).single();v&&(s(v.first_name||""),o(v.last_name||""),u(v.birth_date||""))}catch(_){console.error("Load profile error:",_)}finally{m(!1)}},w=async()=>{if(!(!r.trim()||!a.trim()||!c)){g(!0);try{const{data:{user:_}}=await C.auth.getUser();if(!_)throw new Error("No user");const{error:v}=await C.from("profiles").update({first_name:r.trim(),last_name:a.trim(),birth_date:c,name:`${r.trim()} ${a.trim()}`,profile_completed:!0}).eq("id",_.id);v&&console.error("Update error:",v),j(!0),await e(),setTimeout(()=>{t("/profile")},1500)}catch(_){console.error("Save error:",_)}finally{g(!1)}}},E=r.trim()&&a.trim()&&c;return h?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex items-center justify-center",children:n.jsx("div",{className:"w-10 h-10 border-2 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin"})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0",children:[n.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Profil Bilgileri"})]}),y&&n.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center max-w-xs w-full shadow-xl",children:[n.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-3xl",children:"check_circle"})}),n.jsx("h3",{className:"text-gray-900 font-bold text-lg mb-2",children:"Kaydedildi!"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Profil bilgileriniz gncellendi."})]})}),n.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[n.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center shrink-0",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-400",children:"info"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium text-sm",children:"Neden bu bilgiler gerekli?"}),n.jsx("p",{className:"text-emerald-200 text-xs mt-1",children:"Kimlik bilgileriniz hesap gvenlii ve yasal ykmllkler iin gereklidir."})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-gray-700 text-sm font-medium pl-1",children:"Ad"}),n.jsx("input",{type:"text",value:r,onChange:_=>s(_.target.value),placeholder:"Adnz girin",className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3.5 text-gray-900 placeholder-gray-400 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition-all"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-gray-700 text-sm font-medium pl-1",children:"Soyad"}),n.jsx("input",{type:"text",value:a,onChange:_=>o(_.target.value),placeholder:"Soyadnz girin",className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3.5 text-gray-900 placeholder-gray-400 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition-all"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-gray-700 text-sm font-medium pl-1",children:"Doum Tarihi"}),n.jsx("input",{type:"date",value:c,onChange:_=>u(_.target.value),className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3.5 text-gray-900 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition-all"})]}),(r||a)&&n.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4 border border-emerald-100 mt-4",children:[n.jsx("p",{className:"text-emerald-600 text-xs font-medium mb-1",children:"nizleme"}),n.jsxs("p",{className:"text-gray-900 font-bold text-lg",children:[r," ",a]}),c&&n.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Doum: ",new Date(c).toLocaleDateString("tr-TR")]})]})]}),n.jsx("button",{onClick:w,disabled:!E||x,className:`w-full py-4 rounded-2xl font-bold text-base transition-all flex items-center justify-center gap-2 shadow-lg ${E&&!x?"bg-emerald-500 text-white hover:bg-emerald-400 active:scale-[0.98] shadow-emerald-500/30":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:x?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Kaydediliyor..."]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"material-symbols-outlined",children:"save"}),"Kaydet"]})})]})]})},DS=()=>{var y,j,b,w,E,_,v,S;const t=we(),[e,r]=N.useState(null),[s,a]=N.useState({profileComplete:!1,kycVerified:!1,emailVerified:!1}),[o,c]=N.useState(!0);N.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:{user:P}}=await C.auth.getUser();if(!P)return;const{data:R}=await C.rpc("get_user_limits",{p_user_id:P.id});R&&R.length>0&&r(R[0]);const{data:A}=await C.from("profiles").select("first_name, last_name, birth_date, profile_completed, kyc_verified, phone_verified").eq("id",P.id).single();A&&a({profileComplete:A.profile_completed||A.first_name&&A.last_name&&A.birth_date,kycVerified:A.kyc_verified||!1,emailVerified:!0})}catch(P){console.error("Load limits error:",P)}finally{c(!1)}};Object.values(s).filter(Boolean).length;const h=s.kycVerified,m=e?e.daily_used/e.daily_limit*100:0,x=e?e.monthly_used/e.monthly_limit*100:0,g=[{key:"profileComplete",icon:"person",label:"Profil Bilgileri",sublabel:"Ad, soyad, doum tarihi",completed:s.profileComplete,action:()=>t("/profile/edit")},{key:"kycVerified",icon:"badge",label:"Kimlik Belgesi",sublabel:"Kimlik kart dorulamas",completed:s.kycVerified,action:()=>t("/kyc")},{key:"emailVerified",icon:"mail",label:"E-posta Dorulama",sublabel:"E-posta adresi onay",completed:s.emailVerified,action:()=>{}}];return o?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex items-center justify-center",children:n.jsx("div",{className:"w-10 h-10 border-2 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin"})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0",children:[n.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"lem Limitleri"})]}),n.jsxs("div",{className:"flex-1 p-5 space-y-6 overflow-y-auto pb-20",children:[n.jsxs("div",{className:"rounded-2xl p-5 shadow-lg bg-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${h?"bg-emerald-100":"bg-amber-100"}`,children:n.jsx("span",{className:`material-symbols-outlined text-2xl ${h?"text-emerald-500":"text-amber-500"}`,children:h?"verified_user":"pending"})}),n.jsxs("div",{children:[n.jsx("p",{className:`font-bold ${h?"text-emerald-600":"text-amber-600"}`,children:h?"Dorulanm Hesap":"Snrl Hesap"}),n.jsx("p",{className:"text-gray-500 text-sm",children:h?"Tm limitler aktif":"KYC ile limitleri artrn"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Gnlk Limit"}),n.jsxs("span",{className:"text-gray-900 font-bold",children:["$",((y=e==null?void 0:e.daily_used)==null?void 0:y.toLocaleString())||0," / $",((j=e==null?void 0:e.daily_limit)==null?void 0:j.toLocaleString())||500]})]}),n.jsx("div",{className:"h-3 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full transition-all ${m>80?"bg-red-500":m>50?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(m,100)}%`}})}),n.jsxs("p",{className:"text-right text-xs text-gray-500 mt-1",children:["Kalan: $",((b=e==null?void 0:e.daily_remaining)==null?void 0:b.toLocaleString())||((w=e==null?void 0:e.daily_limit)==null?void 0:w.toLocaleString())||500]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Aylk Limit"}),n.jsxs("span",{className:"text-gray-900 font-bold",children:["$",((E=e==null?void 0:e.monthly_used)==null?void 0:E.toLocaleString())||0," / $",((_=e==null?void 0:e.monthly_limit)==null?void 0:_.toLocaleString())||2e3]})]}),n.jsx("div",{className:"h-3 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full transition-all ${x>80?"bg-red-500":x>50?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(x,100)}%`}})}),n.jsxs("p",{className:"text-right text-xs text-gray-500 mt-1",children:["Kalan: $",((v=e==null?void 0:e.monthly_remaining)==null?void 0:v.toLocaleString())||((S=e==null?void 0:e.monthly_limit)==null?void 0:S.toLocaleString())||2e3]})]})]}),!h&&n.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center shrink-0",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-400",children:"trending_up"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-bold text-sm",children:"Limitleri 20x Artrn!"}),n.jsx("p",{className:"text-emerald-200 text-xs mt-1",children:"KYC dorulamas ile gnlk $10,000, aylk $100,000 limite ulan."})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Dorulama Admlar"}),n.jsx("div",{className:"bg-white rounded-2xl overflow-hidden shadow-lg divide-y divide-gray-100",children:g.map(P=>n.jsxs("button",{onClick:P.action,disabled:P.completed,className:`w-full p-4 flex items-center gap-4 text-left transition-colors ${P.completed?"opacity-70":"hover:bg-gray-50"}`,children:[n.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${P.completed?"bg-emerald-100":"bg-gray-100"}`,children:n.jsx("span",{className:`material-symbols-outlined ${P.completed?"text-emerald-500":"text-gray-400"}`,children:P.completed?"check_circle":P.icon})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`text-sm font-bold ${P.completed?"text-gray-500":"text-gray-900"}`,children:P.label}),n.jsx("p",{className:"text-xs text-gray-500",children:P.sublabel})]}),P.completed?n.jsx("span",{className:"text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full",children:" Tamam"}):n.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]},P.key))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Limit Karlatrmas"}),n.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-lg",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-gray-500",children:[n.jsx("th",{className:"text-left py-2"}),n.jsx("th",{className:"text-center py-2",children:"KYC Yok"}),n.jsx("th",{className:"text-center py-2",children:"KYC Onayl"})]})}),n.jsxs("tbody",{className:"text-gray-900",children:[n.jsxs("tr",{className:"border-t border-gray-100",children:[n.jsx("td",{className:"py-3 text-gray-500",children:"Gnlk"}),n.jsx("td",{className:"text-center py-3",children:"$500"}),n.jsx("td",{className:"text-center py-3 text-emerald-600 font-bold",children:"$10,000"})]}),n.jsxs("tr",{className:"border-t border-gray-100",children:[n.jsx("td",{className:"py-3 text-gray-500",children:"Aylk"}),n.jsx("td",{className:"text-center py-3",children:"$2,000"}),n.jsx("td",{className:"text-center py-3 text-emerald-600 font-bold",children:"$100,000"})]})]})]})})]}),!s.kycVerified&&n.jsxs("button",{onClick:()=>t("/kyc"),className:"w-full bg-emerald-500 text-white py-4 rounded-2xl font-bold text-base hover:bg-emerald-400 transition-colors shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined",children:"verified_user"}),"KYC Dorulamas Balat"]})]})]})},zS=()=>{const t=we(),[e,r]=N.useState(""),[s,a]=N.useState(""),[o,c]=N.useState(""),[u,h]=N.useState(!1),[m,x]=N.useState(!1),[g,y]=N.useState(!1),[j,b]=N.useState(!1),[w,E]=N.useState(null),[_,v]=N.useState(!1),S=A=>A.length<6?"ifre en az 6 karakter olmaldr":null,P=async()=>{if(E(null),!e||!s||!o){E("Tm alanlar doldurun");return}if(s!==o){E("Yeni ifreler elemiyor");return}const A=S(s);if(A){E(A);return}if(e===s){E("Yeni ifre mevcut ifreden farkl olmaldr");return}b(!0);try{const{data:{user:O}}=await C.auth.getUser();if(!(O!=null&&O.email)){E("Kullanc bulunamad");return}const{error:z}=await C.auth.signInWithPassword({email:O.email,password:e});if(z){E("Mevcut ifre yanl"),b(!1);return}const{error:I}=await C.auth.updateUser({password:s});if(I){E(I.message),b(!1);return}v(!0),setTimeout(()=>{t("/profile")},2e3)}catch(O){console.error("Password change error:",O),E("Bir hata olutu. Ltfen tekrar deneyin.")}finally{b(!1)}},R=e&&s&&o&&s===o;return n.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[n.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 shrink-0",children:[n.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),n.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"ifre Deitir"})]}),_&&n.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 text-center max-w-xs w-full border border-lime-500/30",children:[n.jsx("div",{className:"w-16 h-16 bg-lime-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl",children:"check_circle"})}),n.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"ifre Deitirildi!"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"ifreniz baaryla gncellendi."})]})}),n.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[n.jsx("div",{className:"bg-amber-500/10 rounded-2xl p-4 border border-amber-500/20",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-amber-500/20 rounded-full flex items-center justify-center shrink-0",children:n.jsx("span",{className:"material-symbols-outlined text-amber-400",children:"shield"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-bold text-sm",children:"Gvenlik pucu"}),n.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Gl bir ifre en az 6 karakter iermeli ve baka hibir yerde kullanlmamaldr."})]})]})}),w&&n.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 flex items-center gap-3",children:[n.jsx("span",{className:"material-symbols-outlined text-red-400",children:"error"}),n.jsx("p",{className:"text-red-400 text-sm",children:w})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Mevcut ifre"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:u?"text":"password",value:e,onChange:A=>r(A.target.value),placeholder:"Mevcut ifrenizi girin",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3.5 pr-12 text-white placeholder-gray-500 focus:border-lime-500/50 focus:outline-none transition-colors"}),n.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 p-1",children:n.jsx("span",{className:"material-symbols-outlined text-xl",children:u?"visibility_off":"visibility"})})]})]}),n.jsx("div",{className:"border-t border-white/5 my-6"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Yeni ifre"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:m?"text":"password",value:s,onChange:A=>a(A.target.value),placeholder:"Yeni ifrenizi girin",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3.5 pr-12 text-white placeholder-gray-500 focus:border-lime-500/50 focus:outline-none transition-colors"}),n.jsx("button",{type:"button",onClick:()=>x(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 p-1",children:n.jsx("span",{className:"material-symbols-outlined text-xl",children:m?"visibility_off":"visibility"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Yeni ifre Tekrar"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:g?"text":"password",value:o,onChange:A=>c(A.target.value),placeholder:"Yeni ifrenizi tekrar girin",className:`w-full bg-[#1a1a1a] border rounded-xl px-4 py-3.5 pr-12 text-white placeholder-gray-500 focus:outline-none transition-colors ${o&&s!==o?"border-red-500/50 focus:border-red-500":o&&s===o?"border-lime-500/50 focus:border-lime-500":"border-white/10 focus:border-lime-500/50"}`}),n.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 p-1",children:n.jsx("span",{className:"material-symbols-outlined text-xl",children:g?"visibility_off":"visibility"})})]}),o&&s!==o&&n.jsx("p",{className:"text-red-400 text-xs pl-1",children:"ifreler elemiyor"}),o&&s===o&&n.jsxs("p",{className:"text-lime-400 text-xs pl-1 flex items-center gap-1",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"check"}),"ifreler eleiyor"]})]})]}),n.jsx("button",{onClick:P,disabled:!R||j,className:`w-full py-4 rounded-2xl font-bold text-base transition-all flex items-center justify-center gap-2 ${R&&!j?"bg-lime-500 text-black hover:bg-lime-400 active:scale-[0.98]":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:j?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Gncelleniyor..."]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"material-symbols-outlined",children:"lock_reset"}),"ifreyi Gncelle"]})})]})]})},BS={p2p_matched:{title:" Eleme Bulundu",message:"{amount} USDT tutarnda ileminiz eleti.",icon:"handshake"},p2p_payment_sent:{title:" deme Gnderildi",message:"Alc demeyi gnderdi. Ltfen kontrol edin.",icon:"payments"},p2p_completed:{title:" lem Tamamland",message:"{amount} USDT tutarnda ileminiz baaryla tamamland.",icon:"check_circle"},p2p_cancelled:{title:" lem ptal Edildi",message:"{amount} USDT tutarnda ileminiz iptal edildi.",icon:"cancel"},p2p_expired:{title:" Sre Doldu",message:"leminiz sre am nedeniyle iptal edildi.",icon:"timer_off"},balance_received:{title:" Para Geldi",message:"{amount} USDT hesabnza aktarld.",icon:"add_circle"},balance_sent:{title:" Para Gnderildi",message:"{amount} USDT gnderildi.",icon:"send"},deposit_approved:{title:" Yatrm Onayland",message:"{amount} USDT yatrmnz onayland.",icon:"verified"},withdraw_approved:{title:" ekim Onayland",message:"{amount} TRY ekim talebiniz onayland.",icon:"verified"},system_alert:{title:" Sistem Bildirimi",message:"{message}",icon:"info"},security_alert:{title:" Gvenlik Uyars",message:"Hesabnza yeni bir cihazdan giri yapld.",icon:"security"}},MS=()=>{const t=we(),[e,r]=N.useState([]),[s,a]=N.useState(!0);N.useEffect(()=>{o()},[]);const o=async()=>{a(!0);const g=await Z.getNotificationHistory();r(g),a(!1)},c=async g=>{g.read||(await Z.markNotificationAsRead(g.id),r(y=>y.map(j=>j.id===g.id?{...j,read:!0}:j))),(g.type.startsWith("p2p_")||g.type==="balance_received"||g.type==="balance_sent")&&t("/dashboard")},u=async()=>{await Z.markAllNotificationsAsRead(),r(g=>g.map(y=>({...y,read:!0})))},h=g=>{const y=BS[g];return(y==null?void 0:y.icon)||"notifications"},m=g=>{const y=new Date,j=new Date(g),b=y.getTime()-j.getTime(),w=Math.floor(b/6e4),E=Math.floor(w/60),_=Math.floor(E/24);return w<1?"Az nce":w<60?`${w} dakika nce`:E<24?`${E} saat nce`:_<7?`${_} gn nce`:j.toLocaleDateString("tr-TR")},x=e.filter(g=>!g.read).length;return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsx("button",{onClick:()=>t(-1),className:"text-white hover:bg-white/10 p-2 rounded-full transition-colors",children:n.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),n.jsx("h1",{className:"text-white text-lg font-bold",children:"Bildirimler"}),n.jsx("div",{className:"w-10"})]}),x>0&&n.jsx("div",{className:"px-4 pb-4",children:n.jsxs("button",{onClick:u,className:"text-lime-400 text-sm flex items-center gap-1",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"done_all"}),"Tmn okundu iaretle (",x,")"]})}),n.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:s?n.jsx("div",{className:"flex items-center justify-center h-40",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-lime-400"})}):e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-60 text-emerald-300",children:[n.jsx("span",{className:"material-symbols-outlined text-5xl mb-2",children:"notifications_off"}),n.jsx("p",{children:"Henz bildirim yok"})]}):n.jsx("div",{className:"space-y-3",children:e.map(g=>n.jsxs("div",{onClick:()=>c(g),className:`p-4 rounded-2xl flex items-start gap-3 cursor-pointer transition-colors ${g.read?"bg-white/90 shadow":"bg-white shadow-lg"}`,children:[n.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${g.read?"bg-gray-100 text-gray-400":"bg-emerald-100 text-emerald-600"}`,children:n.jsx("span",{className:"material-symbols-outlined",children:h(g.type)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:`font-bold truncate ${g.read?"text-gray-500":"text-gray-900"}`,children:g.title}),!g.read&&n.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-0.5 line-clamp-2",children:g.message}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:m(g.created_at)})]}),n.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]},g.id))})})]})},US=()=>{const t=we(),{user:e}=it(),[r,s]=N.useState(null),[a,o]=N.useState([]),[c,u]=N.useState(""),[h,m]=N.useState(null),[x,g]=N.useState(!0),[y,j]=N.useState(!1),b=N.useRef(null);N.useEffect(()=>{(async()=>{const{data:{user:O}}=await C.auth.getUser();O&&s({id:O.id,email:O.email||""})})()},[]);const w=()=>{var A;(A=b.current)==null||A.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{w()},[a]),N.useEffect(()=>{if(!r)return;(async()=>{var O;try{const{data:z,error:I}=await C.from("support_conversations").select("*").eq("user_id",r.id).in("status",["open","waiting"]).order("created_at",{ascending:!1}).limit(1).single();if(z)m(z),await E(z.id),await _(z.id);else{const{data:W}=await C.from("profiles").select("first_name, last_name").eq("id",r.id).single(),F=W!=null&&W.first_name?`${W.first_name} ${W.last_name||""}`.trim():((O=r.email)==null?void 0:O.split("@")[0])||"User",{data:q,error:$}=await C.from("support_conversations").insert({user_id:r.id,user_name:F,user_email:r.email,subject:"Yeni Destek Talebi"}).select().single();q&&(m(q),await C.from("support_messages").insert({conversation_id:q.id,sender_type:"system",sender_name:"Sistem",message:"Merhaba! NUSD destek ekibine ho geldiniz. Size nasl yardmc olabiliriz?"}),await E(q.id))}}catch(z){console.error("Conversation error:",z)}finally{g(!1)}})()},[r]);const E=async A=>{const{data:O,error:z}=await C.from("support_messages").select("*").eq("conversation_id",A).order("created_at",{ascending:!0});O&&o(O)},_=async A=>{await C.rpc("mark_messages_read",{p_conversation_id:A,p_reader_type:"user"})};N.useEffect(()=>{if(!(h!=null&&h.id))return;const A=C.channel(`support_messages:${h.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"support_messages",filter:`conversation_id=eq.${h.id}`},O=>{const z=O.new;o(I=>[...I,z]),z.sender_type==="admin"&&_(h.id)}).subscribe();return()=>{C.removeChannel(A)}},[h==null?void 0:h.id]);const v=async()=>{var O;if(!c.trim()||!(h!=null&&h.id)||y)return;j(!0);const A=c.trim();u("");try{const{error:z}=await C.from("support_messages").insert({conversation_id:h.id,sender_type:"user",sender_id:r==null?void 0:r.id,sender_name:((O=r==null?void 0:r.email)==null?void 0:O.split("@")[0])||"User",message:A});z&&(console.error("Send error:",z),u(A))}catch(z){console.error("Send error:",z),u(A)}finally{j(!1)}},S=A=>new Date(A).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),P=A=>{const O=new Date(A),z=new Date,I=new Date(z);return I.setDate(I.getDate()-1),O.toDateString()===z.toDateString()?"Bugn":O.toDateString()===I.toDateString()?"Dn":O.toLocaleDateString("tr-TR",{day:"numeric",month:"long"})},R=a.reduce((A,O)=>{const z=P(O.created_at);return A[z]||(A[z]=[]),A[z].push(O),A},{});return x?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-600 to-emerald-800 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-white border-t-transparent"})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-600 to-emerald-800 flex flex-col",children:[n.jsxs("div",{className:"bg-emerald-700/50 backdrop-blur-sm border-b border-white/10 px-4 py-3 flex items-center gap-3",children:[n.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-white font-bold",children:"Canl Destek"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),n.jsx("span",{className:"text-emerald-200 text-sm",children:"evrimii"})]})]}),n.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500 flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-white",children:"support_agent"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[Object.entries(R).map(([A,O])=>n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-center my-4",children:n.jsx("span",{className:"bg-white/20 text-white/70 text-xs px-3 py-1 rounded-full",children:A})}),O.map(z=>n.jsx("div",{className:`flex ${z.sender_type==="user"?"justify-end":"justify-start"} mb-3`,children:n.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2.5 ${z.sender_type==="user"?"bg-white text-gray-800 rounded-br-md":z.sender_type==="system"?"bg-emerald-500/30 text-white/90 rounded-bl-md":"bg-emerald-500/50 text-white rounded-bl-md"}`,children:[z.sender_type!=="user"&&n.jsx("p",{className:"text-xs font-medium text-emerald-200 mb-1",children:z.sender_type==="system"?" Sistem":" Destek"}),n.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:z.message}),n.jsxs("div",{className:`flex items-center gap-1 mt-1 ${z.sender_type==="user"?"justify-end":"justify-start"}`,children:[n.jsx("span",{className:`text-xs ${z.sender_type==="user"?"text-gray-400":"text-white/50"}`,children:S(z.created_at)}),z.sender_type==="user"&&n.jsx("span",{className:"material-symbols-outlined text-xs text-emerald-500",children:z.is_read?"done_all":"done"})]})]})},z.id))]},A)),n.jsx("div",{ref:b})]}),n.jsx("div",{className:"bg-emerald-700/50 backdrop-blur-sm border-t border-white/10 p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 bg-white/10 rounded-full flex items-center px-4",children:n.jsx("input",{type:"text",value:c,onChange:A=>u(A.target.value),onKeyPress:A=>A.key==="Enter"&&v(),placeholder:"Mesajnz yazn...",className:"flex-1 bg-transparent text-white placeholder-white/50 py-3 outline-none"})}),n.jsx("button",{onClick:v,disabled:!c.trim()||y,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${c.trim()&&!y?"bg-white text-emerald-600 shadow-lg active:scale-95":"bg-white/20 text-white/50"}`,children:n.jsx("span",{className:"material-symbols-outlined",children:y?"hourglass_empty":"send"})})]})})]})},$S=()=>{var z;const t=we(),[e,r]=N.useState([]),[s,a]=N.useState(null),[o,c]=N.useState([]),[u,h]=N.useState(""),[m,x]=N.useState(!0),[g,y]=N.useState(!1),[j,b]=N.useState("all"),w=N.useRef(null);N.useEffect(()=>{E();const I=C.channel("support_conversations_changes").on("postgres_changes",{event:"*",schema:"public",table:"support_conversations"},()=>E()).subscribe();return()=>{C.removeChannel(I)}},[]);const E=async()=>{const{data:I,error:W}=await C.from("support_conversations").select("*").order("last_message_at",{ascending:!1});I&&r(I),x(!1)};N.useEffect(()=>{if(!s)return;_(s.id),v(s.id);const I=C.channel(`admin_messages:${s.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"support_messages",filter:`conversation_id=eq.${s.id}`},W=>{const F=W.new;c(q=>[...q,F]),F.sender_type==="user"&&v(s.id)}).subscribe();return()=>{C.removeChannel(I)}},[s==null?void 0:s.id]),N.useEffect(()=>{var I;(I=w.current)==null||I.scrollIntoView({behavior:"smooth"})},[o]);const _=async I=>{const{data:W}=await C.from("support_messages").select("*").eq("conversation_id",I).order("created_at",{ascending:!0});W&&c(W)},v=async I=>{await C.rpc("mark_messages_read",{p_conversation_id:I,p_reader_type:"admin"})},S=async()=>{if(!u.trim()||!s||g)return;y(!0);const I=u.trim();h("");const{data:{user:W}}=await C.auth.getUser(),{error:F}=await C.from("support_messages").insert({conversation_id:s.id,sender_type:"admin",sender_id:W==null?void 0:W.id,sender_name:"Destek Ekibi",message:I});F&&(console.error("Send error:",F),h(I)),y(!1)},P=async I=>{s&&(await C.from("support_conversations").update({status:I}).eq("id",s.id),a({...s,status:I}),E())},R=e.filter(I=>j==="all"||I.status===j),A=I=>{const W=new Date(I),q=new Date().getTime()-W.getTime(),$=Math.floor(q/6e4),Q=Math.floor(q/36e5),G=Math.floor(q/864e5);return $<1?"imdi":$<60?`${$}dk`:Q<24?`${Q}sa`:`${G}g`},O=I=>{switch(I){case"open":return{bg:"bg-red-500",text:"Ak"};case"waiting":return{bg:"bg-yellow-500",text:"Bekliyor"};case"resolved":return{bg:"bg-green-500",text:"zld"};case"closed":return{bg:"bg-gray-500",text:"Kapal"};default:return{bg:"bg-gray-500",text:I}}};return m?n.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-emerald-500 border-t-transparent"})}):n.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col",children:[n.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>t("/admin"),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-white",children:"Canl Destek"}),n.jsxs("p",{className:"text-sm text-gray-400",children:[e.length," konuma"]})]})]}),n.jsx("div",{className:"flex gap-2",children:["all","open","waiting","resolved"].map(I=>n.jsx("button",{onClick:()=>b(I),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${j===I?"bg-emerald-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:I==="all"?"Tm":O(I).text},I))})]}),n.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[n.jsx("div",{className:"w-80 bg-gray-800 border-r border-gray-700 overflow-y-auto",children:R.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"chat"}),n.jsx("p",{children:"Henz konuma yok"})]}):R.map(I=>{var W;return n.jsxs("div",{onClick:()=>a(I),className:`p-4 border-b border-gray-700 cursor-pointer transition-colors ${(s==null?void 0:s.id)===I.id?"bg-emerald-500/10 border-l-2 border-l-emerald-500":"hover:bg-gray-700/50"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:n.jsx("span",{className:"text-white text-sm font-medium",children:((W=I.user_name)==null?void 0:W.charAt(0).toUpperCase())||"?"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium text-sm",children:I.user_name}),n.jsx("p",{className:"text-gray-500 text-xs",children:I.user_email})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[I.unread_count_admin>0&&n.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:I.unread_count_admin}),n.jsx("span",{className:"text-gray-500 text-xs",children:A(I.last_message_at)})]})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:`w-2 h-2 rounded-full ${O(I.status).bg}`}),n.jsx("span",{className:"text-gray-400 text-xs",children:O(I.status).text})]})]},I.id)})}),n.jsx("div",{className:"flex-1 flex flex-col bg-gray-900",children:s?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 px-6 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500 flex items-center justify-center",children:n.jsx("span",{className:"text-white font-medium",children:(z=s.user_name)==null?void 0:z.charAt(0).toUpperCase()})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium",children:s.user_name}),n.jsx("p",{className:"text-gray-400 text-sm",children:s.user_email})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>P("resolved"),className:"px-3 py-1.5 bg-green-500/20 text-green-400 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:" zld"}),n.jsx("button",{onClick:()=>P("closed"),className:"px-3 py-1.5 bg-gray-500/20 text-gray-400 rounded-lg text-sm hover:bg-gray-500/30 transition-colors",children:"Kapat"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[o.map(I=>n.jsx("div",{className:`flex ${I.sender_type==="admin"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-2.5 ${I.sender_type==="admin"?"bg-emerald-500 text-white rounded-br-md":I.sender_type==="system"?"bg-gray-700 text-gray-300 rounded-bl-md":"bg-gray-700 text-white rounded-bl-md"}`,children:[I.sender_type==="user"&&n.jsx("p",{className:"text-emerald-400 text-xs font-medium mb-1",children:I.sender_name}),n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:I.message}),n.jsx("p",{className:`text-xs mt-1 ${I.sender_type==="admin"?"text-emerald-200":"text-gray-500"}`,children:new Date(I.created_at).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})},I.id)),n.jsx("div",{ref:w})]}),n.jsx("div",{className:"bg-gray-800 border-t border-gray-700 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"text",value:u,onChange:I=>h(I.target.value),onKeyPress:I=>I.key==="Enter"&&S(),placeholder:"Mesaj yaz...",className:"flex-1 bg-gray-700 text-white rounded-lg px-4 py-3 outline-none focus:ring-2 focus:ring-emerald-500"}),n.jsx("button",{onClick:S,disabled:!u.trim()||g,className:`p-3 rounded-lg transition-all ${u.trim()&&!g?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-gray-700 text-gray-500"}`,children:n.jsx("span",{className:"material-symbols-outlined",children:"send"})})]})})]}):n.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"material-symbols-outlined text-6xl mb-4",children:"forum"}),n.jsx("p",{className:"text-lg",children:"Bir konuma sein"})]})})})]})]})},FS=()=>{we();const[t,e]=N.useState("30d"),[r,s]=N.useState(null),[a,o]=N.useState([]),[c,u]=N.useState([]),[h,m]=N.useState(!0),[x,g]=N.useState(!1),y=()=>{const _=new Date,v=new Date;switch(t){case"7d":v.setDate(_.getDate()-7);break;case"30d":v.setDate(_.getDate()-30);break;case"90d":v.setDate(_.getDate()-90);break;case"all":v.setFullYear(2020);break}return{start:v.toISOString(),end:_.toISOString()}};N.useEffect(()=>{j()},[t]);const j=async()=>{m(!0);const{start:_,end:v}=y();try{const{data:S}=await C.from("transactions").select("*").gte("created_at",_).lte("created_at",v);if(S){const R=S.filter(I=>I.type==="deposit"&&I.status==="completed"),A=S.filter(I=>I.type==="withdraw"&&I.status==="completed"),O=S.filter(I=>I.status==="completed").reduce((I,W)=>I+(W.amount||0),0);s({totalTransactions:S.length,totalVolume:O,totalDeposits:R.reduce((I,W)=>I+(W.amount||0),0),totalWithdrawals:A.reduce((I,W)=>I+(W.amount||0),0),averageTransaction:S.length>0?O/S.length:0,activeUsers:new Set(S.map(I=>I.user_id)).size,newUsers:0,p2pTransactions:S.filter(I=>I.type==="p2p").length});const z={};S.forEach(I=>{const W=new Date(I.created_at).toISOString().split("T")[0];z[W]||(z[W]={date:W,deposits:0,withdrawals:0,volume:0,count:0}),z[W].count++,I.status==="completed"&&(z[W].volume+=I.amount||0,I.type==="deposit"&&(z[W].deposits+=I.amount||0),I.type==="withdraw"&&(z[W].withdrawals+=I.amount||0))}),o(Object.values(z).sort((I,W)=>I.date.localeCompare(W.date)))}const{data:P}=await C.from("transactions").select("user_id, amount, profiles!inner(email, first_name, last_name)").eq("status","completed").gte("created_at",_).lte("created_at",v);if(P){const R={};P.forEach(A=>{var z,I,W,F;const O=A.user_id;R[O]||(R[O]={id:O,email:((z=A.profiles)==null?void 0:z.email)||"",name:(I=A.profiles)!=null&&I.first_name?`${A.profiles.first_name} ${A.profiles.last_name||""}`.trim():((F=(W=A.profiles)==null?void 0:W.email)==null?void 0:F.split("@")[0])||"User",total_volume:0,transaction_count:0}),R[O].total_volume+=A.amount||0,R[O].transaction_count++}),u(Object.values(R).sort((A,O)=>O.total_volume-A.total_volume).slice(0,10))}}catch(S){console.error("Report error:",S)}finally{m(!1)}},b=async()=>{g(!0);const{start:_,end:v}=y();try{const{data:S}=await C.from("transactions").select("*, profiles(email, first_name, last_name)").gte("created_at",_).lte("created_at",v).order("created_at",{ascending:!1});if(S){const P=[["Tarih","Kullanc","Email","Tr","Miktar","Durum","Aklama"].join(",")];S.forEach(O=>{var z,I,W;P.push([new Date(O.created_at).toLocaleString("tr-TR"),((z=O.profiles)==null?void 0:z.first_name)||"-",((I=O.profiles)==null?void 0:I.email)||"-",O.type,((W=O.amount)==null?void 0:W.toFixed(2))||"0",O.status,O.description||"-"].map(F=>`"${F}"`).join(","))});const R=new Blob([P.join(`
`)],{type:"text/csv;charset=utf-8;"}),A=document.createElement("a");A.href=URL.createObjectURL(R),A.download=`nusd-rapor-${t}-${new Date().toISOString().split("T")[0]}.csv`,A.click()}}catch(S){console.error("Export error:",S)}finally{g(!1)}},w=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(_),E=Math.max(...a.map(_=>_.volume),1);return n.jsxs(er,{title:"Raporlar",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[n.jsx("div",{className:"flex gap-2",children:[{value:"7d",label:"Son 7 Gn"},{value:"30d",label:"Son 30 Gn"},{value:"90d",label:"Son 90 Gn"},{value:"all",label:"Tm"}].map(_=>n.jsx("button",{onClick:()=>e(_.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===_.value?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-100"}`,children:_.label},_.value))}),n.jsxs("button",{onClick:b,disabled:x,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"material-symbols-outlined text-sm",children:"download"}),x?"Hazrlanyor...":"CSV ndir"]})]}),h?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[n.jsx("div",{className:"flex items-center gap-3 mb-2",children:n.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"receipt_long"})})}),n.jsx("p",{className:"text-sm text-gray-500",children:"Toplam lem"}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:(r==null?void 0:r.totalTransactions)||0})]}),n.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[n.jsx("div",{className:"flex items-center gap-3 mb-2",children:n.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/10 flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"trending_up"})})}),n.jsx("p",{className:"text-sm text-gray-500",children:"Toplam Hacim"}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:w((r==null?void 0:r.totalVolume)||0)})]}),n.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[n.jsx("div",{className:"flex items-center gap-3 mb-2",children:n.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/10 flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-green-500",children:"south_west"})})}),n.jsx("p",{className:"text-sm text-gray-500",children:"Toplam Yatrm"}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:w((r==null?void 0:r.totalDeposits)||0)})]}),n.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[n.jsx("div",{className:"flex items-center gap-3 mb-2",children:n.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-500/10 flex items-center justify-center",children:n.jsx("span",{className:"material-symbols-outlined text-red-500",children:"north_east"})})}),n.jsx("p",{className:"text-sm text-gray-500",children:"Toplam ekim"}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:w((r==null?void 0:r.totalWithdrawals)||0)})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-8",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Gnlk lem Hacmi"}),a.length===0?n.jsxs("div",{className:"text-center py-10 text-gray-400",children:[n.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"bar_chart"}),n.jsx("p",{children:"Bu dnem iin veri yok"})]}):n.jsx("div",{className:"h-64 flex items-end gap-1",children:a.slice(-30).map((_,v)=>{const S=_.volume/E*100;return n.jsxs("div",{className:"flex-1 group relative",children:[n.jsx("div",{className:"bg-blue-500 hover:bg-blue-600 rounded-t transition-all cursor-pointer",style:{height:`${Math.max(S,2)}%`}}),n.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:n.jsxs("div",{className:"bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:[n.jsx("p",{className:"font-medium",children:new Date(_.date).toLocaleDateString("tr-TR")}),n.jsx("p",{children:w(_.volume)}),n.jsxs("p",{children:[_.count," ilem"]})]})})]},_.date)})})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-5 text-white",children:[n.jsx("p",{className:"text-purple-200 text-sm",children:"Ortalama lem"}),n.jsx("p",{className:"text-2xl font-bold",children:w((r==null?void 0:r.averageTransaction)||0)})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-5 text-white",children:[n.jsx("p",{className:"text-orange-200 text-sm",children:"Aktif Kullanc"}),n.jsx("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.activeUsers)||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-5 text-white",children:[n.jsx("p",{className:"text-cyan-200 text-sm",children:"P2P lem"}),n.jsx("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.p2pTransactions)||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl p-5 text-white",children:[n.jsx("p",{className:"text-pink-200 text-sm",children:"Net Ak"}),n.jsx("p",{className:"text-2xl font-bold",children:w(((r==null?void 0:r.totalDeposits)||0)-((r==null?void 0:r.totalWithdrawals)||0))})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"En Aktif Kullanclar"})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"#"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kullanc"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"lem Says"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Toplam Hacim"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:c.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-400",children:"Veri bulunamad"})}):c.map((_,v)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:v+1}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium text-sm",children:_.name.charAt(0).toUpperCase()}),n.jsx("span",{className:"font-medium text-gray-800",children:_.name})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:_.email}),n.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium text-gray-800",children:_.transaction_count}),n.jsx("td",{className:"px-6 py-4 text-right text-sm font-bold text-emerald-600",children:w(_.total_volume)})]},_.id))})]})})]})]})]})},HS=()=>{const t=we(),e=On(),{t:r}=ux(),{isDark:s}=tl(),a=o=>e.pathname===o;return n.jsx("div",{className:"fixed bottom-4 left-0 right-0 z-50 flex justify-center",children:n.jsxs("div",{className:"bg-white rounded-full shadow-2xl shadow-black/20 px-4 py-2 flex items-center gap-8 relative",children:[n.jsx("button",{onClick:()=>t("/dashboard"),className:`flex flex-col items-center p-2 rounded-2xl transition-all ${a("/dashboard")?"bg-emerald-100 text-emerald-600":"text-gray-400 hover:text-gray-600"}`,children:n.jsx("span",{className:"material-symbols-outlined text-2xl",children:"home"})}),n.jsx("button",{onClick:()=>t("/qr-scan"),className:"absolute left-1/2 -translate-x-1/2 -top-6",children:n.jsx("div",{className:"w-16 h-16 bg-emerald-600 rounded-full flex items-center justify-center shadow-lg shadow-emerald-500/40 hover:bg-emerald-500 transition-all active:scale-95 border-4 border-white",children:n.jsx("span",{className:"material-symbols-outlined text-3xl text-white",children:"qr_code_scanner"})})}),n.jsx("div",{className:"w-10"}),n.jsx("button",{onClick:()=>t("/profile"),className:`flex flex-col items-center p-2 rounded-2xl transition-all ${a("/profile")?"bg-emerald-100 text-emerald-600":"text-gray-400 hover:text-gray-600"}`,children:n.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})})]})})},ny=N.createContext({}),it=()=>N.useContext(ny);async function $a(t,e=15e3){var s,a,o,c;const r={email:t.email||"",name:((s=t.user_metadata)==null?void 0:s.name)||((a=t.email)==null?void 0:a.split("@")[0])||"User",balance:0,role:"user",isActive:!0,account_type:((o=t.user_metadata)==null?void 0:o.accountType)||"personal",business_name:(c=t.user_metadata)==null?void 0:c.businessName};return new Promise(u=>{const h=setTimeout(()=>{console.warn("Profile fetch timeout - using fallback user"),u(r)},e);WS(t,r).then(m=>{clearTimeout(h),u(m)}).catch(m=>{clearTimeout(h),console.error("Profile fetch error:",m),u(r)})})}async function WS(t,e){var r,s;try{let{data:a,error:o}=await C.from("profiles").select("*").eq("id",t.id).single();if(o&&o.code==="PGRST116"&&console.log("Profile not found by ID, will create new profile"),o&&o.code==="PGRST116"){const{data:c,error:u}=await C.from("profiles").insert({id:t.id,email:t.email,name:((r=t.user_metadata)==null?void 0:r.name)||((s=t.email)==null?void 0:s.split("@")[0])||"User",role:"user",is_active:!0,balance:0}).select().single();return u?(console.error("Profile creation error:",u.message),e):c?{id:c.id,email:c.email,name:c.name||"User",balance:c.balance||0,role:c.role||"user",isActive:c.is_active??!0,createdAt:c.created_at?new Date(c.created_at).getTime():Date.now(),trxAddress:c.trx_address,account_type:c.account_type||"personal",business_name:c.business_name,business_department_id:c.business_department_id,nusd_code:c.nusd_code}:e}else if(o)return console.error("Profile fetch error:",o.message),e;return a?{id:a.id,email:a.email,name:a.name||"User",balance:a.balance||0,role:a.role||"user",isActive:a.is_active??!0,createdAt:a.created_at?new Date(a.created_at).getTime():Date.now(),trxAddress:a.trx_address,account_type:a.account_type||"personal",business_name:a.business_name,business_department_id:a.business_department_id,nusd_code:a.nusd_code}:e}catch(a){return console.error("fetchProfileFromSupabase exception:",a),e}}const Ye=({children:t,showBottomNav:e=!1})=>n.jsx("div",{className:"popup-layout flex justify-center min-h-screen bg-gray-100 dark:bg-gray-900 font-display",children:n.jsxs("div",{className:"w-full max-w-md bg-background-light dark:bg-background-dark min-h-screen shadow-xl relative overflow-x-hidden",children:[t,e&&n.jsx(HS,{})]})}),Ne=({children:t,adminOnly:e=!1})=>{const{user:r,session:s,isLoading:a}=it();return a?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):!s||!r?n.jsx(_m,{to:"/",replace:!0}):e&&r.role!=="admin"?n.jsx(_m,{to:"/dashboard",replace:!0}):n.jsx(n.Fragment,{children:t})},VS=()=>{const{pathname:t}=On();return N.useEffect(()=>{window.scrollTo(0,0)},[t]),null},qS=()=>{const[t,e]=N.useState(null),[r,s]=N.useState(null),[a,o]=N.useState(!0);N.useEffect(()=>{let m=!0;(async()=>{try{const{data:{session:y}}=await C.auth.getSession();if(m&&(y!=null&&y.user)){e(y);const j=await $a(y.user);m&&s(j)}}catch(y){console.error("Auth initialization error:",y)}finally{m&&o(!1)}})();const{data:{subscription:g}}=C.auth.onAuthStateChange(async(y,j)=>{if(console.log("Auth event:",y),y==="INITIAL_SESSION"||y==="TOKEN_REFRESHED"){j&&e(j);return}if(y==="SIGNED_IN"&&(j!=null&&j.user)){e(j);const b=await $a(j.user);s(b)}else y==="SIGNED_OUT"&&(e(null),s(null))});return()=>{m=!1,g.unsubscribe()}},[]);const c=async(m,x)=>{try{const{data:g,error:y}=await C.auth.signInWithPassword({email:m,password:x});if(y)return console.error("Login error:",y.message),!1;if(g.session&&g.user){e(g.session);const j=await $a(g.user);return s(j),!0}return!1}catch(g){return console.error("Login exception:",g),!1}},u=async()=>{await C.auth.signOut()},h=async()=>{const{data:{session:m}}=await C.auth.getSession();if(m!=null&&m.user){const x=await $a(m.user);s(x)}};return N.useEffect(()=>{let m;const g=()=>{console.log("Session expired due to inactivity"),u()},y=()=>{t&&(clearTimeout(m),m=setTimeout(g,3e5))},j=["mousedown","mousemove","keydown","scroll","touchstart"];return t&&(y(),j.forEach(b=>window.addEventListener(b,y))),()=>{clearTimeout(m),j.forEach(b=>window.removeEventListener(b,y))}},[t]),n.jsx(iw,{children:n.jsx(sw,{children:n.jsx(ny.Provider,{value:{user:r,session:t,login:c,logout:u,refreshUser:h,isLoading:a},children:n.jsxs(Qw,{children:[n.jsx(VS,{}),n.jsxs(Yw,{children:[n.jsx(xe,{path:"/admin",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx($k,{})})}),n.jsx(xe,{path:"/admin/users",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx(Fk,{})})}),n.jsx(xe,{path:"/admin/transactions",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx(Wk,{})})}),n.jsx(xe,{path:"/admin/p2p-orders",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx(Vk,{})})}),n.jsx(xe,{path:"/admin/vaults",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx(eS,{})})}),n.jsx(xe,{path:"/admin/departments",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx(nS,{})})}),n.jsx(xe,{path:"/admin/departments/:id",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx(sS,{})})}),n.jsx(xe,{path:"/admin/exchange-rate",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx(iS,{})})}),n.jsx(xe,{path:"/admin/logs",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx(Gk,{})})}),n.jsx(xe,{path:"/admin/support",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx($S,{})})}),n.jsx(xe,{path:"/admin/reports",element:n.jsx(Ne,{adminOnly:!0,children:n.jsx(FS,{})})}),n.jsx(xe,{path:"/welcome",element:n.jsx(ej,{})}),n.jsx(xe,{path:"/",element:n.jsx(Ye,{children:n.jsx(rj,{})})}),n.jsx(xe,{path:"/register",element:n.jsx(Ye,{children:n.jsx(jk,{})})}),n.jsx(xe,{path:"/dashboard",element:n.jsx(Ye,{showBottomNav:!0,children:n.jsx(Ne,{children:n.jsx(Tk,{})})})}),n.jsx(xe,{path:"/profile",element:n.jsx(Ye,{showBottomNav:!0,children:n.jsx(Ne,{children:n.jsx(zk,{})})})}),n.jsx(xe,{path:"/qr-scan",element:n.jsx(Ye,{showBottomNav:!0,children:n.jsx(Ne,{children:n.jsx(Bk,{})})})}),n.jsx(xe,{path:"/history",element:n.jsx(Ye,{showBottomNav:!0,children:n.jsx(Ne,{children:n.jsx(Ik,{})})})}),n.jsx(xe,{path:"/deposit",element:n.jsx(Ye,{showBottomNav:!0,children:n.jsx(Ne,{children:n.jsx(Ck,{})})})}),n.jsx(xe,{path:"/deposit/confirm",element:n.jsx(Ye,{children:n.jsx(Ne,{children:n.jsx(Ak,{})})})}),n.jsx(xe,{path:"/withdraw",element:n.jsx(Ye,{showBottomNav:!0,children:n.jsx(Ne,{children:n.jsx(Ok,{})})})}),n.jsx(xe,{path:"/crypto/withdraw",element:n.jsx(Ye,{children:n.jsx(Ne,{children:n.jsx(Lk,{})})})}),n.jsx(xe,{path:"/crypto/deposit",element:n.jsx(Ye,{children:n.jsx(Ne,{children:n.jsx(Rk,{})})})}),n.jsx(xe,{path:"/bank-accounts",element:n.jsx(Ye,{children:n.jsx(Ne,{children:n.jsx(Dk,{})})})}),n.jsx(xe,{path:"/kyc",element:n.jsx(Ye,{children:n.jsx(Ne,{children:n.jsx(RS,{})})})}),n.jsx(xe,{path:"/profile/edit",element:n.jsx(Ye,{children:n.jsx(Ne,{children:n.jsx(IS,{})})})}),n.jsx(xe,{path:"/limits",element:n.jsx(Ye,{children:n.jsx(Ne,{children:n.jsx(DS,{})})})}),n.jsx(xe,{path:"/change-password",element:n.jsx(Ye,{children:n.jsx(Ne,{children:n.jsx(zS,{})})})}),n.jsx(xe,{path:"/notifications",element:n.jsx(Ye,{children:n.jsx(Ne,{children:n.jsx(MS,{})})})}),n.jsx(xe,{path:"/support",element:n.jsx(Ne,{children:n.jsx(US,{})})}),n.jsx(xe,{path:"/privacy",element:n.jsx(Mk,{})}),n.jsx(xe,{path:"/terms",element:n.jsx(Uk,{})}),n.jsx(xe,{path:"/find-agent",element:n.jsx(TS,{})}),n.jsx(xe,{path:"/autologin",element:n.jsx(CS,{})}),n.jsx(xe,{path:"/pay/:slug",element:n.jsx(AS,{})}),n.jsx(xe,{path:"/business",element:n.jsx(Ye,{children:n.jsx(Ne,{children:n.jsx(OS,{})})})}),n.jsx(xe,{path:"/join/:inviteCode",element:n.jsx(LS,{})})]})]})})})})},sy=document.getElementById("root");if(!sy)throw new Error("Could not find root element to mount to");const iy=new URLSearchParams(window.location.search),Zm=iy.get("token"),Gm=iy.get("email");if(Zm&&Gm){console.log("Magic Link Detected (Pre-Mount)"),localStorage.setItem("nusd_auth_token",Zm),localStorage.setItem("nusd_current_user",Gm);let t=window.location.hash;(!t||t==="#/")&&(t="#/admin");const e=window.location.origin+window.location.pathname+t;window.history.replaceState({},"",e)}const KS=wc.createRoot(sy);KS.render(n.jsx(gs.StrictMode,{children:n.jsx(qS,{})}));
