function mg(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ta(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var pg={exports:{}},il={},gg={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Symbol.for("react.element"),A_=Symbol.for("react.portal"),O_=Symbol.for("react.fragment"),L_=Symbol.for("react.strict_mode"),I_=Symbol.for("react.profiler"),R_=Symbol.for("react.provider"),D_=Symbol.for("react.context"),B_=Symbol.for("react.forward_ref"),M_=Symbol.for("react.suspense"),z_=Symbol.for("react.memo"),U_=Symbol.for("react.lazy"),nm=Symbol.iterator;function $_(t){return t===null||typeof t!="object"?null:(t=nm&&t[nm]||t["@@iterator"],typeof t=="function"?t:null)}var xg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yg=Object.assign,vg={};function Us(t,e,r){this.props=t,this.context=e,this.refs=vg,this.updater=r||xg}Us.prototype.isReactComponent={};Us.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Us.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bg(){}bg.prototype=Us.prototype;function Nd(t,e,r){this.props=t,this.context=e,this.refs=vg,this.updater=r||xg}var kd=Nd.prototype=new bg;kd.constructor=Nd;yg(kd,Us.prototype);kd.isPureReactComponent=!0;var sm=Array.isArray,_g=Object.prototype.hasOwnProperty,Sd={current:null},wg={key:!0,ref:!0,__self:!0,__source:!0};function jg(t,e,r){var n,a={},o=null,c=null;if(e!=null)for(n in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)_g.call(e,n)&&!wg.hasOwnProperty(n)&&(a[n]=e[n]);var d=arguments.length-2;if(d===1)a.children=r;else if(1<d){for(var h=Array(d),f=0;f<d;f++)h[f]=arguments[f+2];a.children=h}if(t&&t.defaultProps)for(n in d=t.defaultProps,d)a[n]===void 0&&(a[n]=d[n]);return{$$typeof:ra,type:t,key:o,ref:c,props:a,_owner:Sd.current}}function F_(t,e){return{$$typeof:ra,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ed(t){return typeof t=="object"&&t!==null&&t.$$typeof===ra}function H_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var im=/\/+/g;function hc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?H_(""+t.key):e.toString(36)}function ao(t,e,r,n,a){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case ra:case A_:c=!0}}if(c)return c=t,a=a(c),t=n===""?"."+hc(c,0):n,sm(a)?(r="",t!=null&&(r=t.replace(im,"$&/")+"/"),ao(a,e,r,"",function(f){return f})):a!=null&&(Ed(a)&&(a=F_(a,r+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(im,"$&/")+"/")+t)),e.push(a)),1;if(c=0,n=n===""?".":n+":",sm(t))for(var d=0;d<t.length;d++){o=t[d];var h=n+hc(o,d);c+=ao(o,e,r,h,a)}else if(h=$_(t),typeof h=="function")for(t=h.call(t),d=0;!(o=t.next()).done;)o=o.value,h=n+hc(o,d++),c+=ao(o,e,r,h,a);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function La(t,e,r){if(t==null)return t;var n=[],a=0;return ao(t,n,"","",function(o){return e.call(r,o,a++)}),n}function W_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},oo={transition:null},V_={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:oo,ReactCurrentOwner:Sd};function Ng(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:La,forEach:function(t,e,r){La(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return La(t,function(){e++}),e},toArray:function(t){return La(t,function(e){return e})||[]},only:function(t){if(!Ed(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Us;ye.Fragment=O_;ye.Profiler=I_;ye.PureComponent=Nd;ye.StrictMode=L_;ye.Suspense=M_;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V_;ye.act=Ng;ye.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=yg({},t.props),a=t.key,o=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=Sd.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(h in e)_g.call(e,h)&&!wg.hasOwnProperty(h)&&(n[h]=e[h]===void 0&&d!==void 0?d[h]:e[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){d=Array(h);for(var f=0;f<h;f++)d[f]=arguments[f+2];n.children=d}return{$$typeof:ra,type:t.type,key:a,ref:o,props:n,_owner:c}};ye.createContext=function(t){return t={$$typeof:D_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:R_,_context:t},t.Consumer=t};ye.createElement=jg;ye.createFactory=function(t){var e=jg.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:B_,render:t}};ye.isValidElement=Ed;ye.lazy=function(t){return{$$typeof:U_,_payload:{_status:-1,_result:t},_init:W_}};ye.memo=function(t,e){return{$$typeof:z_,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=oo.transition;oo.transition={};try{t()}finally{oo.transition=e}};ye.unstable_act=Ng;ye.useCallback=function(t,e){return gt.current.useCallback(t,e)};ye.useContext=function(t){return gt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return gt.current.useEffect(t,e)};ye.useId=function(){return gt.current.useId()};ye.useImperativeHandle=function(t,e,r){return gt.current.useImperativeHandle(t,e,r)};ye.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return gt.current.useMemo(t,e)};ye.useReducer=function(t,e,r){return gt.current.useReducer(t,e,r)};ye.useRef=function(t){return gt.current.useRef(t)};ye.useState=function(t){return gt.current.useState(t)};ye.useSyncExternalStore=function(t,e,r){return gt.current.useSyncExternalStore(t,e,r)};ye.useTransition=function(){return gt.current.useTransition()};ye.version="18.3.1";gg.exports=ye;var N=gg.exports;const Cs=jd(N),q_=mg({__proto__:null,default:Cs},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_=N,G_=Symbol.for("react.element"),Z_=Symbol.for("react.fragment"),Y_=Object.prototype.hasOwnProperty,J_=K_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X_={key:!0,ref:!0,__self:!0,__source:!0};function kg(t,e,r){var n,a={},o=null,c=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(n in e)Y_.call(e,n)&&!X_.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:G_,type:t,key:o,ref:c,props:a,_owner:J_.current}}il.Fragment=Z_;il.jsx=kg;il.jsxs=kg;pg.exports=il;var s=pg.exports,ru={},Sg={exports:{}},Ot={},Eg={exports:{}},Pg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,re){var Z=U.length;U.push(re);e:for(;0<Z;){var V=Z-1>>>1,H=U[V];if(0<a(H,re))U[V]=re,U[Z]=H,Z=V;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var re=U[0],Z=U.pop();if(Z!==re){U[0]=Z;e:for(var V=0,H=U.length,ee=H>>>1;V<ee;){var te=2*(V+1)-1,X=U[te],ie=te+1,de=U[ie];if(0>a(X,Z))ie<H&&0>a(de,X)?(U[V]=de,U[ie]=Z,V=ie):(U[V]=X,U[te]=Z,V=te);else if(ie<H&&0>a(de,Z))U[V]=de,U[ie]=Z,V=ie;else break e}}return re}function a(U,re){var Z=U.sortIndex-re.sortIndex;return Z!==0?Z:U.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],f=[],x=1,g=null,y=3,w=!1,v=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var re=r(f);re!==null;){if(re.callback===null)n(f);else if(re.startTime<=U)n(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=r(f)}}function P(U){if(b=!1,S(U),!v)if(r(h)!==null)v=!0,z(O);else{var re=r(f);re!==null&&le(P,re.startTime-U)}}function O(U,re){v=!1,b&&(b=!1,j(B),B=-1),w=!0;var Z=y;try{for(S(re),g=r(h);g!==null&&(!(g.expirationTime>re)||U&&!F());){var V=g.callback;if(typeof V=="function"){g.callback=null,y=g.priorityLevel;var H=V(g.expirationTime<=re);re=t.unstable_now(),typeof H=="function"?g.callback=H:g===r(h)&&n(h),S(re)}else n(h);g=r(h)}if(g!==null)var ee=!0;else{var te=r(f);te!==null&&le(P,te.startTime-re),ee=!1}return ee}finally{g=null,y=Z,w=!1}}var A=!1,I=null,B=-1,R=5,W=-1;function F(){return!(t.unstable_now()-W<R)}function K(){if(I!==null){var U=t.unstable_now();W=U;var re=!0;try{re=I(!0,U)}finally{re?$():(A=!1,I=null)}}else A=!1}var $;if(typeof _=="function")$=function(){_(K)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,Y=Q.port2;Q.port1.onmessage=K,$=function(){Y.postMessage(null)}}else $=function(){E(K,0)};function z(U){I=U,A||(A=!0,$())}function le(U,re){B=E(function(){U(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||w||(v=!0,z(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(U){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var Z=y;y=re;try{return U()}finally{y=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,re){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=y;y=U;try{return re()}finally{y=Z}},t.unstable_scheduleCallback=function(U,re,Z){var V=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?V+Z:V):Z=V,U){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Z+H,U={id:x++,callback:re,priorityLevel:U,startTime:Z,expirationTime:H,sortIndex:-1},Z>V?(U.sortIndex=Z,e(f,U),r(h)===null&&U===r(f)&&(b?(j(B),B=-1):b=!0,le(P,Z-V))):(U.sortIndex=H,e(h,U),v||w||(v=!0,z(O))),U},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(U){var re=y;return function(){var Z=y;y=re;try{return U.apply(this,arguments)}finally{y=Z}}}})(Pg);Eg.exports=Pg;var Q_=Eg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew=N,At=Q_;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tg=new Set,Ai={};function Hn(t,e){As(t,e),As(t+"Capture",e)}function As(t,e){for(Ai[t]=e,t=0;t<e.length;t++)Tg.add(e[t])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nu=Object.prototype.hasOwnProperty,tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,am={},om={};function rw(t){return nu.call(om,t)?!0:nu.call(am,t)?!1:tw.test(t)?om[t]=!0:(am[t]=!0,!1)}function nw(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sw(t,e,r,n){if(e===null||typeof e>"u"||nw(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,r,n,a,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pd=/[\-:]([a-z])/g;function Td(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pd,Td);it[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pd,Td);it[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pd,Td);it[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cd(t,e,r,n){var a=it.hasOwnProperty(e)?it[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sw(e,r,a,n)&&(r=null),n||a===null?rw(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Cr=ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ia=Symbol.for("react.element"),us=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),Ad=Symbol.for("react.strict_mode"),su=Symbol.for("react.profiler"),Cg=Symbol.for("react.provider"),Ag=Symbol.for("react.context"),Od=Symbol.for("react.forward_ref"),iu=Symbol.for("react.suspense"),au=Symbol.for("react.suspense_list"),Ld=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),Og=Symbol.for("react.offscreen"),lm=Symbol.iterator;function ai(t){return t===null||typeof t!="object"?null:(t=lm&&t[lm]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,fc;function pi(t){if(fc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);fc=e&&e[1]||""}return`
`+fc+t}var mc=!1;function pc(t,e){if(!t||mc)return"";mc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var n=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){n=f}t.call(e.prototype)}else{try{throw Error()}catch(f){n=f}t()}}catch(f){if(f&&n&&typeof f.stack=="string"){for(var a=f.stack.split(`
`),o=n.stack.split(`
`),c=a.length-1,d=o.length-1;1<=c&&0<=d&&a[c]!==o[d];)d--;for(;1<=c&&0<=d;c--,d--)if(a[c]!==o[d]){if(c!==1||d!==1)do if(c--,d--,0>d||a[c]!==o[d]){var h=`
`+a[c].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=c&&0<=d);break}}}finally{mc=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?pi(t):""}function iw(t){switch(t.tag){case 5:return pi(t.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 2:case 15:return t=pc(t.type,!1),t;case 11:return t=pc(t.type.render,!1),t;case 1:return t=pc(t.type,!0),t;default:return""}}function ou(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ds:return"Fragment";case us:return"Portal";case su:return"Profiler";case Ad:return"StrictMode";case iu:return"Suspense";case au:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ag:return(t.displayName||"Context")+".Consumer";case Cg:return(t._context.displayName||"Context")+".Provider";case Od:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ld:return e=t.displayName||null,e!==null?e:ou(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return ou(t(e))}catch{}}return null}function aw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ou(e);case 8:return e===Ad?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ow(t){var e=Lg(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(c){n=""+c,o.call(this,c)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(c){n=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ra(t){t._valueTracker||(t._valueTracker=ow(t))}function Ig(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Lg(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function jo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lu(t,e){var r=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cm(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=tn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rg(t,e){e=e.checked,e!=null&&Cd(t,"checked",e,!1)}function cu(t,e){Rg(t,e);var r=tn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uu(t,e.type,r):e.hasOwnProperty("defaultValue")&&uu(t,e.type,tn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function um(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function uu(t,e,r){(e!=="number"||jo(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var gi=Array.isArray;function ws(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+tn(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function du(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dm(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(J(92));if(gi(r)){if(1<r.length)throw Error(J(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:tn(r)}}function Dg(t,e){var r=tn(e.value),n=tn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function hm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Da,Mg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oi(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lw=["Webkit","ms","Moz","O"];Object.keys(wi).forEach(function(t){lw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wi[e]=wi[t]})});function zg(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||wi.hasOwnProperty(t)&&wi[t]?(""+e).trim():e+"px"}function Ug(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=zg(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var cw=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fu(t,e){if(e){if(cw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function mu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pu=null;function Id(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gu=null,js=null,Ns=null;function fm(t){if(t=ia(t)){if(typeof gu!="function")throw Error(J(280));var e=t.stateNode;e&&(e=ul(e),gu(t.stateNode,t.type,e))}}function $g(t){js?Ns?Ns.push(t):Ns=[t]:js=t}function Fg(){if(js){var t=js,e=Ns;if(Ns=js=null,fm(t),e)for(t=0;t<e.length;t++)fm(e[t])}}function Hg(t,e){return t(e)}function Wg(){}var gc=!1;function Vg(t,e,r){if(gc)return t(e,r);gc=!0;try{return Hg(t,e,r)}finally{gc=!1,(js!==null||Ns!==null)&&(Wg(),Fg())}}function Li(t,e){var r=t.stateNode;if(r===null)return null;var n=ul(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(J(231,e,typeof r));return r}var xu=!1;if(kr)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){xu=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{xu=!1}function uw(t,e,r,n,a,o,c,d,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(r,f)}catch(x){this.onError(x)}}var ji=!1,No=null,ko=!1,yu=null,dw={onError:function(t){ji=!0,No=t}};function hw(t,e,r,n,a,o,c,d,h){ji=!1,No=null,uw.apply(dw,arguments)}function fw(t,e,r,n,a,o,c,d,h){if(hw.apply(this,arguments),ji){if(ji){var f=No;ji=!1,No=null}else throw Error(J(198));ko||(ko=!0,yu=f)}}function Wn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function qg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mm(t){if(Wn(t)!==t)throw Error(J(188))}function mw(t){var e=t.alternate;if(!e){if(e=Wn(t),e===null)throw Error(J(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return mm(a),t;if(o===n)return mm(a),e;o=o.sibling}throw Error(J(188))}if(r.return!==n.return)r=a,n=o;else{for(var c=!1,d=a.child;d;){if(d===r){c=!0,r=a,n=o;break}if(d===n){c=!0,n=a,r=o;break}d=d.sibling}if(!c){for(d=o.child;d;){if(d===r){c=!0,r=o,n=a;break}if(d===n){c=!0,n=o,r=a;break}d=d.sibling}if(!c)throw Error(J(189))}}if(r.alternate!==n)throw Error(J(190))}if(r.tag!==3)throw Error(J(188));return r.stateNode.current===r?t:e}function Kg(t){return t=mw(t),t!==null?Gg(t):null}function Gg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gg(t);if(e!==null)return e;t=t.sibling}return null}var Zg=At.unstable_scheduleCallback,pm=At.unstable_cancelCallback,pw=At.unstable_shouldYield,gw=At.unstable_requestPaint,Ue=At.unstable_now,xw=At.unstable_getCurrentPriorityLevel,Rd=At.unstable_ImmediatePriority,Yg=At.unstable_UserBlockingPriority,So=At.unstable_NormalPriority,yw=At.unstable_LowPriority,Jg=At.unstable_IdlePriority,al=null,dr=null;function vw(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(al,t,void 0,(t.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:ww,bw=Math.log,_w=Math.LN2;function ww(t){return t>>>=0,t===0?32:31-(bw(t)/_w|0)|0}var Ba=64,Ma=4194304;function xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Eo(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,o=t.pingedLanes,c=r&268435455;if(c!==0){var d=c&~a;d!==0?n=xi(d):(o&=c,o!==0&&(n=xi(o)))}else c=r&~a,c!==0?n=xi(c):o!==0&&(n=xi(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,o=e&-e,a>=o||a===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Qt(e),a=1<<r,n|=t[r],e&=~a;return n}function jw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nw(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,o=t.pendingLanes;0<o;){var c=31-Qt(o),d=1<<c,h=a[c];h===-1?(!(d&r)||d&n)&&(a[c]=jw(d,e)):h<=e&&(t.expiredLanes|=d),o&=~d}}function vu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xg(){var t=Ba;return Ba<<=1,!(Ba&4194240)&&(Ba=64),t}function xc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function na(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qt(e),t[e]=r}function kw(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Qt(r),o=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~o}}function Dd(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Qt(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var je=0;function Qg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ex,Bd,tx,rx,nx,bu=!1,za=[],Vr=null,qr=null,Kr=null,Ii=new Map,Ri=new Map,Mr=[],Sw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gm(t,e){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":Ii.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ri.delete(e.pointerId)}}function li(t,e,r,n,a,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},e!==null&&(e=ia(e),e!==null&&Bd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Ew(t,e,r,n,a){switch(e){case"focusin":return Vr=li(Vr,t,e,r,n,a),!0;case"dragenter":return qr=li(qr,t,e,r,n,a),!0;case"mouseover":return Kr=li(Kr,t,e,r,n,a),!0;case"pointerover":var o=a.pointerId;return Ii.set(o,li(Ii.get(o)||null,t,e,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,Ri.set(o,li(Ri.get(o)||null,t,e,r,n,a)),!0}return!1}function sx(t){var e=En(t.target);if(e!==null){var r=Wn(e);if(r!==null){if(e=r.tag,e===13){if(e=qg(r),e!==null){t.blockedOn=e,nx(t.priority,function(){tx(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=_u(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);pu=n,r.target.dispatchEvent(n),pu=null}else return e=ia(r),e!==null&&Bd(e),t.blockedOn=r,!1;e.shift()}return!0}function xm(t,e,r){lo(t)&&r.delete(e)}function Pw(){bu=!1,Vr!==null&&lo(Vr)&&(Vr=null),qr!==null&&lo(qr)&&(qr=null),Kr!==null&&lo(Kr)&&(Kr=null),Ii.forEach(xm),Ri.forEach(xm)}function ci(t,e){t.blockedOn===e&&(t.blockedOn=null,bu||(bu=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,Pw)))}function Di(t){function e(a){return ci(a,t)}if(0<za.length){ci(za[0],t);for(var r=1;r<za.length;r++){var n=za[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Vr!==null&&ci(Vr,t),qr!==null&&ci(qr,t),Kr!==null&&ci(Kr,t),Ii.forEach(e),Ri.forEach(e),r=0;r<Mr.length;r++)n=Mr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Mr.length&&(r=Mr[0],r.blockedOn===null);)sx(r),r.blockedOn===null&&Mr.shift()}var ks=Cr.ReactCurrentBatchConfig,Po=!0;function Tw(t,e,r,n){var a=je,o=ks.transition;ks.transition=null;try{je=1,Md(t,e,r,n)}finally{je=a,ks.transition=o}}function Cw(t,e,r,n){var a=je,o=ks.transition;ks.transition=null;try{je=4,Md(t,e,r,n)}finally{je=a,ks.transition=o}}function Md(t,e,r,n){if(Po){var a=_u(t,e,r,n);if(a===null)Ec(t,e,n,To,r),gm(t,n);else if(Ew(a,t,e,r,n))n.stopPropagation();else if(gm(t,n),e&4&&-1<Sw.indexOf(t)){for(;a!==null;){var o=ia(a);if(o!==null&&ex(o),o=_u(t,e,r,n),o===null&&Ec(t,e,n,To,r),o===a)break;a=o}a!==null&&n.stopPropagation()}else Ec(t,e,n,null,r)}}var To=null;function _u(t,e,r,n){if(To=null,t=Id(n),t=En(t),t!==null)if(e=Wn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=qg(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return To=t,null}function ix(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xw()){case Rd:return 1;case Yg:return 4;case So:case yw:return 16;case Jg:return 536870912;default:return 16}default:return 16}}var Fr=null,zd=null,co=null;function ax(){if(co)return co;var t,e=zd,r=e.length,n,a="value"in Fr?Fr.value:Fr.textContent,o=a.length;for(t=0;t<r&&e[t]===a[t];t++);var c=r-t;for(n=1;n<=c&&e[r-n]===a[o-n];n++);return co=a.slice(t,1<n?1-n:void 0)}function uo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ua(){return!0}function ym(){return!1}function Lt(t){function e(r,n,a,o,c){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(r=t[d],this[d]=r?r(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ua:ym,this.isPropagationStopped=ym,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),e}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ud=Lt($s),sa=Be({},$s,{view:0,detail:0}),Aw=Lt(sa),yc,vc,ui,ol=Be({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$d,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ui&&(ui&&t.type==="mousemove"?(yc=t.screenX-ui.screenX,vc=t.screenY-ui.screenY):vc=yc=0,ui=t),yc)},movementY:function(t){return"movementY"in t?t.movementY:vc}}),vm=Lt(ol),Ow=Be({},ol,{dataTransfer:0}),Lw=Lt(Ow),Iw=Be({},sa,{relatedTarget:0}),bc=Lt(Iw),Rw=Be({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),Dw=Lt(Rw),Bw=Be({},$s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mw=Lt(Bw),zw=Be({},$s,{data:0}),bm=Lt(zw),Uw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$w={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Fw[t])?!!e[t]:!1}function $d(){return Hw}var Ww=Be({},sa,{key:function(t){if(t.key){var e=Uw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$w[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$d,charCode:function(t){return t.type==="keypress"?uo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vw=Lt(Ww),qw=Be({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_m=Lt(qw),Kw=Be({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$d}),Gw=Lt(Kw),Zw=Be({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yw=Lt(Zw),Jw=Be({},ol,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xw=Lt(Jw),Qw=[9,13,27,32],Fd=kr&&"CompositionEvent"in window,Ni=null;kr&&"documentMode"in document&&(Ni=document.documentMode);var ej=kr&&"TextEvent"in window&&!Ni,ox=kr&&(!Fd||Ni&&8<Ni&&11>=Ni),wm=" ",jm=!1;function lx(t,e){switch(t){case"keyup":return Qw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function tj(t,e){switch(t){case"compositionend":return cx(e);case"keypress":return e.which!==32?null:(jm=!0,wm);case"textInput":return t=e.data,t===wm&&jm?null:t;default:return null}}function rj(t,e){if(hs)return t==="compositionend"||!Fd&&lx(t,e)?(t=ax(),co=zd=Fr=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ox&&e.locale!=="ko"?null:e.data;default:return null}}var nj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nj[t.type]:e==="textarea"}function ux(t,e,r,n){$g(n),e=Co(e,"onChange"),0<e.length&&(r=new Ud("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ki=null,Bi=null;function sj(t){_x(t,0)}function ll(t){var e=ps(t);if(Ig(e))return t}function ij(t,e){if(t==="change")return e}var dx=!1;if(kr){var _c;if(kr){var wc="oninput"in document;if(!wc){var km=document.createElement("div");km.setAttribute("oninput","return;"),wc=typeof km.oninput=="function"}_c=wc}else _c=!1;dx=_c&&(!document.documentMode||9<document.documentMode)}function Sm(){ki&&(ki.detachEvent("onpropertychange",hx),Bi=ki=null)}function hx(t){if(t.propertyName==="value"&&ll(Bi)){var e=[];ux(e,Bi,t,Id(t)),Vg(sj,e)}}function aj(t,e,r){t==="focusin"?(Sm(),ki=e,Bi=r,ki.attachEvent("onpropertychange",hx)):t==="focusout"&&Sm()}function oj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ll(Bi)}function lj(t,e){if(t==="click")return ll(e)}function cj(t,e){if(t==="input"||t==="change")return ll(e)}function uj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:uj;function Mi(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!nu.call(e,a)||!tr(t[a],e[a]))return!1}return!0}function Em(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pm(t,e){var r=Em(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Em(r)}}function fx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mx(){for(var t=window,e=jo();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=jo(t.document)}return e}function Hd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dj(t){var e=mx(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&fx(r.ownerDocument.documentElement,r)){if(n!==null&&Hd(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=n.end===void 0?o:Math.min(n.end,a),!t.extend&&o>n&&(a=n,n=o,o=a),a=Pm(r,o);var c=Pm(r,n);a&&c&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hj=kr&&"documentMode"in document&&11>=document.documentMode,fs=null,wu=null,Si=null,ju=!1;function Tm(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ju||fs==null||fs!==jo(n)||(n=fs,"selectionStart"in n&&Hd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Si&&Mi(Si,n)||(Si=n,n=Co(wu,"onSelect"),0<n.length&&(e=new Ud("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=fs)))}function $a(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ms={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionend:$a("Transition","TransitionEnd")},jc={},px={};kr&&(px=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function cl(t){if(jc[t])return jc[t];if(!ms[t])return t;var e=ms[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in px)return jc[t]=e[r];return t}var gx=cl("animationend"),xx=cl("animationiteration"),yx=cl("animationstart"),vx=cl("transitionend"),bx=new Map,Cm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sn(t,e){bx.set(t,e),Hn(e,[t])}for(var Nc=0;Nc<Cm.length;Nc++){var kc=Cm[Nc],fj=kc.toLowerCase(),mj=kc[0].toUpperCase()+kc.slice(1);sn(fj,"on"+mj)}sn(gx,"onAnimationEnd");sn(xx,"onAnimationIteration");sn(yx,"onAnimationStart");sn("dblclick","onDoubleClick");sn("focusin","onFocus");sn("focusout","onBlur");sn(vx,"onTransitionEnd");As("onMouseEnter",["mouseout","mouseover"]);As("onMouseLeave",["mouseout","mouseover"]);As("onPointerEnter",["pointerout","pointerover"]);As("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pj=new Set("cancel close invalid load scroll toggle".split(" ").concat(yi));function Am(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,fw(n,e,void 0,t),t.currentTarget=null}function _x(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var c=n.length-1;0<=c;c--){var d=n[c],h=d.instance,f=d.currentTarget;if(d=d.listener,h!==o&&a.isPropagationStopped())break e;Am(a,d,f),o=h}else for(c=0;c<n.length;c++){if(d=n[c],h=d.instance,f=d.currentTarget,d=d.listener,h!==o&&a.isPropagationStopped())break e;Am(a,d,f),o=h}}}if(ko)throw t=yu,ko=!1,yu=null,t}function Te(t,e){var r=e[Pu];r===void 0&&(r=e[Pu]=new Set);var n=t+"__bubble";r.has(n)||(wx(e,t,2,!1),r.add(n))}function Sc(t,e,r){var n=0;e&&(n|=4),wx(r,t,n,e)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function zi(t){if(!t[Fa]){t[Fa]=!0,Tg.forEach(function(r){r!=="selectionchange"&&(pj.has(r)||Sc(r,!1,t),Sc(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fa]||(e[Fa]=!0,Sc("selectionchange",!1,e))}}function wx(t,e,r,n){switch(ix(e)){case 1:var a=Tw;break;case 4:a=Cw;break;default:a=Md}r=a.bind(null,e,r,t),a=void 0,!xu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Ec(t,e,r,n,a){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var c=n.tag;if(c===3||c===4){var d=n.stateNode.containerInfo;if(d===a||d.nodeType===8&&d.parentNode===a)break;if(c===4)for(c=n.return;c!==null;){var h=c.tag;if((h===3||h===4)&&(h=c.stateNode.containerInfo,h===a||h.nodeType===8&&h.parentNode===a))return;c=c.return}for(;d!==null;){if(c=En(d),c===null)return;if(h=c.tag,h===5||h===6){n=o=c;continue e}d=d.parentNode}}n=n.return}Vg(function(){var f=o,x=Id(r),g=[];e:{var y=bx.get(t);if(y!==void 0){var w=Ud,v=t;switch(t){case"keypress":if(uo(r)===0)break e;case"keydown":case"keyup":w=Vw;break;case"focusin":v="focus",w=bc;break;case"focusout":v="blur",w=bc;break;case"beforeblur":case"afterblur":w=bc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=vm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Lw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Gw;break;case gx:case xx:case yx:w=Dw;break;case vx:w=Yw;break;case"scroll":w=Aw;break;case"wheel":w=Xw;break;case"copy":case"cut":case"paste":w=Mw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=_m}var b=(e&4)!==0,E=!b&&t==="scroll",j=b?y!==null?y+"Capture":null:y;b=[];for(var _=f,S;_!==null;){S=_;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,j!==null&&(P=Li(_,j),P!=null&&b.push(Ui(_,P,S)))),E)break;_=_.return}0<b.length&&(y=new w(y,v,null,r,x),g.push({event:y,listeners:b}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",y&&r!==pu&&(v=r.relatedTarget||r.fromElement)&&(En(v)||v[Sr]))break e;if((w||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,w?(v=r.relatedTarget||r.toElement,w=f,v=v?En(v):null,v!==null&&(E=Wn(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(w=null,v=f),w!==v)){if(b=vm,P="onMouseLeave",j="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(b=_m,P="onPointerLeave",j="onPointerEnter",_="pointer"),E=w==null?y:ps(w),S=v==null?y:ps(v),y=new b(P,_+"leave",w,r,x),y.target=E,y.relatedTarget=S,P=null,En(x)===f&&(b=new b(j,_+"enter",v,r,x),b.target=S,b.relatedTarget=E,P=b),E=P,w&&v)t:{for(b=w,j=v,_=0,S=b;S;S=ns(S))_++;for(S=0,P=j;P;P=ns(P))S++;for(;0<_-S;)b=ns(b),_--;for(;0<S-_;)j=ns(j),S--;for(;_--;){if(b===j||j!==null&&b===j.alternate)break t;b=ns(b),j=ns(j)}b=null}else b=null;w!==null&&Om(g,y,w,b,!1),v!==null&&E!==null&&Om(g,E,v,b,!0)}}e:{if(y=f?ps(f):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var O=ij;else if(Nm(y))if(dx)O=cj;else{O=oj;var A=aj}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(O=lj);if(O&&(O=O(t,f))){ux(g,O,r,x);break e}A&&A(t,y,f),t==="focusout"&&(A=y._wrapperState)&&A.controlled&&y.type==="number"&&uu(y,"number",y.value)}switch(A=f?ps(f):window,t){case"focusin":(Nm(A)||A.contentEditable==="true")&&(fs=A,wu=f,Si=null);break;case"focusout":Si=wu=fs=null;break;case"mousedown":ju=!0;break;case"contextmenu":case"mouseup":case"dragend":ju=!1,Tm(g,r,x);break;case"selectionchange":if(hj)break;case"keydown":case"keyup":Tm(g,r,x)}var I;if(Fd)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else hs?lx(t,r)&&(B="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(B="onCompositionStart");B&&(ox&&r.locale!=="ko"&&(hs||B!=="onCompositionStart"?B==="onCompositionEnd"&&hs&&(I=ax()):(Fr=x,zd="value"in Fr?Fr.value:Fr.textContent,hs=!0)),A=Co(f,B),0<A.length&&(B=new bm(B,t,null,r,x),g.push({event:B,listeners:A}),I?B.data=I:(I=cx(r),I!==null&&(B.data=I)))),(I=ej?tj(t,r):rj(t,r))&&(f=Co(f,"onBeforeInput"),0<f.length&&(x=new bm("onBeforeInput","beforeinput",null,r,x),g.push({event:x,listeners:f}),x.data=I))}_x(g,e)})}function Ui(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Co(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Li(t,r),o!=null&&n.unshift(Ui(t,o,a)),o=Li(t,e),o!=null&&n.push(Ui(t,o,a))),t=t.return}return n}function ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Om(t,e,r,n,a){for(var o=e._reactName,c=[];r!==null&&r!==n;){var d=r,h=d.alternate,f=d.stateNode;if(h!==null&&h===n)break;d.tag===5&&f!==null&&(d=f,a?(h=Li(r,o),h!=null&&c.unshift(Ui(r,h,d))):a||(h=Li(r,o),h!=null&&c.push(Ui(r,h,d)))),r=r.return}c.length!==0&&t.push({event:e,listeners:c})}var gj=/\r\n?/g,xj=/\u0000|\uFFFD/g;function Lm(t){return(typeof t=="string"?t:""+t).replace(gj,`
`).replace(xj,"")}function Ha(t,e,r){if(e=Lm(e),Lm(t)!==e&&r)throw Error(J(425))}function Ao(){}var Nu=null,ku=null;function Su(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Eu=typeof setTimeout=="function"?setTimeout:void 0,yj=typeof clearTimeout=="function"?clearTimeout:void 0,Im=typeof Promise=="function"?Promise:void 0,vj=typeof queueMicrotask=="function"?queueMicrotask:typeof Im<"u"?function(t){return Im.resolve(null).then(t).catch(bj)}:Eu;function bj(t){setTimeout(function(){throw t})}function Pc(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Di(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Di(e)}function Gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Fs=Math.random().toString(36).slice(2),ur="__reactFiber$"+Fs,$i="__reactProps$"+Fs,Sr="__reactContainer$"+Fs,Pu="__reactEvents$"+Fs,_j="__reactListeners$"+Fs,wj="__reactHandles$"+Fs;function En(t){var e=t[ur];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Sr]||r[ur]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Rm(t);t!==null;){if(r=t[ur])return r;t=Rm(t)}return e}t=r,r=t.parentNode}return null}function ia(t){return t=t[ur]||t[Sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function ul(t){return t[$i]||null}var Tu=[],gs=-1;function an(t){return{current:t}}function Ae(t){0>gs||(t.current=Tu[gs],Tu[gs]=null,gs--)}function Ee(t,e){gs++,Tu[gs]=t.current,t.current=e}var rn={},ht=an(rn),Nt=an(!1),Rn=rn;function Os(t,e){var r=t.type.contextTypes;if(!r)return rn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function kt(t){return t=t.childContextTypes,t!=null}function Oo(){Ae(Nt),Ae(ht)}function Dm(t,e,r){if(ht.current!==rn)throw Error(J(168));Ee(ht,e),Ee(Nt,r)}function jx(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(J(108,aw(t)||"Unknown",a));return Be({},r,n)}function Lo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rn,Rn=ht.current,Ee(ht,t),Ee(Nt,Nt.current),!0}function Bm(t,e,r){var n=t.stateNode;if(!n)throw Error(J(169));r?(t=jx(t,e,Rn),n.__reactInternalMemoizedMergedChildContext=t,Ae(Nt),Ae(ht),Ee(ht,t)):Ae(Nt),Ee(Nt,r)}var vr=null,dl=!1,Tc=!1;function Nx(t){vr===null?vr=[t]:vr.push(t)}function jj(t){dl=!0,Nx(t)}function on(){if(!Tc&&vr!==null){Tc=!0;var t=0,e=je;try{var r=vr;for(je=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}vr=null,dl=!1}catch(a){throw vr!==null&&(vr=vr.slice(t+1)),Zg(Rd,on),a}finally{je=e,Tc=!1}}return null}var xs=[],ys=0,Io=null,Ro=0,Bt=[],Mt=0,Dn=null,br=1,_r="";function vn(t,e){xs[ys++]=Ro,xs[ys++]=Io,Io=t,Ro=e}function kx(t,e,r){Bt[Mt++]=br,Bt[Mt++]=_r,Bt[Mt++]=Dn,Dn=t;var n=br;t=_r;var a=32-Qt(n)-1;n&=~(1<<a),r+=1;var o=32-Qt(e)+a;if(30<o){var c=a-a%5;o=(n&(1<<c)-1).toString(32),n>>=c,a-=c,br=1<<32-Qt(e)+a|r<<a|n,_r=o+t}else br=1<<o|r<<a|n,_r=t}function Wd(t){t.return!==null&&(vn(t,1),kx(t,1,0))}function Vd(t){for(;t===Io;)Io=xs[--ys],xs[ys]=null,Ro=xs[--ys],xs[ys]=null;for(;t===Dn;)Dn=Bt[--Mt],Bt[Mt]=null,_r=Bt[--Mt],Bt[Mt]=null,br=Bt[--Mt],Bt[Mt]=null}var Ct=null,Tt=null,Le=!1,Jt=null;function Sx(t,e){var r=zt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Mm(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,Tt=Gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,Tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Dn!==null?{id:br,overflow:_r}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=zt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ct=t,Tt=null,!0):!1;default:return!1}}function Cu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Au(t){if(Le){var e=Tt;if(e){var r=e;if(!Mm(t,e)){if(Cu(t))throw Error(J(418));e=Gr(r.nextSibling);var n=Ct;e&&Mm(t,e)?Sx(n,r):(t.flags=t.flags&-4097|2,Le=!1,Ct=t)}}else{if(Cu(t))throw Error(J(418));t.flags=t.flags&-4097|2,Le=!1,Ct=t}}}function zm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function Wa(t){if(t!==Ct)return!1;if(!Le)return zm(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Su(t.type,t.memoizedProps)),e&&(e=Tt)){if(Cu(t))throw Ex(),Error(J(418));for(;e;)Sx(t,e),e=Gr(e.nextSibling)}if(zm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Tt=Gr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Tt=null}}else Tt=Ct?Gr(t.stateNode.nextSibling):null;return!0}function Ex(){for(var t=Tt;t;)t=Gr(t.nextSibling)}function Ls(){Tt=Ct=null,Le=!1}function qd(t){Jt===null?Jt=[t]:Jt.push(t)}var Nj=Cr.ReactCurrentBatchConfig;function di(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(J(309));var n=r.stateNode}if(!n)throw Error(J(147,t));var a=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var d=a.refs;c===null?delete d[o]:d[o]=c},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!r._owner)throw Error(J(290,t))}return t}function Va(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Um(t){var e=t._init;return e(t._payload)}function Px(t){function e(j,_){if(t){var S=j.deletions;S===null?(j.deletions=[_],j.flags|=16):S.push(_)}}function r(j,_){if(!t)return null;for(;_!==null;)e(j,_),_=_.sibling;return null}function n(j,_){for(j=new Map;_!==null;)_.key!==null?j.set(_.key,_):j.set(_.index,_),_=_.sibling;return j}function a(j,_){return j=Xr(j,_),j.index=0,j.sibling=null,j}function o(j,_,S){return j.index=S,t?(S=j.alternate,S!==null?(S=S.index,S<_?(j.flags|=2,_):S):(j.flags|=2,_)):(j.flags|=1048576,_)}function c(j){return t&&j.alternate===null&&(j.flags|=2),j}function d(j,_,S,P){return _===null||_.tag!==6?(_=Dc(S,j.mode,P),_.return=j,_):(_=a(_,S),_.return=j,_)}function h(j,_,S,P){var O=S.type;return O===ds?x(j,_,S.props.children,P,S.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Dr&&Um(O)===_.type)?(P=a(_,S.props),P.ref=di(j,_,S),P.return=j,P):(P=yo(S.type,S.key,S.props,null,j.mode,P),P.ref=di(j,_,S),P.return=j,P)}function f(j,_,S,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Bc(S,j.mode,P),_.return=j,_):(_=a(_,S.children||[]),_.return=j,_)}function x(j,_,S,P,O){return _===null||_.tag!==7?(_=Ln(S,j.mode,P,O),_.return=j,_):(_=a(_,S),_.return=j,_)}function g(j,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Dc(""+_,j.mode,S),_.return=j,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ia:return S=yo(_.type,_.key,_.props,null,j.mode,S),S.ref=di(j,null,_),S.return=j,S;case us:return _=Bc(_,j.mode,S),_.return=j,_;case Dr:var P=_._init;return g(j,P(_._payload),S)}if(gi(_)||ai(_))return _=Ln(_,j.mode,S,null),_.return=j,_;Va(j,_)}return null}function y(j,_,S,P){var O=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:d(j,_,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ia:return S.key===O?h(j,_,S,P):null;case us:return S.key===O?f(j,_,S,P):null;case Dr:return O=S._init,y(j,_,O(S._payload),P)}if(gi(S)||ai(S))return O!==null?null:x(j,_,S,P,null);Va(j,S)}return null}function w(j,_,S,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return j=j.get(S)||null,d(_,j,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ia:return j=j.get(P.key===null?S:P.key)||null,h(_,j,P,O);case us:return j=j.get(P.key===null?S:P.key)||null,f(_,j,P,O);case Dr:var A=P._init;return w(j,_,S,A(P._payload),O)}if(gi(P)||ai(P))return j=j.get(S)||null,x(_,j,P,O,null);Va(_,P)}return null}function v(j,_,S,P){for(var O=null,A=null,I=_,B=_=0,R=null;I!==null&&B<S.length;B++){I.index>B?(R=I,I=null):R=I.sibling;var W=y(j,I,S[B],P);if(W===null){I===null&&(I=R);break}t&&I&&W.alternate===null&&e(j,I),_=o(W,_,B),A===null?O=W:A.sibling=W,A=W,I=R}if(B===S.length)return r(j,I),Le&&vn(j,B),O;if(I===null){for(;B<S.length;B++)I=g(j,S[B],P),I!==null&&(_=o(I,_,B),A===null?O=I:A.sibling=I,A=I);return Le&&vn(j,B),O}for(I=n(j,I);B<S.length;B++)R=w(I,j,B,S[B],P),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?B:R.key),_=o(R,_,B),A===null?O=R:A.sibling=R,A=R);return t&&I.forEach(function(F){return e(j,F)}),Le&&vn(j,B),O}function b(j,_,S,P){var O=ai(S);if(typeof O!="function")throw Error(J(150));if(S=O.call(S),S==null)throw Error(J(151));for(var A=O=null,I=_,B=_=0,R=null,W=S.next();I!==null&&!W.done;B++,W=S.next()){I.index>B?(R=I,I=null):R=I.sibling;var F=y(j,I,W.value,P);if(F===null){I===null&&(I=R);break}t&&I&&F.alternate===null&&e(j,I),_=o(F,_,B),A===null?O=F:A.sibling=F,A=F,I=R}if(W.done)return r(j,I),Le&&vn(j,B),O;if(I===null){for(;!W.done;B++,W=S.next())W=g(j,W.value,P),W!==null&&(_=o(W,_,B),A===null?O=W:A.sibling=W,A=W);return Le&&vn(j,B),O}for(I=n(j,I);!W.done;B++,W=S.next())W=w(I,j,B,W.value,P),W!==null&&(t&&W.alternate!==null&&I.delete(W.key===null?B:W.key),_=o(W,_,B),A===null?O=W:A.sibling=W,A=W);return t&&I.forEach(function(K){return e(j,K)}),Le&&vn(j,B),O}function E(j,_,S,P){if(typeof S=="object"&&S!==null&&S.type===ds&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ia:e:{for(var O=S.key,A=_;A!==null;){if(A.key===O){if(O=S.type,O===ds){if(A.tag===7){r(j,A.sibling),_=a(A,S.props.children),_.return=j,j=_;break e}}else if(A.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Dr&&Um(O)===A.type){r(j,A.sibling),_=a(A,S.props),_.ref=di(j,A,S),_.return=j,j=_;break e}r(j,A);break}else e(j,A);A=A.sibling}S.type===ds?(_=Ln(S.props.children,j.mode,P,S.key),_.return=j,j=_):(P=yo(S.type,S.key,S.props,null,j.mode,P),P.ref=di(j,_,S),P.return=j,j=P)}return c(j);case us:e:{for(A=S.key;_!==null;){if(_.key===A)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){r(j,_.sibling),_=a(_,S.children||[]),_.return=j,j=_;break e}else{r(j,_);break}else e(j,_);_=_.sibling}_=Bc(S,j.mode,P),_.return=j,j=_}return c(j);case Dr:return A=S._init,E(j,_,A(S._payload),P)}if(gi(S))return v(j,_,S,P);if(ai(S))return b(j,_,S,P);Va(j,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(r(j,_.sibling),_=a(_,S),_.return=j,j=_):(r(j,_),_=Dc(S,j.mode,P),_.return=j,j=_),c(j)):r(j,_)}return E}var Is=Px(!0),Tx=Px(!1),Do=an(null),Bo=null,vs=null,Kd=null;function Gd(){Kd=vs=Bo=null}function Zd(t){var e=Do.current;Ae(Do),t._currentValue=e}function Ou(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ss(t,e){Bo=t,Kd=vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function $t(t){var e=t._currentValue;if(Kd!==t)if(t={context:t,memoizedValue:e,next:null},vs===null){if(Bo===null)throw Error(J(308));vs=t,Bo.dependencies={lanes:0,firstContext:t}}else vs=vs.next=t;return e}var Pn=null;function Yd(t){Pn===null?Pn=[t]:Pn.push(t)}function Cx(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,Yd(e)):(r.next=a.next,a.next=r),e.interleaved=r,Er(t,n)}function Er(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Br=!1;function Jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ax(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,Er(t,r)}return a=n.interleaved,a===null?(e.next=e,Yd(n)):(e.next=a.next,a.next=e),n.interleaved=e,Er(t,r)}function ho(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Dd(t,r)}}function $m(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var c={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=c:o=o.next=c,r=r.next}while(r!==null);o===null?a=o=e:o=o.next=e}else a=o=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Mo(t,e,r,n){var a=t.updateQueue;Br=!1;var o=a.firstBaseUpdate,c=a.lastBaseUpdate,d=a.shared.pending;if(d!==null){a.shared.pending=null;var h=d,f=h.next;h.next=null,c===null?o=f:c.next=f,c=h;var x=t.alternate;x!==null&&(x=x.updateQueue,d=x.lastBaseUpdate,d!==c&&(d===null?x.firstBaseUpdate=f:d.next=f,x.lastBaseUpdate=h))}if(o!==null){var g=a.baseState;c=0,x=f=h=null,d=o;do{var y=d.lane,w=d.eventTime;if((n&y)===y){x!==null&&(x=x.next={eventTime:w,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var v=t,b=d;switch(y=e,w=r,b.tag){case 1:if(v=b.payload,typeof v=="function"){g=v.call(w,g,y);break e}g=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,y=typeof v=="function"?v.call(w,g,y):v,y==null)break e;g=Be({},g,y);break e;case 2:Br=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,y=a.effects,y===null?a.effects=[d]:y.push(d))}else w={eventTime:w,lane:y,tag:d.tag,payload:d.payload,callback:d.callback,next:null},x===null?(f=x=w,h=g):x=x.next=w,c|=y;if(d=d.next,d===null){if(d=a.shared.pending,d===null)break;y=d,d=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(x===null&&(h=g),a.baseState=h,a.firstBaseUpdate=f,a.lastBaseUpdate=x,e=a.shared.interleaved,e!==null){a=e;do c|=a.lane,a=a.next;while(a!==e)}else o===null&&(a.shared.lanes=0);Mn|=c,t.lanes=c,t.memoizedState=g}}function Fm(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(J(191,a));a.call(n)}}}var aa={},hr=an(aa),Fi=an(aa),Hi=an(aa);function Tn(t){if(t===aa)throw Error(J(174));return t}function Xd(t,e){switch(Ee(Hi,e),Ee(Fi,t),Ee(hr,aa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hu(e,t)}Ae(hr),Ee(hr,e)}function Rs(){Ae(hr),Ae(Fi),Ae(Hi)}function Ox(t){Tn(Hi.current);var e=Tn(hr.current),r=hu(e,t.type);e!==r&&(Ee(Fi,t),Ee(hr,r))}function Qd(t){Fi.current===t&&(Ae(hr),Ae(Fi))}var Re=an(0);function zo(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cc=[];function eh(){for(var t=0;t<Cc.length;t++)Cc[t]._workInProgressVersionPrimary=null;Cc.length=0}var fo=Cr.ReactCurrentDispatcher,Ac=Cr.ReactCurrentBatchConfig,Bn=0,De=null,Ge=null,Xe=null,Uo=!1,Ei=!1,Wi=0,kj=0;function ot(){throw Error(J(321))}function th(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!tr(t[r],e[r]))return!1;return!0}function rh(t,e,r,n,a,o){if(Bn=o,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fo.current=t===null||t.memoizedState===null?Tj:Cj,t=r(n,a),Ei){o=0;do{if(Ei=!1,Wi=0,25<=o)throw Error(J(301));o+=1,Xe=Ge=null,e.updateQueue=null,fo.current=Aj,t=r(n,a)}while(Ei)}if(fo.current=$o,e=Ge!==null&&Ge.next!==null,Bn=0,Xe=Ge=De=null,Uo=!1,e)throw Error(J(300));return t}function nh(){var t=Wi!==0;return Wi=0,t}function lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?De.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function Ft(){if(Ge===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Xe===null?De.memoizedState:Xe.next;if(e!==null)Xe=e,Ge=t;else{if(t===null)throw Error(J(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Xe===null?De.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Vi(t,e){return typeof e=="function"?e(t):e}function Oc(t){var e=Ft(),r=e.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=t;var n=Ge,a=n.baseQueue,o=r.pending;if(o!==null){if(a!==null){var c=a.next;a.next=o.next,o.next=c}n.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,n=n.baseState;var d=c=null,h=null,f=o;do{var x=f.lane;if((Bn&x)===x)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),n=f.hasEagerState?f.eagerState:t(n,f.action);else{var g={lane:x,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(d=h=g,c=n):h=h.next=g,De.lanes|=x,Mn|=x}f=f.next}while(f!==null&&f!==o);h===null?c=n:h.next=d,tr(n,e.memoizedState)||(jt=!0),e.memoizedState=n,e.baseState=c,e.baseQueue=h,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do o=a.lane,De.lanes|=o,Mn|=o,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Lc(t){var e=Ft(),r=e.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,o=e.memoizedState;if(a!==null){r.pending=null;var c=a=a.next;do o=t(o,c.action),c=c.next;while(c!==a);tr(o,e.memoizedState)||(jt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function Lx(){}function Ix(t,e){var r=De,n=Ft(),a=e(),o=!tr(n.memoizedState,a);if(o&&(n.memoizedState=a,jt=!0),n=n.queue,sh(Bx.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Xe!==null&&Xe.memoizedState.tag&1){if(r.flags|=2048,qi(9,Dx.bind(null,r,n,a,e),void 0,null),Qe===null)throw Error(J(349));Bn&30||Rx(r,e,a)}return a}function Rx(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Dx(t,e,r,n){e.value=r,e.getSnapshot=n,Mx(e)&&zx(t)}function Bx(t,e,r){return r(function(){Mx(e)&&zx(t)})}function Mx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!tr(t,r)}catch{return!0}}function zx(t){var e=Er(t,1);e!==null&&er(e,t,1,-1)}function Hm(t){var e=lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},e.queue=t,t=t.dispatch=Pj.bind(null,De,t),[e.memoizedState,t]}function qi(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Ux(){return Ft().memoizedState}function mo(t,e,r,n){var a=lr();De.flags|=t,a.memoizedState=qi(1|e,r,void 0,n===void 0?null:n)}function hl(t,e,r,n){var a=Ft();n=n===void 0?null:n;var o=void 0;if(Ge!==null){var c=Ge.memoizedState;if(o=c.destroy,n!==null&&th(n,c.deps)){a.memoizedState=qi(e,r,o,n);return}}De.flags|=t,a.memoizedState=qi(1|e,r,o,n)}function Wm(t,e){return mo(8390656,8,t,e)}function sh(t,e){return hl(2048,8,t,e)}function $x(t,e){return hl(4,2,t,e)}function Fx(t,e){return hl(4,4,t,e)}function Hx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wx(t,e,r){return r=r!=null?r.concat([t]):null,hl(4,4,Hx.bind(null,e,t),r)}function ih(){}function Vx(t,e){var r=Ft();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&th(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function qx(t,e){var r=Ft();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&th(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Kx(t,e,r){return Bn&21?(tr(r,e)||(r=Xg(),De.lanes|=r,Mn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=r)}function Sj(t,e){var r=je;je=r!==0&&4>r?r:4,t(!0);var n=Ac.transition;Ac.transition={};try{t(!1),e()}finally{je=r,Ac.transition=n}}function Gx(){return Ft().memoizedState}function Ej(t,e,r){var n=Jr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Zx(t))Yx(e,r);else if(r=Cx(t,e,r,n),r!==null){var a=pt();er(r,t,n,a),Jx(r,e,n)}}function Pj(t,e,r){var n=Jr(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Zx(t))Yx(e,a);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,d=o(c,r);if(a.hasEagerState=!0,a.eagerState=d,tr(d,c)){var h=e.interleaved;h===null?(a.next=a,Yd(e)):(a.next=h.next,h.next=a),e.interleaved=a;return}}catch{}finally{}r=Cx(t,e,a,n),r!==null&&(a=pt(),er(r,t,n,a),Jx(r,e,n))}}function Zx(t){var e=t.alternate;return t===De||e!==null&&e===De}function Yx(t,e){Ei=Uo=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Jx(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Dd(t,r)}}var $o={readContext:$t,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},Tj={readContext:$t,useCallback:function(t,e){return lr().memoizedState=[t,e===void 0?null:e],t},useContext:$t,useEffect:Wm,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,mo(4194308,4,Hx.bind(null,e,t),r)},useLayoutEffect:function(t,e){return mo(4194308,4,t,e)},useInsertionEffect:function(t,e){return mo(4,2,t,e)},useMemo:function(t,e){var r=lr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=lr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ej.bind(null,De,t),[n.memoizedState,t]},useRef:function(t){var e=lr();return t={current:t},e.memoizedState=t},useState:Hm,useDebugValue:ih,useDeferredValue:function(t){return lr().memoizedState=t},useTransition:function(){var t=Hm(!1),e=t[0];return t=Sj.bind(null,t[1]),lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=De,a=lr();if(Le){if(r===void 0)throw Error(J(407));r=r()}else{if(r=e(),Qe===null)throw Error(J(349));Bn&30||Rx(n,e,r)}a.memoizedState=r;var o={value:r,getSnapshot:e};return a.queue=o,Wm(Bx.bind(null,n,o,t),[t]),n.flags|=2048,qi(9,Dx.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=lr(),e=Qe.identifierPrefix;if(Le){var r=_r,n=br;r=(n&~(1<<32-Qt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Wi++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=kj++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Cj={readContext:$t,useCallback:Vx,useContext:$t,useEffect:sh,useImperativeHandle:Wx,useInsertionEffect:$x,useLayoutEffect:Fx,useMemo:qx,useReducer:Oc,useRef:Ux,useState:function(){return Oc(Vi)},useDebugValue:ih,useDeferredValue:function(t){var e=Ft();return Kx(e,Ge.memoizedState,t)},useTransition:function(){var t=Oc(Vi)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:Lx,useSyncExternalStore:Ix,useId:Gx,unstable_isNewReconciler:!1},Aj={readContext:$t,useCallback:Vx,useContext:$t,useEffect:sh,useImperativeHandle:Wx,useInsertionEffect:$x,useLayoutEffect:Fx,useMemo:qx,useReducer:Lc,useRef:Ux,useState:function(){return Lc(Vi)},useDebugValue:ih,useDeferredValue:function(t){var e=Ft();return Ge===null?e.memoizedState=t:Kx(e,Ge.memoizedState,t)},useTransition:function(){var t=Lc(Vi)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:Lx,useSyncExternalStore:Ix,useId:Gx,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Lu(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Be({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var fl={isMounted:function(t){return(t=t._reactInternals)?Wn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=pt(),a=Jr(t),o=jr(n,a);o.payload=e,r!=null&&(o.callback=r),e=Zr(t,o,a),e!==null&&(er(e,t,a,n),ho(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=pt(),a=Jr(t),o=jr(n,a);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Zr(t,o,a),e!==null&&(er(e,t,a,n),ho(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=pt(),n=Jr(t),a=jr(r,n);a.tag=2,e!=null&&(a.callback=e),e=Zr(t,a,n),e!==null&&(er(e,t,n,r),ho(e,t,n))}};function Vm(t,e,r,n,a,o,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,c):e.prototype&&e.prototype.isPureReactComponent?!Mi(r,n)||!Mi(a,o):!0}function Xx(t,e,r){var n=!1,a=rn,o=e.contextType;return typeof o=="object"&&o!==null?o=$t(o):(a=kt(e)?Rn:ht.current,n=e.contextTypes,o=(n=n!=null)?Os(t,a):rn),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=o),e}function qm(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&fl.enqueueReplaceState(e,e.state,null)}function Iu(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},Jd(t);var o=e.contextType;typeof o=="object"&&o!==null?a.context=$t(o):(o=kt(e)?Rn:ht.current,a.context=Os(t,o)),a.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Lu(t,e,o,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&fl.enqueueReplaceState(a,a.state,null),Mo(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,e){try{var r="",n=e;do r+=iw(n),n=n.return;while(n);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:a,digest:null}}function Ic(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Ru(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Oj=typeof WeakMap=="function"?WeakMap:Map;function Qx(t,e,r){r=jr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ho||(Ho=!0,Vu=n),Ru(t,e)},r}function e0(t,e,r){r=jr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){Ru(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Ru(t,e),typeof n!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),r}function Km(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Oj;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=qj.bind(null,t,e,r),e.then(t,t))}function Gm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zm(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=jr(-1,1),e.tag=2,Zr(r,e,1))),r.lanes|=1),t)}var Lj=Cr.ReactCurrentOwner,jt=!1;function mt(t,e,r,n){e.child=t===null?Tx(e,null,r,n):Is(e,t.child,r,n)}function Ym(t,e,r,n,a){r=r.render;var o=e.ref;return Ss(e,a),n=rh(t,e,r,n,o,a),r=nh(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Pr(t,e,a)):(Le&&r&&Wd(e),e.flags|=1,mt(t,e,n,a),e.child)}function Jm(t,e,r,n,a){if(t===null){var o=r.type;return typeof o=="function"&&!fh(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,t0(t,e,o,n,a)):(t=yo(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&a)){var c=o.memoizedProps;if(r=r.compare,r=r!==null?r:Mi,r(c,n)&&t.ref===e.ref)return Pr(t,e,a)}return e.flags|=1,t=Xr(o,n),t.ref=e.ref,t.return=e,e.child=t}function t0(t,e,r,n,a){if(t!==null){var o=t.memoizedProps;if(Mi(o,n)&&t.ref===e.ref)if(jt=!1,e.pendingProps=n=o,(t.lanes&a)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,Pr(t,e,a)}return Du(t,e,r,n,a)}function r0(t,e,r){var n=e.pendingProps,a=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(_s,Et),Et|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(_s,Et),Et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Ee(_s,Et),Et|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Ee(_s,Et),Et|=n;return mt(t,e,a,r),e.child}function n0(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Du(t,e,r,n,a){var o=kt(r)?Rn:ht.current;return o=Os(e,o),Ss(e,a),r=rh(t,e,r,n,o,a),n=nh(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Pr(t,e,a)):(Le&&n&&Wd(e),e.flags|=1,mt(t,e,r,a),e.child)}function Xm(t,e,r,n,a){if(kt(r)){var o=!0;Lo(e)}else o=!1;if(Ss(e,a),e.stateNode===null)po(t,e),Xx(e,r,n),Iu(e,r,n,a),n=!0;else if(t===null){var c=e.stateNode,d=e.memoizedProps;c.props=d;var h=c.context,f=r.contextType;typeof f=="object"&&f!==null?f=$t(f):(f=kt(r)?Rn:ht.current,f=Os(e,f));var x=r.getDerivedStateFromProps,g=typeof x=="function"||typeof c.getSnapshotBeforeUpdate=="function";g||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==n||h!==f)&&qm(e,c,n,f),Br=!1;var y=e.memoizedState;c.state=y,Mo(e,n,c,a),h=e.memoizedState,d!==n||y!==h||Nt.current||Br?(typeof x=="function"&&(Lu(e,r,x,n),h=e.memoizedState),(d=Br||Vm(e,r,d,n,y,h,f))?(g||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=h),c.props=n,c.state=h,c.context=f,n=d):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{c=e.stateNode,Ax(t,e),d=e.memoizedProps,f=e.type===e.elementType?d:Kt(e.type,d),c.props=f,g=e.pendingProps,y=c.context,h=r.contextType,typeof h=="object"&&h!==null?h=$t(h):(h=kt(r)?Rn:ht.current,h=Os(e,h));var w=r.getDerivedStateFromProps;(x=typeof w=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==g||y!==h)&&qm(e,c,n,h),Br=!1,y=e.memoizedState,c.state=y,Mo(e,n,c,a);var v=e.memoizedState;d!==g||y!==v||Nt.current||Br?(typeof w=="function"&&(Lu(e,r,w,n),v=e.memoizedState),(f=Br||Vm(e,r,f,n,y,v,h)||!1)?(x||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,v,h),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,v,h)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),c.props=n,c.state=v,c.context=h,n=f):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),n=!1)}return Bu(t,e,r,n,o,a)}function Bu(t,e,r,n,a,o){n0(t,e);var c=(e.flags&128)!==0;if(!n&&!c)return a&&Bm(e,r,!1),Pr(t,e,o);n=e.stateNode,Lj.current=e;var d=c&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&c?(e.child=Is(e,t.child,null,o),e.child=Is(e,null,d,o)):mt(t,e,d,o),e.memoizedState=n.state,a&&Bm(e,r,!0),e.child}function s0(t){var e=t.stateNode;e.pendingContext?Dm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dm(t,e.context,!1),Xd(t,e.containerInfo)}function Qm(t,e,r,n,a){return Ls(),qd(a),e.flags|=256,mt(t,e,r,n),e.child}var Mu={dehydrated:null,treeContext:null,retryLane:0};function zu(t){return{baseLanes:t,cachePool:null,transitions:null}}function i0(t,e,r){var n=e.pendingProps,a=Re.current,o=!1,c=(e.flags&128)!==0,d;if((d=c)||(d=t!==null&&t.memoizedState===null?!1:(a&2)!==0),d?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ee(Re,a&1),t===null)return Au(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=n.children,t=n.fallback,o?(n=e.mode,o=e.child,c={mode:"hidden",children:c},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=gl(c,n,0,null),t=Ln(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=zu(r),e.memoizedState=Mu,t):ah(e,c));if(a=t.memoizedState,a!==null&&(d=a.dehydrated,d!==null))return Ij(t,e,c,n,d,a,r);if(o){o=n.fallback,c=e.mode,a=t.child,d=a.sibling;var h={mode:"hidden",children:n.children};return!(c&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=h,e.deletions=null):(n=Xr(a,h),n.subtreeFlags=a.subtreeFlags&14680064),d!==null?o=Xr(d,o):(o=Ln(o,c,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,c=t.child.memoizedState,c=c===null?zu(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=t.childLanes&~r,e.memoizedState=Mu,n}return o=t.child,t=o.sibling,n=Xr(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function ah(t,e){return e=gl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qa(t,e,r,n){return n!==null&&qd(n),Is(e,t.child,null,r),t=ah(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ij(t,e,r,n,a,o,c){if(r)return e.flags&256?(e.flags&=-257,n=Ic(Error(J(422))),qa(t,e,c,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,a=e.mode,n=gl({mode:"visible",children:n.children},a,0,null),o=Ln(o,a,c,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&Is(e,t.child,null,c),e.child.memoizedState=zu(c),e.memoizedState=Mu,o);if(!(e.mode&1))return qa(t,e,c,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var d=n.dgst;return n=d,o=Error(J(419)),n=Ic(o,n,void 0),qa(t,e,c,n)}if(d=(c&t.childLanes)!==0,jt||d){if(n=Qe,n!==null){switch(c&-c){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|c)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Er(t,a),er(n,t,a,-1))}return hh(),n=Ic(Error(J(421))),qa(t,e,c,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Kj.bind(null,t),a._reactRetry=e,null):(t=o.treeContext,Tt=Gr(a.nextSibling),Ct=e,Le=!0,Jt=null,t!==null&&(Bt[Mt++]=br,Bt[Mt++]=_r,Bt[Mt++]=Dn,br=t.id,_r=t.overflow,Dn=e),e=ah(e,n.children),e.flags|=4096,e)}function ep(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ou(t.return,e,r)}function Rc(t,e,r,n,a){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function a0(t,e,r){var n=e.pendingProps,a=n.revealOrder,o=n.tail;if(mt(t,e,n.children,r),n=Re.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ep(t,r,e);else if(t.tag===19)ep(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ee(Re,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&zo(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),Rc(e,!1,a,r,o);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&zo(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Rc(e,!0,r,null,o);break;case"together":Rc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function po(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Mn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,r=Xr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Xr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Rj(t,e,r){switch(e.tag){case 3:s0(e),Ls();break;case 5:Ox(e);break;case 1:kt(e.type)&&Lo(e);break;case 4:Xd(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;Ee(Do,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ee(Re,Re.current&1),e.flags|=128,null):r&e.child.childLanes?i0(t,e,r):(Ee(Re,Re.current&1),t=Pr(t,e,r),t!==null?t.sibling:null);Ee(Re,Re.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return a0(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ee(Re,Re.current),n)break;return null;case 22:case 23:return e.lanes=0,r0(t,e,r)}return Pr(t,e,r)}var o0,Uu,l0,c0;o0=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Uu=function(){};l0=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,Tn(hr.current);var o=null;switch(r){case"input":a=lu(t,a),n=lu(t,n),o=[];break;case"select":a=Be({},a,{value:void 0}),n=Be({},n,{value:void 0}),o=[];break;case"textarea":a=du(t,a),n=du(t,n),o=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ao)}fu(r,n);var c;r=null;for(f in a)if(!n.hasOwnProperty(f)&&a.hasOwnProperty(f)&&a[f]!=null)if(f==="style"){var d=a[f];for(c in d)d.hasOwnProperty(c)&&(r||(r={}),r[c]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ai.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in n){var h=n[f];if(d=a!=null?a[f]:void 0,n.hasOwnProperty(f)&&h!==d&&(h!=null||d!=null))if(f==="style")if(d){for(c in d)!d.hasOwnProperty(c)||h&&h.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in h)h.hasOwnProperty(c)&&d[c]!==h[c]&&(r||(r={}),r[c]=h[c])}else r||(o||(o=[]),o.push(f,r)),r=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Ai.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Te("scroll",t),o||d===h||(o=[])):(o=o||[]).push(f,h))}r&&(o=o||[]).push("style",r);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};c0=function(t,e,r,n){r!==n&&(e.flags|=4)};function hi(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Dj(t,e,r){var n=e.pendingProps;switch(Vd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return kt(e.type)&&Oo(),lt(e),null;case 3:return n=e.stateNode,Rs(),Ae(Nt),Ae(ht),eh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Wa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(Gu(Jt),Jt=null))),Uu(t,e),lt(e),null;case 5:Qd(e);var a=Tn(Hi.current);if(r=e.type,t!==null&&e.stateNode!=null)l0(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(J(166));return lt(e),null}if(t=Tn(hr.current),Wa(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[ur]=e,n[$i]=o,t=(e.mode&1)!==0,r){case"dialog":Te("cancel",n),Te("close",n);break;case"iframe":case"object":case"embed":Te("load",n);break;case"video":case"audio":for(a=0;a<yi.length;a++)Te(yi[a],n);break;case"source":Te("error",n);break;case"img":case"image":case"link":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"input":cm(n,o),Te("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Te("invalid",n);break;case"textarea":dm(n,o),Te("invalid",n)}fu(r,o),a=null;for(var c in o)if(o.hasOwnProperty(c)){var d=o[c];c==="children"?typeof d=="string"?n.textContent!==d&&(o.suppressHydrationWarning!==!0&&Ha(n.textContent,d,t),a=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&Ha(n.textContent,d,t),a=["children",""+d]):Ai.hasOwnProperty(c)&&d!=null&&c==="onScroll"&&Te("scroll",n)}switch(r){case"input":Ra(n),um(n,o,!0);break;case"textarea":Ra(n),hm(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Ao)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{c=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bg(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=c.createElement(r,{is:n.is}):(t=c.createElement(r),r==="select"&&(c=t,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):t=c.createElementNS(t,r),t[ur]=e,t[$i]=n,o0(t,e,!1,!1),e.stateNode=t;e:{switch(c=mu(r,n),r){case"dialog":Te("cancel",t),Te("close",t),a=n;break;case"iframe":case"object":case"embed":Te("load",t),a=n;break;case"video":case"audio":for(a=0;a<yi.length;a++)Te(yi[a],t);a=n;break;case"source":Te("error",t),a=n;break;case"img":case"image":case"link":Te("error",t),Te("load",t),a=n;break;case"details":Te("toggle",t),a=n;break;case"input":cm(t,n),a=lu(t,n),Te("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Be({},n,{value:void 0}),Te("invalid",t);break;case"textarea":dm(t,n),a=du(t,n),Te("invalid",t);break;default:a=n}fu(r,a),d=a;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];o==="style"?Ug(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Mg(t,h)):o==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&Oi(t,h):typeof h=="number"&&Oi(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ai.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Te("scroll",t):h!=null&&Cd(t,o,h,c))}switch(r){case"input":Ra(t),um(t,n,!1);break;case"textarea":Ra(t),hm(t);break;case"option":n.value!=null&&t.setAttribute("value",""+tn(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?ws(t,!!n.multiple,o,!1):n.defaultValue!=null&&ws(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Ao)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)c0(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(J(166));if(r=Tn(Hi.current),Tn(hr.current),Wa(e)){if(n=e.stateNode,r=e.memoizedProps,n[ur]=e,(o=n.nodeValue!==r)&&(t=Ct,t!==null))switch(t.tag){case 3:Ha(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ha(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ur]=e,e.stateNode=n}return lt(e),null;case 13:if(Ae(Re),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Tt!==null&&e.mode&1&&!(e.flags&128))Ex(),Ls(),e.flags|=98560,o=!1;else if(o=Wa(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[ur]=e}else Ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),o=!1}else Jt!==null&&(Gu(Jt),Jt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Ze===0&&(Ze=3):hh())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Rs(),Uu(t,e),t===null&&zi(e.stateNode.containerInfo),lt(e),null;case 10:return Zd(e.type._context),lt(e),null;case 17:return kt(e.type)&&Oo(),lt(e),null;case 19:if(Ae(Re),o=e.memoizedState,o===null)return lt(e),null;if(n=(e.flags&128)!==0,c=o.rendering,c===null)if(n)hi(o,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=zo(t),c!==null){for(e.flags|=128,hi(o,!1),n=c.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,t=c.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ee(Re,Re.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ue()>Bs&&(e.flags|=128,n=!0,hi(o,!1),e.lanes=4194304)}else{if(!n)if(t=zo(c),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),hi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!Le)return lt(e),null}else 2*Ue()-o.renderingStartTime>Bs&&r!==1073741824&&(e.flags|=128,n=!0,hi(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(r=o.last,r!==null?r.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ue(),e.sibling=null,r=Re.current,Ee(Re,n?r&1|2:r&1),e):(lt(e),null);case 22:case 23:return dh(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Et&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function Bj(t,e){switch(Vd(e),e.tag){case 1:return kt(e.type)&&Oo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rs(),Ae(Nt),Ae(ht),eh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qd(e),null;case 13:if(Ae(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Re),null;case 4:return Rs(),null;case 10:return Zd(e.type._context),null;case 22:case 23:return dh(),null;case 24:return null;default:return null}}var Ka=!1,ct=!1,Mj=typeof WeakSet=="function"?WeakSet:Set,ae=null;function bs(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Me(t,e,n)}else r.current=null}function $u(t,e,r){try{r()}catch(n){Me(t,e,n)}}var tp=!1;function zj(t,e){if(Nu=Po,t=mx(),Hd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var c=0,d=-1,h=-1,f=0,x=0,g=t,y=null;t:for(;;){for(var w;g!==r||a!==0&&g.nodeType!==3||(d=c+a),g!==o||n!==0&&g.nodeType!==3||(h=c+n),g.nodeType===3&&(c+=g.nodeValue.length),(w=g.firstChild)!==null;)y=g,g=w;for(;;){if(g===t)break t;if(y===r&&++f===a&&(d=c),y===o&&++x===n&&(h=c),(w=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=w}r=d===-1||h===-1?null:{start:d,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(ku={focusedElem:t,selectionRange:r},Po=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,E=v.memoizedState,j=e.stateNode,_=j.getSnapshotBeforeUpdate(e.elementType===e.type?b:Kt(e.type,b),E);j.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(P){Me(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return v=tp,tp=!1,v}function Pi(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var o=a.destroy;a.destroy=void 0,o!==void 0&&$u(e,r,o)}a=a.next}while(a!==n)}}function ml(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Fu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function u0(t){var e=t.alternate;e!==null&&(t.alternate=null,u0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ur],delete e[$i],delete e[Pu],delete e[_j],delete e[wj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function d0(t){return t.tag===5||t.tag===3||t.tag===4}function rp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ao));else if(n!==4&&(t=t.child,t!==null))for(Hu(t,e,r),t=t.sibling;t!==null;)Hu(t,e,r),t=t.sibling}function Wu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Wu(t,e,r),t=t.sibling;t!==null;)Wu(t,e,r),t=t.sibling}var nt=null,Zt=!1;function Ir(t,e,r){for(r=r.child;r!==null;)h0(t,e,r),r=r.sibling}function h0(t,e,r){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(al,r)}catch{}switch(r.tag){case 5:ct||bs(r,e);case 6:var n=nt,a=Zt;nt=null,Ir(t,e,r),nt=n,Zt=a,nt!==null&&(Zt?(t=nt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):nt.removeChild(r.stateNode));break;case 18:nt!==null&&(Zt?(t=nt,r=r.stateNode,t.nodeType===8?Pc(t.parentNode,r):t.nodeType===1&&Pc(t,r),Di(t)):Pc(nt,r.stateNode));break;case 4:n=nt,a=Zt,nt=r.stateNode.containerInfo,Zt=!0,Ir(t,e,r),nt=n,Zt=a;break;case 0:case 11:case 14:case 15:if(!ct&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var o=a,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&$u(r,e,c),a=a.next}while(a!==n)}Ir(t,e,r);break;case 1:if(!ct&&(bs(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(d){Me(r,e,d)}Ir(t,e,r);break;case 21:Ir(t,e,r);break;case 22:r.mode&1?(ct=(n=ct)||r.memoizedState!==null,Ir(t,e,r),ct=n):Ir(t,e,r);break;default:Ir(t,e,r)}}function np(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Mj),e.forEach(function(n){var a=Gj.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Vt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var o=t,c=e,d=c;e:for(;d!==null;){switch(d.tag){case 5:nt=d.stateNode,Zt=!1;break e;case 3:nt=d.stateNode.containerInfo,Zt=!0;break e;case 4:nt=d.stateNode.containerInfo,Zt=!0;break e}d=d.return}if(nt===null)throw Error(J(160));h0(o,c,a),nt=null,Zt=!1;var h=a.alternate;h!==null&&(h.return=null),a.return=null}catch(f){Me(a,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)f0(e,t),e=e.sibling}function f0(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vt(e,t),or(t),n&4){try{Pi(3,t,t.return),ml(3,t)}catch(b){Me(t,t.return,b)}try{Pi(5,t,t.return)}catch(b){Me(t,t.return,b)}}break;case 1:Vt(e,t),or(t),n&512&&r!==null&&bs(r,r.return);break;case 5:if(Vt(e,t),or(t),n&512&&r!==null&&bs(r,r.return),t.flags&32){var a=t.stateNode;try{Oi(a,"")}catch(b){Me(t,t.return,b)}}if(n&4&&(a=t.stateNode,a!=null)){var o=t.memoizedProps,c=r!==null?r.memoizedProps:o,d=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&Rg(a,o),mu(d,c);var f=mu(d,o);for(c=0;c<h.length;c+=2){var x=h[c],g=h[c+1];x==="style"?Ug(a,g):x==="dangerouslySetInnerHTML"?Mg(a,g):x==="children"?Oi(a,g):Cd(a,x,g,f)}switch(d){case"input":cu(a,o);break;case"textarea":Dg(a,o);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?ws(a,!!o.multiple,w,!1):y!==!!o.multiple&&(o.defaultValue!=null?ws(a,!!o.multiple,o.defaultValue,!0):ws(a,!!o.multiple,o.multiple?[]:"",!1))}a[$i]=o}catch(b){Me(t,t.return,b)}}break;case 6:if(Vt(e,t),or(t),n&4){if(t.stateNode===null)throw Error(J(162));a=t.stateNode,o=t.memoizedProps;try{a.nodeValue=o}catch(b){Me(t,t.return,b)}}break;case 3:if(Vt(e,t),or(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Di(e.containerInfo)}catch(b){Me(t,t.return,b)}break;case 4:Vt(e,t),or(t);break;case 13:Vt(e,t),or(t),a=t.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(ch=Ue())),n&4&&np(t);break;case 22:if(x=r!==null&&r.memoizedState!==null,t.mode&1?(ct=(f=ct)||x,Vt(e,t),ct=f):Vt(e,t),or(t),n&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!x&&t.mode&1)for(ae=t,x=t.child;x!==null;){for(g=ae=x;ae!==null;){switch(y=ae,w=y.child,y.tag){case 0:case 11:case 14:case 15:Pi(4,y,y.return);break;case 1:bs(y,y.return);var v=y.stateNode;if(typeof v.componentWillUnmount=="function"){n=y,r=y.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){Me(n,r,b)}}break;case 5:bs(y,y.return);break;case 22:if(y.memoizedState!==null){ip(g);continue}}w!==null?(w.return=y,ae=w):ip(g)}x=x.sibling}e:for(x=null,g=t;;){if(g.tag===5){if(x===null){x=g;try{a=g.stateNode,f?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=g.stateNode,h=g.memoizedProps.style,c=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=zg("display",c))}catch(b){Me(t,t.return,b)}}}else if(g.tag===6){if(x===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(b){Me(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;x===g&&(x=null),g=g.return}x===g&&(x=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Vt(e,t),or(t),n&4&&np(t);break;case 21:break;default:Vt(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(d0(r)){var n=r;break e}r=r.return}throw Error(J(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Oi(a,""),n.flags&=-33);var o=rp(t);Wu(t,o,a);break;case 3:case 4:var c=n.stateNode.containerInfo,d=rp(t);Hu(t,d,c);break;default:throw Error(J(161))}}catch(h){Me(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Uj(t,e,r){ae=t,m0(t)}function m0(t,e,r){for(var n=(t.mode&1)!==0;ae!==null;){var a=ae,o=a.child;if(a.tag===22&&n){var c=a.memoizedState!==null||Ka;if(!c){var d=a.alternate,h=d!==null&&d.memoizedState!==null||ct;d=Ka;var f=ct;if(Ka=c,(ct=h)&&!f)for(ae=a;ae!==null;)c=ae,h=c.child,c.tag===22&&c.memoizedState!==null?ap(a):h!==null?(h.return=c,ae=h):ap(a);for(;o!==null;)ae=o,m0(o),o=o.sibling;ae=a,Ka=d,ct=f}sp(t)}else a.subtreeFlags&8772&&o!==null?(o.return=a,ae=o):sp(t)}}function sp(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ct||ml(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ct)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Kt(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Fm(e,o,n);break;case 3:var c=e.updateQueue;if(c!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Fm(e,c,r)}break;case 5:var d=e.stateNode;if(r===null&&e.flags&4){r=d;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var x=f.memoizedState;if(x!==null){var g=x.dehydrated;g!==null&&Di(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}ct||e.flags&512&&Fu(e)}catch(y){Me(e,e.return,y)}}if(e===t){ae=null;break}if(r=e.sibling,r!==null){r.return=e.return,ae=r;break}ae=e.return}}function ip(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ae=r;break}ae=e.return}}function ap(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ml(4,e)}catch(h){Me(e,r,h)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(h){Me(e,a,h)}}var o=e.return;try{Fu(e)}catch(h){Me(e,o,h)}break;case 5:var c=e.return;try{Fu(e)}catch(h){Me(e,c,h)}}}catch(h){Me(e,e.return,h)}if(e===t){ae=null;break}var d=e.sibling;if(d!==null){d.return=e.return,ae=d;break}ae=e.return}}var $j=Math.ceil,Fo=Cr.ReactCurrentDispatcher,oh=Cr.ReactCurrentOwner,Ut=Cr.ReactCurrentBatchConfig,be=0,Qe=null,qe=null,st=0,Et=0,_s=an(0),Ze=0,Ki=null,Mn=0,pl=0,lh=0,Ti=null,_t=null,ch=0,Bs=1/0,xr=null,Ho=!1,Vu=null,Yr=null,Ga=!1,Hr=null,Wo=0,Ci=0,qu=null,go=-1,xo=0;function pt(){return be&6?Ue():go!==-1?go:go=Ue()}function Jr(t){return t.mode&1?be&2&&st!==0?st&-st:Nj.transition!==null?(xo===0&&(xo=Xg()),xo):(t=je,t!==0||(t=window.event,t=t===void 0?16:ix(t.type)),t):1}function er(t,e,r,n){if(50<Ci)throw Ci=0,qu=null,Error(J(185));na(t,r,n),(!(be&2)||t!==Qe)&&(t===Qe&&(!(be&2)&&(pl|=r),Ze===4&&zr(t,st)),St(t,n),r===1&&be===0&&!(e.mode&1)&&(Bs=Ue()+500,dl&&on()))}function St(t,e){var r=t.callbackNode;Nw(t,e);var n=Eo(t,t===Qe?st:0);if(n===0)r!==null&&pm(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&pm(r),e===1)t.tag===0?jj(op.bind(null,t)):Nx(op.bind(null,t)),vj(function(){!(be&6)&&on()}),r=null;else{switch(Qg(n)){case 1:r=Rd;break;case 4:r=Yg;break;case 16:r=So;break;case 536870912:r=Jg;break;default:r=So}r=w0(r,p0.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function p0(t,e){if(go=-1,xo=0,be&6)throw Error(J(327));var r=t.callbackNode;if(Es()&&t.callbackNode!==r)return null;var n=Eo(t,t===Qe?st:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Vo(t,n);else{e=n;var a=be;be|=2;var o=x0();(Qe!==t||st!==e)&&(xr=null,Bs=Ue()+500,On(t,e));do try{Wj();break}catch(d){g0(t,d)}while(!0);Gd(),Fo.current=o,be=a,qe!==null?e=0:(Qe=null,st=0,e=Ze)}if(e!==0){if(e===2&&(a=vu(t),a!==0&&(n=a,e=Ku(t,a))),e===1)throw r=Ki,On(t,0),zr(t,n),St(t,Ue()),r;if(e===6)zr(t,n);else{if(a=t.current.alternate,!(n&30)&&!Fj(a)&&(e=Vo(t,n),e===2&&(o=vu(t),o!==0&&(n=o,e=Ku(t,o))),e===1))throw r=Ki,On(t,0),zr(t,n),St(t,Ue()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(J(345));case 2:bn(t,_t,xr);break;case 3:if(zr(t,n),(n&130023424)===n&&(e=ch+500-Ue(),10<e)){if(Eo(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){pt(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Eu(bn.bind(null,t,_t,xr),e);break}bn(t,_t,xr);break;case 4:if(zr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var c=31-Qt(n);o=1<<c,c=e[c],c>a&&(a=c),n&=~o}if(n=a,n=Ue()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*$j(n/1960))-n,10<n){t.timeoutHandle=Eu(bn.bind(null,t,_t,xr),n);break}bn(t,_t,xr);break;case 5:bn(t,_t,xr);break;default:throw Error(J(329))}}}return St(t,Ue()),t.callbackNode===r?p0.bind(null,t):null}function Ku(t,e){var r=Ti;return t.current.memoizedState.isDehydrated&&(On(t,e).flags|=256),t=Vo(t,e),t!==2&&(e=_t,_t=r,e!==null&&Gu(e)),t}function Gu(t){_t===null?_t=t:_t.push.apply(_t,t)}function Fj(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!tr(o(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zr(t,e){for(e&=~lh,e&=~pl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Qt(e),n=1<<r;t[r]=-1,e&=~n}}function op(t){if(be&6)throw Error(J(327));Es();var e=Eo(t,0);if(!(e&1))return St(t,Ue()),null;var r=Vo(t,e);if(t.tag!==0&&r===2){var n=vu(t);n!==0&&(e=n,r=Ku(t,n))}if(r===1)throw r=Ki,On(t,0),zr(t,e),St(t,Ue()),r;if(r===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bn(t,_t,xr),St(t,Ue()),null}function uh(t,e){var r=be;be|=1;try{return t(e)}finally{be=r,be===0&&(Bs=Ue()+500,dl&&on())}}function zn(t){Hr!==null&&Hr.tag===0&&!(be&6)&&Es();var e=be;be|=1;var r=Ut.transition,n=je;try{if(Ut.transition=null,je=1,t)return t()}finally{je=n,Ut.transition=r,be=e,!(be&6)&&on()}}function dh(){Et=_s.current,Ae(_s)}function On(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,yj(r)),qe!==null)for(r=qe.return;r!==null;){var n=r;switch(Vd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Oo();break;case 3:Rs(),Ae(Nt),Ae(ht),eh();break;case 5:Qd(n);break;case 4:Rs();break;case 13:Ae(Re);break;case 19:Ae(Re);break;case 10:Zd(n.type._context);break;case 22:case 23:dh()}r=r.return}if(Qe=t,qe=t=Xr(t.current,null),st=Et=e,Ze=0,Ki=null,lh=pl=Mn=0,_t=Ti=null,Pn!==null){for(e=0;e<Pn.length;e++)if(r=Pn[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,o=r.pending;if(o!==null){var c=o.next;o.next=a,n.next=c}r.pending=n}Pn=null}return t}function g0(t,e){do{var r=qe;try{if(Gd(),fo.current=$o,Uo){for(var n=De.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Uo=!1}if(Bn=0,Xe=Ge=De=null,Ei=!1,Wi=0,oh.current=null,r===null||r.return===null){Ze=1,Ki=e,qe=null;break}e:{var o=t,c=r.return,d=r,h=e;if(e=st,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,x=d,g=x.tag;if(!(x.mode&1)&&(g===0||g===11||g===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var w=Gm(c);if(w!==null){w.flags&=-257,Zm(w,c,d,o,e),w.mode&1&&Km(o,f,e),e=w,h=f;var v=e.updateQueue;if(v===null){var b=new Set;b.add(h),e.updateQueue=b}else v.add(h);break e}else{if(!(e&1)){Km(o,f,e),hh();break e}h=Error(J(426))}}else if(Le&&d.mode&1){var E=Gm(c);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Zm(E,c,d,o,e),qd(Ds(h,d));break e}}o=h=Ds(h,d),Ze!==4&&(Ze=2),Ti===null?Ti=[o]:Ti.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var j=Qx(o,h,e);$m(o,j);break e;case 1:d=h;var _=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Yr===null||!Yr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var P=e0(o,d,e);$m(o,P);break e}}o=o.return}while(o!==null)}v0(r)}catch(O){e=O,qe===r&&r!==null&&(qe=r=r.return);continue}break}while(!0)}function x0(){var t=Fo.current;return Fo.current=$o,t===null?$o:t}function hh(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),Qe===null||!(Mn&268435455)&&!(pl&268435455)||zr(Qe,st)}function Vo(t,e){var r=be;be|=2;var n=x0();(Qe!==t||st!==e)&&(xr=null,On(t,e));do try{Hj();break}catch(a){g0(t,a)}while(!0);if(Gd(),be=r,Fo.current=n,qe!==null)throw Error(J(261));return Qe=null,st=0,Ze}function Hj(){for(;qe!==null;)y0(qe)}function Wj(){for(;qe!==null&&!pw();)y0(qe)}function y0(t){var e=_0(t.alternate,t,Et);t.memoizedProps=t.pendingProps,e===null?v0(t):qe=e,oh.current=null}function v0(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Bj(r,e),r!==null){r.flags&=32767,qe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,qe=null;return}}else if(r=Dj(r,e,Et),r!==null){qe=r;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ze===0&&(Ze=5)}function bn(t,e,r){var n=je,a=Ut.transition;try{Ut.transition=null,je=1,Vj(t,e,r,n)}finally{Ut.transition=a,je=n}return null}function Vj(t,e,r,n){do Es();while(Hr!==null);if(be&6)throw Error(J(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(kw(t,o),t===Qe&&(qe=Qe=null,st=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ga||(Ga=!0,w0(So,function(){return Es(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ut.transition,Ut.transition=null;var c=je;je=1;var d=be;be|=4,oh.current=null,zj(t,r),f0(r,t),dj(ku),Po=!!Nu,ku=Nu=null,t.current=r,Uj(r),gw(),be=d,je=c,Ut.transition=o}else t.current=r;if(Ga&&(Ga=!1,Hr=t,Wo=a),o=t.pendingLanes,o===0&&(Yr=null),vw(r.stateNode),St(t,Ue()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ho)throw Ho=!1,t=Vu,Vu=null,t;return Wo&1&&t.tag!==0&&Es(),o=t.pendingLanes,o&1?t===qu?Ci++:(Ci=0,qu=t):Ci=0,on(),null}function Es(){if(Hr!==null){var t=Qg(Wo),e=Ut.transition,r=je;try{if(Ut.transition=null,je=16>t?16:t,Hr===null)var n=!1;else{if(t=Hr,Hr=null,Wo=0,be&6)throw Error(J(331));var a=be;for(be|=4,ae=t.current;ae!==null;){var o=ae,c=o.child;if(ae.flags&16){var d=o.deletions;if(d!==null){for(var h=0;h<d.length;h++){var f=d[h];for(ae=f;ae!==null;){var x=ae;switch(x.tag){case 0:case 11:case 15:Pi(8,x,o)}var g=x.child;if(g!==null)g.return=x,ae=g;else for(;ae!==null;){x=ae;var y=x.sibling,w=x.return;if(u0(x),x===f){ae=null;break}if(y!==null){y.return=w,ae=y;break}ae=w}}}var v=o.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var E=b.sibling;b.sibling=null,b=E}while(b!==null)}}ae=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,ae=c;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Pi(9,o,o.return)}var j=o.sibling;if(j!==null){j.return=o.return,ae=j;break e}ae=o.return}}var _=t.current;for(ae=_;ae!==null;){c=ae;var S=c.child;if(c.subtreeFlags&2064&&S!==null)S.return=c,ae=S;else e:for(c=_;ae!==null;){if(d=ae,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:ml(9,d)}}catch(O){Me(d,d.return,O)}if(d===c){ae=null;break e}var P=d.sibling;if(P!==null){P.return=d.return,ae=P;break e}ae=d.return}}if(be=a,on(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(al,t)}catch{}n=!0}return n}finally{je=r,Ut.transition=e}}return!1}function lp(t,e,r){e=Ds(r,e),e=Qx(t,e,1),t=Zr(t,e,1),e=pt(),t!==null&&(na(t,1,e),St(t,e))}function Me(t,e,r){if(t.tag===3)lp(t,t,r);else for(;e!==null;){if(e.tag===3){lp(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Yr===null||!Yr.has(n))){t=Ds(r,t),t=e0(e,t,1),e=Zr(e,t,1),t=pt(),e!==null&&(na(e,1,t),St(e,t));break}}e=e.return}}function qj(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&r,Qe===t&&(st&r)===r&&(Ze===4||Ze===3&&(st&130023424)===st&&500>Ue()-ch?On(t,0):lh|=r),St(t,e)}function b0(t,e){e===0&&(t.mode&1?(e=Ma,Ma<<=1,!(Ma&130023424)&&(Ma=4194304)):e=1);var r=pt();t=Er(t,e),t!==null&&(na(t,e,r),St(t,r))}function Kj(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),b0(t,r)}function Gj(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(J(314))}n!==null&&n.delete(e),b0(t,r)}var _0;_0=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)jt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return jt=!1,Rj(t,e,r);jt=!!(t.flags&131072)}else jt=!1,Le&&e.flags&1048576&&kx(e,Ro,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;po(t,e),t=e.pendingProps;var a=Os(e,ht.current);Ss(e,r),a=rh(null,e,n,t,a,r);var o=nh();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kt(n)?(o=!0,Lo(e)):o=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Jd(e),a.updater=fl,e.stateNode=a,a._reactInternals=e,Iu(e,n,t,r),e=Bu(null,e,n,!0,o,r)):(e.tag=0,Le&&o&&Wd(e),mt(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(po(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Yj(n),t=Kt(n,t),a){case 0:e=Du(null,e,n,t,r);break e;case 1:e=Xm(null,e,n,t,r);break e;case 11:e=Ym(null,e,n,t,r);break e;case 14:e=Jm(null,e,n,Kt(n.type,t),r);break e}throw Error(J(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Kt(n,a),Du(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Kt(n,a),Xm(t,e,n,a,r);case 3:e:{if(s0(e),t===null)throw Error(J(387));n=e.pendingProps,o=e.memoizedState,a=o.element,Ax(t,e),Mo(e,n,null,r);var c=e.memoizedState;if(n=c.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){a=Ds(Error(J(423)),e),e=Qm(t,e,n,r,a);break e}else if(n!==a){a=Ds(Error(J(424)),e),e=Qm(t,e,n,r,a);break e}else for(Tt=Gr(e.stateNode.containerInfo.firstChild),Ct=e,Le=!0,Jt=null,r=Tx(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ls(),n===a){e=Pr(t,e,r);break e}mt(t,e,n,r)}e=e.child}return e;case 5:return Ox(e),t===null&&Au(e),n=e.type,a=e.pendingProps,o=t!==null?t.memoizedProps:null,c=a.children,Su(n,a)?c=null:o!==null&&Su(n,o)&&(e.flags|=32),n0(t,e),mt(t,e,c,r),e.child;case 6:return t===null&&Au(e),null;case 13:return i0(t,e,r);case 4:return Xd(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Is(e,null,n,r):mt(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Kt(n,a),Ym(t,e,n,a,r);case 7:return mt(t,e,e.pendingProps,r),e.child;case 8:return mt(t,e,e.pendingProps.children,r),e.child;case 12:return mt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,o=e.memoizedProps,c=a.value,Ee(Do,n._currentValue),n._currentValue=c,o!==null)if(tr(o.value,c)){if(o.children===a.children&&!Nt.current){e=Pr(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){c=o.child;for(var h=d.firstContext;h!==null;){if(h.context===n){if(o.tag===1){h=jr(-1,r&-r),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var x=f.pending;x===null?h.next=h:(h.next=x.next,x.next=h),f.pending=h}}o.lanes|=r,h=o.alternate,h!==null&&(h.lanes|=r),Ou(o.return,r,e),d.lanes|=r;break}h=h.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(J(341));c.lanes|=r,d=c.alternate,d!==null&&(d.lanes|=r),Ou(c,r,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}mt(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Ss(e,r),a=$t(a),n=n(a),e.flags|=1,mt(t,e,n,r),e.child;case 14:return n=e.type,a=Kt(n,e.pendingProps),a=Kt(n.type,a),Jm(t,e,n,a,r);case 15:return t0(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Kt(n,a),po(t,e),e.tag=1,kt(n)?(t=!0,Lo(e)):t=!1,Ss(e,r),Xx(e,n,a),Iu(e,n,a,r),Bu(null,e,n,!0,t,r);case 19:return a0(t,e,r);case 22:return r0(t,e,r)}throw Error(J(156,e.tag))};function w0(t,e){return Zg(t,e)}function Zj(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,r,n){return new Zj(t,e,r,n)}function fh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yj(t){if(typeof t=="function")return fh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Od)return 11;if(t===Ld)return 14}return 2}function Xr(t,e){var r=t.alternate;return r===null?(r=zt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function yo(t,e,r,n,a,o){var c=2;if(n=t,typeof t=="function")fh(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case ds:return Ln(r.children,a,o,e);case Ad:c=8,a|=8;break;case su:return t=zt(12,r,e,a|2),t.elementType=su,t.lanes=o,t;case iu:return t=zt(13,r,e,a),t.elementType=iu,t.lanes=o,t;case au:return t=zt(19,r,e,a),t.elementType=au,t.lanes=o,t;case Og:return gl(r,a,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cg:c=10;break e;case Ag:c=9;break e;case Od:c=11;break e;case Ld:c=14;break e;case Dr:c=16,n=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=zt(c,r,e,a),e.elementType=t,e.type=n,e.lanes=o,e}function Ln(t,e,r,n){return t=zt(7,t,n,e),t.lanes=r,t}function gl(t,e,r,n){return t=zt(22,t,n,e),t.elementType=Og,t.lanes=r,t.stateNode={isHidden:!1},t}function Dc(t,e,r){return t=zt(6,t,null,e),t.lanes=r,t}function Bc(t,e,r){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jj(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xc(0),this.expirationTimes=xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xc(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function mh(t,e,r,n,a,o,c,d,h){return t=new Jj(t,e,r,d,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=zt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jd(o),t}function Xj(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:us,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function j0(t){if(!t)return rn;t=t._reactInternals;e:{if(Wn(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var r=t.type;if(kt(r))return jx(t,r,e)}return e}function N0(t,e,r,n,a,o,c,d,h){return t=mh(r,n,!0,t,a,o,c,d,h),t.context=j0(null),r=t.current,n=pt(),a=Jr(r),o=jr(n,a),o.callback=e??null,Zr(r,o,a),t.current.lanes=a,na(t,a,n),St(t,n),t}function xl(t,e,r,n){var a=e.current,o=pt(),c=Jr(a);return r=j0(r),e.context===null?e.context=r:e.pendingContext=r,e=jr(o,c),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Zr(a,e,c),t!==null&&(er(t,a,c,o),ho(t,a,c)),c}function qo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ph(t,e){cp(t,e),(t=t.alternate)&&cp(t,e)}function Qj(){return null}var k0=typeof reportError=="function"?reportError:function(t){console.error(t)};function gh(t){this._internalRoot=t}yl.prototype.render=gh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));xl(t,e,null,null)};yl.prototype.unmount=gh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zn(function(){xl(null,t,null,null)}),e[Sr]=null}};function yl(t){this._internalRoot=t}yl.prototype.unstable_scheduleHydration=function(t){if(t){var e=rx();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Mr.length&&e!==0&&e<Mr[r].priority;r++);Mr.splice(r,0,t),r===0&&sx(t)}};function xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function up(){}function eN(t,e,r,n,a){if(a){if(typeof n=="function"){var o=n;n=function(){var f=qo(c);o.call(f)}}var c=N0(e,n,t,0,null,!1,!1,"",up);return t._reactRootContainer=c,t[Sr]=c.current,zi(t.nodeType===8?t.parentNode:t),zn(),c}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var d=n;n=function(){var f=qo(h);d.call(f)}}var h=mh(t,0,!1,null,null,!1,!1,"",up);return t._reactRootContainer=h,t[Sr]=h.current,zi(t.nodeType===8?t.parentNode:t),zn(function(){xl(e,h,r,n)}),h}function bl(t,e,r,n,a){var o=r._reactRootContainer;if(o){var c=o;if(typeof a=="function"){var d=a;a=function(){var h=qo(c);d.call(h)}}xl(e,c,t,a)}else c=eN(r,e,t,a,n);return qo(c)}ex=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=xi(e.pendingLanes);r!==0&&(Dd(e,r|1),St(e,Ue()),!(be&6)&&(Bs=Ue()+500,on()))}break;case 13:zn(function(){var n=Er(t,1);if(n!==null){var a=pt();er(n,t,1,a)}}),ph(t,1)}};Bd=function(t){if(t.tag===13){var e=Er(t,134217728);if(e!==null){var r=pt();er(e,t,134217728,r)}ph(t,134217728)}};tx=function(t){if(t.tag===13){var e=Jr(t),r=Er(t,e);if(r!==null){var n=pt();er(r,t,e,n)}ph(t,e)}};rx=function(){return je};nx=function(t,e){var r=je;try{return je=t,e()}finally{je=r}};gu=function(t,e,r){switch(e){case"input":if(cu(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=ul(n);if(!a)throw Error(J(90));Ig(n),cu(n,a)}}}break;case"textarea":Dg(t,r);break;case"select":e=r.value,e!=null&&ws(t,!!r.multiple,e,!1)}};Hg=uh;Wg=zn;var tN={usingClientEntryPoint:!1,Events:[ia,ps,ul,$g,Fg,uh]},fi={findFiberByHostInstance:En,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rN={bundleType:fi.bundleType,version:fi.version,rendererPackageName:fi.rendererPackageName,rendererConfig:fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kg(t),t===null?null:t.stateNode},findFiberByHostInstance:fi.findFiberByHostInstance||Qj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Za.isDisabled&&Za.supportsFiber)try{al=Za.inject(rN),dr=Za}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tN;Ot.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(e))throw Error(J(200));return Xj(t,e,null,r)};Ot.createRoot=function(t,e){if(!xh(t))throw Error(J(299));var r=!1,n="",a=k0;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=mh(t,1,!1,null,null,r,!1,n,a),t[Sr]=e.current,zi(t.nodeType===8?t.parentNode:t),new gh(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=Kg(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return zn(t)};Ot.hydrate=function(t,e,r){if(!vl(e))throw Error(J(200));return bl(null,t,e,!0,r)};Ot.hydrateRoot=function(t,e,r){if(!xh(t))throw Error(J(405));var n=r!=null&&r.hydratedSources||null,a=!1,o="",c=k0;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),e=N0(e,null,t,1,r??null,a,!1,o,c),t[Sr]=e.current,zi(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new yl(e)};Ot.render=function(t,e,r){if(!vl(e))throw Error(J(200));return bl(null,t,e,!1,r)};Ot.unmountComponentAtNode=function(t){if(!vl(t))throw Error(J(40));return t._reactRootContainer?(zn(function(){bl(null,null,t,!1,function(){t._reactRootContainer=null,t[Sr]=null})}),!0):!1};Ot.unstable_batchedUpdates=uh;Ot.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!vl(r))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return bl(t,e,r,!1,n)};Ot.version="18.3.1-next-f1338f8080-20240426";function S0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S0)}catch(t){console.error(t)}}S0(),Sg.exports=Ot;var E0=Sg.exports,dp=E0;ru.createRoot=dp.createRoot,ru.hydrateRoot=dp.hydrateRoot;const nN={common:{loading:"Ykleniyor...",save:"Kaydet",cancel:"ptal",confirm:"Onayla",delete:"Sil",edit:"Dzenle",back:"Geri",next:"leri",close:"Kapat",yes:"Evet",no:"Hayr",ok:"Tamam",error:"Hata",success:"Baarl",warning:"Uyar",info:"Bilgi",search:"Ara",filter:"Filtrele",export:"Da Aktar",refresh:"Yenile",viewAll:"Tmn Gr",noData:"Veri bulunamad",amount:"Tutar",status:"Durum",date:"Tarih",all:"Tm",active:"Aktif",inactive:"Pasif",pending:"Beklemede",completed:"Tamamland",cancelled:"ptal Edildi"},auth:{login:"Giri Yap",logout:"k Yap",register:"Kayt Ol",email:"E-posta",password:"ifre",confirmPassword:"ifre Tekrar",forgotPassword:"ifremi Unuttum",welcomeBack:"Tekrar Ho Geldiniz",createAccount:"Hesap Olutur",emailPlaceholder:"ornek@email.com",passwordPlaceholder:"ifrenizi girin",noAccount:"Hesabnz yok mu?",haveAccount:"Zaten hesabnz var m?",signUp:"Kayt Ol",signIn:"Giri Yap"},dashboard:{title:"Ana Sayfa",balance:"Bakiyeniz",deposit:"Para Yatr",withdraw:"Para ek",cryptoDeposit:"Kripto Yatr",cryptoWithdraw:"Kripto ek",findAgent:"Acente Bul",findAgentDesc:"En yakn deiim noktalarn bulun",recentActivity:"Son lemler",noTransactions:"Henz ilem yok",businessPanel:"letme Paneli",adminPanel:"Admin Paneli",pendingApprovals:"Bekleyen Onaylar",paymentConfirm:"deme Onay",paymentConfirmMsg:"Hesabnza para aktarlmtr, demeyi onaylyor musunuz?",approve:"Onaylyorum",reject:"Reddet"},deposit:{title:"Para Yatr",receiptOptional:"Dekont Ykleme stee Bal",receiptInfo:"Dekont yklerseniz ilem 20 dakika iinde otomatik onaylanr.",bankAccount:"Banka Hesabnz",addNew:"Yeni Ekle",addBankAccount:"Banka Hesab Ekle",addBankAccountDesc:"Para yatrmak iin bir banka hesab eklemelisiniz",depositAmount:"Yatrlacak Tutar (USDT)",minimum:"Minimum: 10 USDT",youWillPay:"deyeceiniz",findMatch:"Eleme Bul",searchingMatch:"En Uygun Eleme Aranyor...",searchingMatchDesc:"Size uygun satcy aryoruz",matchFound:"Uygun Eleme Bulundu!",matchFoundDesc:"Yatrm tutarnz iin uygun bir satc bulundu.",confirmAndView:"lemi Onayla & Bilgileri Gr",confirmNote:"lemi onayladnzda deme bilgileri gsterilecek ve 30 dakika sre balayacaktr.",pendingOrder:"Bekleyen leminiz Var",pendingOrderDesc:"Aktif bir ileminiz var. Yeni ilem iin nce bunu tamamlayn veya iptal edin.",cancelOrder:"lemi ptal Et",noMatchTitle:"Eleme Bulunamad",noMatchDesc:"Bu tutarda ekim talebi yok. En yakn tutarlar seebilirsiniz:",waitingMatch:"Eleme Bekleniyor",waitingMatchDesc:"Talebiniz havuza eklendi, ekim talebi geldiinde eleeceksiniz.",transactionType:"lem Tipi",buyOrder:"Yatrm (Al)",sellOrder:"ekim (Sat)",network:"A"},depositConfirm:{title:"deme Bilgileri",paymentInfo:"deme Bilgileri",iban:"IBAN",recipient:"Alc",bank:"Banka",amount:"Tutar",timeRemaining:"Kalan Sre",markAsPaid:"dedim",uploadReceipt:"Dekont Ykle",paymentSent:"deme Bildiriminiz Alnd!",paymentSentDesc:"deme bildiriminiz baaryla iletildi. Satc onayladnda bakiyeniz hesabnza geecektir.",timeExpired:"Sre Doldu!",timeExpiredDesc:"lem sresi doldu ve iptal edildi. Ltfen yeni bir ilem balatn."},withdraw:{title:"Para ek",withdrawAmount:"ekilecek Tutar (USDT)",youWillReceive:"Alacanz",selectBank:"Banka Hesab Sein",createRequest:"ekim Talebi Olutur",waitingMatch:"Eleme Bekleniyor",instantWithdraw:"Hzl ekim",p2pWithdraw:"P2P ekim",insufficientBalance:"Yetersiz Bakiye"},crypto:{depositTitle:"Kripto Yatrma",withdrawTitle:"Kripto ekme",selectNetwork:"A Sein",depositAddress:"Yatrma Adresi",clickToCopy:"Kopyalamak iin tklayn",qrCode:"QR Kod",minimumDeposit:"Minimum: 10 USDT",selectAsset:"Varlk Sein",withdrawAmount:"ekim Tutar",walletAddress:"Czdan Adresi",networkFee:"A creti",confirmWithdraw:"ekimi Onayla"},history:{title:"lem Gemii",deposit:"Yatrm",withdraw:"ekim",transfer:"Transfer",p2pBuy:"P2P Al",p2pSell:"P2P Sat",noHistory:"Henz ilem yok"},profile:{title:"Profil",accountSettings:"Hesap Ayarlar",editProfile:"Profili Dzenle",changePassword:"ifre Deitir",bankAccounts:"Banka Hesaplar",transactionLimits:"lem Limitleri",security:"Gvenlik",language:"Dil",privacyPolicy:"Gizlilik Politikas",termsOfService:"Kullanm artlar",appVersion:"Uygulama Srm"},profileEdit:{title:"Profili Dzenle",firstName:"Ad",lastName:"Soyad",firstNamePlaceholder:"Adnz girin",lastNamePlaceholder:"Soyadnz girin",save:"Kaydet"},changePassword:{title:"ifre Deitir",currentPassword:"Mevcut ifre",newPassword:"Yeni ifre",confirmNewPassword:"Yeni ifre (Tekrar)",updatePassword:"ifreyi Gncelle",currentPasswordPlaceholder:"Mevcut ifrenizi girin",newPasswordPlaceholder:"Yeni ifrenizi girin",confirmPasswordPlaceholder:"Yeni ifrenizi tekrar girin"},bankAccounts:{title:"Banka Hesaplar",addAccount:"Banka Hesab Ekle",bankName:"Banka Ad",iban:"IBAN",accountHolder:"Hesap Sahibi",deleteConfirm:"Bu hesab silmek istediinize emin misiniz?",noAccounts:"Henz banka hesab eklenmemi"},notifications:{title:"Bildirimler",markAllRead:"Tmn Okundu aretle",new:"Yeni",read:"Okundu",noNotifications:"Henz bildirim yok",justNow:"Az nce"},business:{title:"letme Paneli",totalBalance:"Toplam Bakiye",subAccounts:"Alt Hesaplar",paymentPortals:"deme Portallar",transactionHistory:"lem Gemii",invite:"Davet Et",requestPortal:"Portal Talep Et",portalName:"Portal Ad"},findAgent:{title:"Acente Bul",cashPoint:"deme Noktas",searchPlaceholder:"ehir veya blge ara...",getDirections:"Yol Tarifi Al",noAgents:"Bu blgede acente bulunamad"},nav:{home:"Ana Sayfa",scan:"Tara",settings:"Ayarlar"},alerts:{selectBank:"Banka Sein",selectBankMsg:"Ltfen nce bir banka hesab sein veya ekleyin.",minimumAmount:"Minimum Tutar",minimumAmountMsg:"Minimum 10 USDT",serverError:"Sunucu Hatas",connectionError:"Balant Hatas",unknownError:"Bilinmeyen bir hata olutu",tryAgain:"Ltfen tekrar deneyin"},languages:{tr:"Trke",en:"English"}},sN={common:{loading:"Loading...",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",edit:"Edit",back:"Back",next:"Next",close:"Close",yes:"Yes",no:"No",ok:"OK",error:"Error",success:"Success",warning:"Warning",info:"Info",search:"Search",filter:"Filter",export:"Export",refresh:"Refresh",viewAll:"View All",noData:"No data found",amount:"Amount",status:"Status",date:"Date",all:"All",active:"Active",inactive:"Inactive",pending:"Pending",completed:"Completed",cancelled:"Cancelled"},auth:{login:"Log In",logout:"Log Out",register:"Register",email:"Email",password:"Password",confirmPassword:"Confirm Password",forgotPassword:"Forgot Password",welcomeBack:"Welcome Back",createAccount:"Create Account",emailPlaceholder:"name@example.com",passwordPlaceholder:"Enter your password",noAccount:"Don't have an account?",haveAccount:"Already have an account?",signUp:"Sign Up",signIn:"Sign In"},dashboard:{title:"Dashboard",balance:"Your Balance",deposit:"Deposit",withdraw:"Withdraw",cryptoDeposit:"Crypto Deposit",cryptoWithdraw:"Crypto Withdraw",findAgent:"Find Agent",findAgentDesc:"Locate nearest exchange points",recentActivity:"Recent Activity",noTransactions:"No transactions yet",businessPanel:"Business Panel",adminPanel:"Admin Panel",pendingApprovals:"Pending Approvals",paymentConfirm:"Payment Confirmation",paymentConfirmMsg:"Payment has been made to your account. Do you confirm?",approve:"Approve",reject:"Reject"},deposit:{title:"Deposit",receiptOptional:"Receipt Upload Optional",receiptInfo:"If you upload a receipt, the transaction will be auto-approved within 20 minutes.",bankAccount:"Your Bank Account",addNew:"Add New",addBankAccount:"Add Bank Account",addBankAccountDesc:"You need to add a bank account to deposit",depositAmount:"Deposit Amount (USDT)",minimum:"Minimum: 10 USDT",youWillPay:"You will pay",findMatch:"Find Match",searchingMatch:"Searching for Best Match...",searchingMatchDesc:"Looking for a suitable seller",matchFound:"Match Found!",matchFoundDesc:"A suitable seller was found for your deposit.",confirmAndView:"Confirm & View Details",confirmNote:"Upon confirmation, payment details will be shown and a 30-minute timer will start.",pendingOrder:"You Have a Pending Order",pendingOrderDesc:"You have an active order. Complete or cancel it before creating a new one.",cancelOrder:"Cancel Order",noMatchTitle:"No Match Found",noMatchDesc:"No withdrawal request for this amount. You can select nearby amounts:",waitingMatch:"Waiting for Match",waitingMatchDesc:"Your request has been added to the pool. You will be matched when a withdrawal request comes.",transactionType:"Transaction Type",buyOrder:"Deposit (Buy)",sellOrder:"Withdrawal (Sell)",network:"Network"},depositConfirm:{title:"Payment Details",paymentInfo:"Payment Information",iban:"IBAN",recipient:"Recipient",bank:"Bank",amount:"Amount",timeRemaining:"Time Remaining",markAsPaid:"Mark as Paid",uploadReceipt:"Upload Receipt",paymentSent:"Payment Notification Received!",paymentSentDesc:"Your payment notification has been sent. Your balance will be credited when the seller confirms.",timeExpired:"Time Expired!",timeExpiredDesc:"Transaction time has expired and was cancelled. Please start a new transaction."},withdraw:{title:"Withdraw",withdrawAmount:"Withdraw Amount (USDT)",youWillReceive:"You will receive",selectBank:"Select Bank Account",createRequest:"Create Withdrawal Request",waitingMatch:"Waiting for Match",instantWithdraw:"Instant Withdraw",p2pWithdraw:"P2P Withdraw",insufficientBalance:"Insufficient Balance"},crypto:{depositTitle:"Crypto Deposit",withdrawTitle:"Crypto Withdraw",selectNetwork:"Select Network",depositAddress:"Deposit Address",clickToCopy:"Click to copy",qrCode:"QR Code",minimumDeposit:"Minimum: 10 USDT",selectAsset:"Select Asset",withdrawAmount:"Withdraw Amount",walletAddress:"Wallet Address",networkFee:"Network Fee",confirmWithdraw:"Confirm Withdrawal"},history:{title:"Transaction History",deposit:"Deposit",withdraw:"Withdraw",transfer:"Transfer",p2pBuy:"P2P Buy",p2pSell:"P2P Sell",noHistory:"No transactions yet"},profile:{title:"Profile",accountSettings:"Account Settings",editProfile:"Edit Profile",changePassword:"Change Password",bankAccounts:"Bank Accounts",transactionLimits:"Transaction Limits",security:"Security",language:"Language",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",appVersion:"App Version"},profileEdit:{title:"Edit Profile",firstName:"First Name",lastName:"Last Name",firstNamePlaceholder:"Enter your first name",lastNamePlaceholder:"Enter your last name",save:"Save"},changePassword:{title:"Change Password",currentPassword:"Current Password",newPassword:"New Password",confirmNewPassword:"Confirm New Password",updatePassword:"Update Password",currentPasswordPlaceholder:"Enter current password",newPasswordPlaceholder:"Enter new password",confirmPasswordPlaceholder:"Confirm new password"},bankAccounts:{title:"Bank Accounts",addAccount:"Add Bank Account",bankName:"Bank Name",iban:"IBAN",accountHolder:"Account Holder",deleteConfirm:"Are you sure you want to delete this account?",noAccounts:"No bank accounts added yet"},notifications:{title:"Notifications",markAllRead:"Mark All as Read",new:"New",read:"Read",noNotifications:"No notifications yet",justNow:"Just now"},business:{title:"Business Panel",totalBalance:"Total Balance",subAccounts:"Sub Accounts",paymentPortals:"Payment Portals",transactionHistory:"Transaction History",invite:"Invite",requestPortal:"Request Portal",portalName:"Portal Name"},findAgent:{title:"Find Agent",cashPoint:"Cash Point",searchPlaceholder:"Search city or region...",getDirections:"Get Directions",noAgents:"No agents found in this area"},nav:{home:"Home",scan:"Scan",settings:"Settings"},alerts:{selectBank:"Select Bank",selectBankMsg:"Please select or add a bank account first.",minimumAmount:"Minimum Amount",minimumAmountMsg:"Minimum 10 USDT",serverError:"Server Error",connectionError:"Connection Error",unknownError:"An unknown error occurred",tryAgain:"Please try again"},languages:{tr:"Trke",en:"English"}},P0=N.createContext(void 0),iN={tr:nN,en:sN},aN=({children:t})=>{const[e,r]=N.useState(()=>localStorage.getItem("language")||"tr"),n=o=>{r(o),localStorage.setItem("language",o)},a=o=>{const c=o.split(".");let d=iN[e];for(const h of c)if(d&&typeof d=="object"&&h in d)d=d[h];else return console.warn(`Translation missing: ${o}`),o;return typeof d=="string"?d:o};return s.jsx(P0.Provider,{value:{language:e,setLanguage:n,t:a},children:t})},T0=()=>{const t=N.useContext(P0);if(!t)throw new Error("useI18n must be used within I18nProvider");return t},C0=N.createContext(void 0),oN=({children:t})=>{const[e,r]=N.useState(()=>localStorage.getItem("theme")||"dark"),n=o=>{r(o),localStorage.setItem("theme",o)},a=()=>{n(e==="dark"?"light":"dark")};return N.useEffect(()=>{const o=document.documentElement;e==="dark"?(o.classList.add("dark"),o.classList.remove("light")):(o.classList.add("light"),o.classList.remove("dark"))},[e]),s.jsx(C0.Provider,{value:{theme:e,setTheme:n,toggleTheme:a,isDark:e==="dark"},children:t})},_l=()=>{const t=N.useContext(C0);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t};/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gi(){return Gi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gi.apply(this,arguments)}var Wr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wr||(Wr={}));const hp="popstate";function lN(t){t===void 0&&(t={});function e(a,o){let{pathname:c="/",search:d="",hash:h=""}=Vn(a.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Zu("",{pathname:c,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(a,o){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let h=a.location.href,f=h.indexOf("#");d=f===-1?h:h.slice(0,f)}return d+"#"+(typeof o=="string"?o:A0(o))}function n(a,o){wl(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return uN(e,r,n,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cN(){return Math.random().toString(36).substr(2,8)}function fp(t,e){return{usr:t.state,key:t.key,idx:e}}function Zu(t,e,r,n){return r===void 0&&(r=null),Gi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vn(e):e,{state:r,key:e&&e.key||n||cN()})}function A0(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Vn(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function uN(t,e,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,d=Wr.Pop,h=null,f=x();f==null&&(f=0,c.replaceState(Gi({},c.state,{idx:f}),""));function x(){return(c.state||{idx:null}).idx}function g(){d=Wr.Pop;let E=x(),j=E==null?null:E-f;f=E,h&&h({action:d,location:b.location,delta:j})}function y(E,j){d=Wr.Push;let _=Zu(b.location,E,j);r&&r(_,E),f=x()+1;let S=fp(_,f),P=b.createHref(_);try{c.pushState(S,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(P)}o&&h&&h({action:d,location:b.location,delta:1})}function w(E,j){d=Wr.Replace;let _=Zu(b.location,E,j);r&&r(_,E),f=x();let S=fp(_,f),P=b.createHref(_);c.replaceState(S,"",P),o&&h&&h({action:d,location:b.location,delta:0})}function v(E){let j=a.location.origin!=="null"?a.location.origin:a.location.href,_=typeof E=="string"?E:A0(E);return _=_.replace(/ $/,"%20"),Ke(j,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,j)}let b={get action(){return d},get location(){return t(a,c)},listen(E){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(hp,g),h=E,()=>{a.removeEventListener(hp,g),h=null}},createHref(E){return e(a,E)},createURL:v,encodeLocation(E){let j=v(E);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:y,replace:w,go(E){return c.go(E)}};return b}var mp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mp||(mp={}));function dN(t,e,r){return r===void 0&&(r="/"),hN(t,e,r)}function hN(t,e,r,n){let a=typeof e=="string"?Vn(e):e,o=I0(a.pathname||"/",r);if(o==null)return null;let c=O0(t);fN(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=kN(o);d=wN(c[h],f)}return d}function O0(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(o,c,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&(Ke(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let f=In([n,h.relativePath]),x=r.concat(h);o.children&&o.children.length>0&&(Ke(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),O0(o.children,e,x,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:bN(f,o.index),routesMeta:x})};return t.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))a(o,c);else for(let h of L0(o.path))a(o,c,h)}),e}function L0(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=L0(n.join("/")),d=[];return d.push(...c.map(h=>h===""?o:[o,h].join("/"))),a&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function fN(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:_N(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const mN=/^:[\w-]+$/,pN=3,gN=2,xN=1,yN=10,vN=-2,pp=t=>t==="*";function bN(t,e){let r=t.split("/"),n=r.length;return r.some(pp)&&(n+=vN),e&&(n+=gN),r.filter(a=>!pp(a)).reduce((a,o)=>a+(mN.test(o)?pN:o===""?xN:yN),n)}function _N(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function wN(t,e,r){let{routesMeta:n}=t,a={},o="/",c=[];for(let d=0;d<n.length;++d){let h=n[d],f=d===n.length-1,x=o==="/"?e:e.slice(o.length)||"/",g=jN({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},x),y=h.route;if(!g)return null;Object.assign(a,g.params),c.push({params:a,pathname:In([o,g.pathname]),pathnameBase:CN(In([o,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(o=In([o,g.pathnameBase]))}return c}function jN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=NN(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((f,x,g)=>{let{paramName:y,isOptional:w}=x;if(y==="*"){let b=d[g]||"";c=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const v=d[g];return w&&!v?f[y]=void 0:f[y]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:t}}function NN(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),wl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(n.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function kN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function I0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const SN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EN=t=>SN.test(t);function PN(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Vn(t):t,o;if(r)if(EN(r))o=r;else{if(r.includes("//")){let c=r;r=r.replace(/\/\/+/g,"/"),wl(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+r))}r.startsWith("/")?o=gp(r.substring(1),"/"):o=gp(r,e)}else o=e;return{pathname:o,search:AN(n),hash:ON(a)}}function gp(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Mc(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TN(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function R0(t,e){let r=TN(t);return e?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function D0(t,e,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=Vn(t):(a=Gi({},t),Ke(!a.pathname||!a.pathname.includes("?"),Mc("?","pathname","search",a)),Ke(!a.pathname||!a.pathname.includes("#"),Mc("#","pathname","hash",a)),Ke(!a.search||!a.search.includes("#"),Mc("#","search","hash",a)));let o=t===""||a.pathname==="",c=o?"/":a.pathname,d;if(c==null)d=r;else{let g=e.length-1;if(!n&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;a.pathname=y.join("/")}d=g>=0?e[g]:"/"}let h=PN(a,d),f=c&&c!=="/"&&c.endsWith("/"),x=(o||c===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(f||x)&&(h.pathname+="/"),h}const In=t=>t.join("/").replace(/\/\/+/g,"/"),CN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ON=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const B0=["post","put","patch","delete"];new Set(B0);const IN=["get",...B0];new Set(IN);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zi(){return Zi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zi.apply(this,arguments)}const yh=N.createContext(null),RN=N.createContext(null),oa=N.createContext(null),jl=N.createContext(null),ln=N.createContext({outlet:null,matches:[],isDataRoute:!1}),M0=N.createContext(null);function la(){return N.useContext(jl)!=null}function qn(){return la()||Ke(!1),N.useContext(jl).location}function z0(t){N.useContext(oa).static||N.useLayoutEffect(t)}function we(){let{isDataRoute:t}=N.useContext(ln);return t?GN():DN()}function DN(){la()||Ke(!1);let t=N.useContext(yh),{basename:e,future:r,navigator:n}=N.useContext(oa),{matches:a}=N.useContext(ln),{pathname:o}=qn(),c=JSON.stringify(R0(a,r.v7_relativeSplatPath)),d=N.useRef(!1);return z0(()=>{d.current=!0}),N.useCallback(function(f,x){if(x===void 0&&(x={}),!d.current)return;if(typeof f=="number"){n.go(f);return}let g=D0(f,JSON.parse(c),o,x.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:In([e,g.pathname])),(x.replace?n.replace:n.push)(g,x.state,x)},[e,n,c,o,t])}function vh(){let{matches:t}=N.useContext(ln),e=t[t.length-1];return e?e.params:{}}function BN(t,e){return MN(t,e)}function MN(t,e,r,n){la()||Ke(!1);let{navigator:a}=N.useContext(oa),{matches:o}=N.useContext(ln),c=o[o.length-1],d=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=qn(),x;if(e){var g;let E=typeof e=="string"?Vn(e):e;h==="/"||(g=E.pathname)!=null&&g.startsWith(h)||Ke(!1),x=E}else x=f;let y=x.pathname||"/",w=y;if(h!=="/"){let E=h.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=dN(t,{pathname:w}),b=HN(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},d,E.params),pathname:In([h,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:In([h,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,r,n);return e&&b?N.createElement(jl.Provider,{value:{location:Zi({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Wr.Pop}},b):b}function zN(){let t=KN(),e=LN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),r?N.createElement("pre",{style:a},r):null,null)}const UN=N.createElement(zN,null);class $N extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?N.createElement(ln.Provider,{value:this.props.routeContext},N.createElement(M0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FN(t){let{routeContext:e,match:r,children:n}=t,a=N.useContext(yh);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(ln.Provider,{value:e},n)}function HN(t,e,r,n){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let c=t,d=(a=r)==null?void 0:a.errors;if(d!=null){let x=c.findIndex(g=>g.route.id&&(d==null?void 0:d[g.route.id])!==void 0);x>=0||Ke(!1),c=c.slice(0,Math.min(c.length,x+1))}let h=!1,f=-1;if(r&&n&&n.v7_partialHydration)for(let x=0;x<c.length;x++){let g=c[x];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=x),g.route.id){let{loaderData:y,errors:w}=r,v=g.route.loader&&y[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||v){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((x,g,y)=>{let w,v=!1,b=null,E=null;r&&(w=d&&g.route.id?d[g.route.id]:void 0,b=g.route.errorElement||UN,h&&(f<0&&y===0?(ZN("route-fallback"),v=!0,E=null):f===y&&(v=!0,E=g.route.hydrateFallbackElement||null)));let j=e.concat(c.slice(0,y+1)),_=()=>{let S;return w?S=b:v?S=E:g.route.Component?S=N.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=x,N.createElement(FN,{match:g,routeContext:{outlet:x,matches:j,isDataRoute:r!=null},children:S})};return r&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?N.createElement($N,{location:r.location,revalidation:r.revalidation,component:b,error:w,children:_(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):_()},null)}var U0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(U0||{}),$0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($0||{});function WN(t){let e=N.useContext(yh);return e||Ke(!1),e}function VN(t){let e=N.useContext(RN);return e||Ke(!1),e}function qN(t){let e=N.useContext(ln);return e||Ke(!1),e}function F0(t){let e=qN(),r=e.matches[e.matches.length-1];return r.route.id||Ke(!1),r.route.id}function KN(){var t;let e=N.useContext(M0),r=VN(),n=F0();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function GN(){let{router:t}=WN(U0.UseNavigateStable),e=F0($0.UseNavigateStable),r=N.useRef(!1);return z0(()=>{r.current=!0}),N.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Zi({fromRouteId:e},o)))},[t,e])}const xp={};function ZN(t,e,r){xp[t]||(xp[t]=!0)}function YN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function yp(t){let{to:e,replace:r,state:n,relative:a}=t;la()||Ke(!1);let{future:o,static:c}=N.useContext(oa),{matches:d}=N.useContext(ln),{pathname:h}=qn(),f=we(),x=D0(e,R0(d,o.v7_relativeSplatPath),h,a==="path"),g=JSON.stringify(x);return N.useEffect(()=>f(JSON.parse(g),{replace:r,state:n,relative:a}),[f,g,a,r,n]),null}function xe(t){Ke(!1)}function JN(t){let{basename:e="/",children:r=null,location:n,navigationType:a=Wr.Pop,navigator:o,static:c=!1,future:d}=t;la()&&Ke(!1);let h=e.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:h,navigator:o,static:c,future:Zi({v7_relativeSplatPath:!1},d)}),[h,d,o,c]);typeof n=="string"&&(n=Vn(n));let{pathname:x="/",search:g="",hash:y="",state:w=null,key:v="default"}=n,b=N.useMemo(()=>{let E=I0(x,h);return E==null?null:{location:{pathname:E,search:g,hash:y,state:w,key:v},navigationType:a}},[h,x,g,y,w,v,a]);return b==null?null:N.createElement(oa.Provider,{value:f},N.createElement(jl.Provider,{children:r,value:b}))}function XN(t){let{children:e,location:r}=t;return BN(Yu(e),r)}new Promise(()=>{});function Yu(t,e){e===void 0&&(e=[]);let r=[];return N.Children.forEach(t,(n,a)=>{if(!N.isValidElement(n))return;let o=[...e,a];if(n.type===N.Fragment){r.push.apply(r,Yu(n.props.children,o));return}n.type!==xe&&Ke(!1),!n.props.index||!n.props.children||Ke(!1);let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Yu(n.props.children,o)),r.push(c)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const QN="6";try{window.__reactRouterVersion=QN}catch{}const ek="startTransition",vp=q_[ek];function tk(t){let{basename:e,children:r,future:n,window:a}=t,o=N.useRef();o.current==null&&(o.current=lN({window:a,v5Compat:!0}));let c=o.current,[d,h]=N.useState({action:c.action,location:c.location}),{v7_startTransition:f}=n||{},x=N.useCallback(g=>{f&&vp?vp(()=>h(g)):h(g)},[h,f]);return N.useLayoutEffect(()=>c.listen(x),[c,x]),N.useEffect(()=>YN(n),[n]),N.createElement(JN,{basename:e,children:r,location:d.location,navigationType:d.action,navigator:c,future:n})}var bp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bp||(bp={}));var _p;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_p||(_p={}));const rk=()=>{const t=we(),[e,r]=N.useState(0),n=[{icon:"account_balance_wallet",iconBg:"bg-emerald-500",title:"Gvenli Kripto Czdan",description:"USDT varlklarnz gvenle saklayn ve ynetin. Gelimi gvenlik altyapsyla korunun."},{icon:"bolt",iconBg:"bg-amber-500",title:"En Hzl USDT Alma Yntemi",description:"P2P sistem ile USDT'nizi saniyeler iinde aln. Banka transferi ile annda TL'ye evirin, en hzl ve gvenli yol."},{icon:"language",iconBg:"bg-purple-500",title:"oklu A & cretsiz Transfer",description:"TRC20, ERC20, BEP20 a destei. NUSD kodu ile platform ii transferlerde sfr komisyon, annda gnderim."}],a=()=>{localStorage.setItem("welcomeShown","true"),t("/")},o=()=>{e<n.length-1?r(e+1):a()},c=()=>{a()};return s.jsxs("div",{className:"min-h-screen bg-white flex flex-col font-display relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-32 -right-32 w-96 h-96 bg-emerald-100 rounded-full blur-3xl opacity-60"}),s.jsx("div",{className:"absolute -bottom-48 -left-48 w-[500px] h-[500px] bg-teal-100 rounded-full blur-3xl opacity-50"})]}),s.jsx("div",{className:"relative z-10 p-6 flex justify-end",children:s.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 text-sm font-medium transition-colors",children:"Atla"})}),s.jsxs("div",{className:"flex-1 relative z-10 flex flex-col items-center justify-center px-8 pb-8",children:[s.jsx("div",{className:"mb-10",children:s.jsx("div",{className:"w-28 h-28 bg-white rounded-3xl flex items-center justify-center shadow-xl shadow-gray-200/80 p-2 border border-gray-100",children:s.jsx("img",{src:"/logo.png",alt:"Nubit Logo",className:"w-full h-full object-contain"})})}),s.jsxs("div",{className:"text-center max-w-sm",children:[s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:`w-20 h-20 mx-auto ${n[e].iconBg} rounded-full flex items-center justify-center shadow-lg transform transition-all duration-500`,children:s.jsx("span",{className:"material-symbols-outlined text-4xl text-white",children:n[e].icon})})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4 transition-all duration-300",children:n[e].title}),s.jsx("p",{className:"text-gray-500 text-base leading-relaxed mb-8 transition-all duration-300",children:n[e].description})]}),s.jsx("div",{className:"flex gap-2 mb-10",children:n.map((d,h)=>s.jsx("button",{onClick:()=>r(h),className:`h-2 rounded-full transition-all duration-300 ${h===e?"w-8 bg-emerald-500":"w-2 bg-gray-200 hover:bg-gray-300"}`},h))}),s.jsxs("div",{className:"w-full max-w-sm space-y-3",children:[s.jsx("button",{onClick:o,className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white font-bold py-4 px-8 rounded-2xl text-lg shadow-lg shadow-emerald-500/30 transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:e===n.length-1?"Balayalm":"Devam"}),e===n.length-1&&s.jsx("div",{className:"text-center pt-2",children:s.jsxs("p",{className:"text-gray-400 text-xs",children:["Devam ederek"," ",s.jsx("button",{onClick:()=>t("/terms"),className:"text-emerald-600 underline",children:"Kullanm Koullar"})," ","ve"," ",s.jsx("button",{onClick:()=>t("/privacy"),className:"text-emerald-600 underline",children:"Gizlilik Politikas"}),"'n kabul etmi olursunuz"]})})]})]}),s.jsx("div",{className:"relative z-10 px-8 pb-4",children:s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 text-center",children:s.jsx("p",{className:"text-amber-700 text-[10px] leading-relaxed",children:" Kripto yatrmlar risk ierir. Bu platform 18+ kullanclar iindir ve yatrm tavsiyesi vermez."})})}),s.jsx("div",{className:"relative z-10 px-8 pb-8",children:s.jsxs("div",{className:"flex items-center justify-center gap-6 text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-outlined text-sm text-emerald-500",children:"lock"}),s.jsx("span",{className:"text-xs",children:"256-bit SSL"})]}),s.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-outlined text-sm text-emerald-500",children:"verified"}),s.jsx("span",{className:"text-xs",children:"Gvenli"})]}),s.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-outlined text-sm text-emerald-500",children:"speed"}),s.jsx("span",{className:"text-xs",children:"Hzl"})]})]})})]})},nk=()=>{const[t,e]=N.useState(null),[r,n]=N.useState(!1),[a,o]=N.useState(!1),c=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,d=/Android/.test(navigator.userAgent);N.useEffect(()=>{window.matchMedia("(display-mode: standalone)").matches&&n(!0),window.navigator.standalone===!0&&n(!0)},[]),N.useEffect(()=>{const f=g=>{g.preventDefault(),e(g)},x=()=>{n(!0),e(null)};return window.addEventListener("beforeinstallprompt",f),window.addEventListener("appinstalled",x),()=>{window.removeEventListener("beforeinstallprompt",f),window.removeEventListener("appinstalled",x)}},[]),N.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(f=>{console.log("SW registered:",f.scope)}).catch(f=>{console.error("SW registration failed:",f)})},[]);const h=N.useCallback(async()=>{if(c){o(!0);return}if(t){await t.prompt();const{outcome:f}=await t.userChoice;console.log("Install outcome:",f),f==="accepted"&&n(!0),e(null)}},[t,c]);return{isInstallable:!!t||c,isInstalled:r,isIOS:c,isAndroid:d,installApp:h,showIOSInstructions:a,setShowIOSInstructions:o}},sk=()=>{const t=we(),{login:e}=at(),{isInstalled:r,installApp:n,showIOSInstructions:a,setShowIOSInstructions:o}=nk(),[c,d]=N.useState(""),[h,f]=N.useState(""),[x,g]=N.useState(!1),[y,w]=N.useState(!1),[v,b]=N.useState(null),E=async j=>{j.preventDefault(),g(!0),b(null);try{console.log("Attempting login with:",c);const _=await e(c,h);console.log("Login result:",_),_?t("/dashboard"):b("Giri baarsz. Ltfen bilgileri kontrol edin.")}catch(_){console.error("Login exception:",_),b(`Hata: ${_.message||"Sunucu balant hatas"}`)}finally{g(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display relative overflow-hidden",children:[a&&s.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"iPhone'a Ykle"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Aadaki admlar takip edin:"})]}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 rounded-xl p-3",children:[s.jsx("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold shrink-0",children:"1"}),s.jsxs("p",{className:"text-gray-700 text-sm",children:["Safari'nin alt ksmndaki ",s.jsx("strong",{children:"Payla"})," butonuna () tklayn"]})]}),s.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 rounded-xl p-3",children:[s.jsx("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold shrink-0",children:"2"}),s.jsxs("p",{className:"text-gray-700 text-sm",children:["Aa kaydrn ve ",s.jsx("strong",{children:'"Ana Ekrana Ekle"'})," seeneini bulun"]})]}),s.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 rounded-xl p-3",children:[s.jsx("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold shrink-0",children:"3"}),s.jsxs("p",{className:"text-gray-700 text-sm",children:["Sa stteki ",s.jsx("strong",{children:'"Ekle"'})," butonuna tklayn"]})]})]}),s.jsx("button",{onClick:()=>o(!1),className:"w-full bg-emerald-500 text-white py-3 rounded-xl font-bold hover:bg-emerald-400 transition-colors",children:"Anladm"})]})}),s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-emerald-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute -bottom-32 -left-32 w-80 h-80 bg-teal-500/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute top-1/3 left-1/4 w-64 h-64 bg-emerald-400/10 rounded-full blur-2xl"})]}),s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 relative z-10",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("div",{className:"w-32 h-32 bg-white rounded-3xl flex items-center justify-center mx-auto mb-4 shadow-2xl shadow-emerald-900/50 overflow-hidden p-2",children:s.jsx("img",{src:"/logo.png",alt:"Nubit Logo",className:"w-full h-full object-contain"})}),s.jsx("h1",{className:"text-4xl font-extrabold text-white tracking-tight mb-1",children:"Nubit Wallet"}),s.jsx("p",{className:"text-emerald-300/80 text-sm font-medium",children:"Secure Crypto Management"})]}),s.jsxs("div",{className:"w-full max-w-sm",children:[s.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl p-8 shadow-2xl shadow-emerald-950/50",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Ho Geldiniz"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Hesabnza gvenle giri yapn"})]}),s.jsxs("form",{onSubmit:E,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"E-posta"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"mail"}),s.jsx("input",{type:"email",required:!0,className:"w-full pl-12 pr-4 py-4 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400",placeholder:"ornek@email.com",value:c,onChange:j=>d(j.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ifre"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"lock"}),s.jsx("input",{type:y?"text":"password",required:!0,className:"w-full pl-12 pr-12 py-4 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-bold focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400 placeholder:font-normal",placeholder:"ifrenizi girin",value:h,onChange:j=>f(j.target.value)}),s.jsx("button",{type:"button",onClick:()=>w(!y),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-xl",children:y?"visibility_off":"visibility"})})]})]}),v&&s.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[s.jsx("span",{className:"material-symbols-outlined text-red-500 text-lg shrink-0",children:"error"}),s.jsx("p",{className:"text-red-600 text-sm",children:v})]}),s.jsx("button",{type:"submit",disabled:x,className:"w-full bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-emerald-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Giri yaplyor..."]}):s.jsxs(s.Fragment,{children:["Giri Yap",s.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]})]}),s.jsxs("div",{className:"mt-6 text-center",children:[s.jsx("p",{className:"text-emerald-200/80 text-sm mb-3",children:"Hesabnz yok mu?"}),s.jsx("button",{type:"button",onClick:()=>t("/register"),className:"w-full bg-white/10 backdrop-blur border border-white/20 hover:bg-white/20 hover:border-white/30 py-4 rounded-xl font-bold text-lg text-white transition-all",children:"Yeni Hesap Olutur"})]}),!r&&s.jsxs("div",{className:"mt-6",children:[s.jsx("p",{className:"text-emerald-200/80 text-xs text-center mb-3",children:"Uygulamay Telefonuna Ykle"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:n,className:"flex-1 bg-[#3DDC84]/20 border border-[#3DDC84]/40 hover:bg-[#3DDC84]/30 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all",children:[s.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"#3DDC84",children:s.jsx("path",{d:"M17.523 15.341l1.47-2.545a.31.31 0 00-.11-.42.305.305 0 00-.422.11l-1.488 2.575a9.587 9.587 0 00-3.968-.856 9.587 9.587 0 00-3.968.856L7.549 12.486a.306.306 0 00-.532.31l1.47 2.545C5.97 16.528 4.466 18.906 4.249 21.75h16.502c-.217-2.844-1.72-5.222-3.228-6.409zM8.457 18.57a.81.81 0 110-1.62.81.81 0 010 1.62zm7.086 0a.81.81 0 110-1.62.81.81 0 010 1.62z"})}),s.jsx("span",{className:"text-[#3DDC84] font-bold text-sm",children:"Android"})]}),s.jsxs("button",{onClick:n,className:"flex-1 bg-white/10 border border-white/20 hover:bg-white/20 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all",children:[s.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"white",children:s.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),s.jsx("span",{className:"text-white font-bold text-sm",children:"iPhone"})]})]})]}),r&&s.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-emerald-400",children:[s.jsx("span",{className:"material-symbols-outlined text-lg",children:"check_circle"}),s.jsx("span",{className:"text-sm font-medium",children:"Uygulama ykl"})]}),s.jsxs("p",{className:"text-center text-emerald-400/50 text-xs mt-8",children:["v2.0  ",r?"App":"Web"]})]})]})]})};var bh={},Ko={};function ik(t,e,r,n){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function d(x){try{f(n.next(x))}catch(g){c(g)}}function h(x){try{f(n.throw(x))}catch(g){c(g)}}function f(x){x.done?o(x.value):a(x.value).then(d,h)}f((n=n.apply(t,e||[])).next())})}const ak=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Nl=class extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}},H0=class extends Nl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Ju=class extends Nl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Xu=class extends Nl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Go;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Go||(Go={}));class ok{constructor(e,{headers:r={},customFetch:n,region:a=Go.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=ak(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ik(this,arguments,void 0,function*(r,n={}){var a;let o,c;try{const{headers:d,method:h,body:f,signal:x,timeout:g}=n;let y={},{region:w}=n;w||(w=this.region);const v=new URL(`${this.url}/${r}`);w&&w!=="any"&&(y["x-region"]=w,v.searchParams.set("forceFunctionRegion",w));let b;f&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",b=f):typeof f=="string"?(y["Content-Type"]="text/plain",b=f):typeof FormData<"u"&&f instanceof FormData?b=f:(y["Content-Type"]="application/json",b=JSON.stringify(f)):b=f;let E=x;g&&(c=new AbortController,o=setTimeout(()=>c.abort(),g),x?(E=c.signal,x.addEventListener("abort",()=>c.abort())):E=c.signal);const j=yield this.fetch(v.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:b,signal:E}).catch(O=>{throw new H0(O)}),_=j.headers.get("x-relay-error");if(_&&_==="true")throw new Ju(j);if(!j.ok)throw new Xu(j);let S=((a=j.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),P;return S==="application/json"?P=yield j.json():S==="application/octet-stream"||S==="application/pdf"?P=yield j.blob():S==="text/event-stream"?P=j:S==="multipart/form-data"?P=yield j.formData():P=yield j.text(),{data:P,error:null,response:j}}catch(d){return{data:null,error:d,response:d instanceof Xu||d instanceof Ju?d.context:void 0}}finally{o&&clearTimeout(o)}})}}const lk=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Go},FunctionsClient:ok,FunctionsError:Nl,FunctionsFetchError:H0,FunctionsHttpError:Xu,FunctionsRelayError:Ju},Symbol.toStringTag,{value:"Module"})),W0=ta(lk);var ut={},Qu=function(t,e){return Qu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Qu(t,e)};function V0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Qu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Zo=function(){return Zo=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Zo.apply(this,arguments)};function q0(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function K0(t,e,r,n){var a=arguments.length,o=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var d=t.length-1;d>=0;d--)(c=t[d])&&(o=(a<3?c(o):a>3?c(e,r,o):c(e,r))||o);return a>3&&o&&Object.defineProperty(e,r,o),o}function G0(t,e){return function(r,n){e(r,n,t)}}function Z0(t,e,r,n,a,o){function c(j){if(j!==void 0&&typeof j!="function")throw new TypeError("Function expected");return j}for(var d=n.kind,h=d==="getter"?"get":d==="setter"?"set":"value",f=!e&&t?n.static?t:t.prototype:null,x=e||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),g,y=!1,w=r.length-1;w>=0;w--){var v={};for(var b in n)v[b]=b==="access"?{}:n[b];for(var b in n.access)v.access[b]=n.access[b];v.addInitializer=function(j){if(y)throw new TypeError("Cannot add initializers after decoration has completed");o.push(c(j||null))};var E=(0,r[w])(d==="accessor"?{get:x.get,set:x.set}:x[h],v);if(d==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(g=c(E.get))&&(x.get=g),(g=c(E.set))&&(x.set=g),(g=c(E.init))&&a.unshift(g)}else(g=c(E))&&(d==="field"?a.unshift(g):x[h]=g)}f&&Object.defineProperty(f,n.name,x),y=!0}function Y0(t,e,r){for(var n=arguments.length>2,a=0;a<e.length;a++)r=n?e[a].call(t,r):e[a].call(t);return n?r:void 0}function J0(t){return typeof t=="symbol"?t:"".concat(t)}function X0(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Q0(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ey(t,e,r,n){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function d(x){try{f(n.next(x))}catch(g){c(g)}}function h(x){try{f(n.throw(x))}catch(g){c(g)}}function f(x){x.done?o(x.value):a(x.value).then(d,h)}f((n=n.apply(t,e||[])).next())})}function ty(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(f){return function(x){return h([f,x])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(r=0)),r;)try{if(n=1,a&&(o=f[0]&2?a.return:f[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,f[1])).done)return o;switch(a=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,a=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],a=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var kl=Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function ry(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&kl(e,t,r)}function Yo(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _h(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,o=[],c;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(d){c={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return o}function ny(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_h(arguments[e]));return t}function sy(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),a=0,e=0;e<r;e++)for(var o=arguments[e],c=0,d=o.length;c<d;c++,a++)n[a]=o[c];return n}function iy(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,o;n<a;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Ms(t){return this instanceof Ms?(this.v=t,this):new Ms(t)}function ay(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(w){return function(v){return Promise.resolve(v).then(w,g)}}function d(w,v){n[w]&&(a[w]=function(b){return new Promise(function(E,j){o.push([w,b,E,j])>1||h(w,b)})},v&&(a[w]=v(a[w])))}function h(w,v){try{f(n[w](v))}catch(b){y(o[0][3],b)}}function f(w){w.value instanceof Ms?Promise.resolve(w.value.v).then(x,g):y(o[0][2],w)}function x(w){h("next",w)}function g(w){h("throw",w)}function y(w,v){w(v),o.shift(),o.length&&h(o[0][0],o[0][1])}}function oy(t){var e,r;return e={},n("next"),n("throw",function(a){throw a}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(a,o){e[a]=t[a]?function(c){return(r=!r)?{value:Ms(t[a](c)),done:!1}:o?o(c):c}:o}}function ly(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Yo=="function"?Yo(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(c){return new Promise(function(d,h){c=t[o](c),a(d,h,c.done,c.value)})}}function a(o,c,d,h){Promise.resolve(h).then(function(f){o({value:f,done:d})},c)}}function cy(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var ck=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},ed=function(t){return ed=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},ed(t)};function uy(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=ed(t),n=0;n<r.length;n++)r[n]!=="default"&&kl(e,t,r[n]);return ck(e,t),e}function dy(t){return t&&t.__esModule?t:{default:t}}function hy(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function fy(t,e,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function my(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function py(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var uk=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function gy(t){function e(o){t.error=t.hasError?new uk(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function a(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(a);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function xy(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,o,c){return n?e?".jsx":".js":a&&(!o||!c)?r:a+o+"."+c.toLowerCase()+"js"}):t}const dk={__extends:V0,__assign:Zo,__rest:q0,__decorate:K0,__param:G0,__esDecorate:Z0,__runInitializers:Y0,__propKey:J0,__setFunctionName:X0,__metadata:Q0,__awaiter:ey,__generator:ty,__createBinding:kl,__exportStar:ry,__values:Yo,__read:_h,__spread:ny,__spreadArrays:sy,__spreadArray:iy,__await:Ms,__asyncGenerator:ay,__asyncDelegator:oy,__asyncValues:ly,__makeTemplateObject:cy,__importStar:uy,__importDefault:dy,__classPrivateFieldGet:hy,__classPrivateFieldSet:fy,__classPrivateFieldIn:my,__addDisposableResource:py,__disposeResources:gy,__rewriteRelativeImportExtension:xy},hk=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:py,get __assign(){return Zo},__asyncDelegator:oy,__asyncGenerator:ay,__asyncValues:ly,__await:Ms,__awaiter:ey,__classPrivateFieldGet:hy,__classPrivateFieldIn:my,__classPrivateFieldSet:fy,__createBinding:kl,__decorate:K0,__disposeResources:gy,__esDecorate:Z0,__exportStar:ry,__extends:V0,__generator:ty,__importDefault:dy,__importStar:uy,__makeTemplateObject:cy,__metadata:Q0,__param:G0,__propKey:J0,__read:_h,__rest:q0,__rewriteRelativeImportExtension:xy,__runInitializers:Y0,__setFunctionName:X0,__spread:ny,__spreadArray:iy,__spreadArrays:sy,__values:Yo,default:dk},Symbol.toStringTag,{value:"Module"})),Hs=ta(hk);var Ya={},Ja={},Xa={},Qa={},eo={},to={},wp;function yy(){if(wp)return to;wp=1,Object.defineProperty(to,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return to.default=t,to}var jp;function vy(){if(jp)return eo;jp=1,Object.defineProperty(eo,"__esModule",{value:!0});const e=Hs.__importDefault(yy());let r=class{constructor(a){var o,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var f,x,g,y;let w=null,v=null,b=null,E=h.status,j=h.statusText;if(h.ok){if(this.method!=="HEAD"){const O=await h.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?v=O:v=JSON.parse(O))}const S=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),P=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");S&&P&&P.length>1&&(b=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(w={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,b=null,E=406,j="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const S=await h.text();try{w=JSON.parse(S),Array.isArray(w)&&h.status===404&&(v=[],w=null,E=200,j="OK")}catch{h.status===404&&S===""?(E=204,j="No Content"):w={message:S}}if(w&&this.isMaybeSingle&&(!((y=w==null?void 0:w.details)===null||y===void 0)&&y.includes("0 rows"))&&(w=null,E=200,j="OK"),w&&this.shouldThrowOnError)throw new e.default(w)}return{error:w,data:v,count:b,status:E,statusText:j}});return this.shouldThrowOnError||(d=d.catch(h=>{var f,x,g,y,w,v;let b="";const E=h==null?void 0:h.cause;if(E){const j=(f=E==null?void 0:E.message)!==null&&f!==void 0?f:"",_=(x=E==null?void 0:E.code)!==null&&x!==void 0?x:"";b=`${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"FetchError"}: ${h==null?void 0:h.message}`,b+=`

Caused by: ${(y=E==null?void 0:E.name)!==null&&y!==void 0?y:"Error"}: ${j}`,_&&(b+=` (${_})`),E!=null&&E.stack&&(b+=`
${E.stack}`)}else b=(w=h==null?void 0:h.stack)!==null&&w!==void 0?w:"";return{error:{message:`${(v=h==null?void 0:h.name)!==null&&v!==void 0?v:"FetchError"}: ${h==null?void 0:h.message}`,details:b,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(a,o)}returns(){return this}overrideTypes(){return this}};return eo.default=r,eo}var Np;function by(){if(Np)return Qa;Np=1,Object.defineProperty(Qa,"__esModule",{value:!0});const e=Hs.__importDefault(vy());let r=class extends e.default{select(a){let o=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:c,foreignTable:d,referencedTable:h=d}={}){const f=h?`${h}.order`:"order",x=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${x?`${x},`:""}${a}.${o?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:c=o}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,o,{foreignTable:c,referencedTable:d=c}={}){const h=typeof d>"u"?"offset":`${d}.offset`,f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${a}`),this.url.searchParams.set(f,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:c=!1,buffers:d=!1,wal:h=!1,format:f="text"}={}){var x;const g=[a?"analyze":null,o?"verbose":null,c?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),y=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${y}"; options=${g};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};return Qa.default=r,Qa}var kp;function wh(){if(kp)return Xa;kp=1,Object.defineProperty(Xa,"__esModule",{value:!0});const e=Hs.__importDefault(by()),r=new RegExp("[,()]");let n=class extends e.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}regexMatch(o,c){return this.url.searchParams.append(o,`match.${c}`),this}regexIMatch(o,c){return this.url.searchParams.append(o,`imatch.${c}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}isDistinct(o,c){return this.url.searchParams.append(o,`isdistinct.${c}`),this}in(o,c){const d=Array.from(new Set(c)).map(h=>typeof h=="string"&&r.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:d,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const x=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${f}fts${x}.${c}`),this}match(o){return Object.entries(o).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(o,c,d){return this.url.searchParams.append(o,`not.${c}.${d}`),this}or(o,{foreignTable:c,referencedTable:d=c}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${o})`),this}filter(o,c,d){return this.url.searchParams.append(o,`${c}.${d}`),this}};return Xa.default=n,Xa}var Sp;function _y(){if(Sp)return Ja;Sp=1,Object.defineProperty(Ja,"__esModule",{value:!0});const e=Hs.__importDefault(wh());let r=class{constructor(a,{headers:o={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(o),this.schema=c,this.fetch=d}select(a,o){const{head:c=!1,count:d}=o??{},h=c?"HEAD":"GET";let f=!1;const x=(a??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",x),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:c=!0}={}){var d;const h="POST";if(o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((x,g)=>x.concat(Object.keys(g)),[]);if(f.length>0){const x=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:c=!1,count:d,defaultToNull:h=!0}={}){var f;const x="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((y,w)=>y.concat(Object.keys(w)),[]);if(g.length>0){const y=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(a,{count:o}={}){var c;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var o;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};return Ja.default=r,Ja}var Ep;function fk(){if(Ep)return Ya;Ep=1,Object.defineProperty(Ya,"__esModule",{value:!0});const t=Hs,e=t.__importDefault(_y()),r=t.__importDefault(wh());let n=class wy{constructor(o,{headers:c={},schema:d,fetch:h}={}){this.url=o,this.headers=new Headers(c),this.schemaName=d,this.fetch=h}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new wy(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:d=!1,get:h=!1,count:f}={}){var x;let g;const y=new URL(`${this.url}/rpc/${o}`);let w;d||h?(g=d?"HEAD":"GET",Object.entries(c).filter(([b,E])=>E!==void 0).map(([b,E])=>[b,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([b,E])=>{y.searchParams.append(b,E)})):(g="POST",w=c);const v=new Headers(this.headers);return f&&v.set("Prefer",`count=${f}`),new r.default({method:g,url:y,headers:v,schema:this.schemaName,body:w,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}};return Ya.default=n,Ya}Object.defineProperty(ut,"__esModule",{value:!0});ut.PostgrestError=ut.PostgrestBuilder=ut.PostgrestTransformBuilder=ut.PostgrestFilterBuilder=ut.PostgrestQueryBuilder=ut.PostgrestClient=void 0;const Ws=Hs,jy=Ws.__importDefault(fk());ut.PostgrestClient=jy.default;const Ny=Ws.__importDefault(_y());ut.PostgrestQueryBuilder=Ny.default;const ky=Ws.__importDefault(wh());ut.PostgrestFilterBuilder=ky.default;const Sy=Ws.__importDefault(by());ut.PostgrestTransformBuilder=Sy.default;const Ey=Ws.__importDefault(vy());ut.PostgrestBuilder=Ey.default;const Py=Ws.__importDefault(yy());ut.PostgrestError=Py.default;ut.default={PostgrestClient:jy.default,PostgrestQueryBuilder:Ny.default,PostgrestFilterBuilder:ky.default,PostgrestTransformBuilder:Sy.default,PostgrestBuilder:Ey.default,PostgrestError:Py.default};class Ty{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const mk="2.87.1",pk=`realtime-js/${mk}`,Cy="1.0.0",gk="2.0.0",Pp=Cy,td=1e4,xk=1e3,yk=100;var kn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(kn||(kn={}));var We;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(We||(We={}));var Yt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yt||(Yt={}));var rd;(function(t){t.websocket="websocket"})(rd||(rd={}));var Sn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Sn||(Sn={}));class vk{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const a=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var r,n;const a=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,r,n){var a,o;const c=e.topic,d=(a=e.ref)!==null&&a!==void 0?a:"",h=(o=e.join_ref)!==null&&o!==void 0?o:"",f=e.payload.event,x=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},g=Object.keys(x).length===0?"":JSON.stringify(x);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+c.length+f.length+g.length,w=new ArrayBuffer(this.HEADER_LENGTH+y);let v=new DataView(w),b=0;v.setUint8(b++,this.KINDS.userBroadcastPush),v.setUint8(b++,h.length),v.setUint8(b++,d.length),v.setUint8(b++,c.length),v.setUint8(b++,f.length),v.setUint8(b++,g.length),v.setUint8(b++,r),Array.from(h,j=>v.setUint8(b++,j.charCodeAt(0))),Array.from(d,j=>v.setUint8(b++,j.charCodeAt(0))),Array.from(c,j=>v.setUint8(b++,j.charCodeAt(0))),Array.from(f,j=>v.setUint8(b++,j.charCodeAt(0))),Array.from(g,j=>v.setUint8(b++,j.charCodeAt(0)));var E=new Uint8Array(w.byteLength+n.byteLength);return E.set(new Uint8Array(w),0),E.set(new Uint8Array(n),w.byteLength),E.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[a,o,c,d,h]=n;return r({join_ref:a,ref:o,topic:c,event:d,payload:h})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,a)}}_decodeUserBroadcast(e,r,n){const a=r.getUint8(1),o=r.getUint8(2),c=r.getUint8(3),d=r.getUint8(4);let h=this.HEADER_LENGTH+4;const f=n.decode(e.slice(h,h+a));h=h+a;const x=n.decode(e.slice(h,h+o));h=h+o;const g=n.decode(e.slice(h,h+c));h=h+c;const y=e.slice(h,e.byteLength),w=d===this.JSON_ENCODING?JSON.parse(n.decode(y)):y,v={type:this.BROADCAST_EVENT,event:x,payload:w};return c>0&&(v.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Ay{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Se;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Se||(Se={}));const Tp=(t,e,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=bk(c,t,e,a),o),{}):{}},bk=(t,e,r,n)=>{const a=e.find(d=>d.name===t),o=a==null?void 0:a.type,c=r[t];return o&&!n.includes(o)?Oy(o,c):nd(c)},Oy=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Nk(e,r)}switch(t){case Se.bool:return _k(e);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return wk(e);case Se.json:case Se.jsonb:return jk(e);case Se.timestamp:return kk(e);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return nd(e);default:return nd(e)}},nd=t=>t,_k=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},wk=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},jk=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Nk=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const c=t.slice(1,r);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(d=>Oy(e,d))}return t},kk=t=>typeof t=="string"?t.replace(" ","T"):t,Ly=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class zc{constructor(e,r,n={},a=td){this.channel=e,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var sd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(sd||(sd={}));let Iy=class vo{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vo.syncState(this.state,a,o,c),this.pendingDiffs.forEach(h=>{this.state=vo.syncDiff(this.state,h,o,c)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},a=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=vo.syncDiff(this.state,a,o,c),d())}),this.onJoin((a,o,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:c})}),this.onLeave((a,o,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,a){const o=this.cloneDeep(e),c=this.transformState(r),d={},h={};return this.map(o,(f,x)=>{c[f]||(h[f]=x)}),this.map(c,(f,x)=>{const g=o[f];if(g){const y=x.map(E=>E.presence_ref),w=g.map(E=>E.presence_ref),v=x.filter(E=>w.indexOf(E.presence_ref)<0),b=g.filter(E=>y.indexOf(E.presence_ref)<0);v.length>0&&(d[f]=v),b.length>0&&(h[f]=b)}else d[f]=x}),this.syncDiff(o,{joins:d,leaves:h},n,a)}static syncDiff(e,r,n,a){const{joins:o,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(o,(d,h)=>{var f;const x=(f=e[d])!==null&&f!==void 0?f:[];if(e[d]=this.cloneDeep(h),x.length>0){const g=e[d].map(w=>w.presence_ref),y=x.filter(w=>g.indexOf(w.presence_ref)<0);e[d].unshift(...y)}n(d,x,h)}),this.map(c,(d,h)=>{let f=e[d];if(!f)return;const x=h.map(g=>g.presence_ref);f=f.filter(g=>x.indexOf(g.presence_ref)<0),e[d]=f,a(d,f,h),f.length===0&&delete e[d]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const a=e[n];return"metas"in a?r[n]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var id;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(id||(id={}));var Ps;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ps||(Ps={}));var cr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(cr||(cr={}));const Sk=We;let Ry=class vi{constructor(e,r={config:{}},n){var a,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=We.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new zc(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new Ay(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=We.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=We.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new Iy(this),this.broadcastEndpointURL=Ly(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==We.closed){const{config:{broadcast:c,presence:d,private:h}}=this.params,f=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(w=>w.filter))!==null&&a!==void 0?a:[],x=!!this.bindings[Ps.PRESENCE]&&this.bindings[Ps.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,g={},y={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:x}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(cr.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(cr.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){e==null||e(cr.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,E=(v=b==null?void 0:b.length)!==null&&v!==void 0?v:0,j=[];for(let _=0;_<E;_++){const S=b[_],{filter:{event:P,schema:O,table:A,filter:I}}=S,B=w&&w[_];if(B&&B.event===P&&vi.isFilterValueEqual(B.schema,O)&&vi.isFilterValueEqual(B.table,A)&&vi.isFilterValueEqual(B.filter,I))j.push(Object.assign(Object.assign({},S),{id:B.id}));else{this.unsubscribe(),this.state=We.errored,e==null||e(cr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,e&&e(cr.SUBSCRIBED);return}}).receive("error",w=>{this.state=We.errored,e==null||e(cr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(cr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===We.joined&&e===Ps.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var a;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const f=await d.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}async send(e,r={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,d,h;const f=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=We.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new zc(this,Yt.leave,{},e),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=We.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const a=new AbortController,o=setTimeout(()=>a.abort(),n),c=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),c}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new zc(this,e,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>yk){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var a,o;const c=e.toLocaleLowerCase(),{close:d,error:h,leave:f,join:x}=Yt;if(n&&[d,h,f,x].indexOf(c)>=0&&n!==this._joinRef())return;let y=this._onMessage(c,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(w=>{var v,b,E;return((v=w.filter)===null||v===void 0?void 0:v.event)==="*"||((E=(b=w.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===c}).map(w=>w.callback(y,n)):(o=this.bindings[c])===null||o===void 0||o.filter(w=>{var v,b,E,j,_,S;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in w){const P=w.id,O=(v=w.filter)===null||v===void 0?void 0:v.event;return P&&((b=r.ids)===null||b===void 0?void 0:b.includes(P))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((E=r.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const P=(_=(j=w==null?void 0:w.filter)===null||j===void 0?void 0:j.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return P==="*"||P===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===c}).map(w=>{if(typeof y=="object"&&"ids"in y){const v=y.data,{schema:b,table:E,commit_timestamp:j,type:_,errors:S}=v;y=Object.assign(Object.assign({},{schema:b,table:E,commit_timestamp:j,eventType:_,new:{},old:{},errors:S}),this._getPayloadRecords(v))}w.callback(y,n)})}_isClosed(){return this.state===We.closed}_isJoined(){return this.state===We.joined}_isJoining(){return this.state===We.joining}_isLeaving(){return this.state===We.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const a=e.toLocaleLowerCase(),o={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&vi.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yt.close,{},e)}_onError(e){this._on(Yt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=We.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Tp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Tp(e.columns,e.old_record)),r}};const Uc=()=>{},ro={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ek=[1e3,2e3,5e3,1e4],Pk=1e4,Tk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let Ck=class{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=td,this.transport=null,this.heartbeatIntervalMs=ro.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Uc,this.ref=0,this.reconnectTimer=null,this.vsn=Pp,this.logger=Uc,this.conn=null,this.sendBuffer=[],this.serializer=new vk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${rd.websocket}`,this.httpEndpoint=Ly(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ty.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case kn.connecting:return Sn.Connecting;case kn.open:return Sn.Open;case kn.closing:return Sn.Closing;default:return Sn.Closed}}isConnected(){return this.connectionState()===Sn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===n);if(a)return a;{const o=new Ry(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:a,ref:o}=e,c=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${r} ${n} (${o})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(xk,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ro.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:o,ref:c}=r,d=c?`(${c})`:"",h=o.status||"";this.log("receive",`${h} ${n} ${a} ${d}`.trim(),o),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(a,o,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===kn.open||this.conn.readyState===kn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${n}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Tk],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const o={access_token:r,version:pk};r&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(Yt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Ay(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ro.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,a,o,c,d,h,f,x,g,y,w;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:td,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:ro.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:Uc,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:Pp,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e==null?void 0:e.reconnectAfterMs)!==null&&f!==void 0?f:v=>Ek[v-1]||Pk,this.vsn){case Cy:this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:(v,b)=>b(JSON.stringify(v)),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:(v,b)=>b(JSON.parse(v));break;case gk:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const Ak=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:Sk,get REALTIME_LISTEN_TYPES(){return Ps},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return id},get REALTIME_PRESENCE_LISTEN_EVENTS(){return sd},get REALTIME_SUBSCRIBE_STATES(){return cr},RealtimeChannel:Ry,RealtimeClient:Ck,RealtimePresence:Iy,WebSocketFactory:Ty},Symbol.toStringTag,{value:"Module"})),Dy=ta(Ak);function oe(t,e,r,n){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function d(x){try{f(n.next(x))}catch(g){c(g)}}function h(x){try{f(n.throw(x))}catch(g){c(g)}}function f(x){x.done?o(x.value):a(x.value).then(d,h)}f((n=n.apply(t,e||[])).next())})}class ca extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Oe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class By extends ca{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Jo extends ca{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const jh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ok=()=>Response,ad=t=>{if(Array.isArray(t))return t.map(r=>ad(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=ad(n)}),e},Lk=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ik=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),$c=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Rk=(t,e,r)=>oe(void 0,void 0,void 0,function*(){const n=yield Ok();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const o=t.status||500,c=(a==null?void 0:a.statusCode)||o+"";e(new By($c(a),o,c))}).catch(a=>{e(new Jo($c(a),a))}):e(new Jo($c(t),t))}),Dk=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?a:(Lk(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function ua(t,e,r,n,a,o){return oe(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(r,Dk(e,n,a,o)).then(h=>{if(!h.ok)throw h;return n!=null&&n.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>Rk(h,d,n))})})}function Yi(t,e,r,n){return oe(this,void 0,void 0,function*(){return ua(t,"GET",e,r,n)})}function Gt(t,e,r,n,a){return oe(this,void 0,void 0,function*(){return ua(t,"POST",e,n,a,r)})}function od(t,e,r,n,a){return oe(this,void 0,void 0,function*(){return ua(t,"PUT",e,n,a,r)})}function Bk(t,e,r,n){return oe(this,void 0,void 0,function*(){return ua(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Nh(t,e,r,n,a){return oe(this,void 0,void 0,function*(){return ua(t,"DELETE",e,n,a,r)})}class Mk{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return oe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Oe(e))return{data:null,error:e};throw e}})}}var My;class zk{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[My]="BlobDownloadBuilder",this.promise=null}asStream(){return new Mk(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return oe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Oe(e))return{data:null,error:e};throw e}})}}My=Symbol.toStringTag;const Uk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $k{constructor(e,r={},n,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=jh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,a){return oe(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},Cp),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),h&&o.append("metadata",this.encodeMetadata(h)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),h&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(h))):(o=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(d=Object.assign(Object.assign({},d),a.headers));const f=this._removeEmptyFolders(r),x=this._getFinalPath(f),g=yield(e=="PUT"?od:Gt)(this.fetch,`${this.url}/object/${x}`,o,Object.assign({headers:d},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Oe(o))return{data:null,error:o};throw o}})}upload(e,r,n){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,a){return oe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",r);try{let h;const f=Object.assign({upsert:Cp.upsert},a),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",f.cacheControl)):(h=n,x["cache-control"]=`max-age=${f.cacheControl}`,x["content-type"]=f.contentType);const g=yield od(this.fetch,d.toString(),h,{headers:x});return{data:{path:o,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Oe(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,r){return oe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield Gt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),c=new URL(this.url+o.url),d=c.searchParams.get("token");if(!d)throw new ca("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}update(e,r,n){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return oe(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Oe(a))return{data:null,error:a};throw a}})}copy(e,r,n){return oe(this,void 0,void 0,function*(){try{return{data:{path:(yield Gt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Oe(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,n){return oe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Gt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const c=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Oe(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,n){return oe(this,void 0,void 0,function*(){try{const a=yield Gt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Oe(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),c=o?`?${o}`:"",d=this._getFinalPath(e),h=()=>Yi(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new zk(h,this.shouldThrowOnError)}info(e){return oe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Yi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ad(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}exists(e){return oe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Bk(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n)&&n instanceof Jo){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const d=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});h!==""&&a.push(h);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${f}`)}}}remove(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Nh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}list(e,r,n){return oe(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Uk),r),{prefix:e||""});return{data:yield Gt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Oe(a))return{data:null,error:a};throw a}})}listV2(e,r){return oe(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Gt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const zy="2.87.1",Uy={"X-Client-Info":`storage-js/${zy}`};class Fk{constructor(e,r={},n,a){this.shouldThrowOnError=!1;const o=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uy),r),this.fetch=jh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return oe(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Yi(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}getBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}createBucket(e){return oe(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Gt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Oe(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return oe(this,void 0,void 0,function*(){try{return{data:yield od(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Nh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Ji=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Hk(t,e,r){const n=new URL(e,t);if(r)for(const[a,o]of Object.entries(r))o!==void 0&&n.searchParams.set(a,o);return n.toString()}async function Wk(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Vk(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:o,headers:c}){const d=Hk(t.baseUrl,n,a),h=await Wk(t.auth),f=await e(d,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...h,...c},body:o?JSON.stringify(o):void 0}),x=await f.text(),g=(f.headers.get("content-type")||"").includes("application/json"),y=g&&x?JSON.parse(x):x;if(!f.ok){const w=g?y:void 0,v=w==null?void 0:w.error;throw new Ji((v==null?void 0:v.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:w})}return{status:f.status,headers:f.headers,data:y}}}}function no(t){return t.join("")}var qk=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:no(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${no(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${no(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${no(t.namespace)}`}),!0}catch(e){if(e instanceof Ji&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Ji&&r.status===409)return;throw r}}};function ss(t){return t.join("")}var Kk=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ss(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ss(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ss(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ss(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ss(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ss(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Ji&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Ji&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},Gk=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Vk({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new qk(this.client,e),this.tableOps=new Kk(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class $y{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uy),r),this.fetch=jh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}listBuckets(e){return oe(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Yi(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Nh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}from(e){if(!Ik(e))throw new ca("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Gk({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>oe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(o,c){const d=o[c];return typeof d!="function"?d:(...h)=>oe(this,void 0,void 0,function*(){try{return{data:yield d.apply(o,h),error:null}}catch(f){if(n)throw f;return{data:null,error:f}}})}})}}const kh={"X-Client-Info":`storage-js/${zy}`,"Content-Type":"application/json"};class Sh extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function wt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class bo extends Sh{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Fy extends Sh{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var ld;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ld||(ld={}));const Sl=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Zk=()=>Response,Hy=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Yk=t=>Array.from(new Float32Array(t)),Jk=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},Ap=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Xk=(t,e,r)=>oe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const a=t.status||500,o=t;if(typeof o.json=="function")o.json().then(c=>{const d=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new bo(Ap(c),a,d))}).catch(()=>{const c=a+"",d=o.statusText||`HTTP ${a} error`;e(new bo(d,a,c))});else{const c=a+"",d=o.statusText||`HTTP ${a} error`;e(new bo(d,a,c))}}else e(new Fy(Ap(t),t))}),Qk=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(Hy(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function eS(t,e,r,n,a,o){return oe(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(r,Qk(e,n,a,o)).then(h=>{if(!h.ok)throw h;if(n!=null&&n.noResolveJson)return h;const f=h.headers.get("content-type");return!f||!f.includes("application/json")?{}:h.json()}).then(h=>c(h)).catch(h=>Xk(h,d,n))})})}function Pt(t,e,r,n,a){return oe(this,void 0,void 0,function*(){return eS(t,"POST",e,n,a,r)})}class Wy{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kh),r),this.fetch=Sl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield Pt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}getIndex(e,r){return oe(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}listIndexes(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return oe(this,void 0,void 0,function*(){try{return{data:(yield Pt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}}class Vy{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kh),r),this.fetch=Sl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Pt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}getVectors(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}listVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Pt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}queryVectors(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}deleteVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Pt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}}class qy{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kh),r),this.fetch=Sl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield Pt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}getBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}listBuckets(){return oe(this,arguments,void 0,function*(e={}){try{return{data:yield Pt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield Pt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}}class Ky extends qy{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new Gy(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return oe(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return oe(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return oe(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return oe(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class Gy extends Wy{constructor(e,r,n,a){super(e,r,a),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return oe(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return oe(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return oe(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return oe(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Zy(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Zy extends Vy{constructor(e,r,n,a,o){super(e,r,o),this.vectorBucketName=n,this.indexName=a}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return oe(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return oe(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return oe(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return oe(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return oe(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class tS extends Fk{constructor(e,r={},n,a){super(e,r,n,a)}from(e){return new $k(this.url,this.headers,e,this.fetch)}get vectors(){return new Ky(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $y(this.url+"/iceberg",this.headers,this.fetch)}}const rS=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:$y,StorageApiError:By,StorageClient:tS,StorageError:ca,StorageUnknownError:Jo,StorageVectorsApiError:bo,StorageVectorsClient:Ky,StorageVectorsError:Sh,get StorageVectorsErrorCode(){return ld},StorageVectorsUnknownError:Fy,VectorBucketApi:qy,VectorBucketScope:Gy,VectorDataApi:Vy,VectorIndexApi:Wy,VectorIndexScope:Zy,isPlainObject:Hy,isStorageError:Oe,isStorageVectorsError:wt,normalizeToFloat32:Yk,resolveFetch:Sl,resolveResponse:Zk,validateVectorDimension:Jk},Symbol.toStringTag,{value:"Module"})),nS=ta(rS);var Yy={},El={};Object.defineProperty(El,"__esModule",{value:!0});El.version=void 0;El.version="2.87.1";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=El;let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(Yy);var Jy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=a=>a?(...o)=>a(...o):(...o)=>fetch(...o);t.resolveFetch=e;const r=()=>Headers;t.resolveHeadersConstructor=r;const n=(a,o,c)=>{const d=(0,t.resolveFetch)(c),h=(0,t.resolveHeadersConstructor)();return async(f,x)=>{var g;const y=(g=await o())!==null&&g!==void 0?g:a;let w=new h(x==null?void 0:x.headers);return w.has("apikey")||w.set("apikey",a),w.has("Authorization")||w.set("Authorization",`Bearer ${y}`),d(f,Object.assign(Object.assign({},x),{headers:w}))}};t.fetchWithAuth=n})(Jy);var cn={};Object.defineProperty(cn,"__esModule",{value:!0});cn.isBrowser=void 0;cn.uuid=sS;cn.ensureTrailingSlash=Xy;cn.applySettingDefaults=aS;cn.validateSupabaseUrl=oS;function sS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t=="x"?e:e&3|8;return r.toString(16)})}function Xy(t){return t.endsWith("/")?t:t+"/"}const iS=()=>typeof window<"u";cn.isBrowser=iS;function aS(t,e){var r,n;const{db:a,auth:o,realtime:c,global:d}=t,{db:h,auth:f,realtime:x,global:g}=e,y={db:Object.assign(Object.assign({},h),a),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},x),c),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function oS(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Xy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Pl={};function Tl(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}const Qy="2.87.1",ls=30*1e3,cd=3,Fc=cd*ls,lS="http://localhost:9999",cS="supabase.auth.token",uS={"X-Client-Info":`gotrue-js/${Qy}`},ud="X-Supabase-Api-Version",ev={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hS=10*60*1e3;let zs=class extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}};function ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let tv=class extends zs{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}};function rv(t){return ce(t)&&t.name==="AuthApiError"}let Ur=class extends zs{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},Ar=class extends zs{constructor(e,r,n,a){super(e,n,a),this.name=r,this.status=n}},bt=class extends Ar{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function nv(t){return ce(t)&&t.name==="AuthSessionMissingError"}let _n=class extends Ar{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},bi=class extends Ar{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},_i=class extends Ar{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function sv(t){return ce(t)&&t.name==="AuthImplicitGrantRedirectError"}let dd=class extends Ar{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Xo=class extends Ar{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}};function _o(t){return ce(t)&&t.name==="AuthRetryableFetchError"}let hd=class extends Ar{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}};function fS(t){return ce(t)&&t.name==="AuthWeakPasswordError"}let Qo=class extends Ar{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const el="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Op=` 	
\r=`.split(""),mS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Op.length;e+=1)t[Op[e].charCodeAt(0)]=-2;for(let e=0;e<el.length;e+=1)t[el[e].charCodeAt(0)]=e;return t})();function Lp(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(el[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(el[n]),e.queuedBits-=6}}function iv(t,e,r){const n=mS[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ip(t){const e=[],r=c=>{e.push(String.fromCodePoint(c))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=c=>{xS(c,n,r)};for(let c=0;c<t.length;c+=1)iv(t.charCodeAt(c),a,o);return e.join("")}function pS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function gS(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}pS(n,e)}}function xS(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Ts(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)iv(t.charCodeAt(a),r,n);return new Uint8Array(e)}function yS(t){const e=[];return gS(t,r=>e.push(r)),new Uint8Array(e)}function Cn(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>Lp(a,r,n)),Lp(null,r,n),e.join("")}function vS(t){return Math.round(Date.now()/1e3)+t}function bS(){return Symbol("auth-callback")}const rt=()=>typeof window<"u"&&typeof document<"u",gn={tested:!1,writable:!1},av=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gn.tested)return gn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),gn.tested=!0,gn.writable=!0}catch{gn.tested=!0,gn.writable=!1}return gn.writable};function _S(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return r.searchParams.forEach((n,a)=>{e[a]=n}),e}const ov=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),wS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",cs=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},xn=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},tt=async(t,e)=>{await t.removeItem(e)};let lv=class cv{constructor(){this.promise=new cv.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}};lv.promiseConstructor=Promise;function Hc(t){const e=t.split(".");if(e.length!==3)throw new Qo("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!dS.test(e[n]))throw new Qo("JWT not in base64url format");return{header:JSON.parse(Ip(e[0])),payload:JSON.parse(Ip(e[1])),signature:Ts(e[2]),raw:{header:e[0],payload:e[1]}}}async function jS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function NS(t,e){return new Promise((n,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await t(o);if(!e(o,null,c)){n(c);return}}catch(c){if(!e(o,c)){a(c);return}}})()})}function kS(t){return("0"+t.toString(16)).substr(-2)}function SS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,kS).join("")}async function ES(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function PS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await ES(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function is(t,e,r=!1){const n=SS();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await cs(t,`${e}-code-verifier`,a);const o=await PS(n);return[o,n===o?"plain":"s256"]}const TS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function CS(t){const e=t.headers.get(ud);if(!e||!e.match(TS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function AS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function OS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const LS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function as(t){if(!LS.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wc(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function IS(t,e){return new Proxy(t,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,a)}})}function Rp(t){return JSON.parse(JSON.stringify(t))}const wn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),RS=[502,503,504];async function Dp(t){var e;if(!wS(t))throw new Xo(wn(t),0);if(RS.includes(t.status))throw new Xo(wn(t),t.status);let r;try{r=await t.json()}catch(o){throw new Ur(wn(o),o)}let n;const a=CS(t);if(a&&a.getTime()>=ev["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new hd(wn(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new bt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new hd(wn(r),t.status,r.weak_password.reasons);throw new tv(wn(r),t.status||500,n)}const DS=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function he(t,e,r,n){var a;const o=Object.assign({},n==null?void 0:n.headers);o[ud]||(o[ud]=ev["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const c=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(c.redirect_to=n.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await BS(t,e,r+d,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(h):{data:Object.assign({},h),error:null}}async function BS(t,e,r,n,a,o){const c=DS(e,n,a,o);let d;try{d=await t(r,Object.assign({},c))}catch(h){throw console.error(h),new Xo(wn(h),0)}if(d.ok||await Dp(d),n!=null&&n.noResolveJson)return d;try{return await d.json()}catch(h){await Dp(h)}}function qt(t){var e;let r=null;US(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=vS(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Bp(t){const e=qt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function $r(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function MS(t){return{data:t,error:null}}function zS(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o}=t,c=Tl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o},h=Object.assign({},c);return{data:{properties:d,user:h},error:null}}function Mp(t){return t}function US(t){return t.access_token&&t.refresh_token&&t.expires_in}const wo=["global","local","others"];let Eh=class{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=ov(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=wo[0]){if(wo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wo.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:$r})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Tl(e,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:zS,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$r})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,a,o,c,d,h;try{const f={nextPage:null,lastPage:0,total:0},x=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Mp});if(x.error)throw x.error;const g=await x.json(),y=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(h=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(v.split(";")[1].split("=")[1]);f[`${E}Page`]=b}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(ce(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){as(e);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$r})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){as(e);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:$r})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){as(e);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:$r})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){as(e.userId);try{const{data:r,error:n}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteFactor(e){as(e.userId),as(e.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,a,o,c,d,h;try{const f={nextPage:null,lastPage:0,total:0},x=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Mp});if(x.error)throw x.error;const g=await x.json(),y=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(h=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(v.split(";")[1].split("=")[1]);f[`${E}Page`]=b}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(ce(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}};function zp(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const jn={debug:!!(globalThis&&av()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ph extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let uv=class extends Ph{};class $S extends Ph{}async function dv(t,e,r){jn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),jn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){jn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{jn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw jn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new uv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(jn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const Up={};async function FS(t,e,r){var n;const a=(n=Up[t])!==null&&n!==void 0?n:Promise.resolve(),o=Promise.race([a.catch(()=>null),e>=0?new Promise((c,d)=>{setTimeout(()=>{d(new $S(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await r());return Up[t]=o.catch(async c=>{if(c&&c.isAcquireTimeout)return await a,null;throw c}),await o}function HS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function WS(t){return parseInt(t,16)}function VS(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function qS(t){var e;const{chainId:r,domain:n,expirationTime:a,issuedAt:o=new Date,nonce:c,notBefore:d,requestId:h,resources:f,scheme:x,uri:g,version:y}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=hv(t.address),v=x?`${x}://${n}`:n,b=t.statement?`${t.statement}
`:"",E=`${v} wants you to sign in with your Ethereum account:
${w}

${b}`;let j=`URI: ${g}
Version: ${y}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(a&&(j+=`
Expiration Time: ${a.toISOString()}`),d&&(j+=`
Not Before: ${d.toISOString()}`),h&&(j+=`
Request ID: ${h}`),f){let _=`
Resources:`;for(const S of f){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);_+=`
- ${S}`}j+=_}return`${E}
${j}`}class Ve extends Error{constructor({message:e,code:r,cause:n,name:a}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=a??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class tl extends Ve{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function KS({error:t,options:e}){var r,n,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ve({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ve({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ve({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ve({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ve({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ve({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Ve({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ve({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(fv(c)){if(o.rp.id!==c)return new Ve({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ve({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ve({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function GS({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ve({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ve({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(fv(n)){if(r.rpId!==n)return new Ve({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ve({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class ZS{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const YS=new ZS;function JS(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,a=Tl(t,["challenge","user","excludeCredentials"]),o=Ts(e).buffer,c=Object.assign(Object.assign({},r),{id:Ts(r.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:c});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const f=n[h];d.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:Ts(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function XS(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Tl(t,["challenge","allowCredentials"]),a=Ts(e).buffer,o=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];o.allowCredentials[c]=Object.assign(Object.assign({},d),{id:Ts(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function QS(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Cn(new Uint8Array(t.response.attestationObject)),clientDataJSON:Cn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function e1(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Cn(new Uint8Array(a.authenticatorData)),clientDataJSON:Cn(new Uint8Array(a.clientDataJSON)),signature:Cn(new Uint8Array(a.signature)),userHandle:a.userHandle?Cn(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function fv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function $p(){var t,e;return!!(rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function t1(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new tl("Browser returned unexpected credential type",e)}:{data:null,error:new tl("Empty credential response",e)}}catch(e){return{data:null,error:KS({error:e,options:t})}}}async function r1(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new tl("Browser returned unexpected credential type",e)}:{data:null,error:new tl("Empty credential response",e)}}catch(e){return{data:null,error:GS({error:e,options:t})}}}const n1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},s1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function rl(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of t)if(a)for(const o in a){const c=a[o];if(c!==void 0)if(Array.isArray(c))n[o]=c;else if(r(c))n[o]=c;else if(e(c)){const d=n[o];e(d)?n[o]=rl(d,c):n[o]=rl(c)}else n[o]=c}return n}function i1(t,e){return rl(n1,t,e||{})}function a1(t,e){return rl(s1,t,e||{})}class o1{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:a},o){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!c)return{data:null,error:d};const h=a??YS.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:f}=c.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${n}`),f.displayName||(f.displayName=f.name)}switch(c.webauthn.type){case"create":{const f=i1(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:x,error:g}=await t1({publicKey:f,signal:h});return x?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:g}}case"request":{const f=a1(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:x,error:g}=await r1(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:f,signal:h}));return x?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:g}}}}catch(c){return ce(c)?{data:null,error:c}:{data:null,error:new Ur("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!r)return{data:null,error:new zs("rpId is required for WebAuthn authentication")};try{if(!$p())return{data:null,error:new Ur("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:o});if(!c)return{data:null,error:d};const{webauthn:h}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:n,credential_response:h.credential_response}})}catch(c){return ce(c)?{data:null,error:c}:{data:null,error:new Ur("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!r)return{data:null,error:new zs("rpId is required for WebAuthn registration")};try{if(!$p())return{data:null,error:new Ur("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(x=>{var g;return(g=x.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:d};const{data:h,error:f}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:o});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:n,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(c){return ce(c)?{data:null,error:c}:{data:null,error:new Ur("Unexpected error in register",c)}}}}HS();const l1={url:lS,storageKey:cS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Fp(t,e,r){return await r()}const os={};let Th=class fd{get jwks(){var e,r;return(r=(e=os[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){os[this.storageKey]=Object.assign(Object.assign({},os[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=os[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){os[this.storageKey]=Object.assign(Object.assign({},os[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},l1),e);if(this.storageKey=o.storageKey,this.instanceID=(r=fd.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,fd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&rt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Eh({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=ov(o.fetch),this.lock=o.lock||Fp,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&rt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=dv:this.lock=Fp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new o1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:av()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zp(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=zp(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Qy}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(rt()&&(r=_S(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),rt()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),sv(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ce(r)?this._returnResult({error:r}):this._returnResult({error:new Ur("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,a;try{const o=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:qt}),{data:c,error:d}=o;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(o){if(ce(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,n,a;try{let o;if("email"in e){const{email:x,password:g,options:y}=e;let w=null,v=null;this.flowType==="pkce"&&([w,v]=await is(this.storage,this.storageKey)),o=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:x,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:w,code_challenge_method:v},xform:qt})}else if("phone"in e){const{phone:x,password:g,options:y}=e;o=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(a=y==null?void 0:y.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:qt})}else throw new bi("You must provide either an email or phone number and a password");const{data:c,error:d}=o;if(d||!c)return await tt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(o){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ce(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:c,options:d}=e;r=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Bp})}else if("phone"in e){const{phone:o,password:c,options:d}=e;r=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Bp})}else throw new bi("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const o=new _n;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,a,o,c,d,h,f,x,g,y;let w,v;if("message"in e)w=e.message,v=e.signature;else{const{chain:b,wallet:E,statement:j,options:_}=e;let S;if(rt())if(typeof E=="object")S=E;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")S=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=E}const P=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href),O=await S.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=hv(O[0]);let I=(n=_==null?void 0:_.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!I){const R=await S.request({method:"eth_chainId"});I=WS(R)}const B={domain:P.host,address:A,statement:j,uri:P.href,version:"1",chainId:I,nonce:(a=_==null?void 0:_.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=_==null?void 0:_.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(x=_==null?void 0:_.signInWithEthereum)===null||x===void 0?void 0:x.resources};w=qS(B),v=await S.request({method:"personal_sign",params:[VS(w),A]})}try{const{data:b,error:E}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:v},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:qt});if(E)throw E;if(!b||!b.session||!b.user){const j=new _n;return this._returnResult({data:{user:null,session:null},error:j})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:E})}catch(b){if(ce(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(e){var r,n,a,o,c,d,h,f,x,g,y,w;let v,b;if("message"in e)v=e.message,b=e.signature;else{const{chain:E,wallet:j,statement:_,options:S}=e;let P;if(rt())if(typeof j=="object")P=j;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))P=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=j}const O=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in P&&P.signIn){const A=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),_?{statement:_}:null));let I;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")I=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)I=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)v=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),b=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${O.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(a=(n=S==null?void 0:S.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((d=S==null?void 0:S.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((f=S==null?void 0:S.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((g=(x=S==null?void 0:S.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||g===void 0)&&g.length?["Resources",...S.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const A=await P.signMessage(new TextEncoder().encode(v),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=A}}try{const{data:E,error:j}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Cn(b)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:qt});if(j)throw j;if(!E||!E.session||!E.user){const _=new _n;return this._returnResult({data:{user:null,session:null},error:_})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:j})}catch(E){if(ce(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const r=await xn(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:o,error:c}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:qt});if(await tt(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const d=new _n;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:c})}catch(o){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ce(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:a,access_token:o,nonce:c}=e,d=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:qt}),{data:h,error:f}=d;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!h||!h.session||!h.user){const x=new _n;return this._returnResult({data:{user:null,session:null},error:x})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:f})}catch(r){if(ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,a,o,c;try{if("email"in e){const{email:d,options:h}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await is(this.storage,this.storageKey));const{error:g}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(n=h==null?void 0:h.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:x},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in e){const{phone:d,options:h}=e,{data:f,error:x}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:x})}throw new bi("You must provide either an email or phone number.")}catch(d){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ce(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var r,n;try{let a,o;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:c,error:d}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:qt});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,f=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(a){if(ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,n,a,o,c;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await is(this.storage,this.storageKey));const f=await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:MS});return!((o=f.data)===null||o===void 0)&&o.url&&rt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(d){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ce(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new bt;const{error:a}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(ce(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:o}=e,{error:c}=await he(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:n,type:a,options:o}=e,{data:c,error:d}=await he(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new bi("You must provide either an email or phone number and a type")}catch(r){if(ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await xn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Fc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const c=await xn(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Wc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=IS(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$r}):await this._useSession(async r=>{var n,a,o;const{data:c,error:d}=r;if(d)throw d;return!(!((n=c.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bt}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:$r})})}catch(r){if(ce(r))return nv(r)&&(await this._removeSession(),await tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:a,error:o}=n;if(o)throw o;if(!a.session)throw new bt;const c=a.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await is(this.storage,this.storageKey));const{data:f,error:x}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:c.access_token,xform:$r});if(x)throw x;return c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(n){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ce(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bt;const r=Date.now()/1e3;let n=r,a=!0,o=null;const{payload:c}=Hc(e.access_token);if(c.exp&&(n=c.exp,a=n<=r),a){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(ce(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:c,error:d}=r;if(d)throw d;e=(n=c.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new bt;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!rt())throw new _i("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _i(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new dd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _i("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new dd("No code detected.");const{data:_,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:o,refresh_token:c,expires_in:d,expires_at:h,token_type:f}=e;if(!o||!d||!c||!f)throw new _i("No session defined in URL");const x=Math.round(Date.now()/1e3),g=parseInt(d);let y=x+g;h&&(y=parseInt(h));const w=y-x;w*1e3<=ls&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${g}s`);const v=y-g;x-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,y,x):x-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,y,x);const{data:b,error:E}=await this._getUser(o);if(E)throw E;const j={provider_token:n,provider_refresh_token:a,access_token:o,expires_in:g,expires_at:y,refresh_token:c,token_type:f,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:j,redirectType:e.type},error:null})}catch(n){if(ce(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await xn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return this._returnResult({error:o});const c=(n=a.session)===null||n===void 0?void 0:n.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(rv(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=bS(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,a;try{const{data:{session:o},error:c}=r;if(c)throw c;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await is(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ce(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:a}=await this._useSession(async o=>{var c,d,h,f,x;const{data:g,error:y}=o;if(y)throw y;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",w,{headers:this.headers,jwt:(x=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&x!==void 0?x:void 0})});if(a)throw a;return rt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ce(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:o}}=r;if(a)throw a;const{options:c,provider:d,token:h,access_token:f,nonce:x}=e,g=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:h,access_token:f,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:qt}),{data:y,error:w}=g;return w?this._returnResult({data:{user:null,session:null},error:w}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new _n}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:w}))}catch(a){if(await tt(this.storage,`${this.storageKey}-code-verifier`),ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,a;const{data:o,error:c}=r;if(c)throw c;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await NS(async a=>(a>0&&await jS(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qt})),(a,o)=>{const c=200*Math.pow(2,a);return o&&_o(o)&&Date.now()+c-n<ls})}catch(n){if(this._debug(r,"error",n),ce(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),rt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await xn(this.storage,this.storageKey);if(a&&this.userStorage){let c=await xn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await cs(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Wc()}else if(a&&!a.user&&!a.user){const c=await xn(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await tt(this.storage,this.storageKey+"-user"),await cs(this.storage,this.storageKey,a)):a.user=Wc()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Fc;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Fc}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),_o(c)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(n,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new lv;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new bt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),ce(o)){const c={data:null,error:o};return _o(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,r)}catch(h){o.push(h)}});if(await Promise.all(c),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await tt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await cs(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=Rp(a);await cs(this.storage,this.storageKey,o)}else{const a=Rp(r);await cs(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await tt(this.storage,this.storageKey),await tt(this.storage,this.storageKey+"-code-verifier"),await tt(this.storage,this.storageKey+"-user"),this.userStorage&&await tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ls);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/ls);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ls}ms, refresh threshold is ${cd} ticks`),a<=cd&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ph)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,c]=await is(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);a.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;return o?this._returnResult({data:null,error:o}):await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,a;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:f}=await he(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&h.type==="totp"&&(!((a=h==null?void 0:h.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?QS(e.webauthn.credential_response):e1(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:JS(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:XS(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Hc(n.access_token);let c=null;o.aal&&(c=o.aal);let d=c;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(x=>x.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const f=o.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await he(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new bt})})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:a},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new bt});const c=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:a},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new bt});const c=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await he(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new bt})})}catch(e){if(ce(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await he(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new bt})})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(d=>d.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(d=>d.kid===e),n&&this.jwks_cached_at+hS>a)return n;const{data:o,error:c}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,n=o.keys.find(d=>d.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:w,error:v}=await this.getSession();if(v||!w.session)return this._returnResult({data:null,error:v});n=w.session.access_token}const{header:a,payload:o,signature:c,raw:{header:d,payload:h}}=Hc(n);r!=null&&r.allowExpired||AS(o.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!f){const{error:w}=await this.getUser(n);if(w)throw w;return{data:{claims:o,header:a,signature:c},error:null}}const x=OS(a.alg),g=await crypto.subtle.importKey("jwk",f,x,!0,["verify"]);if(!await crypto.subtle.verify(x,g,c,yS(`${d}.${h}`)))throw new Qo("Invalid JWT signature");return{data:{claims:o,header:a,signature:c},error:null}}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}};Th.nextInstanceID={};const c1=Eh,u1=Th,d1=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:c1,AuthApiError:tv,AuthClient:u1,AuthError:zs,AuthImplicitGrantRedirectError:_i,AuthInvalidCredentialsError:bi,AuthInvalidJwtError:Qo,AuthInvalidTokenResponseError:_n,AuthPKCEGrantCodeExchangeError:dd,AuthRetryableFetchError:Xo,AuthSessionMissingError:bt,AuthUnknownError:Ur,AuthWeakPasswordError:hd,CustomAuthError:Ar,GoTrueAdminApi:Eh,GoTrueClient:Th,NavigatorLockAcquireTimeoutError:uv,SIGN_OUT_SCOPES:wo,isAuthApiError:rv,isAuthError:ce,isAuthImplicitGrantRedirectError:sv,isAuthRetryableFetchError:_o,isAuthSessionMissingError:nv,isAuthWeakPasswordError:fS,lockInternals:jn,navigatorLock:dv,processLock:FS},Symbol.toStringTag,{value:"Module"})),mv=ta(d1);Object.defineProperty(Pl,"__esModule",{value:!0});Pl.SupabaseAuthClient=void 0;const h1=mv;class f1 extends h1.AuthClient{constructor(e){super(e)}}Pl.SupabaseAuthClient=f1;Object.defineProperty(Ko,"__esModule",{value:!0});const m1=W0,p1=ut,g1=Dy,x1=nS,so=Yy,y1=Jy,Hp=cn,v1=Pl;let b1=class{constructor(e,r,n){var a,o,c;this.supabaseUrl=e,this.supabaseKey=r;const d=(0,Hp.validateSupabaseUrl)(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:so.DEFAULT_DB_OPTIONS,realtime:so.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},so.DEFAULT_AUTH_OPTIONS),{storageKey:h}),global:so.DEFAULT_GLOBAL_OPTIONS},x=(0,Hp.applySettingDefaults)(n??{},f);this.storageKey=(a=x.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=x.global.headers)!==null&&o!==void 0?o:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=x.auth)!==null&&c!==void 0?c:{},this.headers,x.global.fetch),this.fetch=(0,y1.fetchWithAuth)(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new p1.PostgrestClient(new URL("rest/v1",d).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new x1.StorageClient(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new m1.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:o,storageKey:c,flowType:d,lock:h,debug:f,throwOnError:x},g,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new v1.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),g),storageKey:c,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:o,flowType:d,lock:h,debug:f,throwOnError:x,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new g1.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};Ko.default=b1;(function(t){var e=yn&&yn.__createBinding||(Object.create?function(x,g,y,w){w===void 0&&(w=y);var v=Object.getOwnPropertyDescriptor(g,y);(!v||("get"in v?!g.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return g[y]}}),Object.defineProperty(x,w,v)}:function(x,g,y,w){w===void 0&&(w=y),x[w]=g[y]}),r=yn&&yn.__exportStar||function(x,g){for(var y in x)y!=="default"&&!Object.prototype.hasOwnProperty.call(g,y)&&e(g,x,y)},n=yn&&yn.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const a=n(Ko);r(mv,t);var o=ut;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return o.PostgrestError}});var c=W0;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),r(Dy,t);var d=Ko;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return n(d).default}});const h=(x,g,y)=>new a.default(x,g,y);t.createClient=h;function f(){if(typeof window<"u"||typeof process>"u")return!1;const x=process.version;if(x==null)return!1;const g=x.match(/^v(\d+)\./);return g?parseInt(g[1],10)<=18:!1}f()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(bh);const pv=jd(bh),_1=mg({__proto__:null,default:pv},[bh]),{PostgrestError:SC,FunctionsHttpError:EC,FunctionsFetchError:PC,FunctionsRelayError:TC,FunctionsError:CC,FunctionRegion:AC,SupabaseClient:OC,createClient:w1,GoTrueAdminApi:LC,GoTrueClient:IC,AuthAdminApi:RC,AuthClient:DC,navigatorLock:BC,NavigatorLockAcquireTimeoutError:MC,lockInternals:zC,processLock:UC,SIGN_OUT_SCOPES:$C,AuthError:FC,AuthApiError:HC,AuthUnknownError:WC,CustomAuthError:VC,AuthSessionMissingError:qC,AuthInvalidTokenResponseError:KC,AuthInvalidCredentialsError:GC,AuthImplicitGrantRedirectError:ZC,AuthPKCEGrantCodeExchangeError:YC,AuthRetryableFetchError:JC,AuthWeakPasswordError:XC,AuthInvalidJwtError:QC,isAuthError:eA,isAuthApiError:tA,isAuthSessionMissingError:rA,isAuthImplicitGrantRedirectError:nA,isAuthRetryableFetchError:sA,isAuthWeakPasswordError:iA,RealtimePresence:aA,RealtimeChannel:oA,RealtimeClient:lA,REALTIME_LISTEN_TYPES:cA,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:uA,REALTIME_PRESENCE_LISTEN_EVENTS:dA,REALTIME_SUBSCRIBE_STATES:hA,REALTIME_CHANNEL_STATES:fA}=pv||_1,j1="https://bzbzcnyipynpkzaqauxd.supabase.co",N1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ6YnpjbnlpcHlucGt6YXFhdXhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2MDg3ODIsImV4cCI6MjA4MTE4NDc4Mn0.1CfLmFr80h9B0_tvicYxQSJUAmaWBBi3V5ZkD451r-g",C=w1(j1,N1,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0}}),G={login:async(t,e)=>{var r,n,a;try{const{data:o,error:c}=await C.auth.signInWithPassword({email:t,password:e||"demo123"});if(c)return console.error("Login error:",c.message),null;if(o.user){let{data:d}=await C.from("profiles").select("*").eq("id",o.user.id).single();if(!d){const{data:h,error:f}=await C.from("profiles").insert({id:o.user.id,email:o.user.email,name:((r=o.user.user_metadata)==null?void 0:r.name)||t.split("@")[0],role:"user",is_active:!0,balance:0}).select().single();f?console.error("Profile insert error:",f.message):d=h}return{token:(n=o.session)==null?void 0:n.access_token,user:{email:(d==null?void 0:d.email)||o.user.email,name:(d==null?void 0:d.name)||((a=o.user.user_metadata)==null?void 0:a.name)||"User",balance:(d==null?void 0:d.balance)||0,role:(d==null?void 0:d.role)||"user",isActive:(d==null?void 0:d.is_active)??!0,createdAt:d!=null&&d.created_at?new Date(d.created_at).getTime():Date.now(),trxAddress:d==null?void 0:d.trx_address,account_type:(d==null?void 0:d.account_type)||"personal",business_name:d==null?void 0:d.business_name,business_department_id:d==null?void 0:d.business_department_id}}}return null}catch(o){return console.error("Login error:",o),null}},register:async(t,e,r,n="personal",a)=>{var o;try{const{data:c,error:d}=await C.auth.signUp({email:e,password:r||"demo123",options:{data:{name:t,accountType:n,businessName:a}}});if(d)return console.error("Register error:",d.message),alert(d.message||"Registration failed"),null;if(c.user){let h=null;if(n==="business"&&a){const{data:y,error:w}=await C.from("departments").insert({name:a,category:"business",is_active:!0,color:"#FFD700",owner_id:c.user.id}).select().single();if(w)console.error("Department creation error:",w.message);else{h=y==null?void 0:y.id;const v=a.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,30)+"-"+Date.now().toString(36),{error:b}=await C.from("payment_panels").insert({department_id:h,public_slug:v,is_active:!0});b&&console.error("Payment panel creation error:",b.message)}}const f=y=>{const w=y.split("").reduce((b,E)=>(b<<5)-b+E.charCodeAt(0),0);return`NUSD-${Math.abs(w).toString(36).toUpperCase().slice(0,6)}`},x={id:c.user.id,email:c.user.email,name:n==="business"?a:t,role:"user",is_active:!0,balance:0,account_type:n,business_role:n==="business"?"owner":null,nusd_code:f(e)};n==="business"&&(x.business_name=a,x.business_department_id=h);const{error:g}=await C.from("profiles").upsert(x,{onConflict:"id"});return g&&console.error("Profile creation error:",g.message),{token:(o=c.session)==null?void 0:o.access_token,user:{email:c.user.email,name:n==="business"?a:t,balance:0,role:"user",isActive:!0,accountType:n,businessName:n==="business"?a:void 0}}}return null}catch(c){return console.error("Register error:",c),null}},logout:async()=>{await C.auth.signOut()},getUser:async t=>{try{const{data:e}=await C.from("profiles").select("*").eq("email",t).single();if(e)return{email:e.email,name:e.name,balance:e.balance||0,role:e.role||"user",isActive:e.is_active,createdAt:new Date(e.created_at).getTime(),trxAddress:e.trx_address,account_type:e.account_type||"personal",business_name:e.business_name,business_department_id:e.business_department_id}}catch(e){console.error("Get user error:",e)}return null},getNotifications:async t=>{try{const{data:e}=await C.from("profiles").select("id").eq("email",t).single();if(!e)return[];const{data:r}=await C.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return r||[]}catch{return[]}},markNotificationRead:async t=>{try{await C.from("notifications").update({is_read:!0}).eq("id",t)}catch(e){console.error("Mark notification read error:",e)}},getTransactions:async t=>{try{if(!t)return[];const{data:e,error:r}=await C.from("profiles").select("id").eq("email",t).single();if(r)return console.error("getTransactions profile error:",r.message),[];if(!e)return[];const{data:n,error:a}=await C.from("transactions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return a?(console.error("getTransactions tx error:",a.message),[]):(n||[]).map(o=>{var c,d;return{id:o.id,type:((c=o.type)==null?void 0:c.toLowerCase())||"unknown",amount:o.amount,currency:"NUSD",date:o.created_at,status:((d=o.status)==null?void 0:d.toLowerCase())||"pending",title:`${o.type||"Unknown"} Transaction`,network:o.network,txHash:o.tx_hash}})}catch(e){return console.error("getTransactions exception:",e.message),[]}},getBankAccounts:async t=>{try{const{data:e}=await C.from("profiles").select("id").eq("email",t).single();if(!e)return[];const{data:r}=await C.from("bank_accounts").select("*").eq("user_id",e.id);return(r||[]).map(n=>({id:n.id,bankName:n.bank_name,iban:n.iban,accountName:n.account_name,addedAt:n.added_at}))}catch{return[]}},addBankAccount:async(t,e,r,n)=>{try{const{data:a}=await C.from("profiles").select("id").eq("email",t).single();if(!a)return null;const{data:o,error:c}=await C.from("bank_accounts").insert({user_id:a.id,bank_name:e,iban:r,account_name:n}).select().single();return c?(console.error("Add bank account error:",c),null):{id:o.id,bankName:o.bank_name,iban:o.iban,accountName:o.account_name}}catch{return null}},deleteBankAccount:async(t,e)=>{try{const{error:r}=await C.from("bank_accounts").delete().eq("id",e);return!r}catch{return null}},createWithdrawal:async(t,e,r=!1,n="withdraw",a,o)=>{try{const{data:c,error:d}=await C.functions.invoke("create-withdrawal",{body:{amount:e,network:a,address:o}});if(d)throw d;return{success:!0,transaction:c}}catch(c){return console.error("Withdrawal error:",c),c.context&&c.context.json&&c.context.json().then(d=>console.error("Edge Function Error Body:",JSON.stringify(d,null,2))),{success:!1,error:c.message||"Withdrawal failed"}}},notifyDeposit:async(t,e,r,n,a)=>{try{const{data:o}=await C.from("profiles").select("id").eq("email",t).single();if(!o)return{success:!1,error:"User not found"};const{error:c}=await C.from("transactions").insert({user_id:o.id,type:"DEPOSIT",amount:e,status:"PENDING",network:r,tx_hash:n});return c?{success:!1,error:c.message}:{success:!0}}catch{return{success:!1,error:"Connection error"}}},getPendingApprovals:async t=>{try{const{data:e}=await C.from("profiles").select("id").eq("email",t).single();return e?[]:[]}catch{return[]}},getPublicAgents:async()=>{try{const{data:t}=await C.from("merchants").select("*").eq("is_agent",!0).eq("is_active",!0);return t||[]}catch{return[]}},getMerchantBySlug:async t=>{try{const{data:e}=await C.from("merchants").select("*, departments(*)").eq("slug",t).single();return e}catch{return null}},getAllUsers:async()=>{try{const{data:t}=await C.from("profiles").select("*").order("created_at",{ascending:!1});return(t||[]).map(e=>({email:e.email,name:e.name,balance:e.balance,role:e.role,isActive:e.is_active,createdAt:new Date(e.created_at).getTime()}))}catch{return[]}},getAllTransactions:async()=>{try{const{data:t}=await C.from("transactions").select("*, profiles(email, name)").order("created_at",{ascending:!1});return(t||[]).map(e=>{var r,n;return{id:e.id,type:e.type,amount:e.amount,status:e.status,network:e.network,txHash:e.tx_hash,timestamp:e.created_at,userEmail:(r=e.profiles)==null?void 0:r.email,userName:(n=e.profiles)==null?void 0:n.name}})}catch{return[]}},getSystemStats:async()=>{try{const{data:t}=await C.from("profiles").select("balance, is_active"),{data:e}=await C.from("transactions").select("type, amount, status"),{data:r}=await C.from("departments").select("id"),{data:n}=await C.from("vaults").select("balance"),a=(t==null?void 0:t.reduce((b,E)=>b+(E.balance||0),0))||0,o=(t==null?void 0:t.filter(b=>b.is_active).length)||0,c=(n==null?void 0:n.reduce((b,E)=>b+(E.balance||0),0))||0,d=e||[],h=d.length,f=d.filter(b=>b.status==="PENDING").length,g=d.filter(b=>b.type==="DEPOSIT"||b.amount>0&&b.status==="COMPLETED").reduce((b,E)=>b+Math.abs(E.amount),0),w=d.filter(b=>b.type==="WITHDRAW"||b.type==="P2P_SELL"||b.amount<0&&b.status==="COMPLETED").reduce((b,E)=>b+Math.abs(E.amount),0),v=d.reduce((b,E)=>b+Math.abs(E.amount||0),0);return{totalUserBalance:a,totalVaultBalance:c,totalDeposits:g,totalWithdrawals:w,vaultDeposits:0,vaultWithdrawals:0,pendingTransactions:f,totalTransactions:h,activeUsers:o,departmentCount:(r==null?void 0:r.length)||0,totalRevenue:0,totalVolume:v}}catch(t){return console.error("getSystemStats error:",t),{totalUserBalance:0,totalVaultBalance:0,totalDeposits:0,totalWithdrawals:0,vaultDeposits:0,vaultWithdrawals:0,pendingTransactions:0,totalTransactions:0,activeUsers:0,departmentCount:0,totalRevenue:0,totalVolume:0}}},toggleUserStatus:async t=>{try{const{data:e}=await C.from("profiles").select("id, is_active").eq("email",t).single();return e?(await C.from("profiles").update({is_active:!e.is_active}).eq("id",e.id),{success:!0}):{success:!1}}catch{return{success:!1}}},toggleUserRole:async t=>{try{const{data:e}=await C.from("profiles").select("id, role").eq("email",t).single();if(!e)return{success:!1};const r=e.role==="admin"?"user":"admin";return await C.from("profiles").update({role:r}).eq("id",e.id),{success:!0,newRole:r}}catch{return{success:!1}}},updateUserBalance:async(t,e)=>{try{const{error:r}=await C.from("profiles").update({balance:e}).eq("email",t);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r.message}}},toggleDepartmentStatus:async t=>{try{const{data:e}=await C.from("departments").select("id, is_active").eq("id",t).single();return e?(await C.from("departments").update({is_active:!e.is_active}).eq("id",t),{success:!0,newStatus:!e.is_active}):{success:!1}}catch{return{success:!1}}},deletePaymentPanel:async t=>{try{const{error:e}=await C.from("payment_panels").delete().eq("id",t);return e?{success:!1,error:e.message}:{success:!0}}catch(e){return{success:!1,error:e.message}}},toggleVaultStatus:async t=>{try{const{data:e}=await C.from("vaults").select("id, is_active").eq("id",t).single();return e?(await C.from("vaults").update({is_active:!e.is_active}).eq("id",t),{success:!0,newStatus:!e.is_active}):{success:!1}}catch{return{success:!1}}},checkBlockchainDeposits:async()=>{try{const{data:t,error:e}=await C.functions.invoke("check-deposits");return e?(console.error("Check deposits error:",e),{success:!1,error:e.message}):t||{success:!0}}catch(t){return{success:!1,error:t.message}}},processBlockchainWithdrawal:async(t,e)=>{try{const{data:r,error:n}=await C.functions.invoke("process-withdrawal",{body:{withdrawal_id:t,vault_id:e}});return n?(console.error("Process withdrawal error:",n),{success:!1,error:n.message}):r||{success:!0}}catch(r){return{success:!1,error:r.message}}},approveTransaction:async t=>{try{const{data:e,error:r}=await C.functions.invoke("approve-transaction",{body:{transactionId:t,action:"approve"}});return r?(console.error("Approve error:",r),!1):(e==null?void 0:e.success)||!1}catch(e){return console.error("Approve exception:",e),!1}},rejectTransaction:async t=>{try{const{data:e,error:r}=await C.functions.invoke("approve-transaction",{body:{transactionId:t,action:"reject"}});return r?(console.error("Reject error:",r),!1):(e==null?void 0:e.success)||!1}catch(e){return console.error("Reject exception:",e),!1}},getTransactionLogs:async t=>{try{const{data:e,error:r}=await C.from("transaction_audit_logs").select("*").eq("transaction_id",t).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(e){return console.error("Audit log fetch error:",e),[]}},getDepartments:async()=>{try{const{data:t,error:e}=await C.from("departments").select(`
          *,
          members:department_members(count)
        `).order("created_at",{ascending:!1});return e?(console.error("getDepartments error:",e),[]):t||[]}catch(t){return console.error("getDepartments exception:",t),[]}},createDepartment:async t=>{try{const{data:e,error:r}=await C.functions.invoke("create-department",{body:t});if(r)throw r;return e}catch(e){return console.error("createDepartment fully detailed error:",e),e.context&&e.context.json&&e.context.json().then(r=>console.error("Edge Function Error Body:",JSON.stringify(r,null,2))),{success:!1,error:e}}},updateDepartment:async(t,e)=>{try{const{data:r,error:n}=await C.from("departments").update({name:e.name,color:e.color,category:e.category,commission_type:e.commissionType,commission_rate:e.commissionRate}).eq("id",t).select().single();return n?null:r}catch{return null}},deleteDepartment:async t=>{try{const{error:e}=await C.from("departments").delete().eq("id",t);return!e}catch{return!1}},getDepartment:async t=>{try{const{data:e,error:r}=await C.from("departments").select(`
          *,
          panels:payment_panels(*),
          vaults(*),
          owner:profiles!departments_owner_id_fkey(id, email, full_name, balance, nusd_code, account_type)
        `).eq("id",t).single();if(r)throw r;return e}catch(e){return console.error("getDepartment error:",e),null}},createPaymentPanel:async t=>{try{const{data:e,error:r}=await C.functions.invoke("create-payment-panel",{body:t});if(r)throw r;return e}catch(e){return console.error("createPaymentPanel error:",e),{success:!1,error:e}}},getPanelBySlug:async t=>{try{const{data:e,error:r}=await C.from("payment_panels").select(`
                *,
                department:departments(name)
            `).eq("public_slug",t).single();if(r)throw r;return e}catch(e){return console.error("getPanelBySlug error:",e),null}},payViaPanel:async(t,e)=>{try{const{data:r,error:n}=await C.functions.invoke("create-transaction-from-panel",{body:{slug:t,amount:e}});if(n)throw n;return r}catch(r){return console.error("payViaPanel error:",r),{success:!1,error:r}}},getVaults:async()=>{try{const{data:t}=await C.from("vaults").select("*, departments(name, color)");return{vaults:t||[]}}catch{return{vaults:[]}}},getVaultByDepartment:async t=>{try{const{data:e,error:r}=await C.from("vaults").select("*").eq("department_id",t).eq("is_primary",!0).single();return r?(console.error("getVaultByDepartment error:",r),null):e}catch(e){return console.error("getVaultByDepartment exception:",e),null}},getAdminVaults:async()=>{try{const{data:t,error:e}=await C.from("vaults").select("*");return e?(console.error("Vaults fetch error:",e),{vaults:[],ledger:[]}):{vaults:t||[],ledger:[]}}catch(t){return console.error("Vaults exception:",t),{vaults:[],ledger:[]}}},getAllRequests:async()=>[],getAdminLogs:async t=>{try{let e=C.from("admin_logs").select("*").order("created_at",{ascending:!1}).limit((t==null?void 0:t.limit)||100);t!=null&&t.action_type&&(e=e.eq("action_type",t.action_type)),t!=null&&t.offset&&(e=e.range(t.offset,t.offset+((t==null?void 0:t.limit)||100)-1));const{data:r,error:n}=await e;return n?(console.error("getAdminLogs error:",n),[]):(r||[]).map(a=>{var o;return{id:a.id,formattedTime:new Date(a.created_at).toLocaleString("tr-TR"),type:((o=a.action_type)==null?void 0:o.toUpperCase())||"SYSTEM",action:a.action,description:a.description||a.action,user:a.user_email||"System",userName:a.user_name,status:a.status,metadata:a.metadata,targetType:a.target_type,targetId:a.target_id,createdAt:a.created_at}})}catch(e){return console.error("getAdminLogs error:",e),[]}},resetDB:async()=>{},cryptoDeposit:async()=>{},findMatches:async()=>null,lockMatch:async()=>!1,markPaymentSent:async(t,e,r,n)=>{},approveRelease:async()=>{},manualVaultDeposit:async(t,e,r,n,a)=>{try{const{data:o,error:c}=await C.from("vaults").select("balance").eq("id",t).single();if(c||!o)return console.error("Vault not found:",c),!1;const{error:d}=await C.from("vaults").update({balance:(o.balance||0)+e}).eq("id",t);if(d)return console.error("Failed to update vault balance:",d),!1;if(a&&r&&r!=="External Transfer"){const{data:h}=await C.from("profiles").select("id, balance").eq("email",r).single();h&&(await C.from("profiles").update({balance:(h.balance||0)+e}).eq("id",h.id),await C.from("transactions").insert({user_id:h.id,type:"DEPOSIT",amount:e,status:"COMPLETED",network:n}))}return!0}catch(o){return console.error("manualVaultDeposit error:",o),!1}},getAvailableVaults:async()=>{try{const{data:t,error:e}=await C.from("vaults").select("*").is("department_id",null);if(e)throw e;return t||[]}catch(t){return console.error("getAvailableVaults error:",t),[]}},assignVault:async(t,e)=>{try{const{data:r,error:n}=await C.functions.invoke("manage-vault",{body:{action:"assign",vault_id:t,department_id:e}});if(n)throw n;return!0}catch(r){return console.error("assignVault error:",r),!1}},unassignVault:async t=>{try{const{data:e,error:r}=await C.functions.invoke("manage-vault",{body:{action:"unassign",vault_id:t}});if(r)throw r;return!0}catch(e){return console.error("unassignVault error:",e),!1}},setPrimaryVault:async(t,e)=>{try{const{data:r,error:n}=await C.functions.invoke("manage-vault",{body:{action:"set_primary",vault_id:t,department_id:e}});if(n)throw n;return!0}catch(r){return console.error("setPrimaryVault error:",r),!1}},createP2POrder:async(t,e,r,n,a,o)=>{try{const c=t==="BUY"?"P2P_BUY":"P2P_SELL",{data:d,error:h}=await C.functions.invoke("create-withdrawal",{body:{amount:e,type:c,memo_code:c==="P2P_SELL"?`${a} - ${n}`:void 0,network:"P2P"}});let f=d;if(d&&d.error)throw{message:d.error,context:{json:()=>Promise.resolve(d)}}}catch(c){console.error("createP2POrder error:",c);let d=null,h="Unknown";if(c.context&&typeof c.context.json=="function")try{d=await c.context.json()}catch{}if(!d&&c.response&&typeof c.response.json=="function")try{d=await c.response.json()}catch{}if(d)console.error("Edge Function Error Body:",JSON.stringify(d,null,2)),h=d.stage||"Unknown",alert(`Sistem Hatas: ${d.error||"Bilinmeyen Hata"} (Stage: ${h})`);else{const f=JSON.stringify(c,Object.getOwnPropertyNames(c));console.error("Raw Error Object:",f),alert(`lem Baarsz: ${c.message||"Bilinmeyen Hata"} 

Detay: ${f.substring(0,200)}`)}return{success:!1,error:c.message}}},createP2POrderNew:async(t,e,r,n,a)=>{try{const{data:o,error:c}=await C.functions.invoke("p2p-create-order",{body:{side:t,amount_usd:e,iban:r,bank_name:n,account_name:a}});return c?(console.error("P2P create order error:",c),{success:!1,error:c.message||"Edge function error"}):(o==null?void 0:o.success)===!1?{success:!1,error:o.error||"Order creation failed"}:{success:!0,order:(o==null?void 0:o.order)||o}}catch(o){return console.error("P2P create order exception:",o),{success:!1,error:o.message||"Network error"}}},matchP2POrder:async t=>{try{const{data:e,error:r}=await C.functions.invoke("p2p-match",{body:{orderId:t}});return r?(console.error("P2P match error:",r),{success:!1,error:r.message||"Match error"}):(e==null?void 0:e.success)===!1?{success:!1,error:e.error||"No match found",waiting:e.waiting}:{success:!0,match:(e==null?void 0:e.match)||e}}catch(e){return console.error("P2P match exception:",e),{success:!1,error:e.message||"Network error"}}},getPendingWithdrawals:async t=>{try{const{data:e,error:r}=await C.functions.invoke("get-pending-withdrawals",{body:{targetAmount:t||0}});return r?(console.error("Get pending withdrawals error:",r),[]):(e==null?void 0:e.withdrawals)||[]}catch(e){return console.error("Get pending withdrawals exception:",e),[]}},approveWithdrawal:async t=>{try{const{error:e}=await C.from("transactions").update({status:"approved"}).eq("id",t);if(e)throw e;return{success:!0}}catch(e){return console.error("Approve withdrawal error:",e),{success:!1,error:e.message}}},rejectWithdrawal:async(t,e)=>{try{const{error:r}=await C.from("transactions").update({status:"rejected",notes:e}).eq("id",t);if(r)throw r;return{success:!0}}catch(r){return console.error("Reject withdrawal error:",r),{success:!1,error:r.message}}},markP2PPaid:async t=>{try{const{data:e,error:r}=await C.functions.invoke("p2p-mark-paid",{body:{orderId:t}});return r?(console.error("P2P mark paid error:",r),{success:!1,error:r.message}):e}catch(e){return console.error("P2P mark paid exception:",e),{success:!1,error:e.message}}},buyerConfirmP2P:async(t,e)=>{try{const{data:r,error:n}=await C.functions.invoke("p2p-buyer-confirm",{body:{orderId:t,confirm:e}});return n?(console.error("P2P buyer confirm error:",n),{success:!1,error:n.message}):r}catch(r){return console.error("P2P buyer confirm exception:",r),{success:!1,error:r.message}}},adminConfirmP2P:async(t,e)=>{try{const{data:r,error:n}=await C.functions.invoke("p2p-admin-confirm",{body:{orderId:t,confirm:e}});return n?(console.error("P2P admin confirm error:",n),{success:!1,error:n.message}):r}catch(r){return console.error("P2P admin confirm exception:",r),{success:!1,error:r.message}}},getP2POrderStatus:async t=>{try{const{data:e,error:r}=await C.from("p2p_orders").select("*").eq("id",t).single();return r?(console.error("P2P order status error:",r),null):e}catch(e){return console.error("P2P order status exception:",e),null}},getActiveP2POrder:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return null;const{data:e,error:r}=await C.from("p2p_orders").select("id, status, amount_usd, created_at").eq("seller_id",t.id).in("status",["OPEN","PAID"]).order("created_at",{ascending:!1}).limit(1);if(r&&console.error("getActiveP2POrder SELL error:",r),e&&e.length>0)return console.log("Active SELL order found:",e[0]),{...e[0],type:"SELL"};const{data:n,error:a}=await C.from("p2p_orders").select("id, status, amount_usd, created_at").eq("buyer_id",t.id).in("status",["OPEN","PAID"]).order("created_at",{ascending:!1}).limit(1);return a&&console.error("getActiveP2POrder BUY error:",a),n&&n.length>0?(console.log("Active BUY order found:",n[0]),{...n[0],type:"BUY"}):(console.log("No active P2P orders found"),null)}catch(t){return console.error("getActiveP2POrder error:",t),null}},cancelP2POrder:async t=>{try{const{data:e,error:r}=await C.functions.invoke("p2p-cancel-order",{body:{orderId:t}});return r?(console.error("Cancel P2P order error:",r),{success:!1,error:r.message}):(e==null?void 0:e.success)===!1?{success:!1,error:e.error||"Cancel failed"}:{success:!0,order:(e==null?void 0:e.order)||e}}catch(e){return console.error("Cancel P2P order exception:",e),{success:!1,error:e.message}}},getMyP2POrders:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return[];const{data:e,error:r}=await C.from("p2p_orders").select("*").or(`buyer_id.eq.${t.id},seller_id.eq.${t.id}`).order("created_at",{ascending:!1});if(r)return console.error("My P2P orders error:",r),[];const n=new Set;return(e||[]).filter(o=>{if(o.matched_order_id){const c=[o.id,o.matched_order_id].sort().join("|");if(n.has(c))return!1;n.add(c)}return!0})}catch(t){return console.error("My P2P orders exception:",t),[]}},getP2PEvents:async t=>{try{const{data:e,error:r}=await C.from("p2p_events").select("*").eq("order_id",t).order("created_at",{ascending:!0});return r?(console.error("P2P events error:",r),[]):e||[]}catch(e){return console.error("P2P events exception:",e),[]}},markP2PPaymentSent:async()=>({success:!1}),confirmP2PPaymentReceived:async()=>({success:!1}),getMyP2PActivity:async()=>({orders:[],trades:[]}),getAllMerchants:async()=>[],createMerchant:async()=>({success:!1}),updateMerchant:async()=>({success:!1}),deleteMerchant:async()=>!1,getDepartmentMerchant:async()=>null,p2pAction:async(t,e={})=>{try{const{data:r,error:n}=await C.functions.invoke("p2p-action",{body:{action:t,...e}});return n?(console.error("P2P action error:",n),{success:!1,error:n.message||"Edge function error"}):r||{success:!1,error:"No response"}}catch(r){return console.error("P2P action exception:",r),{success:!1,error:r.message||"Network error"}}},getProfile:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return null;const{data:e,error:r}=await C.from("profiles").select("*, business_department_id, business_name, account_type").eq("id",t.id).single();if(r)throw r;return e}catch(t){return console.error("getProfile error:",t),null}},getDepartmentTransactions:async t=>{try{const{data:e}=await C.from("departments").select("owner_id").eq("id",t).single();if(!(e!=null&&e.owner_id))return console.log("No owner_id for department:",t),[];const{data:r,error:n}=await C.from("transactions").select("*").eq("user_id",e.owner_id).order("created_at",{ascending:!1}).limit(50);if(n)throw n;return r||[]}catch(e){return console.error("getDepartmentTransactions error:",e),[]}},internalTransfer:async(t,e)=>{try{const{data:r,error:n}=await C.functions.invoke("internal-transfer",{body:{recipient_code:t,amount:e}});if(n)throw n;return r||{success:!1,error:"No response"}}catch(r){return console.error("internalTransfer error:",r),{success:!1,error:r.message||"Transfer failed"}}},updatePanelStatus:async(t,e)=>{try{const{data:r,error:n}=await C.from("payment_panels").update({is_active:e}).eq("id",t).select().single();if(n)throw n;return{success:!0,panel:r}}catch(r){return console.error("updatePanelStatus error:",r),{success:!1,error:r.message}}},createBusinessAccount:async t=>{try{const{data:e,error:r}=await C.functions.invoke("create-business-account",{body:{businessName:t}});if(r)throw r;return e||{success:!1,error:"No response"}}catch(e){return console.error("createBusinessAccount error:",e),{success:!1,error:e.message||"Failed to create business account"}}},getAllP2POrders:async()=>{try{const{data:t,error:e}=await C.from("p2p_orders").select(`
          *,
          buyer:profiles!p2p_orders_buyer_id_fkey(email, name),
          seller:profiles!p2p_orders_seller_id_fkey(email, name)
        `).order("created_at",{ascending:!1});if(e){console.error("getAllP2POrders error:",e);const{data:a}=await C.from("p2p_orders").select("*").order("created_at",{ascending:!1});return a||[]}const r=new Set;return(t||[]).filter(a=>{if(a.matched_order_id){const o=[a.id,a.matched_order_id].sort().join("|");if(r.has(o))return!1;r.add(o)}return!0})}catch(t){return console.error("getAllP2POrders error:",t),[]}},adminForceCompleteP2POrder:async t=>{try{const{data:e,error:r}=await C.functions.invoke("p2p-admin-action",{body:{action:"forceComplete",orderId:t}});return r?(console.error("Admin force complete error:",r),{success:!1,error:r.message}):e}catch(e){return console.error("adminForceCompleteP2POrder error:",e),{success:!1,error:e.message}}},adminForceCancelP2POrder:async t=>{try{const{data:e,error:r}=await C.functions.invoke("p2p-admin-action",{body:{action:"forceCancel",orderId:t}});return r?(console.error("Admin force cancel error:",r),{success:!1,error:r.message}):e}catch(e){return console.error("adminForceCancelP2POrder error:",e),{success:!1,error:e.message}}},getExchangeRate:async()=>{try{const{data:t,error:e}=await C.from("exchange_rates").select("rate, buy_rate, sell_rate, spread, fetched_at").eq("pair","USDT/TRY").order("fetched_at",{ascending:!1}).limit(1).single();return e?(console.error("getExchangeRate error:",e),{rate:42.5,buy_rate:42.6,sell_rate:42.4,spread:.1,fetched_at:new Date().toISOString(),is_fallback:!0}):{rate:t.rate,buy_rate:t.buy_rate,sell_rate:t.sell_rate,spread:t.spread,fetched_at:t.fetched_at,is_fallback:!1}}catch(t){return console.error("getExchangeRate exception:",t),{rate:42.5,buy_rate:42.6,sell_rate:42.4,spread:.1,fetched_at:new Date().toISOString(),is_fallback:!0}}},updateExchangeRate:async()=>{try{return await(await fetch("https://bzbzcnyipynpkzaqauxd.supabase.co/functions/v1/update-exchange-rate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ6YnpjbnlpcHlucGt6YXFhdXhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2MDg3ODIsImV4cCI6MjA4MTE4NDc4Mn0.1CfLmFr80h9B0_tvicYxQSJUAmaWBBi3V5ZkD451r-g"}})).json()}catch(t){return console.error("updateExchangeRate error:",t),{success:!1,error:t.message}}},getNotificationHistory:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return[];const{data:e,error:r}=await C.from("notifications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(15);return r?(console.error("getNotificationHistory error:",r),[]):e||[]}catch(t){return console.error("getNotificationHistory exception:",t),[]}},createNotification:async(t,e,r,n={})=>{try{const{data:{user:a}}=await C.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};const{data:o,error:c}=await C.from("notifications").insert({user_id:a.id,type:t,title:e,message:r,data:n}).select().single();if(c)return console.error("createNotification insert error:",c),{success:!1,error:c.message};const{data:d}=await C.from("notifications").select("id").eq("user_id",a.id).order("created_at",{ascending:!1});if(d&&d.length>15){const h=d.slice(15).map(f=>f.id);await C.from("notifications").delete().in("id",h)}return{success:!0,notification:o}}catch(a){return console.error("createNotification exception:",a),{success:!1,error:a.message}}},markNotificationAsRead:async t=>{try{const{error:e}=await C.from("notifications").update({read:!0}).eq("id",t);return e?(console.error("markNotificationAsRead error:",e),{success:!1,error:e.message}):{success:!0}}catch(e){return console.error("markNotificationAsRead exception:",e),{success:!1,error:e.message}}},markAllNotificationsAsRead:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return{success:!1,error:"Not authenticated"};const{error:e}=await C.from("notifications").update({read:!0}).eq("user_id",t.id).eq("read",!1);return e?(console.error("markAllNotificationsAsRead error:",e),{success:!1,error:e.message}):{success:!0}}catch(t){return console.error("markAllNotificationsAsRead exception:",t),{success:!1,error:t.message}}},getUnreadNotificationCount:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return 0;const{count:e,error:r}=await C.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",t.id).eq("read",!1);return r?(console.error("getUnreadNotificationCount error:",r),0):e||0}catch(t){return console.error("getUnreadNotificationCount exception:",t),0}},inviteBusinessMember:async(t,e="staff")=>{try{const{data:r,error:n}=await C.functions.invoke("invite-business-member",{body:{email:t,role:e}});return n?{success:!1,error:n.message}:{success:!0,...r}}catch(r){return{success:!1,error:r.message}}},acceptBusinessInvite:async t=>{try{const{data:e,error:r}=await C.functions.invoke("accept-business-invite",{body:{invite_code:t}});return r?{success:!1,error:r.message}:{success:!0,...e}}catch(e){return{success:!1,error:e.message}}},getBusinessTeam:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return{success:!1,error:"Unauthorized"};const{data:e}=await C.from("profiles").select("id, parent_business_id, business_role").eq("id",t.id).single(),r=(e==null?void 0:e.parent_business_id)||(e==null?void 0:e.id),{data:n,error:a}=await C.from("profiles").select("id, email, name, business_role, created_at").or(`id.eq.${r},parent_business_id.eq.${r}`);return a?{success:!1,error:a.message}:{success:!0,members:n||[]}}catch(t){return{success:!1,error:t.message}}},getBusinessInvites:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return{success:!1,error:"Unauthorized"};const{data:e,error:r}=await C.from("business_invites").select("*").eq("business_id",t.id).eq("status","pending");return r?{success:!1,error:r.message}:{success:!0,invites:e||[]}}catch(t){return{success:!1,error:t.message}}},cancelBusinessInvite:async t=>{try{const{error:e}=await C.from("business_invites").update({status:"cancelled"}).eq("id",t);return e?{success:!1,error:e.message}:{success:!0}}catch(e){return{success:!1,error:e.message}}},activateBusinessPanel:async(t,e=!0)=>{try{const{data:r,error:n}=await C.functions.invoke("activate-business-panel",{body:{userId:t,activate:e}});return n?(console.error("activateBusinessPanel error:",n),{success:!1,error:n.message}):r||{success:!0}}catch(r){return console.error("activateBusinessPanel exception:",r),{success:!1,error:r.message}}},createPortalRequest:async(t,e)=>{try{const{data:{user:r}}=await C.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:n}=await C.from("portal_requests").insert({department_id:t,requested_by:r.id,name:e,status:"pending"});return n?(console.error("createPortalRequest error:",n),{success:!1,error:n.message}):{success:!0}}catch(r){return{success:!1,error:r.message}}},getPortalRequests:async t=>{try{const{data:e,error:r}=await C.from("portal_requests").select("*, requester:profiles!portal_requests_requested_by_fkey(email, name)").eq("department_id",t).order("created_at",{ascending:!1});return r?(console.error("getPortalRequests error:",r),[]):e||[]}catch{return[]}},approvePortalRequest:async t=>{try{const{data:e,error:r}=await C.from("portal_requests").select("*").eq("id",t).single();if(r||!e)return{success:!1,error:"Request not found"};const n=e.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,30)+"-"+Date.now().toString(36),{error:a}=await C.from("payment_panels").insert({department_id:e.department_id,name:e.name,public_slug:n,is_active:!0});if(a)return console.error("Panel creation error:",a),{success:!1,error:a.message};const{data:{user:o}}=await C.auth.getUser();return await C.from("portal_requests").update({status:"approved",reviewed_at:new Date().toISOString(),reviewed_by:o==null?void 0:o.id}).eq("id",t),{success:!0}}catch(e){return{success:!1,error:e.message}}},rejectPortalRequest:async t=>{try{const{data:{user:e}}=await C.auth.getUser(),{error:r}=await C.from("portal_requests").update({status:"rejected",reviewed_at:new Date().toISOString(),reviewed_by:e==null?void 0:e.id}).eq("id",t);return r?{success:!1,error:r.message}:{success:!0}}catch(e){return{success:!1,error:e.message}}},submitVerification:async(t,e,r,n)=>{try{const{data:{user:a}}=await C.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};const{data:o}=await C.from("profiles").select("name, email").eq("id",a.id).single(),c=`${a.id}/${t}_${Date.now()}_1.${e.name.split(".").pop()}`,{error:d}=await C.storage.from("verification-docs").upload(c,e);if(d)return console.error("Upload error 1:",d),{success:!1,error:"Belge yklenemedi"};let h=null;if(r){h=`${a.id}/${t}_${Date.now()}_2.${r.name.split(".").pop()}`;const{error:y}=await C.storage.from("verification-docs").upload(h,r);y&&console.error("Upload error 2:",y)}const{data:f,error:x}=await C.from("verification_submissions").insert({user_id:a.id,user_email:(o==null?void 0:o.email)||a.email,user_name:o==null?void 0:o.name,submission_type:t,document_url:c,document_url_2:h,amount:t==="deposit"?n:null,status:"pending"}).select().single();if(x)return console.error("Insert error:",x),{success:!1,error:"Bavuru oluturulamad"};const{error:g}=await C.functions.invoke("send-telegram-verification",{body:{submission_id:f.id,submission_type:t,user_email:(o==null?void 0:o.email)||a.email,user_name:o==null?void 0:o.name,document_url:c,document_url_2:h,amount:n}});return g&&console.error("Telegram error:",g),{success:!0,submission_id:f.id}}catch(a){return console.error("submitVerification error:",a),{success:!1,error:a.message}}},getVerificationStatus:async t=>{try{const{data:{user:e}}=await C.auth.getUser();if(!e)return null;let r=C.from("verification_submissions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});t&&(r=r.eq("submission_type",t));const{data:n,error:a}=await r.limit(1).single();return a&&a.code!=="PGRST116"&&console.error("getVerificationStatus error:",a),n}catch(e){return console.error("getVerificationStatus error:",e),null}},getVerificationHistory:async t=>{try{const{data:{user:e}}=await C.auth.getUser();if(!e)return[];let r=C.from("verification_submissions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});t&&(r=r.eq("submission_type",t));const{data:n,error:a}=await r.limit(20);return a?(console.error("getVerificationHistory error:",a),[]):n||[]}catch(e){return console.error("getVerificationHistory error:",e),[]}},isKYCVerified:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return!1;const{data:e}=await C.from("profiles").select("kyc_verified").eq("id",t.id).single();return(e==null?void 0:e.kyc_verified)||!1}catch{return!1}},getUserLimits:async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return null;const{data:e,error:r}=await C.rpc("get_user_limits",{p_user_id:t.id});return r?(console.error("getUserLimits error:",r),null):(e==null?void 0:e[0])||null}catch(t){return console.error("getUserLimits error:",t),null}},checkTransactionLimit:async(t,e=!1)=>{try{const{data:{user:r}}=await C.auth.getUser();if(!r)return{allowed:!1,error:"Oturum bulunamad"};const{data:n,error:a}=await C.rpc("check_transaction_limit",{p_user_id:r.id,p_amount:t,p_update:e});if(a)return console.error("checkTransactionLimit error:",a),{allowed:!1,error:"Limit kontrol yaplamad"};const o=n==null?void 0:n[0];return{allowed:(o==null?void 0:o.allowed)||!1,daily_remaining:(o==null?void 0:o.daily_remaining)||0,monthly_remaining:(o==null?void 0:o.monthly_remaining)||0,error:(o==null?void 0:o.error_message)||null}}catch(r){return console.error("checkTransactionLimit error:",r),{allowed:!1,error:"Beklenmeyen hata"}}},sendEmail:async(t,e,r)=>{try{const{data:n,error:a}=await C.functions.invoke("send-email",{body:{to:t,template:e,data:r}});return a?(console.error("sendEmail error:",a),{success:!1,error:a.message}):{success:!0,id:n==null?void 0:n.id}}catch(n){return console.error("sendEmail error:",n),{success:!1,error:"Email gnderilemedi"}}}},k1=()=>{const t=we(),{login:e}=at(),[r,n]=N.useState("personal"),[a,o]=N.useState(""),[c,d]=N.useState(""),[h,f]=N.useState(""),[x,g]=N.useState(""),[y,w]=N.useState(""),[v,b]=N.useState(!1),[E,j]=N.useState(!1),[_,S]=N.useState(!1),P=async()=>{var A;if(!a||!h||!x)return alert("Ltfen tm alanlar doldurun");if(x.length<6)return alert("ifre en az 6 karakter olmaldr");if(x!==y)return alert("ifreler elemiyor");if(r==="business"&&!c)return alert("Ticari hesaplar iin firma ad gereklidir");if(!_)return alert("Kullanm koullarn ve gizlilik politikasn kabul etmelisiniz");b(!0);const O=await G.register(a,h,x,r,c);if(O&&((A=O.user)!=null&&A.email)){try{await G.sendEmail(O.user.email,"welcome",{userName:a})}catch(I){console.error("Welcome email error:",I)}await e(O.user.email,x),t("/dashboard")}b(!1)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-emerald-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute -bottom-32 -left-32 w-80 h-80 bg-teal-500/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute top-1/2 right-1/4 w-64 h-64 bg-emerald-400/10 rounded-full blur-2xl"})]}),s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 relative z-10",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-28 h-28 bg-white rounded-2xl flex items-center justify-center mx-auto mb-3 shadow-xl shadow-emerald-900/50 overflow-hidden p-1.5",children:s.jsx("img",{src:"/logo.png",alt:"Nubit Logo",className:"w-full h-full object-contain"})}),s.jsx("h1",{className:"text-2xl font-extrabold text-white mb-1",children:"Hesap Olutur"}),s.jsx("p",{className:"text-emerald-300/80 text-sm",children:"Nubit Wallet'a katln"})]}),s.jsxs("div",{className:"w-full max-w-sm",children:[s.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl p-6 shadow-2xl shadow-emerald-950/50",children:[s.jsxs("div",{className:"mb-5",children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:"Hesap Tr"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>n("personal"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${r==="personal"?"border-emerald-500 bg-emerald-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[s.jsx("span",{className:`material-symbols-outlined text-2xl mb-1 ${r==="personal"?"text-emerald-600":"text-gray-400"}`,children:"person"}),s.jsx("span",{className:`text-sm font-bold ${r==="personal"?"text-emerald-700":"text-gray-500"}`,children:"Kiisel"}),s.jsx("span",{className:"text-xs text-gray-400 mt-0.5",children:"Bireysel kullanm"})]}),s.jsxs("button",{type:"button",onClick:()=>n("business"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${r==="business"?"border-emerald-500 bg-emerald-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[s.jsx("span",{className:`material-symbols-outlined text-2xl mb-1 ${r==="business"?"text-emerald-600":"text-gray-400"}`,children:"store"}),s.jsx("span",{className:`text-sm font-bold ${r==="business"?"text-emerald-700":"text-gray-500"}`,children:"Ticari"}),s.jsx("span",{className:"text-xs text-gray-400 mt-0.5",children:"Firma hesab"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[r==="business"&&s.jsxs("div",{className:"animate-fadeIn",children:[s.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["Firma Ad ",s.jsx("span",{className:"text-emerald-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"business"}),s.jsx("input",{className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-emerald-300 bg-emerald-50 text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400",placeholder:"irket / letme Ad",value:c,onChange:O=>d(O.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:r==="business"?"Yetkili Kii Ad":"Ad Soyad"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"badge"}),s.jsx("input",{className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400",placeholder:r==="business"?"Yetkili kiinin ad":"Adnz Soyadnz",value:a,onChange:O=>o(O.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"E-posta"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"mail"}),s.jsx("input",{className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400",placeholder:"ornek@email.com",value:h,onChange:O=>f(O.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ifre"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"lock"}),s.jsx("input",{className:"w-full pl-12 pr-12 py-3.5 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-bold focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400 placeholder:font-normal",type:E?"text":"password",placeholder:"ifre oluturun",value:x,onChange:O=>g(O.target.value)}),s.jsx("button",{type:"button",onClick:()=>j(!E),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-xl",children:E?"visibility_off":"visibility"})})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1.5 ml-1",children:"En az 6 karakter"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ifre Tekrar"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"lock_reset"}),s.jsx("input",{className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 font-bold focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all outline-none placeholder:text-gray-400 placeholder:font-normal",type:E?"text":"password",placeholder:"ifreyi tekrar girin",value:y,onChange:O=>w(O.target.value)})]})]}),s.jsxs("div",{className:"flex items-start gap-3 py-2",children:[s.jsx("input",{type:"checkbox",id:"terms",checked:_,onChange:O=>S(O.target.checked),className:"w-5 h-5 rounded border-gray-300 text-emerald-500 focus:ring-emerald-500 mt-0.5 shrink-0"}),s.jsxs("label",{htmlFor:"terms",className:"text-gray-500 text-xs leading-relaxed",children:[s.jsx("button",{type:"button",onClick:()=>t("/terms"),className:"text-emerald-600 underline",children:"Kullanm Koullar"})," ","ve"," ",s.jsx("button",{type:"button",onClick:()=>t("/privacy"),className:"text-emerald-600 underline",children:"Gizlilik Politikas"}),"'n okudum ve kabul ediyorum. 18 yandan byk olduumu beyan ederim."]})]}),s.jsx("button",{onClick:P,disabled:v||!_,className:"w-full bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-emerald-500/30 transition-all disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Hesap oluturuluyor..."]}):s.jsxs(s.Fragment,{children:[r==="business"?"Ticari Hesap Olutur":"Kayt Ol",s.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]})]}),s.jsxs("div",{className:"mt-5 text-center",children:[s.jsx("p",{className:"text-emerald-200/80 text-sm mb-2",children:"Zaten hesabnz var m?"}),s.jsx("button",{onClick:()=>t("/"),className:"w-full bg-white/10 backdrop-blur border border-white/20 hover:bg-white/20 hover:border-white/30 py-3.5 rounded-xl font-bold text-white transition-all",children:"Giri Yap"})]})]})]})]})},gv=({isOpen:t,onClose:e,title:r,message:n,buttonText:a="Tamam"})=>t?s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-sm w-full overflow-hidden animate-scale-in",children:[s.jsx("div",{className:"pt-8 pb-4 flex justify-center",children:s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/30",children:s.jsx("span",{className:"material-symbols-outlined text-white text-4xl",children:"check_circle"})})}),s.jsxs("div",{className:"px-6 pb-4 text-center",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed",children:n})]}),s.jsx("div",{className:"px-6 pb-6",children:s.jsx("button",{onClick:e,className:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold rounded-2xl transition-all shadow-lg shadow-green-500/30 hover:shadow-green-500/50 active:scale-95",children:a})})]})}):null,Xt=({className:t=""})=>s.jsx("div",{className:`animate-pulse bg-gradient-to-r from-gray-800 via-gray-700 to-gray-800 bg-[length:200%_100%] rounded ${t}`,style:{animation:"shimmer 1.5s infinite"}}),S1=()=>s.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a1a] to-[#242424] p-5 rounded-2xl border border-white/5",children:[s.jsx("div",{className:"flex items-center gap-2 mb-3",children:s.jsx(Xt,{className:"w-16 h-4"})}),s.jsx(Xt,{className:"w-32 h-10 mb-2"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(Xt,{className:"w-20 h-4"})})]}),Vc=()=>s.jsxs("div",{className:"flex items-center gap-4 p-3 bg-[#1a1a1a] rounded-xl border border-white/5",children:[s.jsx(Xt,{className:"w-10 h-10 rounded-full shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Xt,{className:"w-24 h-4 mb-2"}),s.jsx(Xt,{className:"w-16 h-3"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx(Xt,{className:"w-20 h-5 mb-1"}),s.jsx(Xt,{className:"w-14 h-3"})]})]}),E1=()=>s.jsxs("div",{className:"space-y-3",children:[s.jsx(Vc,{}),s.jsx(Vc,{}),s.jsx(Vc,{})]}),P1=()=>s.jsx("div",{className:"grid grid-cols-4 gap-3",children:[1,2,3,4].map(t=>s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Xt,{className:"w-14 h-14 rounded-2xl"}),s.jsx(Xt,{className:"w-12 h-3"})]},t))}),T1=()=>s.jsxs("div",{className:"px-5 space-y-6",children:[s.jsx(S1,{}),s.jsx(P1,{}),s.jsxs("div",{children:[s.jsx(Xt,{className:"w-28 h-5 mb-4"}),s.jsx(E1,{})]})]}),C1=`
@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}
`;if(typeof document<"u"){const t=document.createElement("style");t.textContent=C1,document.head.querySelector("[data-skeleton-shimmer]")||(t.setAttribute("data-skeleton-shimmer","true"),document.head.appendChild(t))}const A1=()=>{var F,K;const t=we(),{user:e,refreshUser:r}=at(),{isDark:n}=_l(),[a,o]=N.useState([]),[c,d]=N.useState([]),[h,f]=N.useState(null),[x,g]=N.useState([]),[y,w]=N.useState(null),[v,b]=N.useState({isOpen:!1,title:"",message:""}),[E,j]=N.useState(!0),[_,S]=N.useState(!1),[P,O]=N.useState(null);N.useEffect(()=>{if(r(),e){A(),C.auth.getUser().then(({data:Q})=>{if(Q!=null&&Q.user){w(Q.user.id);const Y=C.channel("p2p-realtime").on("postgres_changes",{event:"*",schema:"public",table:"p2p_orders",filter:`buyer_id=eq.${Q.user.id}`},le=>{console.log("[REALTIME] P2P order change (buyer):",le),A(),r()}).on("postgres_changes",{event:"*",schema:"public",table:"p2p_orders",filter:`seller_id=eq.${Q.user.id}`},le=>{console.log("[REALTIME] P2P order change (seller):",le),A(),r()}).subscribe(),z=C.channel("balance-realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${Q.user.id}`},le=>{console.log("[REALTIME] Balance updated:",le.new),r()}).subscribe();return()=>{C.removeChannel(Y),C.removeChannel(z)}}});const $=setInterval(()=>{A()},3e4);return()=>{clearInterval($)}}},[e]);const A=async()=>{if(!e)return;const{data:{user:$}}=await C.auth.getUser();$&&w($.id);try{const[Q,Y,z,le]=await Promise.all([G.getTransactions(e.email),G.getMyP2POrders(),G.getPendingApprovals(e.email),G.getNotifications(e.email)]),U=new Set,re=(Y||[]).filter(ee=>ee.status==="OPEN"||ee.status==="COMPLETED").filter(ee=>{if(ee.matched_order_id){const te=[ee.id,ee.matched_order_id].sort().join("|");if(U.has(te))return!1;U.add(te)}return!0}).map(ee=>{const te=ee.seller_id===y;return{id:ee.id,title:te?"P2P SELL Order":"P2P BUY Order",amount:te?-ee.amount_usd:ee.amount_usd,status:ee.status==="OPEN"?"PENDING":ee.status,date:ee.created_at,type:te?"P2P_SELL":"P2P_BUY"}}),Z=[...Q,...re].sort((ee,te)=>new Date(te.date).getTime()-new Date(ee.date).getTime());o(Z.slice(0,4));const V=(Y||[]).filter(ee=>ee.status==="MATCHED"||ee.status==="PAID"&&!ee.buyer_confirmed_at);g(V),d(z);const H=le.filter(ee=>!ee.read);if(H.length>0){const ee=H[0];f(te=>(te==null?void 0:te.id)===ee.id?te:ee)}}catch(Q){console.error("Dashboard loadData error:",Q)}finally{j(!1)}},I=async $=>{const Q=await G.p2pAction("confirm",{orderId:$});Q!=null&&Q.success?(b({isOpen:!0,title:"Transfer Onayland!",message:"Bakiye alcya baaryla aktarld."}),A(),r()):alert("Hata: "+((Q==null?void 0:Q.error)||"lem baarsz"))},B=async $=>{const Q=await G.p2pAction("reject",{orderId:$});Q!=null&&Q.success?(alert("lem reddedildi. Eleme iptal edildi."),A()):alert("Hata: "+((Q==null?void 0:Q.error)||"lem baarsz"))},R=async()=>{h&&(await G.markNotificationRead(h.id),f(null),A())},W=async $=>{await G.approveRelease($),r(),b({isOpen:!0,title:"Approved!",message:"Transaction has been approved successfully."})};return e?E?s.jsxs("div",{className:"min-h-screen bg-theme-primary flex flex-col font-display pb-20",children:[s.jsxs("div",{className:"px-5 py-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 animate-pulse"}),s.jsxs("div",{children:[s.jsx("div",{className:"w-24 h-4 bg-gray-800 rounded animate-pulse mb-1"}),s.jsx("div",{className:"w-16 h-3 bg-gray-800 rounded animate-pulse"})]})]}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 animate-pulse"})]}),s.jsx(T1,{})]}):s.jsxs("div",{className:"h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display overflow-hidden relative",children:[s.jsx(gv,{isOpen:v.isOpen,onClose:()=>b({...v,isOpen:!1}),title:v.title,message:v.message}),s.jsxs("div",{className:"px-5 pt-6 pb-4 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-emerald-300/80 text-sm font-medium mb-1",children:"Welcome"}),s.jsx("h1",{className:"text-white text-2xl font-bold tracking-tight",children:e.name||((F=e.email)==null?void 0:F.split("@")[0])})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>t("/notifications"),className:"w-11 h-11 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center transition-colors relative hover:bg-white/20",children:[s.jsx("span",{className:"material-symbols-outlined text-white text-xl",children:"notifications"}),h&&s.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center px-1 shadow-md",children:"1"})]}),s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-lime-400 to-emerald-500 p-0.5 shadow-lg shadow-emerald-500/40",children:s.jsx("div",{className:"w-full h-full rounded-full bg-emerald-800 flex items-center justify-center text-white font-bold text-lg",children:((K=e.name)==null?void 0:K.charAt(0))||"U"})})]})]}),h&&s.jsx("div",{className:"fixed top-20 left-4 right-4 z-50 animate-slide-in-top cursor-pointer",onClick:R,children:s.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-xl border border-lime-500/50 p-4 rounded-2xl shadow-2xl shadow-lime-500/10 flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-lime-500/20 text-lime-400 flex items-center justify-center shrink-0",children:s.jsx("span",{className:"material-symbols-outlined",children:"notifications_active"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-white font-bold text-sm",children:h.title}),s.jsx("p",{className:"text-gray-400 text-xs mt-1 leading-relaxed",children:h.message})]}),s.jsx("button",{onClick:$=>{$.stopPropagation(),R()},className:"text-gray-500 hover:text-white",children:s.jsx("span",{className:"material-symbols-outlined text-lg",children:"close"})})]})}),s.jsxs("div",{className:"px-5 flex-1 overflow-hidden",children:[c.length>0&&s.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 p-4 rounded-2xl mb-6 backdrop-blur-sm",children:[s.jsxs("h3",{className:"font-bold text-amber-400 flex items-center gap-2 mb-3 text-sm",children:[s.jsx("span",{className:"material-symbols-outlined text-lg",children:"notifications_active"}),"Pending Approvals"]}),c.map($=>s.jsxs("div",{className:"flex justify-between items-center bg-[#1a1a1a] p-3 rounded-xl mb-2 last:mb-0",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"REQUEST"}),s.jsxs("span",{className:"text-sm font-bold text-white",children:["From: ",$.lockedBy," ",s.jsxs("span",{className:"text-lime-400",children:["($",$.amount,")"]})]})]}),s.jsx("button",{onClick:()=>W($.id),className:"bg-lime-500 text-black px-4 py-2 rounded-lg text-xs font-bold hover:bg-lime-400 transition-colors",children:"Approve"})]},$.id))]}),x.filter($=>$.status==="PAID"&&$.seller_id===y).length>0&&s.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 max-w-xs w-full border border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-lime-500/20 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"payments"})}),s.jsx("h3",{className:"text-white font-bold text-lg",children:"deme Onay"})]}),s.jsx("p",{className:"text-gray-400 text-sm mb-5",children:"Hesabnza para aktarlmtr demeyi onaylyor musunuz?"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{const $=x.find(Q=>Q.status==="PAID");$&&B($.id)},className:"flex-1 bg-[#2a2a2a] text-gray-300 py-3 rounded-xl font-semibold hover:bg-[#333] transition-colors",children:"Reddet"}),s.jsx("button",{onClick:()=>{const $=x.find(Q=>Q.status==="PAID");$&&I($.id)},className:"flex-1 bg-lime-500 text-black py-3 rounded-xl font-bold hover:bg-lime-400 transition-colors",children:"Onaylyorum"})]})]})}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-emerald-700/50 backdrop-blur-sm p-6 rounded-3xl border border-emerald-600/30",children:[e.account_type==="business"&&s.jsxs("button",{onClick:()=>t("/business"),className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 active:scale-[0.98] transition-all text-white py-3 rounded-xl font-bold text-sm shadow-lg shadow-amber-500/30 mb-4",children:[s.jsx("span",{className:"material-symbols-outlined text-lg",children:"storefront"}),"letme Paneli"]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-emerald-200/70 text-sm mb-1 flex items-center justify-center gap-1",children:["Total Balance",s.jsx("span",{className:"material-symbols-outlined text-sm",children:"visibility"})]}),s.jsxs("h2",{className:"text-4xl font-extrabold text-white tracking-tight mb-3",children:["$",e.balance.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 bg-emerald-600/50 px-3 py-1 rounded-full text-xs text-emerald-100 font-medium",children:["USD ",s.jsx("span",{className:"material-symbols-outlined text-sm",children:"expand_more"})]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-3 mt-6",children:[s.jsxs("button",{onClick:()=>t("/deposit"),className:"flex flex-col items-center gap-2 group",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-lime-400 flex items-center justify-center shadow-lg group-hover:scale-105 group-active:scale-95 transition-all",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-900 text-2xl",children:"arrow_downward"})}),s.jsx("span",{className:"text-emerald-100 text-[11px] font-medium",children:"Deposit"})]}),s.jsxs("button",{onClick:()=>t("/withdraw"),className:"flex flex-col items-center gap-2 group",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-lime-400 flex items-center justify-center shadow-lg group-hover:scale-105 group-active:scale-95 transition-all",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-900 text-2xl",children:"arrow_upward"})}),s.jsx("span",{className:"text-emerald-100 text-[11px] font-medium",children:"Withdraw"})]}),s.jsxs("button",{onClick:()=>t("/crypto/deposit"),className:"flex flex-col items-center gap-2 group",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-lime-400 flex items-center justify-center shadow-lg group-hover:scale-105 group-active:scale-95 transition-all",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-900 text-2xl",children:"download"})}),s.jsxs("span",{className:"text-emerald-100 text-[10px] font-medium text-center leading-tight",children:["Crypto",s.jsx("br",{}),"Deposit"]})]}),s.jsxs("button",{onClick:()=>t("/crypto/withdraw"),className:"flex flex-col items-center gap-2 group",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-lime-400 flex items-center justify-center shadow-lg group-hover:scale-105 group-active:scale-95 transition-all",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-900 text-2xl",children:"upload"})}),s.jsxs("span",{className:"text-emerald-100 text-[10px] font-medium text-center leading-tight",children:["Crypto",s.jsx("br",{}),"Withdraw"]})]})]})]})}),s.jsxs("button",{onClick:()=>t("/find-agent"),className:"w-full p-4 rounded-2xl flex items-center justify-between group transition-all bg-emerald-700/30 border border-emerald-600/30 hover:bg-emerald-700/50 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-lime-400/20 flex items-center justify-center text-lime-400 group-hover:bg-lime-400 group-hover:text-emerald-900 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined",children:"location_on"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-bold text-sm text-white",children:"Find Agent"}),s.jsx("p",{className:"text-emerald-300/70 text-xs",children:"Locate nearest exchange points"})]})]}),s.jsx("span",{className:"material-symbols-outlined text-emerald-400 group-hover:text-white",children:"chevron_right"})]}),e.role==="admin"&&s.jsxs("button",{onClick:()=>t("/admin"),className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 active:scale-[0.98] transition-all text-white py-4 rounded-2xl font-bold text-sm shadow-xl shadow-purple-500/30 mb-3",children:[s.jsx("span",{className:"material-symbols-outlined text-lg",children:"admin_panel_settings"}),"Admin Panel"]}),s.jsxs("div",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-md bg-white rounded-t-3xl shadow-2xl shadow-black/30 transition-all duration-300 ease-out z-40",style:{height:_?"calc(100vh - 120px)":"280px"},children:[s.jsx("div",{className:"flex justify-center py-4 cursor-pointer touch-none",onClick:()=>S(!_),onTouchStart:$=>O($.touches[0].clientY),onTouchEnd:$=>{if(P===null)return;const Q=P-$.changedTouches[0].clientY;Q>50&&S(!0),Q<-50&&S(!1),O(null)},children:s.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),s.jsx("div",{className:"px-5",children:s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900",children:"Transaction History"}),s.jsxs("button",{onClick:()=>t("/history"),className:"text-emerald-500 text-xs font-bold flex items-center hover:text-emerald-400 transition-colors",children:["View All ",s.jsx("span",{className:"material-symbols-outlined text-sm ml-1",children:"arrow_forward"})]})]})}),s.jsx("div",{className:"px-5 space-y-3 overflow-y-auto pb-24",style:{height:_?"calc(100% - 80px)":"100px"},children:a.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 rounded-2xl bg-gray-50 text-gray-400",children:[s.jsx("span",{className:"material-symbols-outlined text-3xl mb-2 opacity-30",children:"history"}),s.jsx("p",{className:"text-sm font-medium",children:"No recent transactions"})]}):a.slice(0,_?a.length:1).map($=>{var Q,Y;return s.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50 flex justify-between items-center transition-all hover:bg-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-11 h-11 rounded-xl flex items-center justify-center ${$.amount>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-500"}`,children:s.jsx("span",{className:"material-symbols-outlined text-xl",children:$.amount>0?"arrow_downward":"arrow_upward"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-sm text-gray-900",children:$.title}),s.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:((Q=$.date)==null?void 0:Q.split(",")[0])||((Y=$.date)==null?void 0:Y.split("T")[0])})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:`font-bold text-base ${$.amount>0?"text-emerald-500":"text-gray-900"}`,children:[$.amount>0?"+":"","$",Math.abs($.amount).toFixed(2)]}),s.jsx("p",{className:"text-xs text-gray-400",children:$.status==="PAYMENT_REVIEW"?"Pending":$.status})]})]},$.id)})})]})]})]}):null},Ch=({isOpen:t,title:e,message:r,type:n="info",onClose:a,confirmText:o="Tamam"})=>{if(!t)return null;const c=()=>{switch(n){case"success":return{icon:"check_circle",color:"text-lime-400",bg:"bg-lime-500/20"};case"error":return{icon:"error",color:"text-red-400",bg:"bg-red-500/20"};case"warning":return{icon:"warning",color:"text-yellow-400",bg:"bg-yellow-500/20"};default:return{icon:"info",color:"text-blue-400",bg:"bg-blue-500/20"}}},{icon:d,color:h,bg:f}=c();return s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:a}),s.jsxs("div",{className:"relative bg-[#1a1a1a] border border-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-scale-in",children:[s.jsx("div",{className:`w-16 h-16 ${f} rounded-full flex items-center justify-center mx-auto mb-4`,children:s.jsx("span",{className:`material-symbols-outlined text-4xl ${h}`,children:d})}),s.jsx("h2",{className:"text-white text-xl font-bold text-center mb-2",children:e}),s.jsx("p",{className:"text-gray-400 text-center mb-6",children:r}),s.jsx("button",{onClick:a,className:`w-full py-3 rounded-xl font-semibold text-black transition-all ${n==="error"?"bg-red-500 hover:bg-red-400":n==="warning"?"bg-yellow-500 hover:bg-yellow-400":"bg-lime-400 hover:bg-lime-300"}`,children:o})]})]})},O1=()=>{var re,Z;const t=we(),{user:e}=at(),[r,n]=N.useState(""),[a,o]=N.useState(null),[c,d]=N.useState(!1),[h,f]=N.useState(null),[x,g]=N.useState([]),[y,w]=N.useState(!0),[v,b]=N.useState(null),[E,j]=N.useState(null),[_,S]=N.useState(null),[P,O]=N.useState(42.5),[A,I]=N.useState({isOpen:!1,type:"info",title:"",message:""}),[B,R]=N.useState(!1),[W,F]=N.useState([]);N.useEffect(()=>{$(),K()},[]);const K=async()=>{try{const V=await G.getExchangeRate();V!=null&&V.buy_rate&&(O(V.buy_rate),console.log("[Deposit] Exchange rate fetched:",V.buy_rate))}catch(V){console.error("[Deposit] Failed to fetch exchange rate:",V)}};N.useEffect(()=>{(async()=>{if(e!=null&&e.email){const H=await G.getBankAccounts(e.email);g(H||[]),H&&H.length>0&&f(H[0])}w(!1)})()},[e==null?void 0:e.email]),N.useEffect(()=>()=>{E&&clearInterval(E)},[E]);const $=async()=>{const V=await G.getActiveP2POrder();V&&S(V)},Q=async()=>{if(!_)return;w(!0);const V=await G.cancelP2POrder(_.id);V.success?(S(null),I({isOpen:!0,type:"success",title:"ptal Edildi",message:"lem iptal edildi"})):I({isOpen:!0,type:"error",title:"Hata",message:"ptal hatas: "+V.error}),w(!1)},Y=async()=>{var V,H,ee,te;if(!h){I({isOpen:!0,type:"warning",title:"Banka Sein",message:"Ltfen nce bir banka hesab sein veya ekleyin."});return}w(!0);try{const X=await G.createP2POrderNew("BUY",parseFloat(r));if(!X){I({isOpen:!0,type:"error",title:"Sunucu Hatas",message:"Sunucu hatas: Yant alnamad"}),w(!1);return}if(X.success&&X.order){const ie=X.order.id;b(ie);const de=await G.matchP2POrder(ie);if(de!=null&&de.success&&(de!=null&&de.match)){console.log("[MATCH DEBUG] matchResult.match:",JSON.stringify(de.match,null,2)),console.log("[MATCH DEBUG] matched_amount_usd:",de.match.matched_amount_usd),console.log("[MATCH DEBUG] amount_usd:",de.match.amount_usd),console.log("[MATCH DEBUG] result.order.amount_usd:",X.order.amount_usd);const $e=de.match.matched_amount_usd||de.match.amount_usd||X.order.amount_usd;console.log("[MATCH DEBUG] Final sellerAmount:",$e),o({id:de.match.matchedOrderId,amount:$e*P,amountUsd:$e,sellerIBAN:((V=de.match.counterparty)==null?void 0:V.iban)||"N/A",sellerName:((H=de.match.counterparty)==null?void 0:H.account_name)||"Satc",sellerBank:((ee=de.match.counterparty)==null?void 0:ee.bank_name)||"Banka",timeRemaining:de.match.lock_expires_at}),b(null)}else{console.log("[DEPOSIT] No exact match, fetching suggestions...");const $e=await G.getPendingWithdrawals(parseFloat(r));$e.success&&((te=$e.withdrawals)==null?void 0:te.length)>0?(F($e.withdrawals),R(!0),await G.cancelP2POrder(ie),b(null)):(I({isOpen:!0,type:"info",title:"Eleme Bekleniyor",message:"Bu tutarda ekim talebi yok. Talebiniz havuza eklendi, ekim talebi geldiinde eleeceksiniz."}),z(ie))}}else I({isOpen:!0,type:"error",title:"Hata",message:"stek oluturulamad: "+((X==null?void 0:X.error)||"Bilinmeyen hata")})}catch(X){console.error("Search error:",X),I({isOpen:!0,type:"error",title:"Balant Hatas",message:"Hata: "+(X.message||"Balant hatas")})}w(!1)},z=V=>{const H=C.channel(`order-${V}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"p2p_orders",filter:`id=eq.${V}`},te=>{console.log("[REALTIME] Order updated:",te.new);const X=te.new;X.status==="MATCHED"?(async()=>{const ie=X.matched_order_id?await G.getP2POrderStatus(X.matched_order_id):null,de=(ie==null?void 0:ie.amount_usd)||X.amount_usd;d(!1),o({id:V,amount:de*P,amountUsd:de,sellerIBAN:X.seller_iban||"N/A",sellerName:X.seller_account_name||"Satc",sellerBank:X.seller_bank_name||"Banka"}),b(null),C.removeChannel(H),j(null)})():(X.status==="EXPIRED"||X.status==="CANCELLED")&&(C.removeChannel(H),j(null),I({isOpen:!0,type:"warning",title:"Sre Doldu",message:"Sipari sresi doldu veya iptal edildi"}))}).subscribe();j(H);const ee=setInterval(async()=>{const te=await G.getP2POrderStatus(V);if(te&&te.status==="MATCHED"){const X=te.matched_order_id?await G.getP2POrderStatus(te.matched_order_id):null,ie=(X==null?void 0:X.amount_usd)||te.amount_usd;d(!1),o({id:V,amount:ie*P,amountUsd:ie,sellerIBAN:te.seller_iban||"N/A",sellerName:te.seller_account_name||"Satc",sellerBank:te.seller_bank_name||"Banka"}),b(null),clearInterval(ee),C.removeChannel(H),j(null)}else((te==null?void 0:te.status)==="EXPIRED"||(te==null?void 0:te.status)==="CANCELLED")&&(clearInterval(ee),C.removeChannel(H),j(null),alert("Sipari sresi doldu veya iptal edildi"))},15e3);setTimeout(()=>{clearInterval(ee),C.removeChannel(H),j(null),v&&I({isOpen:!0,type:"warning",title:"Eleme Bulunamad",message:"Eleme bulunamad. Ltfen daha sonra tekrar deneyin."})},10*60*1e3)},le=async V=>{var H,ee,te;R(!1),n(V.toString()),w(!0),console.log("[DEPOSIT] User selected suggestion:",V);try{const X=await G.createP2POrderNew("BUY",V);if(X.success&&X.order){const ie=X.order.id;b(ie);const de=await G.matchP2POrder(ie);de!=null&&de.success&&(de!=null&&de.match)?(o({id:de.match.matchedOrderId,amount:V*P,amountUsd:V,sellerIBAN:((H=de.match.counterparty)==null?void 0:H.iban)||"N/A",sellerName:((ee=de.match.counterparty)==null?void 0:ee.account_name)||"Satc",sellerBank:((te=de.match.counterparty)==null?void 0:te.bank_name)||"Banka",timeRemaining:de.match.lock_expires_at}),b(null)):z(ie)}else I({isOpen:!0,type:"error",title:"Hata",message:"stek oluturulamad"})}catch(X){console.error("Suggestion select error:",X),I({isOpen:!0,type:"error",title:"Hata",message:X.message||"Balant hatas"})}w(!1)},U=async()=>{a&&await G.lockMatch(),t("/deposit/confirm",{state:{amount:(a==null?void 0:a.amountUsd)||parseFloat(r),matchId:a==null?void 0:a.id,orderId:v,matchedInvestorEmail:a==null?void 0:a.userId,bankAccount:h,matchDetails:a}})};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display pb-20",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[s.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Para Yatr"})]}),s.jsx("div",{className:"p-4 space-y-6",children:_?s.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center",children:[s.jsx("div",{className:"w-24 h-24 rounded-full bg-amber-500/20 flex items-center justify-center mb-6",children:s.jsx("span",{className:"material-symbols-outlined text-5xl text-amber-400",children:"pending"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Bekleyen leminiz Var"}),s.jsxs("p",{className:"text-gray-400 mb-6 max-w-xs",children:["Aktif bir ",_.type==="SELL"?"sat":"al"," emriniz bulunuyor. Yeni ilem oluturmak iin nce mevcut ilemi tamamlamanz veya iptal etmeniz gerekiyor."]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 w-full max-w-xs mb-6 shadow-lg",children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-500",children:"lem Tipi:"}),s.jsx("span",{className:`font-bold ${_.type==="SELL"?"text-red-500":"text-emerald-500"}`,children:_.type==="SELL"?"ekim (Sat)":"Yatrm (Al)"})]}),s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-500",children:"Miktar:"}),s.jsxs("span",{className:"text-gray-900 font-bold",children:["$",_.amount_usd," USDT"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Durum:"}),s.jsx("span",{className:"text-amber-500 font-bold",children:_.status})]})]}),s.jsxs("div",{className:"space-y-3 w-full max-w-xs",children:[s.jsx("button",{onClick:Q,disabled:y||_.status==="PAID",className:"w-full bg-red-500/20 hover:bg-red-500/30 text-red-400 py-3 rounded-xl font-bold transition-colors disabled:opacity-50",children:y?"ptal Ediliyor...":_.status==="PAID"?"deme Yapld - ptal Edilemez":"lemi ptal Et"}),s.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-white/10 hover:bg-white/20 text-white py-3 rounded-xl font-bold transition-colors",children:"Dashboard'a Dn"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl p-4 flex gap-3 shadow-lg",children:[s.jsx("span",{className:"material-symbols-outlined text-emerald-500 shrink-0",children:"info"}),s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-bold text-gray-900",children:"Dekont Ykleme stee Bal:"})," Dekont yklerseniz ilem 20 dakika iinde otomatik onaylanr."]})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-bold text-emerald-300",children:"Banka Hesabnz"}),s.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"text-xs text-lime-400 font-bold hover:underline flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Yeni Ekle"]})]}),y?s.jsx("div",{className:"bg-white rounded-xl p-4 shadow animate-pulse",children:s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"})}):x.length===0?s.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"w-full bg-white rounded-xl p-4 border-2 border-dashed border-gray-300 hover:border-emerald-500 transition-colors text-center shadow",children:[s.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-3xl mb-2",children:"add_card"}),s.jsx("p",{className:"text-gray-900 font-bold",children:"Banka Hesab Ekle"}),s.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Para yatrmak iin bir banka hesab eklemelisiniz"})]}):s.jsx("div",{className:"space-y-2",children:x.map(V=>s.jsxs("button",{onClick:()=>f(V),className:`w-full p-4 rounded-xl transition-all text-left flex items-center gap-3 shadow ${(h==null?void 0:h.id)===V.id?"bg-emerald-50 border-2 border-emerald-500":"bg-white border border-gray-200 hover:border-emerald-300"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${(h==null?void 0:h.id)===V.id?"bg-emerald-100 text-emerald-600":"bg-blue-100 text-blue-500"}`,children:s.jsx("span",{className:"material-symbols-outlined",children:"account_balance"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-gray-900 font-bold truncate",children:V.bankName}),s.jsx("p",{className:"text-gray-500 text-xs font-mono truncate",children:V.iban})]}),(h==null?void 0:h.id)===V.id&&s.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]},V.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-emerald-300 mb-2",children:"Yatrlacak Tutar (USDT)"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-bold text-gray-400",children:"$"}),s.jsx("input",{className:"w-full pl-10 pr-4 py-3.5 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none bg-white text-gray-900 font-bold text-xl placeholder:text-gray-400 shadow",type:"number",placeholder:"0.00",value:r,onChange:V=>n(V.target.value)})]}),s.jsxs("p",{className:"text-xs text-emerald-200 mt-2",children:["Minimum: 10 USDT  deyeceiniz: ",(parseFloat(r||"0")*P).toLocaleString()," TL"]})]}),s.jsx("div",{className:"flex gap-2",children:[100,500,1e3,5e3].map(V=>s.jsxs("button",{onClick:()=>n(V.toString()),className:"flex-1 py-2 rounded-lg bg-white border border-gray-200 text-gray-700 font-bold text-sm hover:border-emerald-500 hover:text-emerald-600 transition-colors shadow-sm",children:["$",V]},V))}),v&&!a&&s.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-2xl p-6 mt-4 text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),s.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"En Uygun Eleme Aranyor..."}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Size uygun satcy aryoruz"})]}),a?s.jsxs("div",{className:"bg-[#1a1a1a] p-6 rounded-2xl border border-lime-500/30 text-center animate-fade-in mt-4",children:[s.jsxs("div",{className:"w-16 h-16 rounded-full bg-lime-500/20 flex items-center justify-center mx-auto mb-4 relative",children:[s.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl",children:"task_alt"}),s.jsx("div",{className:"absolute inset-0 rounded-full border border-lime-500/30 animate-ping"})]}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Uygun Eleme Bulundu!"}),s.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Yatrm tutarnz iin uygun bir satc bulundu."}),s.jsxs("div",{className:"bg-black/30 p-4 rounded-2xl mb-6 border border-white/5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-gray-500 text-xs",children:"A"}),s.jsx("span",{className:"text-white text-xs font-bold",children:"P2P Secure"})]}),s.jsx("div",{className:"border-t border-white/5 my-2"}),s.jsx("p",{className:"text-xs text-gray-500 mb-1 mt-2",children:"lem Tutar"}),s.jsxs("p",{className:"text-3xl font-bold text-white tracking-tight",children:["",(re=a.amount)==null?void 0:re.toLocaleString()]}),s.jsxs("p",{className:"text-xs text-lime-500 mt-1 font-mono",children:[" ",((Z=a.amountUsd)==null?void 0:Z.toLocaleString())||parseFloat(r).toLocaleString()," USDT"]})]}),s.jsx("button",{onClick:U,className:"w-full bg-lime-500 hover:bg-lime-400 text-black font-bold py-4 rounded-xl text-lg transition-all shadow-lg shadow-lime-500/20 active:scale-95",children:"lemi Onayla & Bilgileri Gr"}),s.jsx("p",{className:"text-[10px] text-gray-500 mt-3",children:"lemi onayladnzda deme bilgileri gsterilecek ve 30 dakika sre balayacaktr."})]}):!v&&s.jsx("button",{onClick:Y,disabled:!h||!r||y,className:"w-full bg-lime-500 hover:bg-lime-400 active:scale-[0.98] transition-all text-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-lime-500/20 mt-4 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Ykleniyor...":"Eleme Bul"})]})}),s.jsx(Ch,{isOpen:A.isOpen,type:A.type,title:A.title,message:A.message,onClose:()=>I({...A,isOpen:!1})}),B&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>R(!1)}),s.jsxs("div",{className:"relative bg-[#1a1a1a] border border-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-scale-in",children:[s.jsx("div",{className:"w-16 h-16 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"material-symbols-outlined text-4xl text-amber-400",children:"search"})}),s.jsx("h2",{className:"text-white text-xl font-bold text-center mb-2",children:"Eleme Bulunamad"}),s.jsxs("p",{className:"text-gray-400 text-center text-sm mb-4",children:["$",r," tutarnda ekim talebi yok. En yakn bekleyen tutarlar seebilirsiniz:"]}),s.jsx("div",{className:"space-y-2 mb-6",children:W.map((V,H)=>s.jsxs("button",{onClick:()=>le(V.amount_usd),className:"w-full py-3 px-4 rounded-xl bg-[#252525] border border-white/10 hover:border-lime-500/50 hover:bg-lime-500/10 transition-all flex justify-between items-center",children:[s.jsxs("span",{className:"text-white font-bold",children:["$",V.amount_usd.toLocaleString()]}),s.jsxs("span",{className:"text-gray-500 text-sm",children:[" ",(V.amount_usd*P).toLocaleString()," TL"]})]},V.id||H))}),s.jsx("button",{onClick:()=>R(!1),className:"w-full py-3 rounded-xl border border-gray-600 text-gray-400 font-semibold hover:bg-white/5 transition-all",children:"ptal"})]})]})]})},L1=()=>{var F;const t=we(),{state:e}=qn(),{user:r}=at(),[n,a]=N.useState(1200),[o,c]=N.useState({name:"",bankAccount:null}),[d,h]=N.useState(null),[f,x]=N.useState(!1),[g,y]=N.useState(32.5),[w,v]=N.useState(!1),b=1200;N.useEffect(()=>{const K=setInterval(()=>{a($=>$<=1?(E(),0):$-1)},1e3);return()=>clearInterval(K)},[]);const E=async()=>{const K=(e==null?void 0:e.orderId)||(e==null?void 0:e.matchId);K?(console.log("[TIMEOUT] Order expired, cancelling:",K),await G.cancelP2POrder(K),v(!0)):t("/dashboard")};N.useEffect(()=>{(async()=>{const $=await G.getExchangeRate();$!=null&&$.buy_rate&&y($.buy_rate)})()},[]),N.useEffect(()=>{(async()=>{if(e!=null&&e.matchDetails)c({name:e.matchDetails.sellerName,bankAccount:{id:"temp_p2p",bankName:e.matchDetails.sellerBank,iban:e.matchDetails.sellerIBAN}});else if(e!=null&&e.matchedInvestorEmail){const $=await G.getUser(e.matchedInvestorEmail),Q=await G.getBankAccounts(e.matchedInvestorEmail);c({name:($==null?void 0:$.name)||"Unknown",bankAccount:Q[0]||null})}})()},[e]);const _=(K=>{const $=Math.floor(K/60),Q=K%60;return{m:$.toString().padStart(2,"0"),s:Q.toString().padStart(2,"0")}})(n),S=n/b*100,P=2*Math.PI*54,O=P-S/100*P,A=K=>{K.target.files&&K.target.files[0]&&h(K.target.files[0])},I=async()=>{const K=(e==null?void 0:e.orderId)||(e==null?void 0:e.matchId);if(d&&K)try{const{data:{user:$}}=await C.auth.getUser();if($){const Q=`${$.id}/dekont_${K}_${Date.now()}.${d.name.split(".").pop()}`,{error:Y}=await C.storage.from("verification-docs").upload(Q,d);if(!Y){const{data:z}=await C.from("verification_submissions").insert({user_id:$.id,user_email:r==null?void 0:r.email,user_name:r==null?void 0:r.name,submission_type:"deposit",document_url:Q,amount:(e==null?void 0:e.amount)||0,status:"pending"}).select().single();z&&await C.functions.invoke("send-telegram-verification",{body:{submission_id:z.id,submission_type:"deposit",user_email:r==null?void 0:r.email,user_name:r==null?void 0:r.name,document_url:Q,amount:(e==null?void 0:e.amount)||0}})}}}catch($){console.error("Dekont upload error:",$)}if(K){const $=await G.markP2PPaid(K);$!=null&&$.success?x(!0):alert("Hata: "+(($==null?void 0:$.error)||"lem baarsz"))}else await G.markPaymentSent((r==null?void 0:r.email)||"",e==null?void 0:e.matchId,e==null?void 0:e.amount,!0),x(!0)},B=()=>{x(!1),t("/dashboard")},R=(e==null?void 0:e.amount)||1e3,W=(R*g).toLocaleString("tr-TR",{minimumFractionDigits:0,maximumFractionDigits:0});return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsx(gv,{isOpen:f,onClose:B,title:"deme Bildiriminiz Alnd!",message:"deme bildiriminiz baaryla iletildi. Satc onayladnda bakiyeniz hesabnza geecektir."}),s.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[s.jsx("button",{onClick:()=>t("/deposit"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"deme Onay"})]}),s.jsxs("div",{className:"p-4 pb-10",children:[s.jsx("div",{className:"text-center mb-6 mt-2",children:s.jsxs("h2",{className:"text-2xl font-extrabold text-white leading-tight",children:["Yatrmnz",s.jsx("br",{}),"Rezerve Edildi!"]})}),s.jsx("div",{className:"flex justify-center mb-8",children:s.jsxs("div",{className:"relative w-36 h-36",children:[s.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 120 120",children:[s.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#1a1a1a",strokeWidth:"8"}),s.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"url(#gradient)",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:P,strokeDashoffset:O,className:"transition-all duration-1000 ease-linear"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#10b981"}),s.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsxs("span",{className:"text-3xl font-bold text-white tracking-tight",children:[_.m,":",_.s]}),s.jsx("span",{className:"text-xs text-gray-500 font-medium mt-1",children:"kald"})]})]})}),s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg mb-6",children:[s.jsx("p",{className:"text-gray-500 font-medium text-sm mb-1",children:"Yatrlacak Tutar"}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("h3",{className:"text-2xl font-extrabold text-gray-900",children:["",W," TRY"]}),s.jsxs("span",{className:"text-gray-500 font-medium",children:["($",R.toLocaleString()," USD)"]})]})]}),s.jsx("h3",{className:"font-bold text-white mb-3 px-1",children:"Banka Transfer Bilgileri"}),o.bankAccount?s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg divide-y divide-gray-100 mb-6",children:[s.jsxs("div",{className:"p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-1",children:"Alc Ad Soyad"}),s.jsx("p",{className:"font-bold text-gray-900 text-lg",children:o.name})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-1",children:"Banka"}),s.jsx("p",{className:"font-bold text-gray-900 text-base",children:o.bankAccount.bankName})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-1",children:"IBAN"}),s.jsx("p",{className:"font-bold text-emerald-600 text-base font-mono tracking-tight text-wrap break-all",children:(F=o.bankAccount.iban.match(/.{1,4}/g))==null?void 0:F.join(" ")})]})]}):s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6 text-center",children:s.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Satc bilgileri ykleniyor..."})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-3",children:s.jsxs("p",{className:"text-amber-700 text-xs flex items-start gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-sm shrink-0",children:"info"}),"Olas ikayetlerde kant olarak kullanlmak zere dekont yklemenizi neririz. Yklemek zorunlu deildir."]})}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-6 flex flex-col items-center relative bg-white hover:border-emerald-400 transition-colors",children:[s.jsx("input",{type:"file",accept:"image/*,application/pdf",capture:"environment",onChange:A,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-3 ${d?"bg-emerald-100":"bg-gray-100"}`,children:s.jsx("span",{className:`material-symbols-outlined text-2xl ${d?"text-emerald-500":"text-gray-400"}`,children:d?"check_circle":"upload_file"})}),s.jsx("p",{className:"text-gray-600 font-medium text-sm text-center",children:d?`Seildi: ${d.name}`:"Dekont Ykle (stee Bal)"}),d&&s.jsx("button",{onClick:K=>{K.stopPropagation(),h(null)},className:"mt-2 text-xs text-red-500 hover:underline",children:"Kaldr"})]})]}),s.jsx("button",{onClick:I,className:"w-full bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white py-4 rounded-2xl font-bold text-lg shadow-xl shadow-emerald-500/30 transition-all",children:"demeyi Gnderdim"})]}),s.jsx(Ch,{isOpen:w,type:"warning",title:"Sre Doldu!",message:"lem sresi doldu ve iptal edildi. Ltfen yeni bir ilem balatn.",onClose:()=>{v(!1),t("/dashboard")}})]})},I1=()=>{var V;const t=we(),{user:e,refreshUser:r}=at(),[n,a]=N.useState(""),[o,c]=N.useState(!1),[d,h]=N.useState(1),[f,x]=N.useState(null),[g,y]=N.useState(null),[w,v]=N.useState(!1),[b,E]=N.useState(null),[j,_]=N.useState([]),[S,P]=N.useState(null),[O,A]=N.useState(!0),[I,B]=N.useState(null),[R,W]=N.useState(32),[F,K]=N.useState({isOpen:!1,type:"info",title:"",message:""});N.useEffect(()=>{$(),Q()},[]),N.useEffect(()=>{e!=null&&e.email&&z()},[e==null?void 0:e.email]),N.useEffect(()=>()=>{b&&clearInterval(b)},[b]);const $=async()=>{const H=await G.getActiveP2POrder();H&&B(H)},Q=async()=>{const H=await G.getExchangeRate();H!=null&&H.sell_rate&&W(H.sell_rate)},Y=async()=>{if(!I)return;v(!0);const H=await G.cancelP2POrder(I.id);H.success?(B(null),K({isOpen:!0,type:"success",title:"ptal Edildi",message:"lem iptal edildi"})):K({isOpen:!0,type:"error",title:"Hata",message:"ptal hatas: "+H.error}),v(!1)},z=async()=>{if(e!=null&&e.email){A(!0);try{const H=await G.getBankAccounts(e.email);_(H||[]),H&&H.length>0&&!S&&P(H[0])}catch(H){console.error("Failed to load bank accounts:",H)}A(!1)}},le=()=>{if(!n||parseFloat(n)<10){K({isOpen:!0,type:"warning",title:"Minimum Tutar",message:"Minimum 10 USDT"});return}if(parseFloat(n)>((e==null?void 0:e.balance)||0)){K({isOpen:!0,type:"error",title:"Yetersiz Bakiye",message:"Yetersiz bakiye"});return}if(o)U();else{if(!S){K({isOpen:!0,type:"warning",title:"Banka Sein",message:"Ltfen bir banka hesab sein"});return}re()}},U=async()=>{v(!0);try{if(!e)return;const{data:H,error:ee}=await C.functions.invoke("withdraw-request",{body:{amount:parseFloat(n),asset:"TRY"}});ee?K({isOpen:!0,type:"error",title:"Hata",message:ee.message||"Hata olutu"}):H!=null&&H.success?(K({isOpen:!0,type:"success",title:"Baarl",message:"ekim talebiniz oluturuldu. Onay bekliyor."}),r(),t("/dashboard")):K({isOpen:!0,type:"error",title:"Hata",message:(H==null?void 0:H.error)||"Hata olutu"})}catch(H){K({isOpen:!0,type:"error",title:"Hata",message:H.message||"Hata olutu"})}v(!1)},re=async()=>{var H;if(S){v(!0);try{const ee=await G.createP2POrderNew("SELL",parseFloat(n),S.iban,S.bankName,S.accountName);if(ee.success&&ee.order){const te=ee.order.id;x(te),h(2);const X=await G.matchP2POrder(te);X.success&&X.match?y({tradeId:X.match.matchedOrderId,buyer:(H=X.match.counterparty)==null?void 0:H.email,amount:ee.order.amount_usd,fiatAmount:ee.order.amount_usd*R,status:"MATCHED"}):Z(te)}else K({isOpen:!0,type:"error",title:"Hata",message:"Hata: "+(ee.error||"stek oluturulamad")})}catch(ee){K({isOpen:!0,type:"error",title:"Balant Hatas",message:ee.message||"Balant hatas"})}v(!1)}},Z=H=>{const ee=C.channel(`withdraw-order-${H}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"p2p_orders",filter:`id=eq.${H}`},X=>{console.log("[REALTIME] Withdraw order updated:",X.new);const ie=X.new;ie.status==="MATCHED"?(y({tradeId:H,buyer:"Eleme bulundu",amount:ie.amount_usd,fiatAmount:ie.amount_usd*R,status:"MATCHED"}),C.removeChannel(ee),E(null)):(ie.status==="EXPIRED"||ie.status==="CANCELLED")&&(C.removeChannel(ee),E(null),K({isOpen:!0,type:"warning",title:"Sre Doldu",message:"Sipari sresi doldu veya iptal edildi"}),t("/dashboard"))}).subscribe();E(ee);const te=setInterval(async()=>{const X=await G.getP2POrderStatus(H);X&&X.status==="MATCHED"?(y({tradeId:H,buyer:"Eleme bulundu",amount:X.amount_usd,fiatAmount:X.amount_usd*R,status:"MATCHED"}),clearInterval(te),C.removeChannel(ee),E(null)):((X==null?void 0:X.status)==="EXPIRED"||(X==null?void 0:X.status)==="CANCELLED")&&(clearInterval(te),C.removeChannel(ee),E(null),alert("Sipari sresi doldu veya iptal edildi"),t("/dashboard"))},15e3)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display pb-20",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[s.jsx("button",{onClick:()=>d>1?h(1):t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:d===1?"ekim":"lem Durumu"})]}),s.jsxs("div",{className:"p-4 space-y-6",children:[I?s.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center",children:[s.jsx("div",{className:"w-24 h-24 rounded-full bg-amber-500/20 flex items-center justify-center mb-6",children:s.jsx("span",{className:"material-symbols-outlined text-5xl text-amber-400",children:"pending"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Bekleyen leminiz Var"}),s.jsxs("p",{className:"text-gray-400 mb-6 max-w-xs",children:["Aktif bir ",I.type==="SELL"?"sat":"al"," emriniz bulunuyor. Yeni ilem oluturmak iin nce mevcut ilemi tamamlamanz veya iptal etmeniz gerekiyor."]}),s.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 w-full max-w-xs mb-6",children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-500",children:"lem Tipi:"}),s.jsx("span",{className:`font-bold ${I.type==="SELL"?"text-red-400":"text-green-400"}`,children:I.type==="SELL"?"ekim (Sat)":"Yatrm (Al)"})]}),s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-500",children:"Miktar:"}),s.jsxs("span",{className:"text-white font-bold",children:["$",I.amount_usd," USDT"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Durum:"}),s.jsx("span",{className:"text-amber-400 font-bold",children:I.status})]})]}),s.jsxs("div",{className:"space-y-3 w-full max-w-xs",children:[s.jsx("button",{onClick:Y,disabled:w||I.status==="PAID",className:"w-full bg-red-500/20 hover:bg-red-500/30 text-red-400 py-3 rounded-xl font-bold transition-colors disabled:opacity-50",children:w?"ptal Ediliyor...":I.status==="PAID"?"deme Yapld - ptal Edilemez":"lemi ptal Et"}),s.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-white/10 hover:bg-white/20 text-white py-3 rounded-xl font-bold transition-colors",children:"Dashboard'a Dn"})]})]}):d===1&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[s.jsx("p",{className:"text-gray-500 font-medium text-sm mb-1",children:"Mevcut Bakiye"}),s.jsxs("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:[e==null?void 0:e.balance.toFixed(2)," ",s.jsx("span",{className:"text-xl font-bold text-gray-400",children:"NUSD"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-bold text-emerald-300",children:"deme Alacanz Hesap"}),s.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"text-xs text-lime-400 font-bold hover:underline flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Yeni Ekle"]})]}),O?s.jsx("div",{className:"bg-white rounded-xl p-4 shadow animate-pulse",children:s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"})}):j.length===0?s.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"w-full bg-white rounded-xl p-4 border-2 border-dashed border-gray-300 hover:border-emerald-500 transition-colors text-center shadow",children:[s.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-3xl mb-2",children:"add_card"}),s.jsx("p",{className:"text-gray-900 font-bold",children:"Banka Hesab Ekle"}),s.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"ekim yapmak iin bir banka hesab eklemelisiniz"})]}):s.jsx("div",{className:"space-y-2",children:j.map(H=>s.jsxs("button",{onClick:()=>P(H),className:`w-full p-4 rounded-xl transition-all text-left flex items-center gap-3 shadow ${(S==null?void 0:S.id)===H.id?"bg-emerald-50 border-2 border-emerald-500":"bg-white border border-gray-200 hover:border-emerald-300"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${(S==null?void 0:S.id)===H.id?"bg-emerald-100 text-emerald-600":"bg-blue-100 text-blue-500"}`,children:s.jsx("span",{className:"material-symbols-outlined",children:"account_balance"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-bold text-gray-900",children:H.bankName}),s.jsx("p",{className:"text-xs text-gray-500 font-mono",children:H.iban})]}),(S==null?void 0:S.id)===H.id&&s.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]},H.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-emerald-300 mb-2",children:"ekim Tutar (USDT)"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-bold text-gray-400",children:"$"}),s.jsx("input",{className:"w-full pl-10 pr-4 py-4 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none bg-white text-gray-900 font-bold text-lg placeholder:text-gray-400 shadow",type:"number",value:n,onChange:H=>a(H.target.value),placeholder:"0.00"})]}),s.jsxs("p",{className:"text-xs text-emerald-200 mt-2",children:["Minimum: 10 USDT  Alacanz: ",(parseFloat(n||"0")*R).toLocaleString()," TL"]})]}),s.jsx("div",{className:"flex gap-2",children:[50,100,500,1e3].map(H=>s.jsxs("button",{onClick:()=>a(H.toString()),className:"flex-1 py-2 rounded-lg bg-white border border-gray-200 text-gray-700 font-bold text-sm hover:border-emerald-500 hover:text-emerald-600 transition-colors shadow-sm",children:["$",H]},H))}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:()=>c(!1),className:`p-4 rounded-2xl border-2 text-left transition-all shadow ${o?"bg-white border-gray-200 hover:border-emerald-300":"bg-emerald-50 border-emerald-500"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:`font-bold text-lg ${o?"text-gray-900":"text-emerald-600"}`,children:"Standart"}),!o&&s.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]}),s.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"P2P Eleme"}),s.jsx("p",{className:"text-xs text-emerald-500 font-bold mt-1",children:"%0 Komisyon"})]}),s.jsxs("button",{onClick:()=>c(!0),className:`p-4 rounded-2xl border-2 text-left transition-all shadow ${o?"bg-emerald-50 border-emerald-500":"bg-white border-gray-200 hover:border-emerald-300"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:`font-bold text-lg ${o?"text-emerald-600":"text-gray-900"}`,children:"Hzl"}),o&&s.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]}),s.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Sistem deme"}),s.jsx("p",{className:"text-xs text-red-500 font-bold mt-1",children:"%2 Komisyon"})]})]}),s.jsx("button",{onClick:le,disabled:w||!o&&!S,className:"w-full bg-lime-500 hover:bg-lime-400 disabled:opacity-50 active:scale-[0.98] transition-all text-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-lime-500/20",children:w?"leniyor...":"ekim Yap"})]}),d===2&&s.jsx("div",{className:"text-center py-8",children:g?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-lime-500/20 flex items-center justify-center mx-auto mb-6",children:s.jsx("span",{className:"material-symbols-outlined text-5xl text-lime-400",children:"check_circle"})}),s.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Eleme Bulundu!"}),s.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Alc demeyi yaptnda bakiyenizden dlecek."}),s.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 text-left space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Sat Tutar"}),s.jsxs("span",{className:"font-bold text-lime-400",children:[g.amount," USDT"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Alacanz"}),s.jsxs("span",{className:"font-bold text-white",children:[(V=g.fiatAmount)==null?void 0:V.toLocaleString()," TL"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Durum"}),s.jsx("span",{className:"text-amber-400 font-bold",children:g.status||"deme Bekleniyor"})]})]}),s.jsx("button",{onClick:()=>t("/dashboard"),className:"mt-6 w-full bg-white/10 hover:bg-white/20 text-white py-3 rounded-xl font-bold",children:"Dashboard'a Dn"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-20 h-20 border-4 border-lime-500/30 border-t-lime-500 rounded-full animate-spin mx-auto mb-6"}),s.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Alc Bekleniyor"}),s.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Sizin iin uygun bir alc aranyor..."}),s.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 text-left space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Sat Tutar"}),s.jsxs("span",{className:"font-bold text-white",children:[n," USDT"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Hesap"}),s.jsx("span",{className:"text-xs text-gray-400",children:S==null?void 0:S.bankName})]})]})]})})]}),s.jsx(Ch,{isOpen:F.isOpen,type:F.type,title:F.title,message:F.message,onClose:()=>K({...F,isOpen:!1})})]})},R1=()=>{const t=we(),{user:e,refreshUser:r}=at(),[n,a]=N.useState(""),[o,c]=N.useState(""),[d,h]=N.useState("Tron (TRC20)"),[f,x]=N.useState(!1),[g,y]=N.useState(null),[w,v]=N.useState(!0),[b,E]=N.useState(!1),[j,_]=N.useState(!1),[S,P]=N.useState(0),[O,A]=N.useState("");N.useEffect(()=>{(async()=>{try{const{data:{user:z}}=await C.auth.getUser();if(!z)return;const{data:le}=await C.from("transactions").select("id, amount, created_at, network").eq("user_id",z.id).eq("type","WITHDRAW").eq("status","PENDING").limit(1);le&&le.length>0&&y(le[0])}catch(z){console.error("Check pending error:",z)}v(!1)})()},[]);const I=async()=>{if(g){E(!0);try{const{data:Y,error:z}=await C.functions.invoke("cancel-withdrawal",{body:{transactionId:g.id}});z?alert(z.message||"ptal baarsz"):Y!=null&&Y.success?(alert(" ekim talebi iptal edildi. Bakiyeniz iade edildi."),y(null),r()):alert((Y==null?void 0:Y.error)||"ptal baarsz")}catch(Y){alert(Y.message||"ptal baarsz")}E(!1)}},B=o.toUpperCase().startsWith("NUSD-"),R=B?0:1,W=parseFloat(n)||0,F=W>R?W-R:0,K=o.length>5&&W>=10,$=()=>{e&&a(e.balance.toString())},Q=async()=>{if(K){x(!0);try{if(B){const{data:Y,error:z}=await C.functions.invoke("internal-transfer",{body:{amount:W,recipient_code:o.toUpperCase()}});z?alert(z.message||"Transfer failed"):Y!=null&&Y.success?(P(W),A(o.toUpperCase()),_(!0),r()):alert((Y==null?void 0:Y.error)||"Transfer failed")}else{const{data:Y,error:z}=await C.functions.invoke("withdraw-request",{body:{amount:W,asset:d}});z?alert(z.message||"Withdrawal failed"):Y!=null&&Y.success?(alert("Withdrawal Request Submitted (Pending)"),r(),t("/dashboard")):Y!=null&&Y.hasPendingWithdrawal?(y(Y.pendingWithdrawal),alert(Y.error)):alert((Y==null?void 0:Y.error)||"Withdrawal failed")}}catch(Y){alert(Y.message||"Transfer failed")}x(!1)}};return w?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex items-center justify-center",children:s.jsx("div",{className:"text-emerald-300",children:"Ykleniyor..."})}):g?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[s.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Send USDT"})]}),s.jsx("div",{className:"p-4 flex-1 flex flex-col items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full text-center shadow-xl",children:[s.jsx("span",{className:"material-symbols-outlined text-amber-500 text-5xl mb-4",children:"pending"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Bekleyen ekim Talebi"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Zaten bir ekim talebiniz ileniyor. Yeni talep oluturmak iin mevcut talebin tamamlanmasn bekleyin veya iptal edin."}),s.jsxs("div",{className:"bg-gray-100 rounded-xl p-4 mb-4",children:[s.jsxs("p",{className:"text-2xl font-bold text-amber-500",children:["$",g.amount]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(g.created_at).toLocaleString()}),s.jsx("p",{className:"text-xs text-gray-500",children:g.network})]}),s.jsx("button",{onClick:I,disabled:b,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-xl font-bold disabled:opacity-50 mb-3 transition-colors",children:b?"ptal Ediliyor...":"Talebi ptal Et"}),s.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-gray-100 text-gray-600 py-3 rounded-xl font-bold hover:bg-gray-200 transition-colors",children:"Bekle, Geri Dn"})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[s.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Send USDT"})]}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[s.jsx("p",{className:"text-gray-500 font-medium text-sm mb-1",children:"Available Balance"}),s.jsxs("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:[e==null?void 0:e.balance.toLocaleString()," ",s.jsx("span",{className:"text-xl font-bold text-gray-400",children:"USDT"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-emerald-300 mb-2",children:"Recipient Address or NUSD Code"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"w-full pl-4 pr-12 py-3.5 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none bg-white text-gray-900 font-medium placeholder:text-gray-400 shadow",placeholder:"NUSD-XXXX or TAeaxx...",value:o,onChange:Y=>c(Y.target.value)}),s.jsx("span",{className:`material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 ${B?"text-emerald-500":"text-gray-400"}`,children:B?"bolt":"qr_code_scanner"})]}),o.length>3&&s.jsxs("div",{className:`mt-2 px-3 py-1.5 rounded-lg text-xs font-bold inline-flex items-center gap-1 ${B?"bg-emerald-100 text-emerald-600":"bg-blue-100 text-blue-600"}`,children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:B?"bolt":"language"}),B?"Internal Transfer (Instant, No Fee)":"External Withdraw (Blockchain)"]})]}),!B&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-emerald-300 mb-2",children:"Network"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full px-4 py-3.5 rounded-xl border border-gray-200 focus:border-emerald-500 transition-all outline-none bg-white text-gray-900 font-medium appearance-none shadow",value:d,onChange:Y=>h(Y.target.value),children:[s.jsx("option",{children:"Tron (TRC20)"}),s.jsx("option",{children:"Ethereum (ERC20)"}),s.jsx("option",{children:"BSC (BEP20)"})]}),s.jsx("span",{className:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:"expand_more"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-bold text-emerald-300",children:"Amount"}),s.jsx("button",{onClick:$,className:"text-lime-400 text-xs font-bold hover:text-lime-300",children:"MAX"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"w-full pl-4 pr-16 py-3.5 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none bg-white text-gray-900 font-bold text-lg placeholder:text-gray-400 shadow",type:"number",placeholder:"Min 10.00",value:n,onChange:Y=>a(Y.target.value)}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 font-bold text-gray-400",children:"USDT"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Fee"}),s.jsx("span",{className:`font-bold ${B?"text-emerald-500":"text-gray-900"}`,children:B?"FREE":`${R.toFixed(2)} USDT`})]}),s.jsxs("div",{className:"flex justify-between text-base border-t border-gray-100 pt-2 mt-2",children:[s.jsx("span",{className:"font-bold text-gray-900",children:"Receive Amount"}),s.jsxs("span",{className:"font-bold text-emerald-500",children:[(B?W:F).toFixed(2)," USDT"]})]})]}),s.jsx("button",{onClick:Q,disabled:!K||f,className:`w-full py-4 rounded-xl font-bold text-lg shadow-xl transition-all ${K&&!f?"bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white shadow-emerald-500/20":"bg-gray-300 text-gray-500 cursor-not-allowed shadow-none"}`,children:f?"Processing...":B?" Send Instantly":"Confirm Withdrawal"})]}),j&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs("div",{className:"relative bg-white rounded-3xl p-8 w-full max-w-sm shadow-2xl animate-scale-in text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("span",{className:"material-symbols-outlined text-5xl text-emerald-500",children:"check_circle"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transfer Baarl!"}),s.jsxs("div",{className:"bg-gray-100 rounded-xl p-4 mb-4",children:[s.jsxs("p",{className:"text-3xl font-extrabold text-emerald-500",children:[S.toLocaleString()," USDT"]}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"gnderildi"})]}),s.jsxs("div",{className:"bg-emerald-50 rounded-lg px-4 py-3 mb-6",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Alc"}),s.jsx("p",{className:"font-mono text-emerald-600 font-bold",children:O})]}),s.jsx("button",{onClick:()=>{_(!1),t("/dashboard")},className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white py-4 rounded-xl font-bold text-lg transition-all",children:"Tamam"})]})]})]})},D1=()=>{const t=we(),{user:e,refreshUser:r}=at(),[n,a]=N.useState("TRC20"),[o,c]=N.useState(null),[d,h]=N.useState(""),[f,x]=N.useState(""),[g,y]=N.useState(!1),[w,v]=N.useState(!1),b="TAeaxxAUqqpdKJmvg9JPHajTNQLRfwdJ3F",E=(e==null?void 0:e.nusd_code)||(()=>{if(!(e!=null&&e.email))return"NUSD-XXXX";const S=e.email.split("").reduce((O,A)=>(O<<5)-O+A.charCodeAt(0),0);return`NUSD-${Math.abs(S).toString(36).toUpperCase().slice(0,6)}`})();N.useEffect(()=>{r==null||r()},[]);const j=(S,P)=>{navigator.clipboard.writeText(S),c(P),setTimeout(()=>c(null),2e3)},_=async S=>{if(S.preventDefault(),!d||parseFloat(d)<10){alert("Minimum deposit is 10 USDT");return}y(!0);try{const{data:P,error:O}=await C.functions.invoke("deposit-request",{body:{amount:parseFloat(d),asset:n,tx_hash:f||null}});O?alert(O.message||"Failed to submit deposit notification"):P!=null&&P.success?v(!0):alert((P==null?void 0:P.error)||"Failed to submit deposit notification")}catch{alert("Connection error")}y(!1)};return w?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[s.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Deposit USDT"})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl text-center max-w-sm",children:[s.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-3xl",children:"check_circle"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Deposit Submitted!"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Your deposit notification has been submitted. An admin will verify and approve it shortly."}),s.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white py-3 rounded-xl font-bold transition-colors",children:"Back to Dashboard"})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[s.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Deposit USDT"})]}),s.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-emerald-300 mb-2 text-sm",children:"Select Network"}),s.jsx("div",{className:"grid grid-cols-3 gap-2 bg-white p-1 rounded-xl shadow",children:["TRC20","ERC20","BEP20"].map(S=>s.jsx("button",{onClick:()=>a(S),className:`py-2 rounded-lg text-sm font-bold transition-all ${n===S?"bg-emerald-500 text-white":"text-gray-500 hover:bg-gray-100"}`,children:S},S))})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg",children:[s.jsxs("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-2",children:["Deposit Address (",n,")"]}),s.jsxs("div",{className:"bg-gray-100 rounded-xl p-3 flex items-center justify-between cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>j(b,"address"),children:[s.jsx("p",{className:"font-mono text-gray-900 font-medium text-sm truncate mr-2",children:b}),s.jsx("span",{className:`material-symbols-outlined transition-colors ${o==="address"?"text-emerald-500":"text-emerald-600"}`,children:o==="address"?"check":"content_copy"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/20 to-teal-500/20 rounded-2xl p-4 border border-emerald-500/30",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"material-symbols-outlined text-emerald-400 text-lg",children:"tag"}),s.jsx("p",{className:"text-xs text-emerald-300 font-bold uppercase tracking-wide",children:"Your MEMO Code (Important!)"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 border border-emerald-200 shadow",onClick:()=>j(E,"memo"),children:[s.jsx("p",{className:"font-mono text-gray-900 font-bold text-lg tracking-widest",children:E}),s.jsx("span",{className:`material-symbols-outlined transition-colors ${o==="memo"?"text-emerald-500":"text-emerald-600"}`,children:o==="memo"?"check":"content_copy"})]}),s.jsx("p",{className:"text-xs text-emerald-300/80 mt-2",children:"Add this code to the MEMO/Note field when sending funds."})]}),s.jsxs("form",{onSubmit:_,className:"bg-white rounded-2xl p-4 shadow-lg space-y-4",children:[s.jsxs("h3",{className:"font-bold text-gray-700 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-lg text-emerald-500",children:"receipt_long"}),"Notify Deposit"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 font-bold mb-1",children:"Amount (USDT)"}),s.jsx("input",{type:"number",value:d,onChange:S=>h(S.target.value),placeholder:"0.00",min:"10",step:"0.01",required:!0,className:"w-full border border-gray-200 bg-white rounded-xl p-3 text-lg text-gray-900 font-bold focus:outline-none focus:ring-2 focus:ring-emerald-500 placeholder:text-gray-400"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 font-bold mb-1",children:"Transaction Hash (Optional)"}),s.jsx("input",{type:"text",value:f,onChange:S=>x(S.target.value),placeholder:"Paste TX hash...",className:"w-full border border-gray-200 bg-white rounded-xl p-3 font-mono text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 placeholder:text-gray-400"})]}),s.jsx("button",{type:"submit",disabled:g||!d,className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white py-3 rounded-xl font-bold disabled:opacity-50 transition-colors shadow-lg shadow-emerald-500/20",children:g?"Submitting...":"Submit Deposit Notification"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 flex gap-3 shadow-lg",children:[s.jsx("span",{className:"material-symbols-outlined text-amber-500 shrink-0",children:"warning"}),s.jsxs("div",{className:"text-gray-600 text-sm",children:[s.jsx("p",{className:"font-bold mb-1 text-gray-900",children:"Important:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-500",children:[s.jsxs("li",{children:["Send only ",s.jsxs("span",{className:"font-bold text-gray-700",children:["USDT (",n,")"]})]}),s.jsxs("li",{children:["Include your ",s.jsx("span",{className:"font-bold text-gray-700",children:"MEMO code"})]}),s.jsxs("li",{children:["Minimum deposit: ",s.jsx("span",{className:"font-bold text-gray-700",children:"10.00 USDT"})]})]})]})]})]})]})},B1=()=>{const t=we(),[e,r]=N.useState([]),[n,a]=N.useState(!0);N.useEffect(()=>{(async()=>{try{const{data:{user:f}}=await C.auth.getUser();if(console.log("[History] Current user:",f==null?void 0:f.id,f==null?void 0:f.email),!f){console.log("[History] No user found"),a(!1);return}const{data:x,error:g}=await C.from("transactions").select("*").eq("user_id",f.id).order("created_at",{ascending:!1});g&&console.error("[History] Transactions error:",g);const{data:y,error:w}=await C.from("p2p_orders").select("*").or(`buyer_id.eq.${f.id},seller_id.eq.${f.id}`).in("status",["COMPLETED"]).order("created_at",{ascending:!1});w&&console.error("[History] P2P error:",w);const v=new Set,b=(y||[]).filter(j=>{if(j.matched_order_id){const _=[j.id,j.matched_order_id].sort().join("|");if(v.has(_))return!1;v.add(_)}return!0}).map(j=>{const _=j.seller_id===f.id;return{id:j.id,type:_?"P2P_SELL":"P2P_BUY",amount:_?-j.amount_usd:j.amount_usd,status:j.status,created_at:j.created_at}}),E=[...x||[],...b].sort((j,_)=>new Date(_.created_at).getTime()-new Date(j.created_at).getTime());console.log("[History] Combined result:",{count:E.length}),r(E)}catch(f){console.error("[History] Exception:",f)}a(!1)})()},[]);const o=h=>{switch(h==null?void 0:h.toUpperCase()){case"COMPLETED":return"text-emerald-500";case"PENDING":return"text-amber-500";case"CANCELLED":return"text-red-500";default:return"text-gray-500"}},c=h=>{switch(h==null?void 0:h.toUpperCase()){case"DEPOSIT":case"P2P_BUY":return"arrow_downward";case"WITHDRAW":case"P2P_SELL":return"arrow_upward";case"TRANSFER":return"swap_horiz";default:return"receipt_long"}},d=h=>new Date(h).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center sticky top-0 z-10",children:[s.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"lem Gemii"})]}),s.jsx("div",{className:"p-4 space-y-3 flex-1",children:n?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-emerald-300",children:[s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-lime-400 mb-4"}),s.jsx("p",{className:"font-medium",children:"Ykleniyor..."})]}):e.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-emerald-300",children:[s.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"history_toggle_off"}),s.jsx("p",{className:"font-medium",children:"Henz ilem yok"})]}):e.map(h=>s.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-lg flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${["DEPOSIT","P2P_BUY"].includes(h.type)?"bg-emerald-100 text-emerald-600":["WITHDRAW","P2P_SELL"].includes(h.type)?"bg-red-100 text-red-500":"bg-blue-100 text-blue-500"}`,children:s.jsx("span",{className:"material-symbols-outlined",children:c(h.type)})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:h.type==="DEPOSIT"?"Yatrm":h.type==="WITHDRAW"?"ekim":h.type==="TRANSFER"?"Transfer":h.type==="P2P_BUY"?"P2P Al":h.type==="P2P_SELL"?"P2P Sat":h.type}),s.jsx("p",{className:"text-gray-400 text-xs font-medium mt-0.5",children:d(h.created_at)})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:`font-bold text-base ${["DEPOSIT","P2P_BUY"].includes(h.type)?"text-emerald-500":"text-gray-900"}`,children:[["DEPOSIT","P2P_BUY"].includes(h.type)?"+":["WITHDRAW","P2P_SELL"].includes(h.type)?"-":"","$",Math.abs(h.amount).toLocaleString()," ",s.jsx("span",{className:"text-xs text-gray-400 font-bold ml-0.5",children:"USD"})]}),s.jsx("p",{className:`text-xs font-medium mt-0.5 capitalize ${o(h.status)}`,children:h.status==="COMPLETED"?"Tamamland":h.status==="PENDING"?"Beklemede":h.status==="CANCELLED"?"ptal Edildi":h.status})]})]},h.id))})]})},Wp=["Ziraat Bankas","Trkiye  Bankas","Garanti BBVA","Yap Kredi","Akbank"],M1=()=>{const t=we(),{user:e}=at(),[r,n]=N.useState([]),[a,o]=N.useState(Wp[0]),[c,d]=N.useState(""),[h,f]=N.useState(""),[x,g]=N.useState(!1);N.useEffect(()=>{e&&G.getBankAccounts(e.email).then(n)},[e]);const y=async()=>{if(!e)return;if(!c.trim()||!h.trim())return alert("Ltfen tm alanlar doldurunuz");const v=c.replace(/\s/g,"").toUpperCase();if(!v.startsWith("TR")||v.length!==26)return alert("Geersiz IBAN. TR ile balamal ve 26 karakter olmal.");g(!0);const b=await G.addBankAccount(e.email,a,v,h);b&&(n([...r,b]),d(""),f(""),alert("Banka hesab eklendi!")),g(!1)},w=async v=>{e&&confirm("Bu hesab silmek istediinizden emin misiniz?")&&(await G.deleteBankAccount(e.email,v),n(r.filter(b=>b.id!==v)))};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsxs("div",{className:"px-5 py-4 flex items-center gap-3 sticky top-0 z-10",children:[s.jsx("button",{onClick:()=>t(-1),className:"text-white hover:bg-white/10 p-2 rounded-full transition-colors",children:s.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),s.jsx("h1",{className:"font-extrabold text-lg text-white",children:"Banka Hesaplar"})]}),s.jsxs("div",{className:"px-5 py-6 flex-1 overflow-y-auto",children:[s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-6",children:[s.jsxs("h2",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"add_circle"}),"Yeni Hesap Ekle"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"Banka"}),s.jsx("select",{value:a,onChange:v=>o(v.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none",children:Wp.map(v=>s.jsx("option",{value:v,children:v},v))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"Hesap Sahibi Ad Soyad"}),s.jsx("input",{value:h,onChange:v=>f(v.target.value),placeholder:"rn: Ahmet Ylmaz",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 font-medium focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none placeholder-gray-400"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"IBAN"}),s.jsx("input",{value:c,onChange:v=>d(v.target.value),placeholder:"TR00 0000 0000 0000 0000 0000 00",maxLength:34,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 font-mono focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all outline-none placeholder-gray-400"}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"TR ile balamal, 26 karakter olmal"})]}),s.jsx("button",{onClick:y,disabled:x||!c||!h,className:"w-full bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 rounded-xl font-bold shadow-lg shadow-emerald-500/20 transition-all",children:x?"Ekleniyor...":"Hesap Ekle"})]})]}),s.jsx("h2",{className:"font-bold text-emerald-300 mb-3 px-1",children:"Kaytl Hesaplar"}),r.length===0?s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg text-center",children:[s.jsx("span",{className:"material-symbols-outlined text-5xl text-gray-300 mb-3",children:"account_balance"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"Henz banka hesab eklemediniz"})]}):s.jsx("div",{className:"space-y-3",children:r.map(v=>{var b;return s.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-lg flex items-start justify-between hover:shadow-xl transition-all",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"account_balance"}),s.jsx("h3",{className:"font-bold text-gray-900",children:v.bankName})]}),s.jsx("p",{className:"font-mono text-sm text-gray-600 bg-gray-100 px-3 py-2 rounded-lg inline-block",children:(b=v.iban.match(/.{1,4}/g))==null?void 0:b.join(" ")}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:v.addedAt})]}),s.jsx("button",{onClick:()=>w(v.id),className:"text-red-500 hover:bg-red-50 p-2 rounded-full transition-colors ml-2",children:s.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]},v.id)})})]})]})},z1=()=>{};var Vp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},U1=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const o=t[r++];e[n++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=t[r++],c=t[r++],d=t[r++],h=((a&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const o=t[r++],c=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},yv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const o=t[a],c=a+1<t.length,d=c?t[a+1]:0,h=a+2<t.length,f=h?t[a+2]:0,x=o>>2,g=(o&3)<<4|d>>4;let y=(d&15)<<2|f>>6,w=f&63;h||(w=64,c||(y=64)),n.push(r[x],r[g],r[y],r[w])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):U1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const o=r[t.charAt(a++)],d=a<t.length?r[t.charAt(a)]:0;++a;const f=a<t.length?r[t.charAt(a)]:64;++a;const g=a<t.length?r[t.charAt(a)]:64;if(++a,o==null||d==null||f==null||g==null)throw new $1;const y=o<<2|d>>4;if(n.push(y),f!==64){const w=d<<4&240|f>>2;if(n.push(w),g!==64){const v=f<<6&192|g;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F1=function(t){const e=xv(t);return yv.encodeByteArray(e,!0)},vv=function(t){return F1(t).replace(/\./g,"")},H1=function(t){try{return yv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=()=>W1().__FIREBASE_DEFAULTS__,q1=()=>{if(typeof process>"u"||typeof Vp>"u")return;const t=Vp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},K1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&H1(t[1]);return e&&JSON.parse(e)},G1=()=>{try{return z1()||V1()||q1()||K1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bv=()=>{var t;return(t=G1())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}function _v(){try{return typeof indexedDB=="object"}catch{return!1}}function wv(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var o;e(((o=a.error)==null?void 0:o.message)||"")}}catch(r){e(r)}})}function Y1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="FirebaseError";class Vs extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=J1,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cl.prototype.create)}}class Cl{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?X1(o,n):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Vs(a,d,n)}}function X1(t,e){return t.replace(Q1,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const Q1=/\{\$([^}]+)}/g;function md(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const o=t[a],c=e[a];if(qp(o)&&qp(c)){if(!md(o,c))return!1}else if(o!==c)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function qp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return t&&t._delegate?t._delegate:t}class nn{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Z1;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rE(e))try{this.getOrInitializeService({instanceIdentifier:Nn})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:a});n.resolve(o)}catch{}}}}clearInstance(e=Nn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nn){return this.instances.has(e)}getOptions(e=Nn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);n===d&&c.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const o=this.instances.get(n);return o&&e(o,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:tE(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Nn){return this.component?this.component.multipleInstances?e:Nn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tE(t){return t===Nn?void 0:t}function rE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new eE(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const sE={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},iE=Ce.INFO,aE={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},oE=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=aE[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lE{constructor(e){this.name=e,this._logLevel=iE,this._logHandler=oE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const cE=(t,e)=>e.some(r=>t instanceof r);let Kp,Gp;function uE(){return Kp||(Kp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dE(){return Gp||(Gp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jv=new WeakMap,pd=new WeakMap,Nv=new WeakMap,qc=new WeakMap,Oh=new WeakMap;function hE(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{r(Nr(t.result)),a()},c=()=>{n(t.error),a()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(r=>{r instanceof IDBCursor&&jv.set(r,t)}).catch(()=>{}),Oh.set(e,t),e}function fE(t){if(pd.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{r(),a()},c=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});pd.set(t,e)}let gd={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return pd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Nv.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Nr(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mE(t){gd=t(gd)}function pE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Kc(this),e,...r);return Nv.set(n,e.sort?e.sort():[e]),Nr(n)}:dE().includes(t)?function(...e){return t.apply(Kc(this),e),Nr(jv.get(this))}:function(...e){return Nr(t.apply(Kc(this),e))}}function gE(t){return typeof t=="function"?pE(t):(t instanceof IDBTransaction&&fE(t),cE(t,uE())?new Proxy(t,gd):t)}function Nr(t){if(t instanceof IDBRequest)return hE(t);if(qc.has(t))return qc.get(t);const e=gE(t);return e!==t&&(qc.set(t,e),Oh.set(e,t)),e}const Kc=t=>Oh.get(t);function Al(t,e,{blocked:r,upgrade:n,blocking:a,terminated:o}={}){const c=indexedDB.open(t,e),d=Nr(c);return n&&c.addEventListener("upgradeneeded",h=>{n(Nr(c.result),h.oldVersion,h.newVersion,Nr(c.transaction),h)}),r&&c.addEventListener("blocked",h=>r(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),a&&h.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}function Gc(t,{blocked:e}={}){const r=indexedDB.deleteDatabase(t);return e&&r.addEventListener("blocked",n=>e(n.oldVersion,n)),Nr(r).then(()=>{})}const xE=["get","getKey","getAll","getAllKeys","count"],yE=["put","add","delete","clear"],Zc=new Map;function Zp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zc.get(e))return Zc.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=yE.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||xE.includes(r)))return;const o=async function(c,...d){const h=this.transaction(c,a?"readwrite":"readonly");let f=h.store;return n&&(f=f.index(d.shift())),(await Promise.all([f[r](...d),a&&h.done]))[0]};return Zc.set(e,o),o}mE(t=>({...t,get:(e,r,n)=>Zp(e,r)||t.get(e,r,n),has:(e,r)=>!!Zp(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(bE(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function bE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xd="@firebase/app",Yp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new lE("@firebase/app"),_E="@firebase/app-compat",wE="@firebase/analytics-compat",jE="@firebase/analytics",NE="@firebase/app-check-compat",kE="@firebase/app-check",SE="@firebase/auth",EE="@firebase/auth-compat",PE="@firebase/database",TE="@firebase/data-connect",CE="@firebase/database-compat",AE="@firebase/functions",OE="@firebase/functions-compat",LE="@firebase/installations",IE="@firebase/installations-compat",RE="@firebase/messaging",DE="@firebase/messaging-compat",BE="@firebase/performance",ME="@firebase/performance-compat",zE="@firebase/remote-config",UE="@firebase/remote-config-compat",$E="@firebase/storage",FE="@firebase/storage-compat",HE="@firebase/firestore",WE="@firebase/ai",VE="@firebase/firestore-compat",qE="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="[DEFAULT]",KE={[xd]:"fire-core",[_E]:"fire-core-compat",[jE]:"fire-analytics",[wE]:"fire-analytics-compat",[kE]:"fire-app-check",[NE]:"fire-app-check-compat",[SE]:"fire-auth",[EE]:"fire-auth-compat",[PE]:"fire-rtdb",[TE]:"fire-data-connect",[CE]:"fire-rtdb-compat",[AE]:"fire-fn",[OE]:"fire-fn-compat",[LE]:"fire-iid",[IE]:"fire-iid-compat",[RE]:"fire-fcm",[DE]:"fire-fcm-compat",[BE]:"fire-perf",[ME]:"fire-perf-compat",[zE]:"fire-rc",[UE]:"fire-rc-compat",[$E]:"fire-gcs",[FE]:"fire-gcs-compat",[HE]:"fire-fst",[VE]:"fire-fst-compat",[WE]:"fire-vertex","fire-js":"fire-js",[qE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new Map,GE=new Map,vd=new Map;function Jp(t,e){try{t.container.addComponent(e)}catch(r){Tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Un(t){const e=t.name;if(vd.has(e))return Tr.debug(`There were multiple attempts to register component ${e}.`),!1;vd.set(e,t);for(const r of nl.values())Jp(r,t);for(const r of GE.values())Jp(r,t);return!0}function Lh(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qr=new Cl("app","Firebase",ZE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}function kv(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:yd,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Qr.create("bad-app-name",{appName:String(a)});if(r||(r=bv()),!r)throw Qr.create("no-options");const o=nl.get(a);if(o){if(md(r,o.options)&&md(n,o.config))return o;throw Qr.create("duplicate-app",{appName:a})}const c=new nE(a);for(const h of vd.values())c.addComponent(h);const d=new YE(r,n,c);return nl.set(a,d),d}function JE(t=yd){const e=nl.get(t);if(!e&&t===yd&&bv())return kv();if(!e)throw Qr.create("no-app",{appName:t});return e}function en(t,e,r){let n=KE[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${n}" with version "${e}":`];a&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tr.warn(c.join(" "));return}Un(new nn(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="firebase-heartbeat-database",QE=1,Xi="firebase-heartbeat-store";let Yc=null;function Sv(){return Yc||(Yc=Al(XE,QE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xi)}catch(r){console.warn(r)}}}}).catch(t=>{throw Qr.create("idb-open",{originalErrorMessage:t.message})})),Yc}async function e2(t){try{const r=(await Sv()).transaction(Xi),n=await r.objectStore(Xi).get(Ev(t));return await r.done,n}catch(e){if(e instanceof Vs)Tr.warn(e.message);else{const r=Qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tr.warn(r.message)}}}async function Xp(t,e){try{const n=(await Sv()).transaction(Xi,"readwrite");await n.objectStore(Xi).put(e,Ev(t)),await n.done}catch(r){if(r instanceof Vs)Tr.warn(r.message);else{const n=Qr.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Tr.warn(n.message)}}}function Ev(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=1024,r2=30;class n2{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new i2(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Qp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>r2){const c=a2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Tr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Qp(),{heartbeatsToSend:n,unsentEntries:a}=s2(this._heartbeatsCache.heartbeats),o=vv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return Tr.warn(r),""}}}function Qp(){return new Date().toISOString().substring(0,10)}function s2(t,e=t2){const r=[];let n=t.slice();for(const a of t){const o=r.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),eg(r)>e){o.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),eg(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class i2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _v()?wv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await e2(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Xp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Xp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function eg(t){return vv(JSON.stringify({version:2,heartbeats:t})).length}function a2(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){Un(new nn("platform-logger",e=>new vE(e),"PRIVATE")),Un(new nn("heartbeat",e=>new n2(e),"PRIVATE")),en(xd,Yp,t),en(xd,Yp,"esm2020"),en("fire-js","")}o2("");var l2="firebase",c2="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en(l2,c2,"app");const Pv="@firebase/installations",Ih="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=1e4,Cv=`w:${Ih}`,Av="FIS_v2",u2="https://firebaseinstallations.googleapis.com/v1",d2=60*60*1e3,h2="installations",f2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$n=new Cl(h2,f2,m2);function Ov(t){return t instanceof Vs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv({projectId:t}){return`${u2}/projects/${t}/installations`}function Iv(t){return{token:t.token,requestStatus:2,expiresIn:g2(t.expiresIn),creationTime:Date.now()}}async function Rv(t,e){const n=(await e.json()).error;return $n.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Dv({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function p2(t,{refreshToken:e}){const r=Dv(t);return r.append("Authorization",x2(e)),r}async function Bv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function g2(t){return Number(t.replace("s","000"))}function x2(t){return`${Av} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=Lv(t),a=Dv(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&a.append("x-firebase-client",f)}const c={fid:r,authVersion:Av,appId:t.appId,sdkVersion:Cv},d={method:"POST",headers:a,body:JSON.stringify(c)},h=await Bv(()=>fetch(n,d));if(h.ok){const f=await h.json();return{fid:f.fid||r,registrationStatus:2,refreshToken:f.refreshToken,authToken:Iv(f.authToken)}}else throw await Rv("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=/^[cdef][\w-]{21}$/,bd="";function _2(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=w2(t);return b2.test(r)?r:bd}catch{return bd}}function w2(t){return v2(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;function Uv(t,e){const r=Ol(t);$v(r,e),j2(r,e)}function $v(t,e){const r=zv.get(t);if(r)for(const n of r)n(e)}function j2(t,e){const r=N2();r&&r.postMessage({key:t,fid:e}),k2()}let An=null;function N2(){return!An&&"BroadcastChannel"in self&&(An=new BroadcastChannel("[Firebase] FID Change"),An.onmessage=t=>{$v(t.data.key,t.data.fid)}),An}function k2(){zv.size===0&&An&&(An.close(),An=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="firebase-installations-database",E2=1,Fn="firebase-installations-store";let Jc=null;function Rh(){return Jc||(Jc=Al(S2,E2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Fn)}}})),Jc}async function sl(t,e){const r=Ol(t),a=(await Rh()).transaction(Fn,"readwrite"),o=a.objectStore(Fn),c=await o.get(r);return await o.put(e,r),await a.done,(!c||c.fid!==e.fid)&&Uv(t,e.fid),e}async function Fv(t){const e=Ol(t),n=(await Rh()).transaction(Fn,"readwrite");await n.objectStore(Fn).delete(e),await n.done}async function Ll(t,e){const r=Ol(t),a=(await Rh()).transaction(Fn,"readwrite"),o=a.objectStore(Fn),c=await o.get(r),d=e(c);return d===void 0?await o.delete(r):await o.put(d,r),await a.done,d&&(!c||c.fid!==d.fid)&&Uv(t,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(t){let e;const r=await Ll(t.appConfig,n=>{const a=P2(n),o=T2(t,a);return e=o.registrationPromise,o.installationEntry});return r.fid===bd?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function P2(t){const e=t||{fid:_2(),registrationStatus:0};return Hv(e)}function T2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject($n.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=C2(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:A2(t)}:{installationEntry:e}}async function C2(t,e){try{const r=await y2(t,e);return sl(t.appConfig,r)}catch(r){throw Ov(r)&&r.customData.serverCode===409?await Fv(t.appConfig):await sl(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function A2(t){let e=await tg(t.appConfig);for(;e.registrationStatus===1;)await Mv(100),e=await tg(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await Dh(t);return n||r}return e}function tg(t){return Ll(t,e=>{if(!e)throw $n.create("installation-not-found");return Hv(e)})}function Hv(t){return O2(t)?{fid:t.fid,registrationStatus:0}:t}function O2(t){return t.registrationStatus===1&&t.registrationTime+Tv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2({appConfig:t,heartbeatServiceProvider:e},r){const n=I2(t,r),a=p2(t,r),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&a.append("x-firebase-client",f)}const c={installation:{sdkVersion:Cv,appId:t.appId}},d={method:"POST",headers:a,body:JSON.stringify(c)},h=await Bv(()=>fetch(n,d));if(h.ok){const f=await h.json();return Iv(f)}else throw await Rv("Generate Auth Token",h)}function I2(t,{fid:e}){return`${Lv(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(t,e=!1){let r;const n=await Ll(t.appConfig,o=>{if(!Wv(o))throw $n.create("not-registered");const c=o.authToken;if(!e&&B2(c))return o;if(c.requestStatus===1)return r=R2(t,e),o;{if(!navigator.onLine)throw $n.create("app-offline");const d=z2(o);return r=D2(t,d),d}});return r?await r:n.authToken}async function R2(t,e){let r=await rg(t.appConfig);for(;r.authToken.requestStatus===1;)await Mv(100),r=await rg(t.appConfig);const n=r.authToken;return n.requestStatus===0?Bh(t,e):n}function rg(t){return Ll(t,e=>{if(!Wv(e))throw $n.create("not-registered");const r=e.authToken;return U2(r)?{...e,authToken:{requestStatus:0}}:e})}async function D2(t,e){try{const r=await L2(t,e),n={...e,authToken:r};return await sl(t.appConfig,n),r}catch(r){if(Ov(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await Fv(t.appConfig);else{const n={...e,authToken:{requestStatus:0}};await sl(t.appConfig,n)}throw r}}function Wv(t){return t!==void 0&&t.registrationStatus===2}function B2(t){return t.requestStatus===2&&!M2(t)}function M2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+d2}function z2(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function U2(t){return t.requestStatus===1&&t.requestTime+Tv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(t){const e=t,{installationEntry:r,registrationPromise:n}=await Dh(e);return n?n.catch(console.error):Bh(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t,e=!1){const r=t;return await H2(r),(await Bh(r,e)).token}async function H2(t){const{registrationPromise:e}=await Dh(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){if(!t||!t.options)throw Xc("App Configuration");if(!t.name)throw Xc("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw Xc(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Xc(t){return $n.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="installations",V2="installations-internal",q2=t=>{const e=t.getProvider("app").getImmediate(),r=W2(e),n=Lh(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},K2=t=>{const e=t.getProvider("app").getImmediate(),r=Lh(e,Vv).getImmediate();return{getId:()=>$2(r),getToken:a=>F2(r,a)}};function G2(){Un(new nn(Vv,q2,"PUBLIC")),Un(new nn(V2,K2,"PRIVATE"))}G2();en(Pv,Ih);en(Pv,Ih,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="/firebase-messaging-sw.js",Y2="/firebase-cloud-messaging-push-scope",qv="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",J2="https://fcmregistrations.googleapis.com/v1",Kv="google.c.a.c_id",X2="google.c.a.c_l",Q2="google.c.a.ts",eP="google.c.a.e",ng=1e4;var sg;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(sg||(sg={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Qi;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Qi||(Qi={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tP(t){const e="=".repeat((4-t.length%4)%4),r=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(r),a=new Uint8Array(n.length);for(let o=0;o<n.length;++o)a[o]=n.charCodeAt(o);return a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc="fcm_token_details_db",rP=5,ig="fcm_token_object_Store";async function nP(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(Qc))return null;let e=null;return(await Al(Qc,rP,{upgrade:async(n,a,o,c)=>{if(a<2||!n.objectStoreNames.contains(ig))return;const d=c.objectStore(ig),h=await d.index("fcmSenderId").get(t);if(await d.clear(),!!h){if(a===2){const f=h;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:f.createTime??Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:yr(f.vapidKey)}}}else if(a===3){const f=h;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:yr(f.auth),p256dh:yr(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:yr(f.vapidKey)}}}else if(a===4){const f=h;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:yr(f.auth),p256dh:yr(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:yr(f.vapidKey)}}}}}})).close(),await Gc(Qc),await Gc("fcm_vapid_details_db"),await Gc("undefined"),sP(e)?e:null}function sP(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="firebase-messaging-database",aP=1,ea="firebase-messaging-store";let eu=null;function Gv(){return eu||(eu=Al(iP,aP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ea)}}})),eu}async function oP(t){const e=Zv(t),n=await(await Gv()).transaction(ea).objectStore(ea).get(e);if(n)return n;{const a=await nP(t.appConfig.senderId);if(a)return await Mh(t,a),a}}async function Mh(t,e){const r=Zv(t),a=(await Gv()).transaction(ea,"readwrite");return await a.objectStore(ea).put(e,r),await a.done,e}function Zv({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},dt=new Cl("messaging","Messaging",lP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(t,e){const r=await Uh(t),n=Yv(e),a={method:"POST",headers:r,body:JSON.stringify(n)};let o;try{o=await(await fetch(zh(t.appConfig),a)).json()}catch(c){throw dt.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(o.error){const c=o.error.message;throw dt.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw dt.create("token-subscribe-no-token");return o.token}async function uP(t,e){const r=await Uh(t),n=Yv(e.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(n)};let o;try{o=await(await fetch(`${zh(t.appConfig)}/${e.token}`,a)).json()}catch(c){throw dt.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(o.error){const c=o.error.message;throw dt.create("token-update-failed",{errorInfo:c})}if(!o.token)throw dt.create("token-update-no-token");return o.token}async function dP(t,e){const n={method:"DELETE",headers:await Uh(t)};try{const o=await(await fetch(`${zh(t.appConfig)}/${e}`,n)).json();if(o.error){const c=o.error.message;throw dt.create("token-unsubscribe-failed",{errorInfo:c})}}catch(a){throw dt.create("token-unsubscribe-failed",{errorInfo:a==null?void 0:a.toString()})}}function zh({projectId:t}){return`${J2}/projects/${t}/registrations`}async function Uh({appConfig:t,installations:e}){const r=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function Yv({p256dh:t,auth:e,endpoint:r,vapidKey:n}){const a={web:{endpoint:r,auth:e,p256dh:t}};return n!==qv&&(a.web.applicationPubKey=n),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=7*24*60*60*1e3;async function fP(t){const e=await pP(t.swRegistration,t.vapidKey),r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:yr(e.getKey("auth")),p256dh:yr(e.getKey("p256dh"))},n=await oP(t.firebaseDependencies);if(n){if(gP(n.subscriptionOptions,r))return Date.now()>=n.createTime+hP?mP(t,{token:n.token,createTime:Date.now(),subscriptionOptions:r}):n.token;try{await dP(t.firebaseDependencies,n.token)}catch(a){console.warn(a)}return ag(t.firebaseDependencies,r)}else return ag(t.firebaseDependencies,r)}async function mP(t,e){try{const r=await uP(t.firebaseDependencies,e),n={...e,token:r,createTime:Date.now()};return await Mh(t.firebaseDependencies,n),r}catch(r){throw r}}async function ag(t,e){const n={token:await cP(t,e),createTime:Date.now(),subscriptionOptions:e};return await Mh(t,n),n.token}async function pP(t,e){const r=await t.pushManager.getSubscription();return r||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tP(e)})}function gP(t,e){const r=e.vapidKey===t.vapidKey,n=e.endpoint===t.endpoint,a=e.auth===t.auth,o=e.p256dh===t.p256dh;return r&&n&&a&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return xP(e,t),yP(e,t),vP(e,t),e}function xP(t,e){if(!e.notification)return;t.notification={};const r=e.notification.title;r&&(t.notification.title=r);const n=e.notification.body;n&&(t.notification.body=n);const a=e.notification.image;a&&(t.notification.image=a);const o=e.notification.icon;o&&(t.notification.icon=o)}function yP(t,e){e.data&&(t.data=e.data)}function vP(t,e){var a,o,c,d;if(!e.fcmOptions&&!((a=e.notification)!=null&&a.click_action))return;t.fcmOptions={};const r=((o=e.fcmOptions)==null?void 0:o.link)??((c=e.notification)==null?void 0:c.click_action);r&&(t.fcmOptions.link=r);const n=(d=e.fcmOptions)==null?void 0:d.analytics_label;n&&(t.fcmOptions.analyticsLabel=n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t){return typeof t=="object"&&!!t&&Kv in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t){if(!t||!t.options)throw tu("App Configuration Object");if(!t.name)throw tu("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:r}=t;for(const n of e)if(!r[n])throw tu(n);return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function tu(t){return dt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,r,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=_P(e);this.firebaseDependencies={app:e,appConfig:a,installations:r,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(t){try{t.swRegistration=await navigator.serviceWorker.register(Z2,{scope:Y2}),t.swRegistration.update().catch(()=>{}),await NP(t.swRegistration)}catch(e){throw dt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function NP(t){return new Promise((e,r)=>{const n=setTimeout(()=>r(new Error(`Service worker not registered after ${ng} ms`)),ng),a=t.installing||t.waiting;t.active?(clearTimeout(n),e()):a?a.onstatechange=o=>{var c;((c=o.target)==null?void 0:c.state)==="activated"&&(a.onstatechange=null,clearTimeout(n),e())}:(clearTimeout(n),r(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(t,e){if(!e&&!t.swRegistration&&await jP(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw dt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=qv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jv(t,e){if(!navigator)throw dt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw dt.create("permission-blocked");return await SP(t,e==null?void 0:e.vapidKey),await kP(t,e==null?void 0:e.serviceWorkerRegistration),fP(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(t,e,r){const n=PP(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:r[Kv],message_name:r[X2],message_time:r[Q2],message_device_time:Math.floor(Date.now()/1e3)})}function PP(t){switch(t){case Qi.NOTIFICATION_CLICKED:return"notification_open";case Qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(t,e){const r=e.data;if(!r.isFirebaseMessaging)return;t.onMessageHandler&&r.messageType===Qi.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(og(r)):t.onMessageHandler.next(og(r)));const n=r.data;bP(n)&&n[eP]==="1"&&await EP(t,r.messageType,n)}const lg="@firebase/messaging",cg="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=t=>{const e=new wP(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>TP(e,r)),e},AP=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:n=>Jv(e,n)}};function OP(){Un(new nn("messaging",CP,"PUBLIC")),Un(new nn("messaging-internal",AP,"PRIVATE")),en(lg,cg),en(lg,cg,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(){try{await wv()}catch{return!1}return typeof window<"u"&&_v()&&Y1()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t,e){if(!navigator)throw dt.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t=JE()){return LP().then(e=>{if(!e)throw dt.create("unsupported-browser")},e=>{throw dt.create("indexed-db-unsupported")}),Lh(Ah(t),"messaging").getImmediate()}async function DP(t,e){return t=Ah(t),Jv(t,e)}function ug(t,e){return t=Ah(t),IP(t,e)}OP();const BP={apiKey:"AIzaSyBJaPbNCAJogBZ-bFts865P553o0urEqVA",authDomain:"nubit-a690c.firebaseapp.com",projectId:"nubit-a690c",storageBucket:"nubit-a690c.firebasestorage.app",messagingSenderId:"38156040204",appId:"1:38156040204:web:8a700adf63c952b13f5629",measurementId:"G-NYWFHBE00W"},MP=kv(BP);let wr=null;const Il=()=>"Notification"in window&&"serviceWorker"in navigator,Xv=async()=>{if(!Il())return console.log("Push notifications not supported"),null;try{const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");return wr=RP(MP),wr}catch(t){return console.error("Failed to initialize messaging:",t),null}},zP=async()=>{if(!Il())return console.log("Notifications not supported"),null;try{if(await Notification.requestPermission()!=="granted")return console.log("Notification permission denied"),null;if(wr||await Xv(),!wr)return null;const e=await DP(wr,{vapidKey:"BGJs5kmZohXm82p7BQL60zzyFq0NFPHVuQbQH6H-IrsnIDQt1PgYn5TIZRkBwBfTfJXmLnIWU6pIIw0HgYf_wcA"});return e?(console.log("FCM Token:",e),await UP(e),e):null}catch(t){return console.error("Error getting notification permission:",t),null}},UP=async t=>{try{const{data:{user:e}}=await C.auth.getUser();if(!e)return;const{data:r}=await C.from("push_tokens").select("id").eq("user_id",e.id).eq("token",t).single();r||await C.from("push_tokens").insert({user_id:e.id,token:t,platform:"web"})}catch(e){console.error("Error saving push token:",e)}},$P=t=>{wr?ug(wr,t):Xv().then(()=>{wr&&ug(wr,t)})},dg=()=>Il()?Notification.permission:"unsupported",FP=async()=>{try{const{data:{user:t}}=await C.auth.getUser();if(!t)return!1;const{data:e}=await C.from("push_tokens").select("id").eq("user_id",t.id).limit(1);return((e==null?void 0:e.length)||0)>0}catch{return!1}},HP=()=>{const[t,e]=N.useState("default"),[r,n]=N.useState(!1),[a,o]=N.useState(!1),[c,d]=N.useState(!0),[h,f]=N.useState(null);N.useEffect(()=>{(async()=>{const y=Il();if(n(y),y){e(dg());const w=await FP();o(w),$P(v=>{var b;console.log("Foreground message received:",v),f(v),(b=v.notification)!=null&&b.title&&WP(v.notification.title,v.notification.body||"")})}d(!1)})()},[]);const x=N.useCallback(async()=>{d(!0);try{const g=await zP(),y=dg();return e(y),o(!!g),!!g}catch(g){return console.error("Error requesting permission:",g),!1}finally{d(!1)}},[]);return{permission:t,isSupported:r,hasToken:a,isLoading:c,requestPermission:x,lastNotification:h}},WP=(t,e)=>{let r=document.getElementById("notification-toast-container");r||(r=document.createElement("div"),r.id="notification-toast-container",r.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
      pointer-events: none;
    `,document.body.appendChild(r));const n=document.createElement("div");n.style.cssText=`
    background: white;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 12px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    max-width: 300px;
    pointer-events: auto;
    animation: slideIn 0.3s ease-out;
  `,n.innerHTML=`
    <div style="display: flex; align-items: flex-start; gap: 12px;">
      <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
        <span style="color: white; font-size: 20px;"></span>
      </div>
      <div style="flex: 1;">
        <p style="font-weight: bold; color: #111; margin: 0 0 4px 0; font-size: 14px;">${t}</p>
        <p style="color: #666; margin: 0; font-size: 13px;">${e}</p>
      </div>
    </div>
  `,r.appendChild(n),setTimeout(()=>{n.style.animation="slideOut 0.3s ease-in",setTimeout(()=>{n.remove()},300)},5e3)};if(typeof document<"u"){const t=document.createElement("style");t.textContent=`
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }
  `,document.head.appendChild(t)}const vt=({icon:t,iconBg:e,label:r,sublabel:n,onClick:a,badge:o,toggle:c,toggleValue:d})=>{const{isDark:h}=_l();return s.jsxs("button",{onClick:a,className:"w-full p-4 flex items-center gap-4 transition-colors text-left hover:bg-gray-50",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl ${e} flex items-center justify-center`,children:s.jsx("span",{className:"material-symbols-outlined",children:t})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-sm font-bold text-gray-900",children:r}),o&&s.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full ${o.color}`,children:o.text})]}),n&&s.jsx("p",{className:"text-xs text-gray-500",children:n})]}),c?s.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${d?"bg-emerald-500":"bg-gray-400"}`,children:s.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-transform ${d?"translate-x-5":""}`})}):s.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]})},VP=()=>{var S;const{user:t,logout:e}=at(),r=we(),{language:n,setLanguage:a,t:o}=T0(),{isDark:c,toggleTheme:d}=_l(),{permission:h,hasToken:f,requestPermission:x}=HP(),[g,y]=N.useState(null),[w,v]=N.useState(!1),[b,E]=N.useState("none");N.useEffect(()=>{j(),_()},[]);const j=async()=>{try{const{data:{user:P}}=await C.auth.getUser();if(!P)return;const{data:O}=await C.from("profiles").select("first_name, last_name, birth_date, profile_completed").eq("id",P.id).single(),A=(O==null?void 0:O.profile_completed)||(O==null?void 0:O.first_name)&&(O==null?void 0:O.last_name)&&(O==null?void 0:O.birth_date);y(!!A)}catch(P){console.error("Check profile error:",P),y(!1)}},_=async()=>{try{const{data:{user:P}}=await C.auth.getUser();if(!P)return;const{data:O}=await C.from("profiles").select("kyc_verified").eq("id",P.id).single();if(O!=null&&O.kyc_verified){E("approved");return}const{data:A}=await C.from("verification_submissions").select("status").eq("user_id",P.id).eq("submission_type","kyc").order("created_at",{ascending:!1}).limit(1).single();E(A?A.status:"none")}catch(P){console.error("Check KYC status error:",P)}};return s.jsxs("div",{className:"h-screen flex flex-col font-display overflow-hidden bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950",children:[w&&s.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end sm:items-center justify-center p-4",children:s.jsxs("div",{className:"rounded-2xl p-5 w-full max-w-sm bg-white shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900",children:o("profile.language")}),s.jsx("button",{onClick:()=>v(!1),className:"text-gray-500 hover:text-gray-900",children:s.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>{a("tr"),v(!1)},className:`w-full p-4 rounded-xl flex items-center justify-between ${n==="tr"?"bg-emerald-500/20 border border-emerald-500":"bg-gray-100 border border-transparent"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:"Trke"})]}),n==="tr"&&s.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]}),s.jsxs("button",{onClick:()=>{a("en"),v(!1)},className:`w-full p-4 rounded-xl flex items-center justify-between ${n==="en"?"bg-emerald-500/20 border border-emerald-500":"bg-gray-100 border border-transparent"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:"English"})]}),n==="en"&&s.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"check_circle"})]})]})]})}),s.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0 z-10",children:[s.jsx("button",{onClick:()=>r("/dashboard"),className:"p-2 -ml-2 rounded-full transition-colors hover:bg-white/10",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg pr-8 text-white",children:"Ayarlar"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[s.jsxs("div",{className:"rounded-3xl p-6 flex flex-col items-center text-center bg-white shadow-lg",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-full flex items-center justify-center shadow-lg shadow-emerald-500/20",children:s.jsx("span",{className:"text-white text-2xl font-bold",children:((S=t==null?void 0:t.name)==null?void 0:S.charAt(0))||"U"})}),s.jsx("button",{className:"absolute -bottom-1 -right-1 w-8 h-8 border-2 rounded-full flex items-center justify-center bg-white border-gray-200 shadow",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-sm",children:"edit"})})]}),s.jsx("h2",{className:"text-lg font-extrabold mt-3 mb-0.5 text-gray-900",children:(t==null?void 0:t.name)||"User"}),s.jsx("p",{className:"text-gray-500 font-medium text-sm mb-3",children:t==null?void 0:t.email}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"bg-emerald-500/20 text-emerald-500 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide",children:(t==null?void 0:t.role)||"User"}),s.jsx("span",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide",children:"Aktif"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Hesap Dorulama"}),s.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:[s.jsx(vt,{icon:"verified_user",iconBg:b==="approved"?"bg-green-500/20 text-green-400":b==="rejected"?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400",label:"Kimlik Dorulama (KYC)",sublabel:b==="approved"?"Dorulanm hesap":b==="rejected"?"Reddedildi - Tekrar deneyin":"Limitleri artrmak iin dorulayn",badge:b==="approved"?{text:"Dorulanm",color:"bg-green-500/20 text-green-400"}:b==="pending"?{text:"Bekliyor",color:"bg-amber-500/20 text-amber-400"}:b==="rejected"?{text:"Reddedildi",color:"bg-red-500/20 text-red-400"}:{text:"Dorulanmad",color:"bg-gray-500/20 text-gray-400"},onClick:()=>r("/kyc")}),s.jsx(vt,{icon:"mail",iconBg:"bg-blue-500/20 text-blue-400",label:"E-posta Dorulama",sublabel:t==null?void 0:t.email,badge:{text:"Doruland",color:"bg-green-500/20 text-green-400"},onClick:()=>{}})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Finans"}),s.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:[s.jsx(vt,{icon:"account_balance",iconBg:"bg-blue-500/20 text-blue-400",label:"Banka Hesaplar",sublabel:"Bal hesaplar ynet",onClick:()=>r("/bank-accounts")}),s.jsx(vt,{icon:"speed",iconBg:"bg-orange-500/20 text-orange-400",label:"lem Limitleri",sublabel:"Limitleri grntle ve artr",onClick:()=>r("/limits")})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Gvenlik"}),s.jsx("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:s.jsx(vt,{icon:"lock",iconBg:"bg-red-500/20 text-red-400",label:"ifre Deitir",sublabel:"Hesap gvenlii iin ifrenizi deitirin",onClick:()=>r("/change-password")})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Bildirimler"}),s.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:[s.jsx(vt,{icon:"notifications",iconBg:f?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-400",label:"Push Bildirimleri",sublabel:h==="denied"?"Taraycdan engellendi":f?"lem ve gvenlik uyarlar":"Etkinletirmek iin tklayn",toggle:!0,toggleValue:f,onClick:async()=>{if(h==="denied"){alert("Bildirimler tarayc ayarlarndan engellenmi. Ltfen tarayc ayarlarndan izin verin.");return}f||await x()&&alert("Push bildirimleri baaryla etkinletirildi!")}}),s.jsx(vt,{icon:"email",iconBg:"bg-sky-500/20 text-sky-400",label:"E-posta Bildirimleri",sublabel:"Haftalk zet ve kampanyalar",toggle:!0,toggleValue:!1,onClick:()=>{}})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Tercihler"}),s.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:[s.jsx(vt,{icon:"language",iconBg:"bg-violet-500/20 text-violet-400",label:o("profile.language"),sublabel:n==="tr"?"Trke":"English",onClick:()=>v(!0)}),s.jsx(vt,{icon:"currency_exchange",iconBg:"bg-emerald-500/20 text-emerald-500",label:"Para Birimi Gsterimi",sublabel:"TRY ()",onClick:()=>{}}),s.jsx(vt,{icon:"dark_mode",iconBg:"bg-slate-500/20 text-slate-400",label:c?"Karanlk Mod":"Light Mode",sublabel:c?"Aktif":"Active",toggle:!0,toggleValue:c,onClick:d})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Yardm & Destek"}),s.jsx("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:s.jsx(vt,{icon:"support_agent",iconBg:"bg-green-500/20 text-green-400",label:"Canl Destek",sublabel:"7/24 destek ekibimizle sohbet et",onClick:()=>r("/support")})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Yasal"}),s.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:[s.jsx(vt,{icon:"description",iconBg:"bg-gray-500/20 text-gray-400",label:"Kullanm Koullar",onClick:()=>r("/terms")}),s.jsx(vt,{icon:"privacy_tip",iconBg:"bg-gray-500/20 text-gray-400",label:"Gizlilik Politikas",onClick:()=>r("/privacy")})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Uygulama"}),s.jsx("div",{className:"rounded-2xl overflow-hidden bg-white divide-y divide-gray-100 shadow-lg",children:s.jsx(vt,{icon:"info",iconBg:"bg-gray-500/20 text-gray-400",label:"Uygulama Hakknda",sublabel:"NUSD Wallet v2.0",onClick:()=>{}})})]}),s.jsxs("button",{onClick:()=>{e(),r("/")},className:"w-full bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 active:scale-[0.98] transition-all py-4 rounded-xl font-bold flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"logout"}),"k Yap"]}),s.jsx("button",{className:"w-full text-gray-500 hover:text-red-400 py-3 text-sm font-medium transition-colors",children:"Hesabm Sil"}),s.jsx("div",{className:"h-40 w-full shrink-0"})]})]})},qP=()=>{const t=we(),[e,r]=N.useState(""),n=()=>{e.trim()&&alert(`QR verisi: ${e}`)};return s.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col",children:[s.jsxs("div",{className:"bg-[#1a1a1a] px-5 py-4 flex items-center gap-3 shadow-lg border-b border-white/5",children:[s.jsx("button",{onClick:()=>t("/dashboard"),className:"text-gray-400 hover:text-lime-400 hover:bg-lime-400/10 p-2 rounded-full transition-colors",children:s.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),s.jsx("h1",{className:"font-extrabold text-lg text-white",children:"QR Kod Tara"})]}),s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[s.jsxs("div",{className:"relative w-full max-w-sm aspect-square mb-8",children:[s.jsx("div",{className:"absolute inset-0 border-4 border-lime-500 rounded-3xl bg-lime-500/5 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"material-symbols-outlined text-8xl text-lime-500 mb-4 animate-pulse",children:"qr_code_scanner"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"QR Kodu Kamerann nne Tutun"})]})}),s.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-lime-500 rounded-tl-3xl"}),s.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-lime-500 rounded-tr-3xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-lime-500 rounded-bl-3xl"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-lime-500 rounded-br-3xl"})]}),s.jsxs("div",{className:"w-full max-w-sm",children:[s.jsx("p",{className:"text-gray-500 text-sm text-center mb-4",children:"veya manuel girin:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:a=>r(a.target.value),placeholder:"Czdan adresi veya deme kodu",className:"flex-1 px-4 py-3 rounded-xl border border-white/10 bg-[#1a1a1a] text-white placeholder-gray-600 focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none"}),s.jsx("button",{onClick:n,className:"bg-lime-500 hover:bg-lime-400 text-black p-3 rounded-xl transition-all active:scale-95",children:s.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})})]})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-gray-600 text-xs",children:"Gvenli deme yapmak iin QR kod tarayn"})})]})]})},KP=()=>{const t=we();return s.jsxs("div",{className:"h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0 z-10",children:[s.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Gizlilik Politikas"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 pb-20",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx("span",{className:"material-symbols-outlined text-purple-500 text-3xl",children:"privacy_tip"})}),s.jsx("p",{className:"text-emerald-300 text-sm",children:"Son gncelleme: 9 Aralk 2025"})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-purple-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"info"}),"1. Giri"]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"NUSD Wallet olarak gizliliinize nem veriyoruz. Bu politika, kripto para alc ve satclarn buluturan P2P platformumuzda bilgilerinizin nasl toplandn, kullanldn ve korunduunu aklar."})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-blue-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"folder_open"}),"2. Toplanan Bilgiler"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-emerald-50 rounded-xl p-3",children:[s.jsx("p",{className:"text-emerald-700 font-bold text-sm mb-1",children:"Hesap Bilgileri"}),s.jsx("p",{className:"text-gray-500 text-xs",children:"Ad, e-posta adresi, telefon numaras"})]}),s.jsxs("div",{className:"bg-emerald-50 rounded-xl p-3",children:[s.jsx("p",{className:"text-emerald-700 font-bold text-sm mb-1",children:"lem Verileri"}),s.jsx("p",{className:"text-gray-500 text-xs",children:"lem gemii, tutar bilgileri, tarih/saat kaytlar"})]}),s.jsxs("div",{className:"bg-emerald-50 rounded-xl p-3",children:[s.jsx("p",{className:"text-emerald-700 font-bold text-sm mb-1",children:"Cihaz Bilgileri"}),s.jsx("p",{className:"text-gray-500 text-xs",children:"IP adresi, tarayc tr, iletim sistemi"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg border-2 border-amber-200 space-y-4",children:[s.jsxs("h2",{className:"text-amber-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"account_balance"}),"3. Banka Hesap Bilgileri Hakknda"]}),s.jsx("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:s.jsx("p",{className:"text-amber-700 text-sm leading-relaxed font-medium",children:" NEML UYARI"})}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[s.jsxs("li",{children:["Platformda paylalan banka hesap bilgileri (IBAN, hesap numaras vb.)",s.jsx("span",{className:"text-amber-600 font-bold",children:" kullanclar arasnda dorudan paylalr"}),"."]}),s.jsx("li",{children:"NUSD Wallet, bu bilgileri sadece ilem eletirmesi iin geici olarak saklar."}),s.jsx("li",{children:"Banka hesaplarnn doruluunu veya gvenliini garanti etmiyoruz."}),s.jsx("li",{children:"Kullanclar, banka bilgilerini paylamadan nce kar taraf dorulamaldr."}),s.jsx("li",{children:"Banka transferlerinden doan sorunlar kullanclarn sorumluluundadr."})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-green-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"check_circle"}),"4. Bilgilerin Kullanm"]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Toplanan bilgiler aadaki amalarla kullanlr:"}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"P2P eletirme hizmetinin salanmas"}),s.jsx("li",{children:"Hesap gvenliinin korunmas"}),s.jsx("li",{children:"Dolandrclk nleme"}),s.jsx("li",{children:"Yasal ykmllklerin yerine getirilmesi"}),s.jsx("li",{children:"Mteri destei salanmas"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-red-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"share"}),"5. Bilgi Paylam"]}),s.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["Bilgileriniz aadaki durumlar dnda nc taraflarla",s.jsx("span",{className:"text-emerald-600 font-bold",children:" PAYLAILMAZ"}),":"]}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"Yasal zorunluluk durumunda (mahkeme karar, resmi talep)"}),s.jsx("li",{children:"P2P ilem taraflar arasnda (sadece gerekli bilgiler)"}),s.jsx("li",{children:"Gvenlik tehdidi tespit edildiinde"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-cyan-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"lock"}),"6. Veri Gvenlii"]}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"256-bit SSL ifreleme ile veri iletimi"}),s.jsx("li",{children:"ifreli veritaban depolama"}),s.jsx("li",{children:"ki faktrl kimlik dorulama seenei"}),s.jsx("li",{children:"Dzenli gvenlik denetimleri"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-orange-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"timer"}),"7. Veri Saklama Sresi"]}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"Aktif hesap bilgileri: Hesap aktif olduu srece"}),s.jsx("li",{children:"lem kaytlar: 5 yl (yasal zorunluluk)"}),s.jsx("li",{children:"Kapatlan hesaplar: 1 yl sonra tamamen silinir"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-emerald-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"person_raised_hand"}),"8. Kullanc Haklar"]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"KVKK ve GDPR kapsamnda aadaki haklara sahipsiniz:"}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"Verilerinize eriim talep etme"}),s.jsx("li",{children:"Verilerin dzeltilmesini isteme"}),s.jsx("li",{children:"Verilerin silinmesini talep etme"}),s.jsx("li",{children:"Veri ilemeye itiraz etme"}),s.jsx("li",{children:"Veri tanabilirlii"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-gray-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"contact_support"}),"9. letiim"]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Gizlilik ile ilgili sorularnz iin:"}),s.jsx("p",{className:"text-emerald-600 font-bold",children:"privacy@nusd.com"})]}),s.jsx("div",{className:"text-center pt-4 pb-10",children:s.jsx("p",{className:"text-emerald-300/70 text-xs",children:"NUSD Wallet' kullanarak bu gizlilik politikasn kabul etmi saylrsnz."})})]})]})},GP=()=>{const t=we();return s.jsxs("div",{className:"h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0 z-10",children:[s.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Kullanm Koullar"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 pb-20",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-3xl",children:"description"})}),s.jsx("p",{className:"text-emerald-300 text-sm",children:"Son gncelleme: 9 Aralk 2025"})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-emerald-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"gavel"}),"1. Hizmet Tanm"]}),s.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["NUSD Wallet, kripto para alm-satm yapmak isteyen kullanclar birbirleriyle buluturan bir ",s.jsx("span",{className:"text-emerald-600 font-bold",children:"eler aras (P2P) platform"}),"dur. Platform, kullanclar arasnda dorudan ilem yaplmasn kolaylatrmak amacyla tasarlanmtr."]}),s.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["NUSD Wallet, bir kripto para borsas, arac kurum veya finans kuruluu",s.jsx("span",{className:"text-red-500 font-bold",children:" DELDR"}),". Platform, yalnzca kullanclarn birbirini bulmasna ve iletiim kurmasna araclk eder."]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg border-2 border-red-200 space-y-4",children:[s.jsxs("h2",{className:"text-red-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"dangerous"}),"Ya Snr ve Risk Uyars"]}),s.jsx("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:s.jsx("p",{className:"text-red-700 text-sm leading-relaxed font-medium",children:" Bu platform yalnzca 18 ya ve zeri kullanclar iindir."})}),s.jsx("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:s.jsx("p",{className:"text-amber-700 text-sm leading-relaxed font-medium",children:" KRPTO PARA YATIRIMLARI RSK ERR. Yatrdnz tutarn tamamn kaybedebilirsiniz. Bu platform yatrm tavsiyesi vermez. Tm ilem kararlar tamamen sizin sorumluluunuzdadr."})})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg border-2 border-amber-200 space-y-4",children:[s.jsxs("h2",{className:"text-amber-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"warning"}),"2. Sorumluluk Reddi - Banka Hesaplar"]}),s.jsx("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:s.jsx("p",{className:"text-amber-700 text-sm leading-relaxed font-medium",children:" NEML: Kullanclar tarafndan platformda paylalan banka hesap bilgileri, IBAN numaralar ve dier finansal bilgiler tamamen kullanclarn kendi sorumluluundadr."})}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"NUSD Wallet, kullanclar arasnda gerekletirilen banka transferlerinden sorumlu tutulamaz."}),s.jsx("li",{children:"Banka hesap bilgilerinin doruluu kullanc tarafndan kontrol edilmelidir."}),s.jsx("li",{children:"Hatal hesap bilgisi nedeniyle oluan kayplardan platform sorumlu deildir."}),s.jsx("li",{children:"Kullanclar, paylatklar bilgilerin gvenliinden kendileri sorumludur."})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-blue-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"handshake"}),"3. P2P lem Koullar"]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Tm ilemler, alc ve satc arasnda dorudan gerekletirilir. NUSD Wallet:"}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"lemlerin taraf deildir, yalnzca araclk hizmeti sunar."}),s.jsx("li",{children:"Kullanclar arasndaki anlamazlklarda taraf olmaz."}),s.jsx("li",{children:"Kripto para veya fiat para transferlerini dorudan gerekletirmez."}),s.jsx("li",{children:"lem srelerinde danmanlk veya garanti salamaz."})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-purple-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"person"}),"4. Kullanc Sorumluluklar"]}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"Doru ve gncel bilgiler salamak"}),s.jsx("li",{children:"lem yapmadan nce kar taraf dorulamak"}),s.jsx("li",{children:"Yerel yasalara ve dzenlemelere uymak"}),s.jsx("li",{children:"Hesap gvenliini salamak"}),s.jsx("li",{children:"pheli aktiviteleri bildirmek"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-red-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"block"}),"5. Yasaklanan Faaliyetler"]}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2 list-disc list-inside",children:[s.jsx("li",{children:"Kara para aklama veya yasa d fon transferi"}),s.jsx("li",{children:"Dolandrclk veya sahte ilemler"}),s.jsx("li",{children:"Bakalarnn kimlik bilgilerini kullanma"}),s.jsx("li",{children:"Platform gvenliini tehlikeye atma"}),s.jsx("li",{children:"Spam veya zararl ierik paylam"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-cyan-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"verified_user"}),"6. Hesap Askya Alma"]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"NUSD Wallet, bu koullar ihlal eden hesaplar nceden bildirimde bulunmakszn askya alma veya kalc olarak kapatma hakkn sakl tutar."})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("h2",{className:"text-gray-600 font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"contact_support"}),"7. letiim"]}),s.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["Sorularnz iin: ",s.jsx("span",{className:"text-emerald-600 font-bold",children:"support@nusd.com"})]})]}),s.jsx("div",{className:"text-center pt-4 pb-10",children:s.jsx("p",{className:"text-emerald-300/70 text-xs",children:"Bu koullar kabul ederek NUSD Wallet' kullanmaya devam edebilirsiniz."})})]})]})},rr=({children:t,title:e})=>{const r=we(),n=qn(),{logout:a}=at(),o=[{icon:"dashboard",label:"Dashboard",path:"/admin"},{icon:"group",label:"Users",path:"/admin/users"},{icon:"swap_horiz",label:"P2P Orders",path:"/admin/p2p-orders"},{icon:"currency_exchange",label:"Kur Ynetimi",path:"/admin/exchange-rate"},{icon:"lock",label:"Crypto Vaults",path:"/admin/vaults"},{icon:"business",label:"Departmanlar",path:"/admin/departments"},{icon:"terminal",label:"System Logs",path:"/admin/logs"},{icon:"support_agent",label:"Canl Destek",path:"/admin/support"},{icon:"analytics",label:"Raporlar",path:"/admin/reports"}];return s.jsxs("div",{className:"admin-layout flex h-screen bg-gray-100 font-display",children:[s.jsxs("div",{className:"w-64 bg-[#111827] text-white flex flex-col shadow-2xl z-20",children:[s.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-gray-800",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-sm",children:"admin_panel_settings"})}),s.jsx("span",{className:"font-bold text-lg tracking-tight",children:"NUSD Admin"})]}),s.jsx("div",{className:"flex-1 py-6 space-y-1 px-3",children:o.map(c=>{const d=n.pathname===c.path;return s.jsxs("button",{onClick:()=>r(c.path),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${d?"bg-blue-600 text-white font-bold shadow-lg shadow-blue-900/50":"text-gray-400 hover:bg-gray-800 hover:text-white font-medium"}`,children:[s.jsx("span",{className:"material-symbols-outlined",children:c.icon}),c.label]},c.path)})}),s.jsxs("div",{className:"p-4 border-t border-gray-800",children:[s.jsxs("button",{onClick:()=>r("/dashboard"),className:"w-full flex items-center gap-3 px-4 py-2 text-gray-400 hover:text-white transition-colors text-sm mb-2",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"exit_to_app"}),"Exit Admin Mode"]}),s.jsxs("button",{onClick:()=>{a(),r("/")},className:"w-full flex items-center gap-3 px-4 py-2 text-red-400 hover:text-red-300 transition-colors text-sm",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"logout"}),"Logout"]})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden h-screen",children:[s.jsxs("div",{className:"bg-white shadow-sm border-b border-gray-200 px-8 py-4 flex justify-between items-center z-10",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-gray-600 text-sm",children:"person"})}),s.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Administrator"})]})]}),s.jsx("div",{className:"flex-1 overflow-auto p-8 bg-gray-50/50",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})]})},Rr=({icon:t,iconBg:e,label:r,value:n,sublabel:a,trend:o})=>s.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("div",{className:`w-12 h-12 ${e} rounded-xl flex items-center justify-center`,children:s.jsx("span",{className:"material-symbols-outlined",children:t})}),o&&s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${o==="up"?"bg-green-100 text-green-600":o==="down"?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:o==="up"?"":o==="down"?"":""})]}),s.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider mb-1",children:r}),s.jsx("h3",{className:"text-2xl font-extrabold text-gray-900",children:n}),a&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:a})]}),ZP=()=>{var E,j,_,S,P,O,A,I,B,R,W,F,K,$,Q;const[t,e]=N.useState(null),[r,n]=N.useState(!0),[a,o]=N.useState(0),[c,d]=N.useState(0),[h,f]=N.useState([]),[x,g]=N.useState(null),y=async()=>{try{const Y=await G.getPendingWithdrawals();f(Y||[])}catch(Y){console.error("Failed to load withdrawals:",Y)}};N.useEffect(()=>{const Y=async()=>{const le=await G.getSystemStats();e(le),o((le==null?void 0:le.pendingTransactions)||0),n(!1)};Y(),y();const z=setInterval(()=>{Y(),y()},1e4);return()=>clearInterval(z)},[]);const w=async()=>{window.confirm("Emin misiniz? Tm ilemler silinecek ve bakiyeler sfrlanacak.")&&(await G.resetDB(),window.location.reload())},v=async Y=>{var z,le,U;if(window.confirm("Withdraw'u onaylamak istediinize emin misiniz?")){g(Y);try{const re=h.find(Z=>Z.id===Y);if(await G.approveWithdrawal(Y),re!=null&&re.user_email||(z=re==null?void 0:re.profiles)!=null&&z.email){const Z=re.user_email||((le=re.profiles)==null?void 0:le.email),V=((U=re.profiles)==null?void 0:U.name)||(Z==null?void 0:Z.split("@")[0]);try{await G.sendEmail(Z,"withdrawal_success",{userName:V,amount:re.amount,network:re.network||"TRC20",address:re.destination_address||re.wallet_address})}catch(H){console.error("Withdrawal email error:",H)}}y()}catch(re){alert("Onaylama baarsz: "+re)}g(null)}},b=async Y=>{const z=window.prompt("Red sebebi:");if(z){g(Y);try{await G.rejectWithdrawal(Y,z),y()}catch(le){alert("Reddetme baarsz: "+le)}g(null)}};return s.jsxs(rr,{title:"Sistem zeti",children:[a>0&&s.jsxs("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-2xl p-4",children:[s.jsxs("h3",{className:"font-bold text-amber-800 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"notifications_active"}),"Bildirimler"]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:a>0&&s.jsxs("a",{href:"/#/admin/transactions",className:"flex items-center gap-2 bg-white px-4 py-2 rounded-xl border border-amber-200 hover:border-amber-400 transition-colors",children:[s.jsx("div",{className:"w-8 h-8 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center font-bold",children:a}),s.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Bekleyen lem"}),s.jsx("span",{className:"material-symbols-outlined text-gray-400 text-sm",children:"arrow_forward"})]})})]}),s.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 rounded-2xl p-6 mb-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-emerald-100 text-sm font-bold uppercase tracking-wider mb-1",children:"Toplam Sistem Bakiyesi"}),s.jsxs("h2",{className:"text-4xl font-extrabold",children:["$",r?"":(((t==null?void 0:t.totalUserBalance)||0)+((t==null?void 0:t.totalVaultBalance)||0)).toLocaleString()]}),s.jsxs("p",{className:"text-emerald-200 text-sm mt-2",children:["Kullanc: $",((E=t==null?void 0:t.totalUserBalance)==null?void 0:E.toLocaleString())||0,"  Vault: $",((j=t==null?void 0:t.totalVaultBalance)==null?void 0:j.toLocaleString())||0]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mb-2",children:s.jsx("span",{className:"material-symbols-outlined text-4xl",children:"account_balance_wallet"})}),s.jsx("p",{className:"text-xs text-emerald-200",children:"Canl Gncelleniyor"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsx(Rr,{icon:"south_west",iconBg:"bg-green-50 text-green-600",label:"Gelen Bakiye",value:`$${((_=t==null?void 0:t.totalDeposits)==null?void 0:_.toLocaleString())||0}`,sublabel:`Vault: $${((S=t==null?void 0:t.vaultDeposits)==null?void 0:S.toLocaleString())||0}`,trend:"up"}),s.jsx(Rr,{icon:"north_east",iconBg:"bg-red-50 text-red-600",label:"kan Bakiye",value:`$${((P=t==null?void 0:t.totalWithdrawals)==null?void 0:P.toLocaleString())||0}`,sublabel:`Vault: $${((O=t==null?void 0:t.vaultWithdrawals)==null?void 0:O.toLocaleString())||0}`,trend:"down"}),s.jsx(Rr,{icon:"lock",iconBg:"bg-purple-50 text-purple-600",label:"Vault Bakiye",value:`$${((A=t==null?void 0:t.totalVaultBalance)==null?void 0:A.toLocaleString())||0}`,sublabel:"Kripto kasas"}),s.jsx(Rr,{icon:"sync",iconBg:"bg-amber-50 text-amber-600",label:"Net Ak",value:`$${(((t==null?void 0:t.totalDeposits)||0)-((t==null?void 0:t.totalWithdrawals)||0)).toLocaleString()}`,sublabel:"Gelen - kan",trend:((t==null?void 0:t.totalDeposits)||0)>=((t==null?void 0:t.totalWithdrawals)||0)?"up":"down"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsx(Rr,{icon:"receipt_long",iconBg:"bg-blue-50 text-blue-600",label:"Toplam lem",value:((I=t==null?void 0:t.totalTransactions)==null?void 0:I.toString())||"0"}),s.jsx(Rr,{icon:"pending",iconBg:"bg-orange-50 text-orange-600",label:"Bekleyen lem",value:((B=t==null?void 0:t.pendingTransactions)==null?void 0:B.toString())||"0"}),s.jsx(Rr,{icon:"group",iconBg:"bg-cyan-50 text-cyan-600",label:"Aktif Kullanc",value:((R=t==null?void 0:t.activeUsers)==null?void 0:R.toString())||"0"}),s.jsx(Rr,{icon:"business",iconBg:"bg-indigo-50 text-indigo-600",label:"Departman",value:((W=t==null?void 0:t.departmentCount)==null?void 0:W.toString())||"0"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined",children:"attach_money"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider",children:"Toplam Gelir"}),s.jsxs("h3",{className:"text-3xl font-extrabold text-gray-900",children:["$",((F=t==null?void 0:t.totalRevenue)==null?void 0:F.toFixed(2))||"0.00"]})]})]}),s.jsx("p",{className:"text-xs text-gray-400",children:"Komisyon ve ilem cretlerinden"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-50 text-purple-600 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined",children:"bar_chart"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider",children:"Toplam Hacim"}),s.jsxs("h3",{className:"text-3xl font-extrabold text-gray-900",children:["$",((K=t==null?void 0:t.totalVolume)==null?void 0:K.toLocaleString())||"0.00"]})]})]}),s.jsx("p",{className:"text-xs text-gray-400",children:"Tm ilemlerin toplam deeri"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"insights"}),"Para Ak Grafii"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"font-bold text-green-600",children:"Gelen"}),s.jsxs("span",{className:"font-bold text-green-600",children:["$",(($=t==null?void 0:t.totalDeposits)==null?void 0:$.toLocaleString())||0]})]}),s.jsx("div",{className:"h-6 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full transition-all duration-1000",style:{width:`${Math.min(100,((t==null?void 0:t.totalDeposits)||0)/Math.max(((t==null?void 0:t.totalDeposits)||0)+((t==null?void 0:t.totalWithdrawals)||0),1)*100)}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"font-bold text-red-600",children:"kan"}),s.jsxs("span",{className:"font-bold text-red-600",children:["$",((Q=t==null?void 0:t.totalWithdrawals)==null?void 0:Q.toLocaleString())||0]})]}),s.jsx("div",{className:"h-6 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-red-400 to-rose-500 rounded-full transition-all duration-1000",style:{width:`${Math.min(100,((t==null?void 0:t.totalWithdrawals)||0)/Math.max(((t==null?void 0:t.totalDeposits)||0)+((t==null?void 0:t.totalWithdrawals)||0),1)*100)}%`}})})]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 pt-2 border-t border-gray-100",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-3xl font-extrabold text-gray-900",children:[t&&t.totalDeposits+t.totalWithdrawals>0?Math.round(t.totalDeposits/(t.totalDeposits+t.totalWithdrawals)*100):0,"%"]}),s.jsx("p",{className:"text-xs text-gray-400",children:"Gelen Oran"})]}),s.jsx("div",{className:"w-px h-12 bg-gray-200"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:(t==null?void 0:t.totalTransactions)||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Toplam lem"})]}),s.jsx("div",{className:"w-px h-12 bg-gray-200"}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:`text-3xl font-extrabold ${((t==null?void 0:t.totalDeposits)||0)>=((t==null?void 0:t.totalWithdrawals)||0)?"text-green-600":"text-red-600"}`,children:["$",Math.abs(((t==null?void 0:t.totalDeposits)||0)-((t==null?void 0:t.totalWithdrawals)||0)).toLocaleString()]}),s.jsx("p",{className:"text-xs text-gray-400",children:"Net Bakiye"})]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-orange-600",children:"pending_actions"}),"Bekleyen Kripto ekim stekleri",h.length>0&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-orange-100 text-orange-600 rounded-full text-sm font-bold",children:h.length})]}),h.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-400",children:[s.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"check_circle"}),s.jsx("p",{children:"Bekleyen ekim istei yok"})]}):s.jsx("div",{className:"space-y-3",children:h.map(Y=>{var z;return s.jsx("div",{className:"border border-gray-200 rounded-xl p-4 hover:border-orange-300 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded text-xs font-bold",children:Y.network||"TRC20"}),s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",parseFloat(Y.amount||0).toFixed(2)," USDT"]})]}),s.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-bold",children:"Kullanc:"})," ",((z=Y.profiles)==null?void 0:z.name)||Y.user_email||"N/A"]}),s.jsxs("p",{className:"font-mono text-xs break-all",children:[s.jsx("span",{className:"font-bold font-sans",children:"Adres:"})," ",Y.destination_address||Y.wallet_address||"N/A"]}),s.jsx("p",{className:"text-xs text-gray-400",children:new Date(Y.created_at).toLocaleString("tr-TR")})]})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsxs("button",{onClick:()=>v(Y.id),disabled:x===Y.id,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-bold text-sm disabled:opacity-50 flex items-center gap-1",children:[x===Y.id?s.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"progress_activity"}):s.jsx("span",{className:"material-symbols-outlined text-sm",children:"check"}),"Onayla"]}),s.jsxs("button",{onClick:()=>b(Y.id),disabled:x===Y.id,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold text-sm disabled:opacity-50 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"}),"Reddet"]})]})]})},Y.id)})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Hzl lemler"}),s.jsxs("div",{className:"flex gap-4 flex-wrap",children:[s.jsxs("button",{onClick:async()=>{const Y=await G.checkBlockchainDeposits();Y.success?alert(`Kontrol tamamland!
${Y.checked||0} vault kontrol edildi
${Y.newDeposits||0} yeni deposit algland`):alert("Hata: "+(Y.error||"Kontrol baarsz"))},className:"px-6 py-3 bg-green-50 text-green-600 hover:bg-green-100 border border-green-100 rounded-xl font-bold transition-colors flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"sync"}),"Blockchain Deposit Kontrol"]}),s.jsxs("button",{onClick:w,className:"px-6 py-3 bg-red-50 text-red-600 hover:bg-red-100 border border-red-100 rounded-xl font-bold transition-colors flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"restart_alt"}),"Veritabann Sfrla"]}),s.jsxs("button",{className:"px-6 py-3 bg-gray-50 text-gray-600 hover:bg-gray-100 border border-gray-200 rounded-xl font-bold transition-colors flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"build"}),"Bakm Modu"]})]})]})]})},mi=25,YP=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(""),[a,o]=N.useState("all"),[c,d]=N.useState(1);N.useEffect(()=>{h()},[]);const h=()=>G.getAllUsers().then(e),f=async E=>{window.confirm("Change user status?")&&(await G.toggleUserStatus(E),h())},x=async(E,j)=>{const _=j==="admin"?"user":"admin";window.confirm(`Change role to ${_}?`)&&(await G.toggleUserRole(E),h())},g=async(E,j)=>{const _=prompt(`Yeni bakiye (mevcut: $${j.toFixed(2)}):`,j.toString());if(_===null)return;const S=parseFloat(_);if(isNaN(S)){alert("Geersiz tutar");return}const P=await G.updateUserBalance(E,S);P.success?h():alert("Hata: "+(P.error||"Gncelleme baarsz"))},y=t.filter(E=>{const j=r===""||E.name.toLowerCase().includes(r.toLowerCase())||E.email.toLowerCase().includes(r.toLowerCase()),_=a==="all"||E.role===a;return j&&_}),w=Math.ceil(y.length/mi),v=y.slice((c-1)*mi,c*mi),b=()=>{const E=["Ad","Email","Rol","Bakiye","Durum","TRX Adres"],j=y.map(A=>{var I;return[A.name,A.email,A.role,((I=A.balance)==null?void 0:I.toFixed(2))||"0",A.isActive?"Aktif":"Pasif",A.trxAddress||""]}),_=[E,...j].map(A=>A.map(I=>`"${I}"`).join(",")).join(`
`),S=new Blob([_],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(S),O=document.createElement("a");O.href=P,O.download=`users_${new Date().toISOString().split("T")[0]}.csv`,O.click()};return s.jsxs(rr,{title:"User Management",children:[s.jsxs("div",{className:"mb-4 flex gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"search"}),s.jsx("input",{type:"text",placeholder:"sim veya email ara...",value:r,onChange:E=>n(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("div",{className:"flex gap-2",children:["all","admin","user"].map(E=>s.jsx("button",{onClick:()=>o(E),className:`px-3 py-2 rounded-lg text-xs font-bold capitalize transition-colors ${a===E?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:E==="all"?"Tm":E},E))}),s.jsxs("span",{className:"text-sm text-gray-500",children:[y.length," kullanc"]}),s.jsxs("button",{onClick:b,className:"ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-bold flex items-center gap-2 transition-colors",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"download"}),"CSV ndir"]})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"TRX Wallet"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Role"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Balance"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:v.map(E=>{var j;return s.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-900 text-white flex items-center justify-center text-xs font-bold",children:E.name.substring(0,1)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-gray-900 text-sm",children:E.name}),s.jsx("p",{className:"text-gray-500 text-xs",children:E.email})]})]})}),s.jsx("td",{className:"p-4",children:s.jsx("p",{className:"font-mono text-xs text-gray-600 max-w-[150px] truncate",title:E.trxAddress,children:E.trxAddress||"-"})}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${E.role==="admin"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:E.role})}),s.jsx("td",{className:"p-4",children:s.jsxs("button",{onClick:()=>g(E.email,E.balance||0),className:"font-mono font-bold text-gray-700 hover:text-blue-600 cursor-pointer",children:["$",(j=E.balance)==null?void 0:j.toFixed(2)," "]})}),s.jsx("td",{className:"p-4",children:s.jsxs("span",{className:`flex items-center gap-1.5 text-xs font-bold ${E.isActive?"text-green-600":"text-red-600"}`,children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${E.isActive?"bg-green-600":"bg-red-600"}`}),E.isActive?"Active":"Suspended"]})}),s.jsx("td",{className:"p-4 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>x(E.email,E.role),className:"text-xs font-bold px-3 py-1.5 rounded-lg border border-purple-200 text-purple-600 hover:bg-purple-50 transition-colors",children:E.role==="admin"?" User":" Admin"}),s.jsx("button",{onClick:()=>f(E.email),className:`text-xs font-bold px-3 py-1.5 rounded-lg border transition-colors ${E.isActive?"border-red-200 text-red-600 hover:bg-red-50":"border-green-200 text-green-600 hover:bg-green-50"}`,children:E.isActive?"Suspend":"Activate"})]})})]},E.email)})})]})})}),w>1&&s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:[y.length," sonutan ",(c-1)*mi+1,"-",Math.min(c*mi,y.length)," gsteriliyor"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>d(E=>Math.max(1,E-1)),disabled:c===1,className:"px-4 py-2 text-sm font-bold rounded-lg border border-gray-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:" nceki"}),s.jsxs("span",{className:"px-4 py-2 text-sm font-bold bg-blue-600 text-white rounded-lg",children:[c," / ",w]}),s.jsx("button",{onClick:()=>d(E=>Math.min(w,E+1)),disabled:c===w,className:"px-4 py-2 text-sm font-bold rounded-lg border border-gray-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Sonraki "})]})]})]})},JP=({transactionId:t})=>{const[e,r]=N.useState([]),[n,a]=N.useState(!0);return N.useEffect(()=>{t&&(async()=>{a(!0);const c=await G.getTransactionLogs(t);r(c),a(!1)})()},[t]),n?s.jsx("div",{className:"p-4 text-gray-500 text-sm",children:"Loading logs..."}):e.length===0?s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg text-gray-500 text-sm italic",children:"No audit logs found for this transaction. This might be an old transaction created before the audit system was active."}):s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[s.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-base",children:"history_edu"}),"Transaction Audit Trail"]}),s.jsx("div",{className:"space-y-4",children:e.map(o=>s.jsxs("div",{className:"relative pl-6 pb-2 border-l-2 border-slate-200 last:border-0 last:pb-0",children:[s.jsx("div",{className:`absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white 
                            ${o.action==="APPROVE"?"bg-green-500":o.action==="REJECT"?"bg-red-500":o.action==="CREATE"?"bg-blue-500":"bg-slate-400"}`}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded mr-2 
                                    ${o.action==="APPROVE"?"bg-green-100 text-green-700":o.action==="REJECT"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:o.action}),s.jsxs("span",{className:"text-xs text-slate-500 font-mono",children:["by ",o.actor_role,o.actor_role==="admin"?"":" (system)"]})]}),s.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:new Date(o.created_at).toLocaleString("tr-TR")})]}),o.metadata&&Object.keys(o.metadata).length>0&&s.jsx("div",{className:"mt-2 bg-white border border-slate-200 rounded p-2 text-xs font-mono text-slate-600 overflow-x-auto",children:s.jsx("pre",{className:"m-0 whitespace-pre-wrap",children:JSON.stringify(o.metadata,null,2)})})]},o.id))})]})},XP=()=>{const[t,e]=N.useState([]),[r,n]=N.useState("all"),[a,o]=N.useState(null),[c,d]=N.useState({}),[h,f]=N.useState(null);N.useEffect(()=>{G.getAllTransactions().then(e)},[]);const x=t.filter(b=>r==="all"||b.status===r),g=async b=>{if(!b.txHash){alert("No TX hash provided for this transaction");return}o(b.id);try{const j=await(await fetch(`/api/admin/verify-tx/${b.txHash}?expectedAmount=${b.amount}&transactionId=${b.id}`)).json();d(_=>({..._,[b.id]:j})),G.getAllTransactions().then(e)}catch{d(j=>({...j,[b.id]:{valid:!1,error:"API request failed"}}))}o(null)},y=async b=>{confirm("Approve this transaction?")&&(await G.approveTransaction(b.id)?G.getAllTransactions().then(e):alert("Failed to approve"))},w=async b=>{confirm("ptal etmek istediinize emin misiniz? Bu ilem geri alnamaz.")&&(await G.rejectTransaction(b.id)?G.getAllTransactions().then(e):alert("Failed to reject"))},v=b=>{f(E=>E===b?null:b)};return s.jsxs(rr,{title:"Transactions",children:[s.jsx("div",{className:"mb-6 flex gap-2",children:["all","completed","pending","cancelled"].map(b=>s.jsx("button",{onClick:()=>n(b),className:`px-4 py-2 rounded-lg text-sm font-bold capitalize transition-colors ${r===b?"bg-blue-600 text-white shadow-md shadow-blue-500/20":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:b},b))}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"TX Hash"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Status"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:x.map(b=>{var _;const E=c[b.id],j=h===b.id;return s.jsxs(Cs.Fragment,{children:[s.jsxs("tr",{className:`hover:bg-gray-50/50 transition-colors ${j?"bg-slate-50":""}`,children:[s.jsxs("td",{className:"p-4 text-xs text-gray-400 font-mono",children:[b.id.substring(0,12),"..."]}),s.jsx("td",{className:"p-4 text-sm font-bold text-gray-700",children:b.owner}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase tracking-wider ${b.type.startsWith("P2P")?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:b.type})}),s.jsxs("td",{className:`p-4 font-mono font-bold ${b.amount>0?"text-green-600":"text-gray-900"}`,children:[b.amount>0?"+":"",b.amount.toLocaleString()," ",b.currency]}),s.jsx("td",{className:"p-4",children:b.txHash?s.jsxs("a",{href:`https://tronscan.org/#/transaction/${b.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-mono text-blue-600 hover:underline",children:[b.txHash.substring(0,16),"..."]}):s.jsx("span",{className:"text-xs text-gray-400",children:"No TX hash"})}),s.jsx("td",{className:"p-4 text-right",children:s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase tracking-wide ${b.status==="completed"||b.status==="COMPLETED"?"bg-green-50 text-green-600":b.status==="pending"||b.status==="PENDING"?"bg-amber-50 text-amber-600":b.status==="cancelled"||b.status==="CANCELLED"?"bg-red-50 text-red-600":"bg-gray-50 text-gray-500"}`,children:b.status})}),s.jsx("td",{className:"p-4 text-right",children:s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:()=>v(b.id),className:`p-1 rounded hover:bg-gray-200 text-gray-500 transition-colors ${j?"bg-gray-200 text-gray-800":""}`,title:"View Audit Logs",children:s.jsx("span",{className:"material-symbols-outlined text-base",children:"history"})}),b.status==="PENDING"&&b.txHash&&s.jsx("button",{onClick:()=>g(b),disabled:a===b.id,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm flex items-center gap-1",children:a===b.id?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin",children:""})," Verifying..."]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"search"}),"Verify TX"]})}),b.status==="PENDING"&&s.jsx("button",{onClick:()=>y(b),className:"bg-green-500 hover:bg-green-600 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:"Approve"}),b.status==="PENDING"&&s.jsx("button",{onClick:()=>w(b),className:"bg-red-500 hover:bg-red-600 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:"ptal"})]})})]}),E&&s.jsx("tr",{className:`${E.valid?E.recommendApprove?"bg-green-50":"bg-amber-50":"bg-red-50"}`,children:s.jsx("td",{colSpan:7,className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsx("span",{className:`material-symbols-outlined text-xl ${E.valid?E.recommendApprove?"text-green-600":"text-amber-600":"text-red-600"}`,children:E.valid?E.recommendApprove?"check_circle":"warning":"cancel"}),E.valid?s.jsxs("div",{className:"flex gap-6 flex-wrap",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 text-xs",children:"Blockchain Amount:"}),s.jsxs("span",{className:"ml-2 font-bold",children:[(_=E.amount)==null?void 0:_.toFixed(2)," USDT"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 text-xs",children:"Confirmed:"}),s.jsx("span",{className:`ml-2 font-bold ${E.confirmed?"text-green-600":"text-amber-600"}`,children:E.confirmed?"Yes":"Pending"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 text-xs",children:"Vault Match:"}),s.jsx("span",{className:`ml-2 font-bold ${E.vaultMatch?"text-green-600":"text-red-600"}`,children:E.vaultMatch?" Correct":" Wrong Address"})]}),E.recommendApprove&&s.jsx("span",{className:"bg-green-600 text-white text-xs font-bold px-2 py-1 rounded",children:" RECOMMENDED TO APPROVE"})]}):s.jsx("span",{className:"text-red-600 font-medium",children:E.error})]})})}),j&&s.jsx("tr",{children:s.jsxs("td",{colSpan:7,className:"p-4 bg-slate-50 border-b border-gray-100",children:[b.metadata&&b.metadata.source==="payment_panel"&&s.jsxs("div",{className:"mb-4 bg-white p-4 rounded-lg border border-blue-100 shadow-sm",children:[s.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-blue-500 text-base",children:"payments"}),"Payment Panel Details"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Panel Name"}),s.jsx("div",{className:"font-bold",children:b.metadata.panel_name||"Unknown Panel"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Source Slug"}),s.jsx("a",{href:`/#/pay/${b.metadata.public_slug}`,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline font-mono text-xs",children:b.metadata.public_slug})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Commission"}),s.jsxs("div",{className:"font-bold text-red-500",children:["-",b.metadata.commission," ",b.asset_type,s.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["(",b.metadata.commission_type==="percentage"?`%${b.metadata.commission_val}`:"Fixed",")"]})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Net Amount to User"}),s.jsxs("div",{className:"font-bold text-green-600 text-lg",children:[b.metadata.net_amount," ",b.asset_type]})]})]})]}),s.jsx(JP,{transactionId:b.id})]})})]},b.id)})})]})})})]})},QP=()=>{const[t,e]=N.useState([]),[r,n]=N.useState("all"),[a,o]=N.useState(!0),[c,d]=N.useState(null);N.useEffect(()=>{h();const v=setInterval(h,5e3);return()=>clearInterval(v)},[]);const h=async()=>{o(!0);const v=await G.getAllP2POrders();e(v),o(!1)},f=t.filter(v=>r==="all"||v.status===r.toUpperCase()),x=async v=>{if(!confirm("Bu siparii zorla tamamlamak istediinize emin misiniz?"))return;d(v);const b=await G.adminForceCompleteP2POrder(v);d(null),b.success?(alert("Sipari baaryla tamamland"),h()):alert(`Hata: ${b.error}`)},g=async v=>{if(!confirm("Bu siparii zorla iptal etmek istediinize emin misiniz?"))return;d(v);const b=await G.adminForceCancelP2POrder(v);d(null),b.success?(alert("Sipari baaryla iptal edildi"),h()):alert(`Hata: ${b.error}`)},y=v=>{switch(v){case"OPEN":return"bg-blue-50 text-blue-600";case"MATCHED":return"bg-purple-50 text-purple-600";case"PAID":return"bg-amber-50 text-amber-600";case"COMPLETED":return"bg-green-50 text-green-600";case"CANCELLED":return"bg-red-50 text-red-600";default:return"bg-gray-50 text-gray-600"}},w=v=>new Date(v).toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return s.jsxs(rr,{title:"P2P Orders",children:[s.jsxs("div",{className:"mb-6 flex gap-2 flex-wrap",children:[["all","open","matched","paid","completed","cancelled"].map(v=>s.jsx("button",{onClick:()=>n(v),className:`px-4 py-2 rounded-lg text-sm font-bold capitalize transition-colors ${r===v?"bg-purple-600 text-white shadow-md shadow-purple-500/20":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:v==="all"?"Tm":v},v)),s.jsxs("button",{onClick:h,className:"ml-auto px-4 py-2 rounded-lg text-sm font-bold bg-gray-100 hover:bg-gray-200 text-gray-600 transition-colors flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-base",children:"refresh"}),"Yenile"]})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Alc (Buyer)"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Satc (Seller)"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Miktar"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Durum"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Tarih"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"lemler"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:a?s.jsx("tr",{children:s.jsxs("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:[s.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full"}),s.jsx("p",{className:"mt-2",children:"Ykleniyor..."})]})}):f.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"Gsterilecek sipari yok"})}):f.map(v=>s.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[s.jsxs("td",{className:"p-4 text-xs text-gray-400 font-mono",children:[v.id.substring(0,8),"..."]}),s.jsx("td",{className:"p-4",children:v.buyer?s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-gray-700",children:v.buyer.name||"N/A"}),s.jsx("div",{className:"text-xs text-gray-400",children:v.buyer.email})]}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),s.jsx("td",{className:"p-4",children:v.seller?s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-gray-700",children:v.seller.name||"N/A"}),s.jsx("div",{className:"text-xs text-gray-400",children:v.seller.email})]}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),s.jsxs("td",{className:"p-4 font-mono font-bold text-gray-900",children:["$",v.amount_usd.toLocaleString()]}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase tracking-wide ${y(v.status)}`,children:v.status})}),s.jsx("td",{className:"p-4 text-xs text-gray-500",children:w(v.created_at)}),s.jsx("td",{className:"p-4 text-right",children:s.jsxs("div",{className:"flex gap-2 justify-end",children:[["OPEN","MATCHED","PAID"].includes(v.status)&&s.jsx("button",{onClick:()=>x(v.id),disabled:c===v.id,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:c===v.id?"...":"Zorla Tamamla"}),["OPEN","MATCHED","PAID"].includes(v.status)&&s.jsx("button",{onClick:()=>g(v.id),disabled:c===v.id,className:"bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:c===v.id?"...":"Zorla ptal"}),["COMPLETED","CANCELLED"].includes(v.status)&&s.jsx("span",{className:"text-xs text-gray-400",children:"-"})]})})]},v.id))})]})})}),s.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-5 gap-4",children:["OPEN","MATCHED","PAID","COMPLETED","CANCELLED"].map(v=>s.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[s.jsx("div",{className:`text-2xl font-bold ${y(v).replace("bg-","text-").replace("-50","-600")}`,children:t.filter(b=>b.status===v).length}),s.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:v})]},v))})]})},eT=[{value:"",label:"Tm"},{value:"auth",label:"Kimlik Dorulama"},{value:"transaction",label:"lem"},{value:"kyc",label:"KYC"},{value:"p2p",label:"P2P"},{value:"admin",label:"Admin"},{value:"user",label:"Kullanc"},{value:"system",label:"Sistem"},{value:"security",label:"Gvenlik"}],tT=t=>{switch(t==null?void 0:t.toLowerCase()){case"auth":return"text-blue-400";case"transaction":return"text-emerald-400";case"kyc":return"text-purple-400";case"p2p":return"text-yellow-400";case"admin":return"text-pink-400";case"user":return"text-cyan-400";case"system":return"text-gray-400";case"security":return"text-red-400";default:return"text-gray-400"}},rT=t=>{switch(t){case"success":return"bg-emerald-500/20 text-emerald-400";case"failed":return"bg-red-500/20 text-red-400";case"pending":return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}},nT=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),[a,o]=N.useState(""),[c,d]=N.useState("");N.useEffect(()=>{const f=async()=>{n(!0);const g=await G.getAdminLogs({action_type:a||void 0,limit:200});e(g),n(!1)};f();const x=setInterval(f,5e3);return()=>clearInterval(x)},[a]);const h=c?t.filter(f=>{var x,g,y;return((x=f.description)==null?void 0:x.toLowerCase().includes(c.toLowerCase()))||((g=f.user)==null?void 0:g.toLowerCase().includes(c.toLowerCase()))||((y=f.action)==null?void 0:y.toLowerCase().includes(c.toLowerCase()))}):t;return s.jsxs(rr,{title:"Aktivite Loglar",children:[s.jsxs("div",{className:"bg-[#1E1E1E] rounded-xl p-4 mb-4 border border-gray-800 flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-gray-500 text-xs mb-1 block",children:"Ara"}),s.jsx("input",{type:"text",value:c,onChange:f=>d(f.target.value),placeholder:"Aklama, kullanc veya ilem ara...",className:"w-full bg-[#2D2D2D] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none"})]}),s.jsxs("div",{className:"w-full sm:w-48",children:[s.jsx("label",{className:"text-gray-500 text-xs mb-1 block",children:"Tr"}),s.jsx("select",{value:a,onChange:f=>o(f.target.value),className:"w-full bg-[#2D2D2D] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none",children:eT.map(f=>s.jsx("option",{value:f.value,children:f.label},f.value))})]})]}),s.jsxs("div",{className:"bg-[#1E1E1E] rounded-xl shadow-lg border border-gray-800 overflow-hidden",children:[s.jsxs("div",{className:"bg-[#2D2D2D] px-4 py-2 border-b border-gray-700 flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-gray-400 text-xs",children:[h.length," kayt"]}),s.jsxs("span",{className:"flex items-center gap-1 text-emerald-400 text-xs",children:[s.jsx("span",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),"Canl"]})]})]}),s.jsx("div",{className:"font-mono text-sm h-[600px] overflow-y-auto",children:r&&t.length===0?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"w-8 h-8 border-2 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin"})}):h.length===0?s.jsx("div",{className:"flex items-center justify-center h-full text-gray-600",children:c||a?"Sonu bulunamad":"Henz log kayd yok..."}):s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-[#252525] sticky top-0",children:s.jsxs("tr",{className:"text-gray-500 text-xs",children:[s.jsx("th",{className:"text-left p-3 font-medium",children:"Zaman"}),s.jsx("th",{className:"text-left p-3 font-medium",children:"Tr"}),s.jsx("th",{className:"text-left p-3 font-medium",children:"Durum"}),s.jsx("th",{className:"text-left p-3 font-medium",children:"Aklama"}),s.jsx("th",{className:"text-left p-3 font-medium",children:"Kullanc"})]})}),s.jsx("tbody",{children:h.map(f=>s.jsxs("tr",{className:"border-b border-gray-800/50 hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"p-3 text-gray-500 whitespace-nowrap",children:f.formattedTime}),s.jsx("td",{className:"p-3",children:s.jsx("span",{className:`font-bold ${tT(f.type)}`,children:f.type})}),s.jsx("td",{className:"p-3",children:s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${rT(f.status)}`,children:f.status==="success"?"":f.status==="failed"?"":""})}),s.jsx("td",{className:"p-3 text-gray-300 max-w-md truncate",children:f.description}),s.jsx("td",{className:"p-3 text-gray-500 text-xs",children:f.userName||f.user})]},f.id))})]})})]})]})},$h="f8f57351-2bcf-428c-92d0-7d8652807847",Fh="https://api.trongrid.io",Qv="TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",sT=async t=>{try{const e=await fetch(`${Fh}/v1/accounts/${t}`,{headers:{"TRON-PRO-API-KEY":$h}});if(!e.ok)return 0;const r=await e.json();return r.data&&r.data.length>0?(r.data[0].balance||0)/1e6:0}catch{return 0}},iT=async t=>{try{const e=await fetch(`${Fh}/v1/accounts/${t}/tokens?token_id=${Qv}`,{headers:{"TRON-PRO-API-KEY":$h}});if(!e.ok)return 0;const r=await e.json();return r.data&&r.data.length>0?(parseFloat(r.data[0].balance)||0)/1e6:0}catch{return 0}},aT=async t=>{const[e,r]=await Promise.all([sT(t),iT(t)]);return{trx:e,usdt:r}},oT=async(t,e=20)=>{try{const r=await fetch(`${Fh}/v1/accounts/${t}/transactions/trc20?limit=${e}&contract_address=${Qv}`,{headers:{"TRON-PRO-API-KEY":$h}});return r.ok?(await r.json()).data||[]:[]}catch{return[]}},lT=()=>{const[t,e]=N.useState({vaults:[],ledger:[]}),[r,n]=N.useState(!0),[a,o]=N.useState({}),[c,d]=N.useState(!1),[h,f]=N.useState(null),[x,g]=N.useState(""),[y,w]=N.useState(""),[v,b]=N.useState(!1),[E,j]=N.useState(!1),[_,S]=N.useState(null),[P,O]=N.useState([]),[A,I]=N.useState(!1);N.useEffect(()=>{const F=()=>G.getAdminVaults().then($=>{e($),n(!1)});F();const K=setInterval(F,5e3);return()=>clearInterval(K)},[]),N.useEffect(()=>{const F=async()=>{for(const K of t.vaults)if(K.address&&K.address.startsWith("T")){o($=>({...$,[K.id]:{trx:0,usdt:0,loading:!0}}));try{const $=await aT(K.address);o(Q=>({...Q,[K.id]:{...$,loading:!1}}))}catch{o(Q=>({...Q,[K.id]:{trx:0,usdt:0,loading:!1}}))}}};t.vaults.length>0&&F()},[t.vaults]);const B=F=>{navigator.clipboard.writeText(F)},R=async(F,K)=>{I(!0),S(K);const $=await oT(F);O($),I(!1)},W=async F=>{if(F.preventDefault(),!h||!x)return;j(!0),await G.manualVaultDeposit(h.id,parseFloat(x),y||"External Transfer","TRC20",v)?(d(!1),g(""),w(""),b(!1),j(!1),G.getAdminVaults().then(e)):(alert("Failed to deposit"),j(!1))};return s.jsx(rr,{title:"Crypto Vaults (TRX)",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-[calc(100vh-140px)] relative",children:[c&&h&&s.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm rounded-2xl",children:s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl w-96 max-w-full",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:["Add Funds to ",h.name]}),s.jsxs("form",{onSubmit:W,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Amount (USDT)"}),s.jsx("input",{type:"number",value:x,onChange:F=>g(F.target.value),className:"w-full border border-gray-300 rounded-lg p-2",placeholder:"0.00",step:"0.01",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Sender Email (Optional)"}),s.jsx("input",{type:"text",value:y,onChange:F=>w(F.target.value),className:"w-full border border-gray-300 rounded-lg p-2",placeholder:"external@sender.com"})]}),y&&s.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"addToUser",checked:v,onChange:F=>b(F.target.checked),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"addToUser",className:"text-sm text-gray-700 font-medium select-none",children:"Also credit user's balance"})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm font-bold",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-bold",children:E?"Processing...":"Add Funds"})]})]})]})}),s.jsxs("div",{className:"lg:w-1/3 flex flex-col bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center",children:[s.jsx("h2",{className:"font-bold text-gray-800",children:"Vault Accounts"}),s.jsxs("span",{className:"text-xs font-bold text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[t.vaults.length," Active"]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.vaults.map(F=>{const K=a[F.id];return s.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition-all group relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-red-50 text-red-500 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-sm",children:"account_balance_wallet"})}),s.jsx("h3",{className:"font-bold text-gray-700 text-sm",children:F.name}),s.jsx("button",{onClick:async $=>{$.stopPropagation(),(await G.toggleVaultStatus(F.id)).success&&G.getAdminVaults().then(e)},className:`px-2 py-0.5 rounded text-[10px] font-bold ${F.is_active!==!1?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:F.is_active!==!1?"AKTF":"PASF"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"text-lg font-extrabold text-[#111827]",children:["$",F.balance.toLocaleString()]}),s.jsx("p",{className:"text-[10px] text-gray-400",children:"Platform Balance"})]}),s.jsx("button",{onClick:$=>{$.stopPropagation(),f(F),d(!0)},className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-colors",title:"Add Funds Manually",children:s.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})})]})]}),F.address&&F.address.startsWith("T")&&s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-2 mb-2 border border-green-100",children:[s.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-1",children:" Blockchain Balance"}),K!=null&&K.loading?s.jsx("p",{className:"text-xs text-gray-400 animate-pulse",children:"Loading..."}):K?s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("span",{className:"text-sm font-bold text-green-600",children:[K.usdt.toLocaleString()," USDT"]}),s.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[K.trx.toFixed(2)," TRX"]})]}):s.jsx("p",{className:"text-xs text-gray-400",children:"-"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 flex justify-between items-center cursor-pointer hover:bg-gray-100 group-hover:bg-blue-50 transition-colors",onClick:()=>B(F.address),title:"Click to copy",children:[s.jsx("p",{className:"font-mono text-xs text-gray-500 truncate w-48",children:F.address}),s.jsx("span",{className:"material-symbols-outlined text-gray-400 text-xs group-hover:text-blue-500",children:"content_copy"})]}),s.jsxs("button",{onClick:()=>R(F.address,F.id),className:"mt-2 w-full px-3 py-2 bg-purple-50 hover:bg-purple-100 text-purple-600 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-colors",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"history"}),_===F.id&&A?"Ykleniyor...":"Blockchain Gemii"]}),_===F.id&&!A&&P.length>0&&s.jsx("div",{className:"mt-2 bg-white rounded-lg border border-purple-100 max-h-48 overflow-y-auto",children:P.slice(0,10).map(($,Q)=>{var Y,z;return s.jsxs("div",{className:"p-2 border-b border-gray-50 last:border-b-0 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:$.to===F.address?"text-green-600 font-bold":"text-red-600 font-bold",children:[$.to===F.address?"+":"-",(parseFloat($.value)/1e6).toFixed(2)," USDT"]}),s.jsx("span",{className:"text-gray-400",children:new Date($.block_timestamp).toLocaleDateString()})]}),s.jsx("p",{className:"text-gray-400 truncate",children:$.to===F.address?`From: ${(Y=$.from)==null?void 0:Y.slice(0,10)}...`:`To: ${(z=$.to)==null?void 0:z.slice(0,10)}...`})]},Q)})}),_===F.id&&!A&&P.length===0&&s.jsx("p",{className:"mt-2 text-xs text-gray-400 text-center",children:"Henz blockchain ilemi yok"})]},F.id)})})]}),s.jsxs("div",{className:"flex-1 flex flex-col bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:s.jsx("h2",{className:"font-bold text-gray-800",children:"Vault Ledger"})}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-white border-b border-gray-100 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Time"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Network"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Type"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:t.ledger.length===0?s.jsx("tr",{children:s.jsxs("td",{colSpan:5,className:"p-12 text-center text-gray-400 italic",children:[s.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-20",children:"receipt_long"}),s.jsx("p",{children:"No transaction history"})]})}):t.ledger.map(F=>s.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[s.jsx("td",{className:"p-4 text-xs text-gray-500 whitespace-nowrap",children:new Date(F.timestamp).toLocaleString()}),s.jsx("td",{className:"p-4 text-xs font-bold text-gray-700",children:F.userEmail}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider bg-blue-100 text-blue-700",children:F.network})}),s.jsxs("td",{className:`p-4 font-mono font-bold text-sm ${F.type==="withdraw"?"text-red-600":"text-green-600"}`,children:[F.type==="withdraw"?"-":"+","$",F.amount.toLocaleString()]}),s.jsx("td",{className:"p-4 text-right",children:s.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${F.type==="withdraw"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:F.type})})]},F.id))})]})})]})]})})},cT=[{id:"Kobi",label:"Kobi",color:"bg-green-100 text-green-700"},{id:"Forex",label:"Forex",color:"bg-blue-100 text-blue-700"},{id:"Cash Point",label:"Cash Point",color:"bg-purple-100 text-purple-700"}],uT=["#10B981","#3B82F6","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6366F1"],dT=()=>{const t=we(),[e,r]=N.useState([]),[n,a]=N.useState(!0),[o,c]=N.useState(!1),[d,h]=N.useState({name:"",category:"Kobi",color:"#10B981",is_active:!0}),[f,x]=N.useState(!1);N.useEffect(()=>{g()},[]);const g=async()=>{a(!0);const w=await G.getDepartments();r(w),a(!1)},y=async w=>{w.preventDefault(),x(!0);const v=await G.createDepartment(d);v&&v.success?(c(!1),h({name:"",category:"Kobi",color:"#10B981",is_active:!0}),g()):alert("Failed to create department"),x(!1)};return s.jsxs(rr,{title:"Departman Ynetimi",children:[s.jsx("div",{className:"flex gap-6 h-[calc(100vh-140px)]",children:s.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-gray-700",children:"Departmanlar"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:g,className:"p-2 bg-white rounded-full text-gray-400 hover:text-gray-600 shadow-sm border border-gray-100",children:s.jsx("span",{className:"material-symbols-outlined text-lg",children:"refresh"})}),s.jsx("button",{onClick:()=>c(!0),className:"p-2 bg-green-100 rounded-full text-green-600 hover:bg-green-200 shadow-sm",children:s.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})})]})]}),s.jsx("div",{className:"space-y-4",children:n?s.jsx("div",{className:"text-center py-10 text-gray-400",children:"Loading..."}):e.length===0?s.jsx("div",{className:"text-center py-10 text-gray-400 bg-white rounded-xl border border-dashed border-gray-200",children:"No departments found."}):e.map(w=>{var v;return s.jsxs("div",{onClick:()=>t(`/admin/departments/${w.id}`),className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md hover:border-blue-200 transition-all cursor-pointer group",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white text-xl font-bold shadow-sm",style:{backgroundColor:w.color||d.color||"#10B981"},children:s.jsx("span",{className:"material-symbols-outlined",children:"business"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-blue-600 transition-colors",children:w.name}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex gap-2",children:[s.jsxs("span",{children:[w.vaults_count||1," vault"]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[w.members&&((v=w.members[0])==null?void 0:v.count)||0," ye"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-400 font-bold uppercase mb-1",children:"Bakiye"}),s.jsx("div",{className:"font-bold text-gray-800",children:"$0"})]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-400 font-bold uppercase mb-1",children:"lem"}),s.jsx("div",{className:"font-bold text-gray-800",children:"0"})]})]})]},w.id)})})]})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6 shadow-2xl transform transition-all scale-100",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Yeni Departman"}),s.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Kategori / Tip"}),s.jsx("div",{className:"flex gap-2",children:cT.map(w=>s.jsx("button",{type:"button",onClick:()=>h({...d,category:w.id}),className:`flex-1 py-2 rounded-lg text-xs font-bold border transition-colors ${d.category===w.id?"bg-white border-green-500 text-green-600 shadow-sm ring-1 ring-green-500":"bg-gray-50 border-gray-200 text-gray-500 hover:bg-gray-100"}`,children:w.label},w.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Departman Ad"}),s.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition-all font-bold text-gray-800",placeholder:"rn: Firma A",value:d.name,onChange:w=>h({...d,name:w.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Renk Etiketi"}),s.jsx("div",{className:"flex gap-3",children:uT.map(w=>s.jsx("button",{type:"button",onClick:()=>h({...d,color:w}),className:`w-8 h-8 rounded-full transition-transform ${d.color===w?"scale-125 ring-2 ring-offset-2 ring-gray-300":"hover:scale-110"}`,style:{backgroundColor:w}},w))})]}),s.jsxs("div",{className:"pt-6 flex gap-3",children:[s.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 py-3 bg-white border border-gray-200 hover:bg-gray-50 text-gray-700 font-bold rounded-xl transition-colors",children:"ptal"}),s.jsx("button",{type:"submit",disabled:f,className:"flex-1 py-3 bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white font-bold rounded-xl shadow-lg shadow-green-500/30 transition-all",children:f?"...":"Olutur"})]})]})]})})]})},hT=()=>{var F,K,$,Q,Y;const{id:t}=vh(),e=we(),[r,n]=N.useState(null),[a,o]=N.useState([]),[c,d]=N.useState([]),[h,f]=N.useState([]),[x,g]=N.useState(!0),[y,w]=N.useState("portal"),[v,b]=N.useState(!1),[E,j]=N.useState(!1),[_,S]=N.useState([]),[P,O]=N.useState({name:"",commission_mode:"percentage",commission_value:0,asset:"USDT",settlement_type:"external",is_active:!0});N.useEffect(()=>{t&&(A(),R(),I(),B())},[t]);const A=async()=>{const z=await G.getDepartment(t);z?n(z):e("/admin/departments"),g(!1)},I=async()=>{const z=await G.getDepartmentTransactions(t);f(z)},B=async()=>{const z=await G.getPortalRequests(t);S(z)},R=async()=>{const z=await G.getAvailableVaults();d(z)},W=async z=>{z.preventDefault();const le=await G.createPaymentPanel({department_id:t,...P});le!=null&&le.success?(j(!1),A()):alert("Error creating panel")};return x||!r?s.jsx(rr,{title:"...",children:"Loading..."}):(r.vaults,s.jsxs(rr,{title:"",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[s.jsx("span",{className:"cursor-pointer hover:text-gray-600",onClick:()=>e("/admin/departments"),children:"Departmanlar"}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-gray-800 font-bold",children:r.name})]}),s.jsxs("button",{onClick:async()=>{var U,re;const z=((U=r.owner)==null?void 0:U.account_type)==="business",le=await G.activateBusinessPanel((re=r.owner)==null?void 0:re.id,!z);le.success?(alert(z?"letme Paneli deaktif edildi!":"letme Paneli aktifletirildi!"),A()):alert("Hata: "+(le.error||"lem baarsz"))},className:`px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center gap-2 ${((F=r.owner)==null?void 0:F.account_type)==="business"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-orange-100 text-orange-700 hover:bg-orange-200"}`,children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:((K=r.owner)==null?void 0:K.account_type)==="business"?"storefront":"add_business"}),(($=r.owner)==null?void 0:$.account_type)==="business"?"letme Paneli Aktif":"letme Paneli Aktifletir"]}),s.jsxs("button",{onClick:async()=>{const z=await G.toggleDepartmentStatus(r.id);z.success?(alert(z.newStatus?"Departman aktif edildi!":"Departman pasif edildi!"),A()):alert("Hata: lem baarsz")},className:`px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center gap-2 ${r.is_active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:r.is_active?"check_circle":"cancel"}),r.is_active?"Departman Aktif":"Departman Pasif"]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h3",{className:"text-green-600 font-bold text-2xl",children:["$",(((Q=r.owner)==null?void 0:Q.balance)||0).toLocaleString()]}),s.jsx("p",{className:"text-green-800 text-xs font-bold uppercase mt-1",children:"Toplam Bakiye"})]})}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h3",{className:"text-blue-600 font-bold text-2xl",children:["$",h.filter(z=>z.type==="DEPOSIT"||z.amount>0).reduce((z,le)=>z+Math.abs(le.amount||0),0).toLocaleString()]}),s.jsx("p",{className:"text-blue-800 text-xs font-bold uppercase mt-1",children:"Yatrmlar"})]})}),s.jsx("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h3",{className:"text-red-600 font-bold text-2xl",children:["$",h.filter(z=>z.type==="WITHDRAW"||z.amount<0).reduce((z,le)=>z+Math.abs(le.amount||0),0).toLocaleString()]}),s.jsx("p",{className:"text-red-800 text-xs font-bold uppercase mt-1",children:"ekimler"})]})}),s.jsx("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-purple-600 font-bold text-2xl",children:h.length}),s.jsx("p",{className:"text-purple-800 text-xs font-bold uppercase mt-1",children:"lemler"})]})})]}),s.jsx("div",{className:"flex gap-8 border-b border-gray-100 mb-6",children:["transactions","members","portal"].map(z=>s.jsx("button",{onClick:()=>w(z),className:`pb-3 text-sm font-bold capitalize transition-colors ${y===z?"text-green-600 border-b-2 border-green-500":"text-gray-400 hover:text-gray-600"}`,children:z==="transactions"?"lemler":z==="members"?"yeler":"deme Portal"},z))}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 min-h-[400px]",children:[y==="transactions"&&s.jsx("div",{className:"p-6",children:h.length===0?s.jsx("div",{className:"text-center text-gray-400 py-12",children:"Henz ilem yok."}):s.jsx("div",{className:"space-y-3",children:h.map(z=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${z.type==="DEPOSIT"||z.amount>0?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:s.jsx("span",{className:"material-symbols-outlined text-sm",children:z.type==="DEPOSIT"||z.amount>0?"arrow_downward":"arrow_upward"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-gray-800",children:z.type==="DEPOSIT"?"Yatrm":z.type==="WITHDRAW"?"ekim":z.type==="TRANSFER"?"Transfer":z.type}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(z.created_at).toLocaleString("tr-TR")})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:`font-bold ${z.amount>0?"text-green-600":"text-red-600"}`,children:[z.amount>0?"+":"",Math.abs(z.amount).toLocaleString()," USDT"]}),s.jsx("p",{className:`text-xs ${z.status==="COMPLETED"?"text-green-500":z.status==="PENDING"?"text-amber-500":"text-gray-500"}`,children:z.status==="COMPLETED"?"Tamamland":z.status==="PENDING"?"Beklemede":z.status})]})]},z.id))})}),y==="members"&&s.jsx("div",{className:"p-8 text-center text-gray-400",children:"Henz ye yok."}),y==="portal"&&s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl border border-green-200 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-green-600 font-bold uppercase mb-1",children:"# NUSD Adresi"}),s.jsx("p",{className:"font-mono font-bold text-xl text-green-700",children:((Y=r.owner)==null?void 0:Y.nusd_code)||"NUSD kod bulunamad"})]}),s.jsxs("button",{onClick:()=>{var le;const z=(le=r.owner)==null?void 0:le.nusd_code;z&&(navigator.clipboard.writeText(z),alert("Kopyaland!"))},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"content_copy"}),"Kopyala"]})]})}),_.filter(z=>z.status==="pending").length>0&&s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:[s.jsxs("h4",{className:"font-bold text-amber-800 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"pending_actions"}),"Bekleyen Portal Talepleri (",_.filter(z=>z.status==="pending").length,")"]}),s.jsx("div",{className:"space-y-2",children:_.filter(z=>z.status==="pending").map(z=>{var le;return s.jsxs("div",{className:"bg-white p-3 rounded-lg flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-gray-800",children:z.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[((le=z.requester)==null?void 0:le.email)||"Bilinmiyor"," - ",new Date(z.created_at).toLocaleDateString("tr-TR")]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:async()=>{const U=await G.approvePortalRequest(z.id);U.success?(alert("Portal oluturuldu!"),A(),B()):alert("Hata: "+(U.error||"Onaylama baarsz"))},className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-lg text-xs font-bold",children:"Onayla"}),s.jsx("button",{onClick:async()=>{(await G.rejectPortalRequest(z.id)).success&&B()},className:"bg-red-100 hover:bg-red-200 text-red-600 px-3 py-1.5 rounded-lg text-xs font-bold",children:"Reddet"})]})]},z.id)})})]}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"font-bold text-gray-800",children:"deme Portallar"}),s.jsx("button",{onClick:()=>j(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold px-4 py-2 rounded-lg",children:"+ Yeni Portal"})]}),r.panels&&r.panels.length>0?s.jsx("div",{className:"space-y-4",children:r.panels.map(z=>s.jsxs("div",{className:"border border-gray-200 p-4 rounded-xl",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center text-green-700 font-bold text-xl",children:z.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800",children:z.name}),s.jsxs("p",{className:"text-xs text-gray-400",children:["/",z.public_slug]})]})]}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${z.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:z.is_active?"AKTF":"PASF"})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg flex items-center gap-2",children:[s.jsxs("code",{className:"flex-1 text-xs text-gray-600 truncate font-mono",children:[window.location.origin,"/#/pay/",z.public_slug]}),s.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md text-xs font-bold transition-colors",onClick:()=>window.open(`/#/pay/${z.public_slug}`,"_blank"),children:"Portal A "}),s.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1.5 rounded-md text-xs font-bold transition-colors",children:"Kopyala"}),s.jsx("button",{onClick:async()=>{if(window.confirm(`"${z.name}" portaln silmek istediinize emin misiniz?`)){const le=await G.deletePaymentPanel(z.id);le.success?(alert("Portal silindi!"),A()):alert("Hata: "+(le.error||"Silme baarsz"))}},className:"bg-red-100 hover:bg-red-200 text-red-600 px-3 py-1.5 rounded-md text-xs font-bold transition-colors",children:"Sil"})]})]},z.id))}):s.jsx("div",{className:"text-center py-10 text-gray-400 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:"Henz portal oluturulmam."})]})]})]}),E&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"Yeni Portal Olutur"}),s.jsxs("form",{onSubmit:W,className:"space-y-4",children:[s.jsx("input",{className:"w-full p-3 border rounded-lg",placeholder:"Portal Ad",value:P.name,onChange:z=>O({...P,name:z.target.value}),required:!0}),s.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-xl font-bold",children:"Olutur"}),s.jsx("button",{type:"button",onClick:()=>j(!1),className:"w-full text-gray-500 mt-2",children:"ptal"})]})]})})]}))},fT=()=>{const[t,e]=N.useState(null),[r,n]=N.useState(!0),[a,o]=N.useState(!1),[c,d]=N.useState(null),[h,f]=N.useState(null);N.useEffect(()=>{x()},[]);const x=async()=>{n(!0);try{const v=await G.getExchangeRate();e(v),v.fetched_at&&d(new Date(v.fetched_at))}catch(v){console.error("Load rate error:",v)}finally{n(!1)}},g=async()=>{o(!0),f(null);try{const v=await G.updateExchangeRate();v.success?(f({success:!0,message:`Kur gncellendi: 1 USDT = ${v.rate.toFixed(2)} TRY`}),e({rate:v.rate,buy_rate:v.buy_rate,sell_rate:v.sell_rate,spread:v.spread,fetched_at:v.fetched_at,is_fallback:!1}),d(new Date(v.fetched_at))):f({success:!1,message:v.error||"Gncelleme baarsz"})}catch(v){f({success:!1,message:v.message||"Balant hatas"})}finally{o(!1)}},y=v=>v.toLocaleString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),w=()=>{if(!c)return"Bilinmiyor";const v=Date.now()-c.getTime(),b=Math.floor(v/6e4);if(b<1)return"Az nce";if(b<60)return`${b} dakika nce`;const E=Math.floor(b/60);return E<24?`${E} saat nce`:y(c)};return s.jsx(rr,{title:"Kur Ynetimi",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Kur Ynetimi"}),s.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"USDT/TRY dviz kuru ayarlar"})]}),s.jsx("button",{onClick:g,disabled:a,className:`px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-all ${a?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-lime-500 text-black hover:bg-lime-400 active:scale-[0.98]"}`,children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Gncelleniyor..."]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-outlined",children:"refresh"}),"Kuru Gncelle"]})})]}),h&&s.jsx("div",{className:`mb-6 p-4 rounded-xl border ${h.success?"bg-lime-500/10 border-lime-500/30 text-lime-400":"bg-red-500/10 border-red-500/30 text-red-400"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:h.success?"check_circle":"error"}),h.message]})}),r?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx("div",{className:"w-10 h-10 border-2 border-lime-500/30 border-t-lime-500 rounded-full animate-spin"})}):t?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-blue-400 text-2xl",children:"show_chart"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Piyasa Kuru"}),s.jsx("p",{className:"text-xs text-gray-500",children:"CoinGecko"})]})]}),s.jsxs("p",{className:"text-3xl font-bold text-white",children:["",t.rate.toFixed(2)]}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"1 USDT"})]}),s.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-lime-500/20",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-lime-500/20 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-lime-400 text-2xl",children:"add_circle"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Alm Kuru"}),s.jsxs("p",{className:"text-xs text-lime-400",children:["+",t.spread.toFixed(2)," spread"]})]})]}),s.jsxs("p",{className:"text-3xl font-bold text-lime-400",children:["",t.buy_rate.toFixed(2)]}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Kullanc USDT alrken der"})]}),s.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-red-500/20",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-red-400 text-2xl",children:"remove_circle"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Satm Kuru"}),s.jsxs("p",{className:"text-xs text-red-400",children:["-",t.spread.toFixed(2)," spread"]})]})]}),s.jsxs("p",{className:"text-3xl font-bold text-red-400",children:["",t.sell_rate.toFixed(2)]}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Kullanc USDT satarken alr"})]})]}):null,s.jsxs("div",{className:"mt-6 bg-[#1a1a1a] rounded-2xl p-6 border border-white/5",children:[s.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"info"}),"Kur Bilgileri"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[s.jsx("span",{className:"text-gray-400",children:"Son Gncelleme"}),s.jsx("span",{className:"text-white",children:w()})]}),s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[s.jsx("span",{className:"text-gray-400",children:"Kaynak"}),s.jsx("span",{className:"text-white",children:"CoinGecko API"})]}),s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[s.jsx("span",{className:"text-gray-400",children:"Spread"}),s.jsxs("span",{className:"text-white",children:["",(t==null?void 0:t.spread.toFixed(2))||"0.10"]})]}),s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[s.jsx("span",{className:"text-gray-400",children:"Veri Tipi"}),s.jsx("span",{className:t!=null&&t.is_fallback?"text-amber-400":"text-lime-400",children:t!=null&&t.is_fallback?"Fallback (Varsaylan)":"Gerek Zamanl"})]})]})]}),s.jsxs("div",{className:"mt-6 bg-amber-500/10 rounded-2xl p-6 border border-amber-500/20",children:[s.jsxs("h3",{className:"text-amber-400 font-bold mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"calculate"}),"Spread Nasl alr?"]}),s.jsx("p",{className:"text-gray-300 text-sm",children:"Her ilemde 0.10 spread uygulanr:"}),s.jsxs("ul",{className:"list-none mt-2 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{className:"text-lime-400",children:"Alm:"})," Kullanc USDT satn alrken piyasa kuru + 0.10 der"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{className:"text-red-400",children:"Satm:"})," Kullanc USDT satarken piyasa kuru - 0.10 alr"]})]})]})]})})};function eb(t,e){const r=N.useRef(e);N.useEffect(function(){e!==r.current&&t.attributionControl!=null&&(r.current!=null&&t.attributionControl.removeAttribution(r.current),e!=null&&t.attributionControl.addAttribution(e)),r.current=e},[t,e])}const mT=1;function pT(t){return Object.freeze({__version:mT,map:t})}function gT(t,e){return Object.freeze({...t,...e})}const tb=N.createContext(null),rb=tb.Provider;function Hh(){const t=N.useContext(tb);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function xT(t){function e(r,n){const{instance:a,context:o}=t(r).current;return N.useImperativeHandle(n,()=>a),r.children==null?null:Cs.createElement(rb,{value:o},r.children)}return N.forwardRef(e)}function yT(t){function e(r,n){const[a,o]=N.useState(!1),{instance:c}=t(r,o).current;N.useImperativeHandle(n,()=>c),N.useEffect(function(){a&&c.update()},[c,a,r.children]);const d=c._contentNode;return d?E0.createPortal(r.children,d):null}return N.forwardRef(e)}function vT(t){function e(r,n){const{instance:a}=t(r).current;return N.useImperativeHandle(n,()=>a),null}return N.forwardRef(e)}function nb(t,e){const r=N.useRef();N.useEffect(function(){return e!=null&&t.instance.on(e),r.current=e,function(){r.current!=null&&t.instance.off(r.current),r.current=null}},[t,e])}function Wh(t,e){const r=t.pane??e.pane;return r?{...t,pane:r}:t}function bT(t,e){return function(n,a){const o=Hh(),c=t(Wh(n,o),o);return eb(o.map,n.attribution),nb(c.current,n.eventHandlers),e(c.current,o,n,a),c}}var _d={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(r,n){n(e)})(yn,function(r){var n="1.9.4";function a(i){var l,u,m,p;for(u=1,m=arguments.length;u<m;u++){p=arguments[u];for(l in p)i[l]=p[l]}return i}var o=Object.create||function(){function i(){}return function(l){return i.prototype=l,new i}}();function c(i,l){var u=Array.prototype.slice;if(i.bind)return i.bind.apply(i,u.call(arguments,1));var m=u.call(arguments,2);return function(){return i.apply(l,m.length?m.concat(u.call(arguments)):arguments)}}var d=0;function h(i){return"_leaflet_id"in i||(i._leaflet_id=++d),i._leaflet_id}function f(i,l,u){var m,p,k,T;return T=function(){m=!1,p&&(k.apply(u,p),p=!1)},k=function(){m?p=arguments:(i.apply(u,arguments),setTimeout(T,l),m=!0)},k}function x(i,l,u){var m=l[1],p=l[0],k=m-p;return i===m&&u?i:((i-p)%k+k)%k+p}function g(){return!1}function y(i,l){if(l===!1)return i;var u=Math.pow(10,l===void 0?6:l);return Math.round(i*u)/u}function w(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function v(i){return w(i).split(/\s+/)}function b(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?o(i.options):{});for(var u in l)i.options[u]=l[u];return i.options}function E(i,l,u){var m=[];for(var p in i)m.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(i[p]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function _(i,l){return i.replace(j,function(u,m){var p=l[m];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(l)),p})}var S=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function P(i,l){for(var u=0;u<i.length;u++)if(i[u]===l)return u;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var I=0;function B(i){var l=+new Date,u=Math.max(0,16-(l-I));return I=l+u,window.setTimeout(i,u)}var R=window.requestAnimationFrame||A("RequestAnimationFrame")||B,W=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function F(i,l,u){if(u&&R===B)i.call(l);else return R.call(window,c(i,l))}function K(i){i&&W.call(window,i)}var $={__proto__:null,extend:a,create:o,bind:c,get lastId(){return d},stamp:h,throttle:f,wrapNum:x,falseFn:g,formatNum:y,trim:w,splitWords:v,setOptions:b,getParamString:E,template:_,isArray:S,indexOf:P,emptyImageUrl:O,requestFn:R,cancelFn:W,requestAnimFrame:F,cancelAnimFrame:K};function Q(){}Q.extend=function(i){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=l.__super__=this.prototype,m=o(u);m.constructor=l,l.prototype=m;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(l[p]=this[p]);return i.statics&&a(l,i.statics),i.includes&&(Y(i.includes),a.apply(null,[m].concat(i.includes))),a(m,i),delete m.statics,delete m.includes,m.options&&(m.options=u.options?o(u.options):{},a(m.options,i.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,T=m._initHooks.length;k<T;k++)m._initHooks[k].call(this)}},l},Q.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},Q.mergeOptions=function(i){return a(this.prototype.options,i),this},Q.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),u=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Y(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=S(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var z={on:function(i,l,u){if(typeof i=="object")for(var m in i)this._on(m,i[m],l);else{i=v(i);for(var p=0,k=i.length;p<k;p++)this._on(i[p],l,u)}return this},off:function(i,l,u){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var m in i)this._off(m,i[m],l);else{i=v(i);for(var p=arguments.length===1,k=0,T=i.length;k<T;k++)p?this._off(i[k]):this._off(i[k],l,u)}return this},_on:function(i,l,u,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,u)===!1){u===this&&(u=void 0);var p={fn:l,ctx:u};m&&(p.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(p)}},_off:function(i,l,u){var m,p,k;if(this._events&&(m=this._events[i],!!m)){if(arguments.length===1){if(this._firingCount)for(p=0,k=m.length;p<k;p++)m[p].fn=g;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var T=this._listens(i,l,u);if(T!==!1){var D=m[T];this._firingCount&&(D.fn=g,this._events[i]=m=m.slice()),m.splice(T,1)}}},fire:function(i,l,u){if(!this.listens(i,u))return this;var m=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var p=this._events[i];if(p){this._firingCount=this._firingCount+1||1;for(var k=0,T=p.length;k<T;k++){var D=p[k],M=D.fn;D.once&&this.off(i,M,D.ctx),M.call(D.ctx||this,m)}this._firingCount--}}return u&&this._propagateEvent(m),this},listens:function(i,l,u,m){typeof i!="string"&&console.warn('"string" type argument expected');var p=l;typeof l!="function"&&(m=!!l,p=void 0,u=void 0);var k=this._events&&this._events[i];if(k&&k.length&&this._listens(i,p,u)!==!1)return!0;if(m){for(var T in this._eventParents)if(this._eventParents[T].listens(i,l,u,m))return!0}return!1},_listens:function(i,l,u){if(!this._events)return!1;var m=this._events[i]||[];if(!l)return!!m.length;u===this&&(u=void 0);for(var p=0,k=m.length;p<k;p++)if(m[p].fn===l&&m[p].ctx===u)return p;return!1},once:function(i,l,u){if(typeof i=="object")for(var m in i)this._on(m,i[m],l,!0);else{i=v(i);for(var p=0,k=i.length;p<k;p++)this._on(i[p],l,u,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[h(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[h(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};z.addEventListener=z.on,z.removeEventListener=z.clearAllEventListeners=z.off,z.addOneTimeEventListener=z.once,z.fireEvent=z.fire,z.hasEventListeners=z.listens;var le=Q.extend(z);function U(i,l,u){this.x=u?Math.round(i):i,this.y=u?Math.round(l):l}var re=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(i){return this.clone()._add(Z(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(Z(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new U(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new U(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(i){i=Z(i);var l=i.x-this.x,u=i.y-this.y;return Math.sqrt(l*l+u*u)},equals:function(i){return i=Z(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=Z(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function Z(i,l,u){return i instanceof U?i:S(i)?new U(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new U(i.x,i.y):new U(i,l,u)}function V(i,l){if(i)for(var u=l?[i,l]:i,m=0,p=u.length;m<p;m++)this.extend(u[m])}V.prototype={extend:function(i){var l,u;if(!i)return this;if(i instanceof U||typeof i[0]=="number"||"x"in i)l=u=Z(i);else if(i=H(i),l=i.min,u=i.max,!l||!u)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=u.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(i){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,u;return typeof i[0]=="number"||i instanceof U?i=Z(i):i=H(i),i instanceof V?(l=i.min,u=i.max):l=u=i,l.x>=this.min.x&&u.x<=this.max.x&&l.y>=this.min.y&&u.y<=this.max.y},intersects:function(i){i=H(i);var l=this.min,u=this.max,m=i.min,p=i.max,k=p.x>=l.x&&m.x<=u.x,T=p.y>=l.y&&m.y<=u.y;return k&&T},overlaps:function(i){i=H(i);var l=this.min,u=this.max,m=i.min,p=i.max,k=p.x>l.x&&m.x<u.x,T=p.y>l.y&&m.y<u.y;return k&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,u=this.max,m=Math.abs(l.x-u.x)*i,p=Math.abs(l.y-u.y)*i;return H(Z(l.x-m,l.y-p),Z(u.x+m,u.y+p))},equals:function(i){return i?(i=H(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function H(i,l){return!i||i instanceof V?i:new V(i,l)}function ee(i,l){if(i)for(var u=l?[i,l]:i,m=0,p=u.length;m<p;m++)this.extend(u[m])}ee.prototype={extend:function(i){var l=this._southWest,u=this._northEast,m,p;if(i instanceof X)m=i,p=i;else if(i instanceof ee){if(m=i._southWest,p=i._northEast,!m||!p)return this}else return i?this.extend(ie(i)||te(i)):this;return!l&&!u?(this._southWest=new X(m.lat,m.lng),this._northEast=new X(p.lat,p.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(i){var l=this._southWest,u=this._northEast,m=Math.abs(l.lat-u.lat)*i,p=Math.abs(l.lng-u.lng)*i;return new ee(new X(l.lat-m,l.lng-p),new X(u.lat+m,u.lng+p))},getCenter:function(){return new X((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new X(this.getNorth(),this.getWest())},getSouthEast:function(){return new X(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof X||"lat"in i?i=ie(i):i=te(i);var l=this._southWest,u=this._northEast,m,p;return i instanceof ee?(m=i.getSouthWest(),p=i.getNorthEast()):m=p=i,m.lat>=l.lat&&p.lat<=u.lat&&m.lng>=l.lng&&p.lng<=u.lng},intersects:function(i){i=te(i);var l=this._southWest,u=this._northEast,m=i.getSouthWest(),p=i.getNorthEast(),k=p.lat>=l.lat&&m.lat<=u.lat,T=p.lng>=l.lng&&m.lng<=u.lng;return k&&T},overlaps:function(i){i=te(i);var l=this._southWest,u=this._northEast,m=i.getSouthWest(),p=i.getNorthEast(),k=p.lat>l.lat&&m.lat<u.lat,T=p.lng>l.lng&&m.lng<u.lng;return k&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=te(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function te(i,l){return i instanceof ee?i:new ee(i,l)}function X(i,l,u){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,u!==void 0&&(this.alt=+u)}X.prototype={equals:function(i,l){if(!i)return!1;i=ie(i);var u=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return u<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+y(this.lat,i)+", "+y(this.lng,i)+")"},distanceTo:function(i){return $e.distance(this,ie(i))},wrap:function(){return $e.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,u=l/Math.cos(Math.PI/180*this.lat);return te([this.lat-l,this.lng-u],[this.lat+l,this.lng+u])},clone:function(){return new X(this.lat,this.lng,this.alt)}};function ie(i,l,u){return i instanceof X?i:S(i)&&typeof i[0]!="object"?i.length===3?new X(i[0],i[1],i[2]):i.length===2?new X(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new X(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new X(i,l,u)}var de={latLngToPoint:function(i,l){var u=this.projection.project(i),m=this.scale(l);return this.transformation._transform(u,m)},pointToLatLng:function(i,l){var u=this.scale(l),m=this.transformation.untransform(i,u);return this.projection.unproject(m)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,u=this.scale(i),m=this.transformation.transform(l.min,u),p=this.transformation.transform(l.max,u);return new V(m,p)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?x(i.lng,this.wrapLng,!0):i.lng,u=this.wrapLat?x(i.lat,this.wrapLat,!0):i.lat,m=i.alt;return new X(u,l,m)},wrapLatLngBounds:function(i){var l=i.getCenter(),u=this.wrapLatLng(l),m=l.lat-u.lat,p=l.lng-u.lng;if(m===0&&p===0)return i;var k=i.getSouthWest(),T=i.getNorthEast(),D=new X(k.lat-m,k.lng-p),M=new X(T.lat-m,T.lng-p);return new ee(D,M)}},$e=a({},de,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var u=Math.PI/180,m=i.lat*u,p=l.lat*u,k=Math.sin((l.lat-i.lat)*u/2),T=Math.sin((l.lng-i.lng)*u/2),D=k*k+Math.cos(m)*Math.cos(p)*T*T,M=2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D));return this.R*M}}),ha=6378137,qs={R:ha,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,u=this.MAX_LATITUDE,m=Math.max(Math.min(u,i.lat),-u),p=Math.sin(m*l);return new U(this.R*i.lng*l,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(i){var l=180/Math.PI;return new X((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:function(){var i=ha*Math.PI;return new V([-i,-i],[i,i])}()};function Kn(i,l,u,m){if(S(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=u,this._d=m}Kn.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new U((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function se(i,l,u,m){return new Kn(i,l,u,m)}var Pe=a({},$e,{code:"EPSG:3857",projection:qs,transformation:function(){var i=.5/(Math.PI*qs.R);return se(i,.5,-i,.5)}()}),un=a({},Pe,{code:"EPSG:900913"});function fa(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Gh(i,l){var u="",m,p,k,T,D,M;for(m=0,k=i.length;m<k;m++){for(D=i[m],p=0,T=D.length;p<T;p++)M=D[p],u+=(p?"L":"M")+M.x+" "+M.y;u+=l?ue.svg?"z":"x":""}return u||"M0 0"}var Rl=document.documentElement.style,ma="ActiveXObject"in window,lb=ma&&!document.addEventListener,Zh="msLaunchUri"in navigator&&!("documentMode"in document),Dl=nr("webkit"),Yh=nr("android"),Jh=nr("android 2")||nr("android 3"),cb=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ub=Yh&&nr("Google")&&cb<537&&!("AudioNode"in window),Bl=!!window.opera,Xh=!Zh&&nr("chrome"),Qh=nr("gecko")&&!Dl&&!Bl&&!ma,db=!Xh&&nr("safari"),ef=nr("phantom"),tf="OTransition"in Rl,hb=navigator.platform.indexOf("Win")===0,rf=ma&&"transition"in Rl,Ml="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Jh,nf="MozPerspective"in Rl,fb=!window.L_DISABLE_3D&&(rf||Ml||nf)&&!tf&&!ef,Ks=typeof orientation<"u"||nr("mobile"),mb=Ks&&Dl,pb=Ks&&Ml,sf=!window.PointerEvent&&window.MSPointerEvent,af=!!(window.PointerEvent||sf),of="ontouchstart"in window||!!window.TouchEvent,gb=!window.L_NO_TOUCH&&(of||af),xb=Ks&&Bl,yb=Ks&&Qh,vb=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,bb=function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return i}(),_b=function(){return!!document.createElement("canvas").getContext}(),zl=!!(document.createElementNS&&fa("svg").createSVGRect),wb=!!zl&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),jb=!zl&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Nb=navigator.platform.indexOf("Mac")===0,kb=navigator.platform.indexOf("Linux")===0;function nr(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ue={ie:ma,ielt9:lb,edge:Zh,webkit:Dl,android:Yh,android23:Jh,androidStock:ub,opera:Bl,chrome:Xh,gecko:Qh,safari:db,phantom:ef,opera12:tf,win:hb,ie3d:rf,webkit3d:Ml,gecko3d:nf,any3d:fb,mobile:Ks,mobileWebkit:mb,mobileWebkit3d:pb,msPointer:sf,pointer:af,touch:gb,touchNative:of,mobileOpera:xb,mobileGecko:yb,retina:vb,passiveEvents:bb,canvas:_b,svg:zl,vml:jb,inlineSvg:wb,mac:Nb,linux:kb},lf=ue.msPointer?"MSPointerDown":"pointerdown",cf=ue.msPointer?"MSPointerMove":"pointermove",uf=ue.msPointer?"MSPointerUp":"pointerup",df=ue.msPointer?"MSPointerCancel":"pointercancel",Ul={touchstart:lf,touchmove:cf,touchend:uf,touchcancel:df},hf={touchstart:Ab,touchmove:pa,touchend:pa,touchcancel:pa},Gn={},ff=!1;function Sb(i,l,u){return l==="touchstart"&&Cb(),hf[l]?(u=hf[l].bind(this,u),i.addEventListener(Ul[l],u,!1),u):(console.warn("wrong event specified:",l),g)}function Eb(i,l,u){if(!Ul[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Ul[l],u,!1)}function Pb(i){Gn[i.pointerId]=i}function Tb(i){Gn[i.pointerId]&&(Gn[i.pointerId]=i)}function mf(i){delete Gn[i.pointerId]}function Cb(){ff||(document.addEventListener(lf,Pb,!0),document.addEventListener(cf,Tb,!0),document.addEventListener(uf,mf,!0),document.addEventListener(df,mf,!0),ff=!0)}function pa(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var u in Gn)l.touches.push(Gn[u]);l.changedTouches=[l],i(l)}}function Ab(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&et(l),pa(i,l)}function Ob(i){var l={},u,m;for(m in i)u=i[m],l[m]=u&&u.bind?u.bind(i):u;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Lb=200;function Ib(i,l){i.addEventListener("dblclick",l);var u=0,m;function p(k){if(k.detail!==1){m=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var T=vf(k);if(!(T.some(function(M){return M instanceof HTMLLabelElement&&M.attributes.for})&&!T.some(function(M){return M instanceof HTMLInputElement||M instanceof HTMLSelectElement}))){var D=Date.now();D-u<=Lb?(m++,m===2&&l(Ob(k))):m=1,u=D}}}return i.addEventListener("click",p),{dblclick:l,simDblclick:p}}function Rb(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var $l=ya(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Gs=ya(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pf=Gs==="webkitTransition"||Gs==="OTransition"?Gs+"End":"transitionend";function gf(i){return typeof i=="string"?document.getElementById(i):i}function Zs(i,l){var u=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!u||u==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(i,null);u=m?m[l]:null}return u==="auto"?null:u}function _e(i,l,u){var m=document.createElement(i);return m.className=l||"",u&&u.appendChild(m),m}function Ie(i){var l=i.parentNode;l&&l.removeChild(i)}function ga(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Zn(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function Yn(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Fl(i,l){if(i.classList!==void 0)return i.classList.contains(l);var u=xa(i);return u.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(u)}function pe(i,l){if(i.classList!==void 0)for(var u=v(l),m=0,p=u.length;m<p;m++)i.classList.add(u[m]);else if(!Fl(i,l)){var k=xa(i);Hl(i,(k?k+" ":"")+l)}}function ze(i,l){i.classList!==void 0?i.classList.remove(l):Hl(i,w((" "+xa(i)+" ").replace(" "+l+" "," ")))}function Hl(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function xa(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function It(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&Db(i,l)}function Db(i,l){var u=!1,m="DXImageTransform.Microsoft.Alpha";try{u=i.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),u?(u.Enabled=l!==100,u.Opacity=l):i.style.filter+=" progid:"+m+"(opacity="+l+")"}function ya(i){for(var l=document.documentElement.style,u=0;u<i.length;u++)if(i[u]in l)return i[u];return!1}function dn(i,l,u){var m=l||new U(0,0);i.style[$l]=(ue.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(u?" scale("+u+")":"")}function Fe(i,l){i._leaflet_pos=l,ue.any3d?dn(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function hn(i){return i._leaflet_pos||new U(0,0)}var Ys,Js,Wl;if("onselectstart"in document)Ys=function(){me(window,"selectstart",et)},Js=function(){ke(window,"selectstart",et)};else{var Xs=ya(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ys=function(){if(Xs){var i=document.documentElement.style;Wl=i[Xs],i[Xs]="none"}},Js=function(){Xs&&(document.documentElement.style[Xs]=Wl,Wl=void 0)}}function Vl(){me(window,"dragstart",et)}function ql(){ke(window,"dragstart",et)}var va,Kl;function Gl(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(ba(),va=i,Kl=i.style.outlineStyle,i.style.outlineStyle="none",me(window,"keydown",ba))}function ba(){va&&(va.style.outlineStyle=Kl,va=void 0,Kl=void 0,ke(window,"keydown",ba))}function xf(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Zl(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var Bb={__proto__:null,TRANSFORM:$l,TRANSITION:Gs,TRANSITION_END:pf,get:gf,getStyle:Zs,create:_e,remove:Ie,empty:ga,toFront:Zn,toBack:Yn,hasClass:Fl,addClass:pe,removeClass:ze,setClass:Hl,getClass:xa,setOpacity:It,testProp:ya,setTransform:dn,setPosition:Fe,getPosition:hn,get disableTextSelection(){return Ys},get enableTextSelection(){return Js},disableImageDrag:Vl,enableImageDrag:ql,preventOutline:Gl,restoreOutline:ba,getSizedParentNode:xf,getScale:Zl};function me(i,l,u,m){if(l&&typeof l=="object")for(var p in l)Jl(i,p,l[p],u);else{l=v(l);for(var k=0,T=l.length;k<T;k++)Jl(i,l[k],u,m)}return this}var sr="_leaflet_events";function ke(i,l,u,m){if(arguments.length===1)yf(i),delete i[sr];else if(l&&typeof l=="object")for(var p in l)Xl(i,p,l[p],u);else if(l=v(l),arguments.length===2)yf(i,function(D){return P(l,D)!==-1});else for(var k=0,T=l.length;k<T;k++)Xl(i,l[k],u,m);return this}function yf(i,l){for(var u in i[sr]){var m=u.split(/\d/)[0];(!l||l(m))&&Xl(i,m,null,null,u)}}var Yl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Jl(i,l,u,m){var p=l+h(u)+(m?"_"+h(m):"");if(i[sr]&&i[sr][p])return this;var k=function(D){return u.call(m||i,D||window.event)},T=k;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?k=Sb(i,l,k):ue.touch&&l==="dblclick"?k=Ib(i,k):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(Yl[l]||l,k,ue.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(k=function(D){D=D||window.event,ec(i,D)&&T(D)},i.addEventListener(Yl[l],k,!1)):i.addEventListener(l,T,!1):i.attachEvent("on"+l,k),i[sr]=i[sr]||{},i[sr][p]=k}function Xl(i,l,u,m,p){p=p||l+h(u)+(m?"_"+h(m):"");var k=i[sr]&&i[sr][p];if(!k)return this;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?Eb(i,l,k):ue.touch&&l==="dblclick"?Rb(i,k):"removeEventListener"in i?i.removeEventListener(Yl[l]||l,k,!1):i.detachEvent("on"+l,k),i[sr][p]=null}function fn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Ql(i){return Jl(i,"wheel",fn),this}function Qs(i){return me(i,"mousedown touchstart dblclick contextmenu",fn),i._leaflet_disable_click=!0,this}function et(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function mn(i){return et(i),fn(i),this}function vf(i){if(i.composedPath)return i.composedPath();for(var l=[],u=i.target;u;)l.push(u),u=u.parentNode;return l}function bf(i,l){if(!l)return new U(i.clientX,i.clientY);var u=Zl(l),m=u.boundingClientRect;return new U((i.clientX-m.left)/u.x-l.clientLeft,(i.clientY-m.top)/u.y-l.clientTop)}var Mb=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function _f(i){return ue.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Mb:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function ec(i,l){var u=l.relatedTarget;if(!u)return!0;try{for(;u&&u!==i;)u=u.parentNode}catch{return!1}return u!==i}var zb={__proto__:null,on:me,off:ke,stopPropagation:fn,disableScrollPropagation:Ql,disableClickPropagation:Qs,preventDefault:et,stop:mn,getPropagationPath:vf,getMousePosition:bf,getWheelDelta:_f,isExternalTarget:ec,addListener:me,removeListener:ke},wf=le.extend({run:function(i,l,u,m){this.stop(),this._el=i,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=hn(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,u=this._duration*1e3;l<u?this._runFrame(this._easeOut(l/u),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var u=this._startPos.add(this._offset.multiplyBy(i));l&&u._round(),Fe(this._el,u),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),ve=le.extend({options:{crs:Pe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ie(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Gs&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,pf,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,u){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(ie(i),l,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=a({animate:u.animate},u.zoom),u.pan=a({animate:u.animate,duration:u.duration},u.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,u.zoom):this._tryAnimatedPan(i,u.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,u.pan&&u.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,u){var m=this.getZoomScale(l),p=this.getSize().divideBy(2),k=i instanceof U?i:this.latLngToContainerPoint(i),T=k.subtract(p).multiplyBy(1-1/m),D=this.containerPointToLatLng(p.add(T));return this.setView(D,l,{zoom:u})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():te(i);var u=Z(l.paddingTopLeft||l.padding||[0,0]),m=Z(l.paddingBottomRight||l.padding||[0,0]),p=this.getBoundsZoom(i,!1,u.add(m));if(p=typeof l.maxZoom=="number"?Math.min(l.maxZoom,p):p,p===1/0)return{center:i.getCenter(),zoom:p};var k=m.subtract(u).divideBy(2),T=this.project(i.getSouthWest(),p),D=this.project(i.getNorthEast(),p),M=this.unproject(T.add(D).divideBy(2).add(k),p);return{center:M,zoom:p}},fitBounds:function(i,l){if(i=te(i),!i.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(i,l);return this.setView(u.center,u.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=Z(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new wf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){pe(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,u,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,u){if(u=u||{},u.animate===!1||!ue.any3d)return this.setView(i,l,u);this._stop();var m=this.project(this.getCenter()),p=this.project(i),k=this.getSize(),T=this._zoom;i=ie(i),l=l===void 0?T:l;var D=Math.max(k.x,k.y),M=D*this.getZoomScale(T,l),q=p.distanceTo(m)||1,ne=1.42,fe=ne*ne;function ge(He){var Oa=He?-1:1,E_=He?M:D,P_=M*M-D*D+Oa*fe*fe*q*q,T_=2*E_*fe*q,dc=P_/T_,rm=Math.sqrt(dc*dc+1)-dc,C_=rm<1e-9?-18:Math.log(rm);return C_}function ft(He){return(Math.exp(He)-Math.exp(-He))/2}function Ye(He){return(Math.exp(He)+Math.exp(-He))/2}function Dt(He){return ft(He)/Ye(He)}var yt=ge(0);function rs(He){return D*(Ye(yt)/Ye(yt+ne*He))}function j_(He){return D*(Ye(yt)*Dt(yt+ne*He)-ft(yt))/fe}function N_(He){return 1-Math.pow(1-He,1.5)}var k_=Date.now(),em=(ge(1)-yt)/ne,S_=u.duration?1e3*u.duration:1e3*em*.8;function tm(){var He=(Date.now()-k_)/S_,Oa=N_(He)*em;He<=1?(this._flyToFrame=F(tm,this),this._move(this.unproject(m.add(p.subtract(m).multiplyBy(j_(Oa)/q)),T),this.getScaleZoom(D/rs(Oa),T),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),tm.call(this),this},flyToBounds:function(i,l){var u=this._getBoundsCenterZoom(i,l);return this.flyTo(u.center,u.zoom,l)},setMaxBounds:function(i){return i=te(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var u=this.getCenter(),m=this._limitCenter(u,this._zoom,te(i));return u.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var u=Z(l.paddingTopLeft||l.padding||[0,0]),m=Z(l.paddingBottomRight||l.padding||[0,0]),p=this.project(this.getCenter()),k=this.project(i),T=this.getPixelBounds(),D=H([T.min.add(u),T.max.subtract(m)]),M=D.getSize();if(!D.contains(k)){this._enforcingBounds=!0;var q=k.subtract(D.getCenter()),ne=D.extend(k).getSize().subtract(M);p.x+=q.x<0?-ne.x:ne.x,p.y+=q.y<0?-ne.y:ne.y,this.panTo(this.unproject(p),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),m=l.divideBy(2).round(),p=u.divideBy(2).round(),k=m.subtract(p);return!k.x&&!k.y?this:(i.animate&&i.pan?this.panBy(k):(i.pan&&this._rawPanBy(k),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=c(this._handleGeolocationResponse,this),u=c(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,u,i):navigator.geolocation.getCurrentPosition(l,u,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,u=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,u=i.coords.longitude,m=new X(l,u),p=m.toBounds(i.coords.accuracy*2),k=this._locateOptions;if(k.setView){var T=this.getBoundsZoom(p);this.setView(m,k.maxZoom?Math.min(T,k.maxZoom):T)}var D={latlng:m,bounds:p,timestamp:i.timestamp};for(var M in i.coords)typeof i.coords[M]=="number"&&(D[M]=i.coords[M]);this.fire("locationfound",D)}},addHandler:function(i,l){if(!l)return this;var u=this[i]=new l(this);return this._handlers.push(u),this.options[i]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Ie(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var u="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),m=_e("div",u,l||this._mapPane);return i&&(this._panes[i]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),u=this.unproject(i.getTopRight());return new ee(l,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,u){i=te(i),u=Z(u||[0,0]);var m=this.getZoom()||0,p=this.getMinZoom(),k=this.getMaxZoom(),T=i.getNorthWest(),D=i.getSouthEast(),M=this.getSize().subtract(u),q=H(this.project(D,m),this.project(T,m)).getSize(),ne=ue.any3d?this.options.zoomSnap:1,fe=M.x/q.x,ge=M.y/q.y,ft=l?Math.max(fe,ge):Math.min(fe,ge);return m=this.getScaleZoom(ft,m),ne&&(m=Math.round(m/(ne/100))*(ne/100),m=l?Math.ceil(m/ne)*ne:Math.floor(m/ne)*ne),Math.max(p,Math.min(k,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var u=this._getTopLeftPoint(i,l);return new V(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var u=this.options.crs;return l=l===void 0?this._zoom:l,u.scale(i)/u.scale(l)},getScaleZoom:function(i,l){var u=this.options.crs;l=l===void 0?this._zoom:l;var m=u.zoom(i*u.scale(l));return isNaN(m)?1/0:m},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ie(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(Z(i),l)},layerPointToLatLng:function(i){var l=Z(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(ie(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ie(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(te(i))},distance:function(i,l){return this.options.crs.distance(ie(i),ie(l))},containerPointToLayerPoint:function(i){return Z(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return Z(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(Z(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(i)))},mouseEventToContainerPoint:function(i){return bf(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=gf(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,pe(i,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Zs(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Fe(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pe(i.markerPane,"leaflet-zoom-hide"),pe(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,u){Fe(this._mapPane,new U(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var p=this._zoom!==l;this._moveStart(p,u)._move(i,l)._moveEnd(p),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,u,m){l===void 0&&(l=this._zoom);var p=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),m?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Fe(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[h(this._container)]=this;var l=i?ke:me;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var u=[],m,p=l==="mouseout"||l==="mouseover",k=i.target||i.srcElement,T=!1;k;){if(m=this._targets[h(k)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){T=!0;break}if(m&&m.listens(l,!0)&&(p&&!ec(k,i)||(u.push(m),p))||k===this._container)break;k=k.parentNode}return!u.length&&!T&&!p&&this.listens(l,!0)&&(u=[this]),u},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var u=i.type;u==="mousedown"&&Gl(l),this._fireDOMEvent(i,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,u){if(i.type==="click"){var m=a({},i);m.type="preclick",this._fireDOMEvent(m,m.type,u)}var p=this._findEventTargets(i,l);if(u){for(var k=[],T=0;T<u.length;T++)u[T].listens(l,!0)&&k.push(u[T]);p=k.concat(p)}if(p.length){l==="contextmenu"&&et(i);var D=p[0],M={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var q=D.getLatLng&&(!D._radius||D._radius<=10);M.containerPoint=q?this.latLngToContainerPoint(D.getLatLng()):this.mouseEventToContainerPoint(i),M.layerPoint=this.containerPointToLayerPoint(M.containerPoint),M.latlng=q?D.getLatLng():this.layerPointToLatLng(M.layerPoint)}for(T=0;T<p.length;T++)if(p[T].fire(l,M,!0),M.originalEvent._stopped||p[T].options.bubblingMouseEvents===!1&&P(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return hn(this._mapPane)||new U(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var u=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var u=this.getSize()._divideBy(2);return this.project(i,l)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,u){var m=this._getNewPixelOrigin(u,l);return this.project(i,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(i,l,u){var m=this._getNewPixelOrigin(u,l);return H([this.project(i.getSouthWest(),l)._subtract(m),this.project(i.getNorthWest(),l)._subtract(m),this.project(i.getSouthEast(),l)._subtract(m),this.project(i.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,u){if(!u)return i;var m=this.project(i,l),p=this.getSize().divideBy(2),k=new V(m.subtract(p),m.add(p)),T=this._getBoundsOffset(k,u,l);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?i:this.unproject(m.add(T),l)},_limitOffset:function(i,l){if(!l)return i;var u=this.getPixelBounds(),m=new V(u.min.add(i),u.max.add(i));return i.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(i,l,u){var m=H(this.project(l.getNorthEast(),u),this.project(l.getSouthWest(),u)),p=m.min.subtract(i.min),k=m.max.subtract(i.max),T=this._rebound(p.x,-k.x),D=this._rebound(p.y,-k.y);return new U(T,D)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),u=this.getMaxZoom(),m=ue.any3d?this.options.zoomSnap:1;return m&&(i=Math.round(i/m)*m),Math.max(l,Math.min(u,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var u=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,l),!0)},_createAnimProxy:function(){var i=this._proxy=_e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var u=$l,m=this._proxy.style[u];dn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();dn(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),p=this._getCenterOffset(i)._divideBy(1-1/m);return u.animate!==!0&&!this.getSize().contains(p)?!1:(F(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,u,m){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ub(i,l){return new ve(i,l)}var Ht=Q.extend({options:{position:"topright"},initialize:function(i){b(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),u=this.getPosition(),m=i._controlCorners[u];return pe(l,"leaflet-control"),u.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),ei=function(i){return new Ht(i)};ve.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",u=this._controlContainer=_e("div",l+"control-container",this._container);function m(p,k){var T=l+p+" "+l+k;i[p+k]=_e("div",T,u)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Ie(this._controlCorners[i]);Ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jf=Ht.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,u,m){return u<m?-1:m<u?1:0}},initialize:function(i,l,u){b(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in i)this._addLayer(i[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Ht.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=_e("div",i),u=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Qs(l),Ql(l);var m=this._section=_e("section",i+"-list");u&&(this._map.on("click",this.collapse,this),me(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=_e("a",i+"-toggle",l);p.href="#",p.title="Layers",p.setAttribute("role","button"),me(p,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){et(k),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=_e("div",i+"-base",m),this._separator=_e("div",i+"-separator",m),this._overlaysList=_e("div",i+"-overlays",m),l.appendChild(m)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,u){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:u}),this.options.sortLayers&&this._layers.sort(c(function(m,p){return this.options.sortFunction(m.layer,p.layer,m.name,p.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ga(this._baseLayersList),ga(this._overlaysList),this._layerControlInputs=[];var i,l,u,m,p=0;for(u=0;u<this._layers.length;u++)m=this._layers[u],this._addItem(m),l=l||m.overlay,i=i||!m.overlay,p+=m.overlay?0:1;return this.options.hideSingleBase&&(i=i&&p>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(h(i.target)),u=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;u&&this._map.fire(u,l)},_createRadioElement:function(i,l){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=u,m.firstChild},_addItem:function(i){var l=document.createElement("label"),u=this._map.hasLayer(i.layer),m;i.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=u):m=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(m),m.layerId=h(i.layer),me(m,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+i.name;var k=document.createElement("span");l.appendChild(k),k.appendChild(m),k.appendChild(p);var T=i.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,u,m=[],p=[];this._handlingClick=!0;for(var k=i.length-1;k>=0;k--)l=i[k],u=this._getLayer(l.layerId).layer,l.checked?m.push(u):l.checked||p.push(u);for(k=0;k<p.length;k++)this._map.hasLayer(p[k])&&this._map.removeLayer(p[k]);for(k=0;k<m.length;k++)this._map.hasLayer(m[k])||this._map.addLayer(m[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,u,m=this._map.getZoom(),p=i.length-1;p>=0;p--)l=i[p],u=this._getLayer(l.layerId).layer,l.disabled=u.options.minZoom!==void 0&&m<u.options.minZoom||u.options.maxZoom!==void 0&&m>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,me(i,"click",et),this.expand();var l=this;setTimeout(function(){ke(i,"click",et),l._preventClick=!1})}}),$b=function(i,l,u){return new jf(i,l,u)},tc=Ht.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",u=_e("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",u,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,u,m,p){var k=_e("a",u,m);return k.innerHTML=i,k.href="#",k.title=l,k.setAttribute("role","button"),k.setAttribute("aria-label",l),Qs(k),me(k,"click",mn),me(k,"click",p,this),me(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";ze(this._zoomInButton,l),ze(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(pe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(pe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});ve.mergeOptions({zoomControl:!0}),ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new tc,this.addControl(this.zoomControl))});var Fb=function(i){return new tc(i)},Nf=Ht.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",u=_e("div",l),m=this.options;return this._addScales(m,l+"-line",u),i.on(m.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),u},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,u){i.metric&&(this._mScale=_e("div",l,u)),i.imperial&&(this._iScale=_e("div",l,u))},_update:function(){var i=this._map,l=i.getSize().y/2,u=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(u)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),u=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,u,l/i)},_updateImperial:function(i){var l=i*3.2808399,u,m,p;l>5280?(u=l/5280,m=this._getRoundNum(u),this._updateScale(this._iScale,m+" mi",m/u)):(p=this._getRoundNum(l),this._updateScale(this._iScale,p+" ft",p/l))},_updateScale:function(i,l,u){i.style.width=Math.round(this.options.maxWidth*u)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),u=i/l;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,l*u}}),Hb=function(i){return new Nf(i)},Wb='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',rc=Ht.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Wb+" ":"")+"Leaflet</a>"},initialize:function(i){b(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=_e("div","leaflet-control-attribution"),Qs(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var u=[];this.options.prefix&&u.push(this.options.prefix),i.length&&u.push(i.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});ve.mergeOptions({attributionControl:!0}),ve.addInitHook(function(){this.options.attributionControl&&new rc().addTo(this)});var Vb=function(i){return new rc(i)};Ht.Layers=jf,Ht.Zoom=tc,Ht.Scale=Nf,Ht.Attribution=rc,ei.layers=$b,ei.zoom=Fb,ei.scale=Hb,ei.attribution=Vb;var ir=Q.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ir.addTo=function(i,l){return i.addHandler(l,this),this};var qb={Events:z},kf=ue.touch?"touchstart mousedown":"mousedown",Or=le.extend({options:{clickTolerance:3},initialize:function(i,l,u,m){b(this,m),this._element=i,this._dragStartTarget=l||i,this._preventOutline=u},enable:function(){this._enabled||(me(this._dragStartTarget,kf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Or._dragging===this&&this.finishDrag(!0),ke(this._dragStartTarget,kf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Fl(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Or._dragging===this&&this.finishDrag();return}if(!(Or._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Or._dragging=this,this._preventOutline&&Gl(this._element),Vl(),Ys(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,u=xf(this._element);this._startPoint=new U(l.clientX,l.clientY),this._startPos=hn(this._element),this._parentScale=Zl(u);var m=i.type==="mousedown";me(document,m?"mousemove":"touchmove",this._onMove,this),me(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,u=new U(l.clientX,l.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,et(i),this._moved||(this.fire("dragstart"),this._moved=!0,pe(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Fe(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ze(document.body,"leaflet-dragging"),this._lastTarget&&(ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ke(document,"mousemove touchmove",this._onMove,this),ke(document,"mouseup touchend touchcancel",this._onUp,this),ql(),Js();var l=this._moved&&this._moving;this._moving=!1,Or._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Sf(i,l,u){var m,p=[1,4,2,8],k,T,D,M,q,ne,fe,ge;for(k=0,ne=i.length;k<ne;k++)i[k]._code=pn(i[k],l);for(D=0;D<4;D++){for(fe=p[D],m=[],k=0,ne=i.length,T=ne-1;k<ne;T=k++)M=i[k],q=i[T],M._code&fe?q._code&fe||(ge=_a(q,M,fe,l,u),ge._code=pn(ge,l),m.push(ge)):(q._code&fe&&(ge=_a(q,M,fe,l,u),ge._code=pn(ge,l),m.push(ge)),m.push(M));i=m}return i}function Ef(i,l){var u,m,p,k,T,D,M,q,ne;if(!i||i.length===0)throw new Error("latlngs not passed");Rt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var fe=ie([0,0]),ge=te(i),ft=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());ft<1700&&(fe=nc(i));var Ye=i.length,Dt=[];for(u=0;u<Ye;u++){var yt=ie(i[u]);Dt.push(l.project(ie([yt.lat-fe.lat,yt.lng-fe.lng])))}for(D=M=q=0,u=0,m=Ye-1;u<Ye;m=u++)p=Dt[u],k=Dt[m],T=p.y*k.x-k.y*p.x,M+=(p.x+k.x)*T,q+=(p.y+k.y)*T,D+=T*3;D===0?ne=Dt[0]:ne=[M/D,q/D];var rs=l.unproject(Z(ne));return ie([rs.lat+fe.lat,rs.lng+fe.lng])}function nc(i){for(var l=0,u=0,m=0,p=0;p<i.length;p++){var k=ie(i[p]);l+=k.lat,u+=k.lng,m++}return ie([l/m,u/m])}var Kb={__proto__:null,clipPolygon:Sf,polygonCenter:Ef,centroid:nc};function Pf(i,l){if(!l||!i.length)return i.slice();var u=l*l;return i=Yb(i,u),i=Zb(i,u),i}function Tf(i,l,u){return Math.sqrt(ti(i,l,u,!0))}function Gb(i,l,u){return ti(i,l,u)}function Zb(i,l){var u=i.length,m=typeof Uint8Array<"u"?Uint8Array:Array,p=new m(u);p[0]=p[u-1]=1,sc(i,p,l,0,u-1);var k,T=[];for(k=0;k<u;k++)p[k]&&T.push(i[k]);return T}function sc(i,l,u,m,p){var k=0,T,D,M;for(D=m+1;D<=p-1;D++)M=ti(i[D],i[m],i[p],!0),M>k&&(T=D,k=M);k>u&&(l[T]=1,sc(i,l,u,m,T),sc(i,l,u,T,p))}function Yb(i,l){for(var u=[i[0]],m=1,p=0,k=i.length;m<k;m++)Jb(i[m],i[p])>l&&(u.push(i[m]),p=m);return p<k-1&&u.push(i[k-1]),u}var Cf;function Af(i,l,u,m,p){var k=m?Cf:pn(i,u),T=pn(l,u),D,M,q;for(Cf=T;;){if(!(k|T))return[i,l];if(k&T)return!1;D=k||T,M=_a(i,l,D,u,p),q=pn(M,u),D===k?(i=M,k=q):(l=M,T=q)}}function _a(i,l,u,m,p){var k=l.x-i.x,T=l.y-i.y,D=m.min,M=m.max,q,ne;return u&8?(q=i.x+k*(M.y-i.y)/T,ne=M.y):u&4?(q=i.x+k*(D.y-i.y)/T,ne=D.y):u&2?(q=M.x,ne=i.y+T*(M.x-i.x)/k):u&1&&(q=D.x,ne=i.y+T*(D.x-i.x)/k),new U(q,ne,p)}function pn(i,l){var u=0;return i.x<l.min.x?u|=1:i.x>l.max.x&&(u|=2),i.y<l.min.y?u|=4:i.y>l.max.y&&(u|=8),u}function Jb(i,l){var u=l.x-i.x,m=l.y-i.y;return u*u+m*m}function ti(i,l,u,m){var p=l.x,k=l.y,T=u.x-p,D=u.y-k,M=T*T+D*D,q;return M>0&&(q=((i.x-p)*T+(i.y-k)*D)/M,q>1?(p=u.x,k=u.y):q>0&&(p+=T*q,k+=D*q)),T=i.x-p,D=i.y-k,m?T*T+D*D:new U(p,k)}function Rt(i){return!S(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Of(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rt(i)}function Lf(i,l){var u,m,p,k,T,D,M,q;if(!i||i.length===0)throw new Error("latlngs not passed");Rt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ne=ie([0,0]),fe=te(i),ge=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());ge<1700&&(ne=nc(i));var ft=i.length,Ye=[];for(u=0;u<ft;u++){var Dt=ie(i[u]);Ye.push(l.project(ie([Dt.lat-ne.lat,Dt.lng-ne.lng])))}for(u=0,m=0;u<ft-1;u++)m+=Ye[u].distanceTo(Ye[u+1])/2;if(m===0)q=Ye[0];else for(u=0,k=0;u<ft-1;u++)if(T=Ye[u],D=Ye[u+1],p=T.distanceTo(D),k+=p,k>m){M=(k-m)/p,q=[D.x-M*(D.x-T.x),D.y-M*(D.y-T.y)];break}var yt=l.unproject(Z(q));return ie([yt.lat+ne.lat,yt.lng+ne.lng])}var Xb={__proto__:null,simplify:Pf,pointToSegmentDistance:Tf,closestPointOnSegment:Gb,clipSegment:Af,_getEdgeIntersection:_a,_getBitCode:pn,_sqClosestPointOnSegment:ti,isFlat:Rt,_flat:Of,polylineCenter:Lf},ic={project:function(i){return new U(i.lng,i.lat)},unproject:function(i){return new X(i.y,i.x)},bounds:new V([-180,-90],[180,90])},ac={R:6378137,R_MINOR:6356752314245179e-9,bounds:new V([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,u=this.R,m=i.lat*l,p=this.R_MINOR/u,k=Math.sqrt(1-p*p),T=k*Math.sin(m),D=Math.tan(Math.PI/4-m/2)/Math.pow((1-T)/(1+T),k/2);return m=-u*Math.log(Math.max(D,1e-10)),new U(i.lng*l*u,m)},unproject:function(i){for(var l=180/Math.PI,u=this.R,m=this.R_MINOR/u,p=Math.sqrt(1-m*m),k=Math.exp(-i.y/u),T=Math.PI/2-2*Math.atan(k),D=0,M=.1,q;D<15&&Math.abs(M)>1e-7;D++)q=p*Math.sin(T),q=Math.pow((1-q)/(1+q),p/2),M=Math.PI/2-2*Math.atan(k*q)-T,T+=M;return new X(T*l,i.x*l/u)}},Qb={__proto__:null,LonLat:ic,Mercator:ac,SphericalMercator:qs},e_=a({},$e,{code:"EPSG:3395",projection:ac,transformation:function(){var i=.5/(Math.PI*ac.R);return se(i,.5,-i,.5)}()}),If=a({},$e,{code:"EPSG:4326",projection:ic,transformation:se(1/180,1,-1/180,.5)}),t_=a({},de,{projection:ic,transformation:se(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var u=l.lng-i.lng,m=l.lat-i.lat;return Math.sqrt(u*u+m*m)},infinite:!0});de.Earth=$e,de.EPSG3395=e_,de.EPSG3857=Pe,de.EPSG900913=un,de.EPSG4326=If,de.Simple=t_;var Wt=le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[h(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[h(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var u=this.getEvents();l.on(u,this),this.once("remove",function(){l.off(u,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});ve.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=h(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return h(i)in this._layers},eachLayer:function(i,l){for(var u in this._layers)i.call(l,this._layers[u]);return this},_addLayers:function(i){i=i?S(i)?i:[i]:[];for(var l=0,u=i.length;l<u;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[h(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=h(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,u=this._getZoomSpan();for(var m in this._zoomBoundLayers){var p=this._zoomBoundLayers[m].options;i=p.minZoom===void 0?i:Math.min(i,p.minZoom),l=p.maxZoom===void 0?l:Math.max(l,p.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Jn=Wt.extend({initialize:function(i,l){b(this,l),this._layers={};var u,m;if(i)for(u=0,m=i.length;u<m;u++)this.addLayer(i[u])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),u,m;for(u in this._layers)m=this._layers[u],m[i]&&m[i].apply(m,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var u in this._layers)i.call(l,this._layers[u]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return h(i)}}),r_=function(i,l){return new Jn(i,l)},fr=Jn.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Jn.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Jn.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new ee;for(var l in this._layers){var u=this._layers[l];i.extend(u.getBounds?u.getBounds():u.getLatLng())}return i}}),n_=function(i,l){return new fr(i,l)},Xn=Q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){b(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var u=this._getIconUrl(i);if(!u){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(u,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(i,l){var u=this.options,m=u[l+"Size"];typeof m=="number"&&(m=[m,m]);var p=Z(m),k=Z(l==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(u.className||""),k&&(i.style.marginLeft=-k.x+"px",i.style.marginTop=-k.y+"px"),p&&(i.style.width=p.x+"px",i.style.height=p.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return ue.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function s_(i){return new Xn(i)}var ri=Xn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof ri.imagePath!="string"&&(ri.imagePath=this._detectIconPath()),(this.options.imagePath||ri.imagePath)+Xn.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(u,m,p){var k=m.exec(u);return k&&k[p]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=_e("div","leaflet-default-icon-path",document.body),l=Zs(i,"background-image")||Zs(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Rf=ir.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Or(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pe(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,u=l._map,m=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,k=hn(l._icon),T=u.getPixelBounds(),D=u.getPixelOrigin(),M=H(T.min._subtract(D).add(p),T.max._subtract(D).subtract(p));if(!M.contains(k)){var q=Z((Math.max(M.max.x,k.x)-M.max.x)/(T.max.x-M.max.x)-(Math.min(M.min.x,k.x)-M.min.x)/(T.min.x-M.min.x),(Math.max(M.max.y,k.y)-M.max.y)/(T.max.y-M.max.y)-(Math.min(M.min.y,k.y)-M.min.y)/(T.min.y-M.min.y)).multiplyBy(m);u.panBy(q,{animate:!1}),this._draggable._newPos._add(q),this._draggable._startPos._add(q),Fe(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=F(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,u=l._shadow,m=hn(l._icon),p=l._map.layerPointToLatLng(m);u&&Fe(u,m),l._latlng=p,i.latlng=p,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),wa=Wt.extend({options:{icon:new ri,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){b(this,l),this._latlng=ie(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=ie(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=i.icon.createIcon(this._icon),m=!1;u!==this._icon&&(this._icon&&this._removeIcon(),m=!0,i.title&&(u.title=i.title),u.tagName==="IMG"&&(u.alt=i.alt||"")),pe(u,l),i.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(u,"focus",this._panOnFocus,this);var p=i.icon.createShadow(this._shadow),k=!1;p!==this._shadow&&(this._removeShadow(),k=!0),p&&(pe(p,l),p.alt=""),this._shadow=p,i.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&k&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ke(this._icon,"focus",this._panOnFocus,this),Ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ie(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Fe(this._icon,i),this._shadow&&Fe(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Rf)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Rf(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&It(this._icon,i),this._shadow&&It(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,u=l.iconSize?Z(l.iconSize):Z(0,0),m=l.iconAnchor?Z(l.iconAnchor):Z(0,0);i.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:u.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function i_(i,l){return new wa(i,l)}var Lr=Wt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return b(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ja=Lr.extend({options:{fill:!0,radius:10},initialize:function(i,l){b(this,l),this._latlng=ie(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=ie(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return Lr.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,u=this._clickTolerance(),m=[i+u,l+u];this._pxBounds=new V(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function a_(i,l){return new ja(i,l)}var oc=ja.extend({initialize:function(i,l,u){if(typeof l=="number"&&(l=a({},u,{radius:l})),b(this,l),this._latlng=ie(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new ee(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Lr.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,u=this._map,m=u.options.crs;if(m.distance===$e.distance){var p=Math.PI/180,k=this._mRadius/$e.R/p,T=u.project([l+k,i]),D=u.project([l-k,i]),M=T.add(D).divideBy(2),q=u.unproject(M).lat,ne=Math.acos((Math.cos(k*p)-Math.sin(l*p)*Math.sin(q*p))/(Math.cos(l*p)*Math.cos(q*p)))/p;(isNaN(ne)||ne===0)&&(ne=k/Math.cos(Math.PI/180*l)),this._point=M.subtract(u.getPixelOrigin()),this._radius=isNaN(ne)?0:M.x-u.project([q,i-ne]).x,this._radiusY=M.y-T.y}else{var fe=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(fe).x}this._updateBounds()}});function o_(i,l,u){return new oc(i,l,u)}var mr=Lr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){b(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,u=null,m=ti,p,k,T=0,D=this._parts.length;T<D;T++)for(var M=this._parts[T],q=1,ne=M.length;q<ne;q++){p=M[q-1],k=M[q];var fe=m(i,p,k,!0);fe<l&&(l=fe,u=m(i,p,k))}return u&&(u.distance=Math.sqrt(l)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lf(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=ie(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new ee,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Rt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],u=Rt(i),m=0,p=i.length;m<p;m++)u?(l[m]=ie(i[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(i[m]);return l},_project:function(){var i=new V;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new U(i,i);this._rawPxBounds&&(this._pxBounds=new V([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,u){var m=i[0]instanceof X,p=i.length,k,T;if(m){for(T=[],k=0;k<p;k++)T[k]=this._map.latLngToLayerPoint(i[k]),u.extend(T[k]);l.push(T)}else for(k=0;k<p;k++)this._projectLatlngs(i[k],l,u)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,u,m,p,k,T,D,M;for(u=0,p=0,k=this._rings.length;u<k;u++)for(M=this._rings[u],m=0,T=M.length;m<T-1;m++)D=Af(M[m],M[m+1],i,m,!0),D&&(l[p]=l[p]||[],l[p].push(D[0]),(D[1]!==M[m+1]||m===T-2)&&(l[p].push(D[1]),p++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,u=0,m=i.length;u<m;u++)i[u]=Pf(i[u],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var u,m,p,k,T,D,M=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(u=0,k=this._parts.length;u<k;u++)for(D=this._parts[u],m=0,T=D.length,p=T-1;m<T;p=m++)if(!(!l&&m===0)&&Tf(i,D[p],D[m])<=M)return!0;return!1}});function l_(i,l){return new mr(i,l)}mr._flat=Of;var Qn=mr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ef(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=mr.prototype._convertLatLngs.call(this,i),u=l.length;return u>=2&&l[0]instanceof X&&l[0].equals(l[u-1])&&l.pop(),l},_setLatLngs:function(i){mr.prototype._setLatLngs.call(this,i),Rt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,u=new U(l,l);if(i=new V(i.min.subtract(u),i.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,p=this._rings.length,k;m<p;m++)k=Sf(this._rings[m],i,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,u,m,p,k,T,D,M,q;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(k=0,M=this._parts.length;k<M;k++)for(u=this._parts[k],T=0,q=u.length,D=q-1;T<q;D=T++)m=u[T],p=u[D],m.y>i.y!=p.y>i.y&&i.x<(p.x-m.x)*(i.y-m.y)/(p.y-m.y)+m.x&&(l=!l);return l||mr.prototype._containsPoint.call(this,i,!0)}});function c_(i,l){return new Qn(i,l)}var pr=fr.extend({initialize:function(i,l){b(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=S(i)?i:i.features,u,m,p;if(l){for(u=0,m=l.length;u<m;u++)p=l[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var k=this.options;if(k.filter&&!k.filter(i))return this;var T=Na(i,k);return T?(T.feature=Ea(i),T.defaultOptions=T.options,this.resetStyle(T),k.onEachFeature&&k.onEachFeature(i,T),this.addLayer(T)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function Na(i,l){var u=i.type==="Feature"?i.geometry:i,m=u?u.coordinates:null,p=[],k=l&&l.pointToLayer,T=l&&l.coordsToLatLng||lc,D,M,q,ne;if(!m&&!u)return null;switch(u.type){case"Point":return D=T(m),Df(k,i,D,l);case"MultiPoint":for(q=0,ne=m.length;q<ne;q++)D=T(m[q]),p.push(Df(k,i,D,l));return new fr(p);case"LineString":case"MultiLineString":return M=ka(m,u.type==="LineString"?0:1,T),new mr(M,l);case"Polygon":case"MultiPolygon":return M=ka(m,u.type==="Polygon"?1:2,T),new Qn(M,l);case"GeometryCollection":for(q=0,ne=u.geometries.length;q<ne;q++){var fe=Na({geometry:u.geometries[q],type:"Feature",properties:i.properties},l);fe&&p.push(fe)}return new fr(p);case"FeatureCollection":for(q=0,ne=u.features.length;q<ne;q++){var ge=Na(u.features[q],l);ge&&p.push(ge)}return new fr(p);default:throw new Error("Invalid GeoJSON object.")}}function Df(i,l,u,m){return i?i(l,u):new wa(u,m&&m.markersInheritOptions&&m)}function lc(i){return new X(i[1],i[0],i[2])}function ka(i,l,u){for(var m=[],p=0,k=i.length,T;p<k;p++)T=l?ka(i[p],l-1,u):(u||lc)(i[p]),m.push(T);return m}function cc(i,l){return i=ie(i),i.alt!==void 0?[y(i.lng,l),y(i.lat,l),y(i.alt,l)]:[y(i.lng,l),y(i.lat,l)]}function Sa(i,l,u,m){for(var p=[],k=0,T=i.length;k<T;k++)p.push(l?Sa(i[k],Rt(i[k])?0:l-1,u,m):cc(i[k],m));return!l&&u&&p.length>0&&p.push(p[0].slice()),p}function es(i,l){return i.feature?a({},i.feature,{geometry:l}):Ea(l)}function Ea(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var uc={toGeoJSON:function(i){return es(this,{type:"Point",coordinates:cc(this.getLatLng(),i)})}};wa.include(uc),oc.include(uc),ja.include(uc),mr.include({toGeoJSON:function(i){var l=!Rt(this._latlngs),u=Sa(this._latlngs,l?1:0,!1,i);return es(this,{type:(l?"Multi":"")+"LineString",coordinates:u})}}),Qn.include({toGeoJSON:function(i){var l=!Rt(this._latlngs),u=l&&!Rt(this._latlngs[0]),m=Sa(this._latlngs,u?2:l?1:0,!0,i);return l||(m=[m]),es(this,{type:(u?"Multi":"")+"Polygon",coordinates:m})}}),Jn.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(u){l.push(u.toGeoJSON(i).geometry.coordinates)}),es(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var u=l==="GeometryCollection",m=[];return this.eachLayer(function(p){if(p.toGeoJSON){var k=p.toGeoJSON(i);if(u)m.push(k.geometry);else{var T=Ea(k);T.type==="FeatureCollection"?m.push.apply(m,T.features):m.push(T)}}}),u?es(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function Bf(i,l){return new pr(i,l)}var u_=Bf,Pa=Wt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,u){this._url=i,this._bounds=te(l),b(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Zn(this._image),this},bringToBack:function(){return this._map&&Yn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=te(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:_e("img");if(pe(l,"leaflet-image-layer"),this._zoomAnimated&&pe(l,"leaflet-zoom-animated"),this.options.className&&pe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=c(this.fire,this,"load"),l.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;dn(this._image,u,l)},_reset:function(){var i=this._image,l=new V(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=l.getSize();Fe(i,l.min),i.style.width=u.x+"px",i.style.height=u.y+"px"},_updateOpacity:function(){It(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),d_=function(i,l,u){return new Pa(i,l,u)},Mf=Pa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:_e("video");if(pe(l,"leaflet-image-layer"),this._zoomAnimated&&pe(l,"leaflet-zoom-animated"),this.options.className&&pe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=c(this.fire,this,"load"),i){for(var u=l.getElementsByTagName("source"),m=[],p=0;p<u.length;p++)m.push(u[p].src);this._url=u.length>0?m:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var T=_e("source");T.src=this._url[k],l.appendChild(T)}}});function h_(i,l,u){return new Mf(i,l,u)}var zf=Pa.extend({_initImage:function(){var i=this._image=this._url;pe(i,"leaflet-image-layer"),this._zoomAnimated&&pe(i,"leaflet-zoom-animated"),this.options.className&&pe(i,this.options.className),i.onselectstart=g,i.onmousemove=g}});function f_(i,l,u){return new zf(i,l,u)}var ar=Wt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof X||S(i))?(this._latlng=ie(i),b(this,l)):(b(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&It(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&It(this._container,1),this.bringToFront(),this.options.interactive&&(pe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(It(this._container,0),this._removeTimeout=setTimeout(c(Ie,void 0,this._container),200)):Ie(this._container),this.options.interactive&&(ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ie(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Zn(this._container),this},bringToBack:function(){return this._map&&Yn(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof fr){l=null;var u=this._source._layers;for(var m in u)if(u[m]._map){l=u[m];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=Z(this.options.offset),u=this._getAnchor();this._zoomAnimated?Fe(this._container,i.add(u)):l=l.add(i).add(u);var m=this._containerBottom=-l.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});ve.include({_initOverlay:function(i,l,u,m){var p=l;return p instanceof i||(p=new i(m).setContent(l)),u&&p.setLatLng(u),p}}),Wt.include({_initOverlay:function(i,l,u,m){var p=u;return p instanceof i?(b(p,m),p._source=this):(p=l&&!m?l:new i(m,this),p.setContent(u)),p}});var Ta=ar.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,ar.prototype.openOn.call(this,i)},onAdd:function(i){ar.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Lr||this._source.on("preclick",fn))},onRemove:function(i){ar.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Lr||this._source.off("preclick",fn))},getEvents:function(){var i=ar.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=_e("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=_e("div",i+"-content-wrapper",l);if(this._contentNode=_e("div",i+"-content",u),Qs(l),Ql(this._contentNode),me(l,"contextmenu",fn),this._tipContainer=_e("div",i+"-tip-container",l),this._tip=_e("div",i+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=_e("a",i+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',me(m,"click",function(p){et(p),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var u=i.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),l.width=u+1+"px",l.whiteSpace="",l.height="";var m=i.offsetHeight,p=this.options.maxHeight,k="leaflet-popup-scrolled";p&&m>p?(l.height=p+"px",pe(i,k)):ze(i,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),u=this._getAnchor();Fe(this._container,l.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(Zs(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+l,m=this._containerWidth,p=new U(this._containerLeft,-u-this._containerBottom);p._add(hn(this._container));var k=i.layerPointToContainerPoint(p),T=Z(this.options.autoPanPadding),D=Z(this.options.autoPanPaddingTopLeft||T),M=Z(this.options.autoPanPaddingBottomRight||T),q=i.getSize(),ne=0,fe=0;k.x+m+M.x>q.x&&(ne=k.x+m-q.x+M.x),k.x-ne-D.x<0&&(ne=k.x-D.x),k.y+u+M.y>q.y&&(fe=k.y+u-q.y+M.y),k.y-fe-D.y<0&&(fe=k.y-D.y),(ne||fe)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ne,fe]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),m_=function(i,l){return new Ta(i,l)};ve.mergeOptions({closePopupOnClick:!0}),ve.include({openPopup:function(i,l,u){return this._initOverlay(Ta,i,l,u).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Wt.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Ta,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof fr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){mn(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof Lr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Ca=ar.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){ar.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){ar.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=ar.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=_e("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,u,m=this._map,p=this._container,k=m.latLngToContainerPoint(m.getCenter()),T=m.layerPointToContainerPoint(i),D=this.options.direction,M=p.offsetWidth,q=p.offsetHeight,ne=Z(this.options.offset),fe=this._getAnchor();D==="top"?(l=M/2,u=q):D==="bottom"?(l=M/2,u=0):D==="center"?(l=M/2,u=q/2):D==="right"?(l=0,u=q/2):D==="left"?(l=M,u=q/2):T.x<k.x?(D="right",l=0,u=q/2):(D="left",l=M+(ne.x+fe.x)*2,u=q/2),i=i.subtract(Z(l,u,!0)).add(ne).add(fe),ze(p,"leaflet-tooltip-right"),ze(p,"leaflet-tooltip-left"),ze(p,"leaflet-tooltip-top"),ze(p,"leaflet-tooltip-bottom"),pe(p,"leaflet-tooltip-"+D),Fe(p,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&It(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),p_=function(i,l){return new Ca(i,l)};ve.include({openTooltip:function(i,l,u){return this._initOverlay(Ca,i,l,u).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Wt.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ca,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[l](u),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof fr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(me(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),me(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,u,m;this._tooltip.options.sticky&&i.originalEvent&&(u=this._map.mouseEventToContainerPoint(i.originalEvent),m=this._map.containerPointToLayerPoint(u),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var Uf=Xn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),u=this.options;if(u.html instanceof Element?(ga(l),l.appendChild(u.html)):l.innerHTML=u.html!==!1?u.html:"",u.bgPos){var m=Z(u.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function g_(i){return new Uf(i)}Xn.Default=ri;var ni=Wt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){b(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Ie(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Zn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Yn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof U?i:new U(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,u=-i(-1/0,1/0),m=0,p=l.length,k;m<p;m++)k=l[m].style.zIndex,l[m]!==this._container&&k&&(u=i(u,+k));isFinite(u)&&(this.options.zIndex=u+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){It(this._container,this.options.opacity);var i=+new Date,l=!1,u=!1;for(var m in this._tiles){var p=this._tiles[m];if(!(!p.current||!p.loaded)){var k=Math.min(1,(i-p.loaded)/200);It(p.el,k),k<1?l=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),l&&(K(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=_e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===i?(this._levels[u].el.style.zIndex=l-Math.abs(i-u),this._onUpdateLevel(u)):(Ie(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var m=this._levels[i],p=this._map;return m||(m=this._levels[i]={},m.el=_e("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=p.project(p.unproject(p.getPixelOrigin()),i).round(),m.zoom=i,this._setZoomTransform(m,p.getCenter(),p.getZoom()),g(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var i,l,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Ie(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,u,m){var p=Math.floor(i/2),k=Math.floor(l/2),T=u-1,D=new U(+p,+k);D.z=+T;var M=this._tileCoordsToKey(D),q=this._tiles[M];return q&&q.active?(q.retain=!0,!0):(q&&q.loaded&&(q.retain=!0),T>m?this._retainParent(p,k,T,m):!1)},_retainChildren:function(i,l,u,m){for(var p=2*i;p<2*i+2;p++)for(var k=2*l;k<2*l+2;k++){var T=new U(p,k);T.z=u+1;var D=this._tileCoordsToKey(T),M=this._tiles[D];if(M&&M.active){M.retain=!0;continue}else M&&M.loaded&&(M.retain=!0);u+1<m&&this._retainChildren(p,k,u+1,m)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,u,m){var p=Math.round(l);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var k=this.options.updateWhenZooming&&p!==this._tileZoom;(!m||k)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(i),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var u in this._levels)this._setZoomTransform(this._levels[u],i,l)},_setZoomTransform:function(i,l,u){var m=this._map.getZoomScale(u,i.zoom),p=i.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,u)).round();ue.any3d?dn(i.el,p,m):Fe(i.el,p)},_resetGrid:function(){var i=this._map,l=i.options.crs,u=this._tileSize=this.getTileSize(),m=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],m).x/u.x),Math.ceil(i.project([0,l.wrapLng[1]],m).x/u.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],m).y/u.x),Math.ceil(i.project([l.wrapLat[1],0],m).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,u=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(u,this._tileZoom),p=l.project(i,this._tileZoom).floor(),k=l.getSize().divideBy(m*2);return new V(p.subtract(k),p.add(k))},_update:function(i){var l=this._map;if(l){var u=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(i),p=this._pxBoundsToTileRange(m),k=p.getCenter(),T=[],D=this.options.keepBuffer,M=new V(p.getBottomLeft().subtract([D,-D]),p.getTopRight().add([D,-D]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var q in this._tiles){var ne=this._tiles[q].coords;(ne.z!==this._tileZoom||!M.contains(new U(ne.x,ne.y)))&&(this._tiles[q].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(i,u);return}for(var fe=p.min.y;fe<=p.max.y;fe++)for(var ge=p.min.x;ge<=p.max.x;ge++){var ft=new U(ge,fe);if(ft.z=this._tileZoom,!!this._isValidTile(ft)){var Ye=this._tiles[this._tileCoordsToKey(ft)];Ye?Ye.current=!0:T.push(ft)}}if(T.sort(function(yt,rs){return yt.distanceTo(k)-rs.distanceTo(k)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Dt=document.createDocumentFragment();for(ge=0;ge<T.length;ge++)this._addTile(T[ge],Dt);this._level.el.appendChild(Dt)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var u=this._globalTileRange;if(!l.wrapLng&&(i.x<u.min.x||i.x>u.max.x)||!l.wrapLat&&(i.y<u.min.y||i.y>u.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(i);return te(this.options.bounds).overlaps(m)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,u=this.getTileSize(),m=i.scaleBy(u),p=m.add(u),k=l.unproject(m,i.z),T=l.unproject(p,i.z);return[k,T]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),u=new ee(l[0],l[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),u=new U(+l[0],+l[1]);return u.z=+l[2],u},_removeTile:function(i){var l=this._tiles[i];l&&(Ie(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){pe(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=g,i.onmousemove=g,ue.ielt9&&this.options.opacity<1&&It(i,this.options.opacity)},_addTile:function(i,l){var u=this._getTilePos(i),m=this._tileCoordsToKey(i),p=this.createTile(this._wrapCoords(i),c(this._tileReady,this,i));this._initTile(p),this.createTile.length<2&&F(c(this._tileReady,this,i,null,p)),Fe(p,u),this._tiles[m]={el:p,coords:i,current:!0},l.appendChild(p),this.fire("tileloadstart",{tile:p,coords:i})},_tileReady:function(i,l,u){l&&this.fire("tileerror",{error:l,tile:u,coords:i});var m=this._tileCoordsToKey(i);u=this._tiles[m],u&&(u.loaded=+new Date,this._map._fadeAnimated?(It(u.el,0),K(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),l||(pe(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new U(this._wrapX?x(i.x,this._wrapX):i.x,this._wrapY?x(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new V(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function x_(i){return new ni(i)}var ts=ni.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=b(this,l),l.detectRetina&&ue.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var u=document.createElement("img");return me(u,"load",c(this._tileOnLoad,this,l,u)),me(u,"error",c(this._tileOnError,this,l,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(i),u},getTileUrl:function(i){var l={r:ue.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=u),l["-y"]=u}return _(this._url,a(l,this.options))},_tileOnLoad:function(i,l){ue.ielt9?setTimeout(c(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,u){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),i(u,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,u=this.options.zoomReverse,m=this.options.zoomOffset;return u&&(i=l-i),i+m},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=g,l.onerror=g,!l.complete)){l.src=O;var u=this._tiles[i].coords;Ie(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:u})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",O),ni.prototype._removeTile.call(this,i)},_tileReady:function(i,l,u){if(!(!this._map||u&&u.getAttribute("src")===O))return ni.prototype._tileReady.call(this,i,l,u)}});function $f(i,l){return new ts(i,l)}var Ff=ts.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var u=a({},this.defaultWmsParams);for(var m in l)m in this.options||(u[m]=l[m]);l=b(this,l);var p=l.detectRetina&&ue.retina?2:1,k=this.getTileSize();u.width=k.x*p,u.height=k.y*p,this.wmsParams=u},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ts.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),u=this._crs,m=H(u.project(l[0]),u.project(l[1])),p=m.min,k=m.max,T=(this._wmsVersion>=1.3&&this._crs===If?[p.y,p.x,k.y,k.x]:[p.x,p.y,k.x,k.y]).join(","),D=ts.prototype.getTileUrl.call(this,i);return D+E(this.wmsParams,D,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function y_(i,l){return new Ff(i,l)}ts.WMS=Ff,$f.wms=y_;var gr=Wt.extend({options:{padding:.1},initialize:function(i){b(this,i),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var u=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,l),k=m.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(i,l));ue.any3d?dn(this._container,k,u):Fe(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),u=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new V(u,u.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Hf=gr.extend({options:{tolerance:0},getEvents:function(){var i=gr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");me(i,"mousemove",this._onMouseMove,this),me(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,Ie(this._container),ke(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gr.prototype._update.call(this);var i=this._bounds,l=this._container,u=i.getSize(),m=ue.retina?2:1;Fe(l,i.min),l.width=m*u.x,l.height=m*u.y,l.style.width=u.x+"px",l.style.height=u.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){gr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[h(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,u=l.next,m=l.prev;u?u.prev=m:this._drawLast=m,m?m.next=u:this._drawFirst=u,delete i._order,delete this._layers[h(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),u=[],m,p;for(p=0;p<l.length;p++){if(m=Number(l[p]),isNaN(m))return;u.push(m)}i.options._dashArray=u}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new V,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var u=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)i=m.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var u,m,p,k,T=i._parts,D=T.length,M=this._ctx;if(D){for(M.beginPath(),u=0;u<D;u++){for(m=0,p=T[u].length;m<p;m++)k=T[u][m],M[m?"lineTo":"moveTo"](k.x,k.y);l&&M.closePath()}this._fillStroke(M,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,u=this._ctx,m=Math.max(Math.round(i._radius),1),p=(Math.max(Math.round(i._radiusY),1)||m)/m;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(l.x,l.y/p,m,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,i)}},_fillStroke:function(i,l){var u=l.options;u.fill&&(i.globalAlpha=u.fillOpacity,i.fillStyle=u.fillColor||u.color,i.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=u.opacity,i.lineWidth=u.weight,i.strokeStyle=u.color,i.lineCap=u.lineCap,i.lineJoin=u.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),u,m,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(u))&&(m=u);this._fireEvent(m?[m]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(ze(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var u,m,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(l)&&(m=u);m!==this._hoveredLayer&&(this._handleMouseOut(i),m&&(pe(this._container,"leaflet-interactive"),this._fireEvent([m],i,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,u){this._map._fireDOMEvent(l,u||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var u=l.next,m=l.prev;if(u)u.prev=m;else return;m?m.next=u:u&&(this._drawFirst=u),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var u=l.next,m=l.prev;if(m)m.next=u;else return;u?u.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function Wf(i){return ue.canvas?new Hf(i):null}var si=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),v_={_initContainer:function(){this._container=_e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=si("shape");pe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=si("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[h(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;Ie(l),i.removeInteractiveTarget(l),delete this._layers[h(i)]},_updateStyle:function(i){var l=i._stroke,u=i._fill,m=i.options,p=i._container;p.stroked=!!m.stroke,p.filled=!!m.fill,m.stroke?(l||(l=i._stroke=si("stroke")),p.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=S(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(p.removeChild(l),i._stroke=null),m.fill?(u||(u=i._fill=si("fill")),p.appendChild(u),u.color=m.fillColor||m.color,u.opacity=m.fillOpacity):u&&(p.removeChild(u),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),u=Math.round(i._radius),m=Math.round(i._radiusY||u);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+u+","+m+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){Zn(i._container)},_bringToBack:function(i){Yn(i._container)}},Aa=ue.vml?si:fa,ii=gr.extend({_initContainer:function(){this._container=Aa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Aa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ie(this._container),ke(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,u.setAttribute("width",l.x),u.setAttribute("height",l.y)),Fe(u,i.min),u.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=Aa("path");i.options.className&&pe(l,i.options.className),i.options.interactive&&pe(l,"leaflet-interactive"),this._updateStyle(i),this._layers[h(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Ie(i._path),i.removeInteractiveTarget(i._path),delete this._layers[h(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,u=i.options;l&&(u.stroke?(l.setAttribute("stroke",u.color),l.setAttribute("stroke-opacity",u.opacity),l.setAttribute("stroke-width",u.weight),l.setAttribute("stroke-linecap",u.lineCap),l.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?l.setAttribute("stroke-dasharray",u.dashArray):l.removeAttribute("stroke-dasharray"),u.dashOffset?l.setAttribute("stroke-dashoffset",u.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),u.fill?(l.setAttribute("fill",u.fillColor||u.color),l.setAttribute("fill-opacity",u.fillOpacity),l.setAttribute("fill-rule",u.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Gh(i._parts,l))},_updateCircle:function(i){var l=i._point,u=Math.max(Math.round(i._radius),1),m=Math.max(Math.round(i._radiusY),1)||u,p="a"+u+","+m+" 0 1,0 ",k=i._empty()?"M0 0":"M"+(l.x-u)+","+l.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(i,k)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){Zn(i._path)},_bringToBack:function(i){Yn(i._path)}});ue.vml&&ii.include(v_);function Vf(i){return ue.svg||ue.vml?new ii(i):null}ve.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&Wf(i)||Vf(i)}});var qf=Qn.extend({initialize:function(i,l){Qn.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=te(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function b_(i,l){return new qf(i,l)}ii.create=Aa,ii.pointsToPath=Gh,pr.geometryToLayer=Na,pr.coordsToLatLng=lc,pr.coordsToLatLngs=ka,pr.latLngToCoords=cc,pr.latLngsToCoords=Sa,pr.getFeature=es,pr.asFeature=Ea,ve.mergeOptions({boxZoom:!0});var Kf=ir.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ys(),Vl(),this._startPoint=this._map.mouseEventToContainerPoint(i),me(document,{contextmenu:mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=_e("div","leaflet-zoom-box",this._container),pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new V(this._point,this._startPoint),u=l.getSize();Fe(this._box,l.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Ie(this._box),ze(this._container,"leaflet-crosshair")),Js(),ql(),ke(document,{contextmenu:mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var l=new ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ve.addInitHook("addHandler","boxZoom",Kf),ve.mergeOptions({doubleClickZoom:!0});var Gf=ir.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,u=l.getZoom(),m=l.options.zoomDelta,p=i.originalEvent.shiftKey?u-m:u+m;l.options.doubleClickZoom==="center"?l.setZoom(p):l.setZoomAround(i.containerPoint,p)}});ve.addInitHook("addHandler","doubleClickZoom",Gf),ve.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zf=ir.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Or(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ze(this._map._container,"leaflet-grab"),ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=te(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),u=this._initialWorldOffset,m=this._draggable._newPos.x,p=(m-l+u)%i+l-u,k=(m+l+u)%i-l-u,T=Math.abs(p+u)<Math.abs(k+u)?p:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(i){var l=this._map,u=l.options,m=!u.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),m)l.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,T=u.easeLinearity,D=p.multiplyBy(T/k),M=D.distanceTo([0,0]),q=Math.min(u.inertiaMaxSpeed,M),ne=D.multiplyBy(q/M),fe=q/(u.inertiaDeceleration*T),ge=ne.multiplyBy(-fe/2).round();!ge.x&&!ge.y?l.fire("moveend"):(ge=l._limitOffset(ge,l.options.maxBounds),F(function(){l.panBy(ge,{duration:fe,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});ve.addInitHook("addHandler","dragging",Zf),ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Yf=ir.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),me(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ke(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,u=i.scrollTop||l.scrollTop,m=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},u=this.keyCodes,m,p;for(m=0,p=u.left.length;m<p;m++)l[u.left[m]]=[-1*i,0];for(m=0,p=u.right.length;m<p;m++)l[u.right[m]]=[i,0];for(m=0,p=u.down.length;m<p;m++)l[u.down[m]]=[0,i];for(m=0,p=u.up.length;m<p;m++)l[u.up[m]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},u=this.keyCodes,m,p;for(m=0,p=u.zoomIn.length;m<p;m++)l[u.zoomIn[m]]=i;for(m=0,p=u.zoomOut.length;m<p;m++)l[u.zoomOut[m]]=-i},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,u=this._map,m;if(l in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(m=this._panKeys[l],i.shiftKey&&(m=Z(m).multiplyBy(3)),u.options.maxBounds&&(m=u._limitOffset(Z(m),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(m)));u.panTo(p)}else u.panBy(m)}else if(l in this._zoomKeys)u.setZoom(u.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;mn(i)}}});ve.addInitHook("addHandler","keyboard",Yf),ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Jf=ir.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=_f(i),u=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var m=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),m),mn(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),u=this._map.options.zoomSnap||0;i._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,k=u?Math.ceil(p/u)*u:p,T=i._limitZoom(l+(this._delta>0?k:-k))-l;this._delta=0,this._startTime=null,T&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+T):i.setZoomAround(this._lastMousePos,l+T))}});ve.addInitHook("addHandler","scrollWheelZoom",Jf);var __=600;ve.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var Xf=ir.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new U(l.clientX,l.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",et),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),__),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){ke(document,"touchend",et),ke(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),ke(document,"touchend touchcancel contextmenu",this._cancel,this),ke(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new U(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var u=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});u._simulated=!0,l.target.dispatchEvent(u)}});ve.addInitHook("addHandler","tapHold",Xf),ve.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var Qf=ir.extend({addHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ze(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var u=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(u.add(m)._divideBy(2))),this._startDist=u.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),et(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,u=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]),p=u.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(p,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&p<1||this._zoom>l.getMaxZoom()&&p>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var k=u._add(m)._divideBy(2)._subtract(this._centerPoint);if(p===1&&k.x===0&&k.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var T=c(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(T,this,!0),et(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ve.addInitHook("addHandler","touchZoom",Qf),ve.BoxZoom=Kf,ve.DoubleClickZoom=Gf,ve.Drag=Zf,ve.Keyboard=Yf,ve.ScrollWheelZoom=Jf,ve.TapHold=Xf,ve.TouchZoom=Qf,r.Bounds=V,r.Browser=ue,r.CRS=de,r.Canvas=Hf,r.Circle=oc,r.CircleMarker=ja,r.Class=Q,r.Control=Ht,r.DivIcon=Uf,r.DivOverlay=ar,r.DomEvent=zb,r.DomUtil=Bb,r.Draggable=Or,r.Evented=le,r.FeatureGroup=fr,r.GeoJSON=pr,r.GridLayer=ni,r.Handler=ir,r.Icon=Xn,r.ImageOverlay=Pa,r.LatLng=X,r.LatLngBounds=ee,r.Layer=Wt,r.LayerGroup=Jn,r.LineUtil=Xb,r.Map=ve,r.Marker=wa,r.Mixin=qb,r.Path=Lr,r.Point=U,r.PolyUtil=Kb,r.Polygon=Qn,r.Polyline=mr,r.Popup=Ta,r.PosAnimation=wf,r.Projection=Qb,r.Rectangle=qf,r.Renderer=gr,r.SVG=ii,r.SVGOverlay=zf,r.TileLayer=ts,r.Tooltip=Ca,r.Transformation=Kn,r.Util=$,r.VideoOverlay=Mf,r.bind=c,r.bounds=H,r.canvas=Wf,r.circle=o_,r.circleMarker=a_,r.control=ei,r.divIcon=g_,r.extend=a,r.featureGroup=n_,r.geoJSON=Bf,r.geoJson=u_,r.gridLayer=x_,r.icon=s_,r.imageOverlay=d_,r.latLng=ie,r.latLngBounds=te,r.layerGroup=r_,r.map=Ub,r.marker=i_,r.point=Z,r.polygon=c_,r.polyline=l_,r.popup=m_,r.rectangle=b_,r.setOptions=b,r.stamp=h,r.svg=Vf,r.svgOverlay=f_,r.tileLayer=$f,r.tooltip=p_,r.transformation=se,r.version=n,r.videoOverlay=h_;var w_=window.L;r.noConflict=function(){return window.L=w_,this},window.L=r})})(_d,_d.exports);var da=_d.exports;const Vh=jd(da);function qh(t,e,r){return Object.freeze({instance:t,context:e,container:r})}function Kh(t,e){return e==null?function(n,a){const o=N.useRef();return o.current||(o.current=t(n,a)),o}:function(n,a){const o=N.useRef();o.current||(o.current=t(n,a));const c=N.useRef(n),{instance:d}=o.current;return N.useEffect(function(){c.current!==n&&(e(d,n,c.current),c.current=n)},[d,n,a]),o}}function _T(t,e){N.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function sb(t){return function(r){const n=Hh(),a=t(Wh(r,n),n);return eb(n.map,r.attribution),nb(a.current,r.eventHandlers),_T(a.current,n),a}}function wT(t,e){const r=Kh(t,e),n=sb(r);return xT(n)}function jT(t,e){const r=Kh(t),n=bT(r,e);return yT(n)}function NT(t,e){const r=Kh(t,e),n=sb(r);return vT(n)}function kT(t,e,r){const{opacity:n,zIndex:a}=e;n!=null&&n!==r.opacity&&t.setOpacity(n),a!=null&&a!==r.zIndex&&t.setZIndex(a)}function ST(){return Hh().map}function wd(){return wd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wd.apply(this,arguments)}function ET({bounds:t,boundsOptions:e,center:r,children:n,className:a,id:o,placeholder:c,style:d,whenReady:h,zoom:f,...x},g){const[y]=N.useState({className:a,id:o,style:d}),[w,v]=N.useState(null);N.useImperativeHandle(g,()=>(w==null?void 0:w.map)??null,[w]);const b=N.useCallback(j=>{if(j!==null&&w===null){const _=new da.Map(j,x);r!=null&&f!=null?_.setView(r,f):t!=null&&_.fitBounds(t,e),h!=null&&_.whenReady(h),v(pT(_))}},[]);N.useEffect(()=>()=>{w==null||w.map.remove()},[w]);const E=w?Cs.createElement(rb,{value:w},n):c??null;return Cs.createElement("div",wd({},y,{ref:b}),E)}const PT=N.forwardRef(ET),TT=wT(function({position:e,...r},n){const a=new da.Marker(e,r);return qh(a,gT(n,{overlayContainer:a}))},function(e,r,n){r.position!==n.position&&e.setLatLng(r.position),r.icon!=null&&r.icon!==n.icon&&e.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==n.opacity&&e.setOpacity(r.opacity),e.dragging!=null&&r.draggable!==n.draggable&&(r.draggable===!0?e.dragging.enable():e.dragging.disable())}),CT=jT(function(e,r){const n=new da.Popup(e,r.overlayContainer);return qh(n,r)},function(e,r,{position:n},a){N.useEffect(function(){const{instance:c}=e;function d(f){f.popup===c&&(c.update(),a(!0))}function h(f){f.popup===c&&a(!1)}return r.map.on({popupopen:d,popupclose:h}),r.overlayContainer==null?(n!=null&&c.setLatLng(n),c.openOn(r.map)):r.overlayContainer.bindPopup(c),function(){var x;r.map.off({popupopen:d,popupclose:h}),(x=r.overlayContainer)==null||x.unbindPopup(),r.map.removeLayer(c)}},[e,r,a,n])}),AT=NT(function({url:e,...r},n){const a=new da.TileLayer(e,Wh(r,n));return qh(a,n)},function(e,r,n){kT(e,r,n);const{url:a}=r;a!=null&&a!==n.url&&e.setUrl(a)}),OT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",LT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let IT=Vh.icon({iconUrl:OT,shadowUrl:LT,iconSize:[25,41],iconAnchor:[12,41]});Vh.Marker.prototype.options.icon=IT;const RT=new Vh.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),DT=({agent:t})=>{const e=ST();return N.useEffect(()=>{t&&t.latitude&&t.longitude&&e.flyTo([t.latitude,t.longitude],15,{duration:1.5})},[t,e]),null},BT=()=>{const t=we(),[e,r]=N.useState([]),[n,a]=N.useState(null);return N.useEffect(()=>{G.getPublicAgents().then(r)},[]),s.jsxs("div",{className:"flex flex-col h-screen bg-[#111]",children:[s.jsxs("div",{className:"p-4 bg-[#1a1a1a] border-b border-white/5 flex items-center justify-between z-20 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>t("/"),className:"w-10 h-10 rounded-full bg-[#222] hover:bg-[#333] flex items-center justify-center text-gray-400 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"location_on"}),"Agent Locator"]}),s.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:"Verified Exchange Points"})]})]}),s.jsxs("div",{className:"bg-[#222] px-4 py-2 rounded-lg border border-white/5 hidden md:block",children:[s.jsx("span",{className:"text-gray-400 text-xs",children:"Nearby Agents:"}),s.jsx("span",{className:"ml-2 text-lime-400 font-bold",children:e.length})]})]}),s.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[s.jsxs("div",{className:"w-full md:w-96 bg-[#1a1a1a] border-r border-white/5 flex flex-col z-10 shadow-2xl absolute md:relative h-1/3 md:h-full bottom-0 md:bottom-auto",children:[s.jsx("div",{className:"p-4 border-b border-white/5 bg-[#1a1a1a] sticky top-0",children:s.jsx("input",{type:"text",placeholder:"Inter city or region...",className:"w-full bg-[#111] border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-lime-500/50 transition-all text-sm"})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 pb-20 md:pb-4",children:e.length===0?s.jsxs("div",{className:"text-center py-10 text-gray-600",children:[s.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-30",children:"map"}),s.jsx("p",{children:"No agents found yet."})]}):e.map(o=>s.jsxs("div",{onClick:()=>a(o),className:`p-4 rounded-xl border cursor-pointer transition-all group ${(n==null?void 0:n.id)===o.id?"bg-lime-500/10 border-lime-500/50":"bg-[#222] border-transparent hover:border-white/10"}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"font-bold text-white group-hover:text-lime-400 transition-colors",children:o.name}),s.jsx("span",{className:"bg-lime-500/20 text-lime-400 text-[10px] px-2 py-0.5 rounded uppercase font-bold tracking-wider",children:"Verified"})]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-start gap-1",children:[s.jsx("span",{className:"material-symbols-outlined text-[14px] mt-0.5 shrink-0",children:"store"}),o.address||"No address provided"]}),s.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[s.jsxs("p",{className:"text-[10px] text-gray-500 font-mono flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"schedule"}),o.hours||"09:00 - 18:00"]}),s.jsx("button",{className:"text-lime-400 hover:text-white transition-colors",children:s.jsx("span",{className:"material-symbols-outlined",children:"directions"})})]})]},o.id))})]}),s.jsxs("div",{className:"flex-1 relative bg-[#0c0c0c]",children:[s.jsxs(PT,{center:[41.0082,28.9784],zoom:12,style:{height:"100%",width:"100%"},zoomControl:!1,children:[s.jsx(AT,{attribution:' <a href="https://carto.com/">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),s.jsx(DT,{agent:n}),e.map(o=>o.latitude&&o.longitude&&s.jsx(TT,{position:[o.latitude,o.longitude],icon:RT,eventHandlers:{click:()=>a(o)},children:s.jsx(CT,{className:"agent-popup",children:s.jsxs("div",{className:"p-1 min-w-[200px]",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.logo&&s.jsx("img",{src:o.logo,className:"w-8 h-8 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-black text-sm leading-tight",children:o.name}),s.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Authorized Agent"})]})]}),s.jsx("p",{className:"text-gray-600 text-xs mb-3 leading-snug",children:o.address}),s.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${o.latitude},${o.longitude}`,target:"_blank",rel:"noreferrer",className:"block w-full bg-black text-white text-center py-2 rounded-lg font-bold text-xs hover:bg-gray-800 transition-colors shadow-lg",children:"Get Directions on Google Maps"})]})})},o.id))]}),s.jsx("div",{className:"absolute top-4 right-4 z-[400] flex flex-col gap-2",children:s.jsx("button",{className:"w-10 h-10 bg-[#1a1a1a] text-white rounded-lg shadow-xl flex items-center justify-center hover:bg-[#222]",onClick:()=>window.location.reload(),children:s.jsx("span",{className:"material-symbols-outlined",children:"my_location"})})})]})]})]})},MT=()=>{const t=we();return N.useEffect(()=>{(()=>{try{console.log("AutoLogin processing URL:",window.location.href);let r=new URLSearchParams(window.location.search),n=r.get("token"),a=r.get("email");if(!n){const o=window.location.hash.split("?");if(o.length>1){const c=new URLSearchParams(o[1]);n=c.get("token"),a=c.get("email")}}n&&a?(console.log("Found Credentials. Logging in..."),localStorage.setItem("nusd_auth_token",n),localStorage.setItem("nusd_current_user",a),setTimeout(()=>{window.location.href=window.location.origin+"/#/admin",window.location.reload()},500)):(console.warn("No credentials found in URL"),alert("AutoLogin Error: No token found in link."),t("/"))}catch(r){console.error("Auto-login failed:",r),t("/")}})()},[]),s.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col items-center justify-center font-display",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-lime-500 border-t-transparent rounded-full animate-spin mb-6"}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Securely Logging In..."}),s.jsx("p",{className:"text-gray-500",children:"Connecting to Admin Panel..."})]})},zT=()=>{var S;const{slug:t}=vh(),[e,r]=N.useState(null),[n,a]=N.useState(null),[o,c]=N.useState(!0),[d,h]=N.useState(null),[f,x]=N.useState("deposit"),[g,y]=N.useState(""),[w,v]=N.useState("");N.useEffect(()=>{t&&b()},[t]);const b=async()=>{c(!0);const P=await G.getPanelBySlug(t);if(P){if(r(P),P.department_id){const O=await G.getDepartment(P.department_id);O&&a(O)}}else h("Portal not found");c(!1)},E=((S=n==null?void 0:n.owner)==null?void 0:S.nusd_code)||"Adres Bulunamad",j=P=>{navigator.clipboard.writeText(P),alert("Kopyaland!")},_=async()=>{alert("ekim talebi gnderildi. Admin onay bekleniyor.")};return o?s.jsx("div",{className:"min-h-screen bg-[#0F172A] flex items-center justify-center text-white",children:"Loading Portal..."}):d||!e?s.jsx("div",{className:"min-h-screen bg-[#0F172A] flex items-center justify-center text-white",children:d||"Not Found"}):s.jsxs("div",{className:"min-h-screen bg-[#0F172A] flex flex-col items-center justify-center p-4 font-sans text-slate-300",children:[s.jsxs("div",{className:"mb-6 flex flex-col items-center animate-fade-in-down",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20 mb-3",children:s.jsx("span",{className:"text-white text-2xl font-bold",children:""})}),s.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:e.name}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:n==null?void 0:n.name})]}),s.jsxs("div",{className:"bg-[#1E293B] w-full max-w-md rounded-3xl p-2 shadow-2xl border border-slate-700/50",children:[s.jsxs("div",{className:"bg-[#0F172A]/50 p-1 rounded-2xl flex mb-6",children:[s.jsx("button",{onClick:()=>x("deposit"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${f==="deposit"?"bg-white text-slate-900 shadow-md":"text-slate-400 hover:text-white"}`,children:"Yatrm (Deposit)"}),s.jsx("button",{onClick:()=>x("withdraw"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${f==="withdraw"?"bg-white text-slate-900 shadow-md":"text-slate-400 hover:text-white"}`,children:"ekim (Withdraw)"})]}),s.jsx("div",{className:"px-6 pb-6 space-y-5",children:f==="deposit"?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 bg-green-500/20 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"material-symbols-outlined text-3xl",children:"account_balance_wallet"})}),s.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Yatrm Adresi"}),s.jsxs("p",{className:"text-sm text-slate-400 mb-4",children:["Bu NUSD adresine ",s.jsx("b",{className:"text-white",children:"kendi czdannzdan"})," transfer yapn"]}),s.jsxs("div",{className:"bg-lime-500/10 border-2 border-lime-500/50 p-4 rounded-xl mb-4",children:[s.jsx("p",{className:"text-xs text-lime-400 font-bold uppercase mb-2",children:"# NUSD Adresi (nemli!)"}),s.jsxs("div",{className:"flex items-center justify-between bg-[#0F172A] p-3 rounded-lg cursor-pointer group",onClick:()=>j(E),children:[s.jsx("span",{className:"text-lime-300 font-mono font-bold text-lg tracking-widest",children:E}),s.jsx("span",{className:"material-symbols-outlined text-lime-400 opacity-60 group-hover:opacity-100",children:"content_copy"})]}),s.jsx("p",{className:"text-[10px] text-slate-500 mt-2",children:"Czdannzdan transfer yaparken bu adresi kullann"})]}),s.jsxs("div",{className:"bg-[#0F172A] p-4 rounded-xl text-left space-y-2",children:[s.jsxs("p",{className:"text-xs text-slate-400",children:[s.jsx("span",{className:"text-indigo-400 font-bold",children:"1."}),' Wallet uygulamanzda "Gnder" butonuna basn']}),s.jsxs("p",{className:"text-xs text-slate-400",children:[s.jsx("span",{className:"text-indigo-400 font-bold",children:"2."})," Alc olarak yukardaki NUSD adresini girin"]}),s.jsxs("p",{className:"text-xs text-slate-400",children:[s.jsx("span",{className:"text-indigo-400 font-bold",children:"3."})," Transfer annda tamamlanr"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Tutar"}),s.jsx("input",{type:"number",className:"w-full bg-[#334155]/50 border border-slate-600 rounded-xl p-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:outline-none",placeholder:"100",value:g,onChange:P=>y(P.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Czdan Adresi (NUSD veya TRX)"}),s.jsx("input",{type:"text",className:"w-full bg-[#334155]/50 border border-slate-600 rounded-xl p-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:outline-none",placeholder:"NUSD-XXXXXX veya T...",value:w,onChange:P=>v(P.target.value)})]}),s.jsx("button",{onClick:_,className:"w-full bg-gradient-to-r from-rose-600 to-pink-600 text-white py-3.5 rounded-xl font-bold text-sm hover:from-rose-500 hover:to-pink-500 transition-all shadow-lg shadow-rose-500/20",children:"ekim Talebi Gnder"})]})})]}),s.jsx("p",{className:"text-xs text-slate-600 mt-8",children:"Powered by NUSD Wallet"})]})},UT=()=>{var Kn;const{user:t,logout:e}=at(),r=we(),[n,a]=N.useState(null),[o,c]=N.useState(null),[d,h]=N.useState([]),[f,x]=N.useState(!0),[g,y]=N.useState(null),[w,v]=N.useState(!1),[b,E]=N.useState(""),[j,_]=N.useState(""),[S,P]=N.useState(!1),[O,A]=N.useState(!1),[I,B]=N.useState([]),[R,W]=N.useState(null),[F,K]=N.useState(!1),[$,Q]=N.useState([]),[Y,z]=N.useState([]),[le,U]=N.useState(""),[re,Z]=N.useState("staff"),[V,H]=N.useState(!1),ee=(t==null?void 0:t.nusd_code)||"NUSD-XXXX";N.useEffect(()=>{te()},[t]);const te=async()=>{var se;x(!0);try{const Pe=await G.getProfile();if(!Pe||Pe.account_type!=="business"){y("letme hesab bulunamad");return}if(Pe.business_department_id){const un=await G.getDepartment(Pe.business_department_id);a(un),((se=un==null?void 0:un.panels)==null?void 0:se.length)>0&&c(un.panels[0]);const fa=await G.getDepartmentTransactions(Pe.business_department_id);h(fa||[])}}catch(Pe){console.error(Pe),y("Veriler yklenemedi")}x(!1)},X=async()=>{if(!b||!j||parseFloat(j)<=0){alert("Ltfen geerli bilgiler girin");return}P(!0);try{const se=await G.internalTransfer(b,parseFloat(j));se.success?(alert("Transfer baarl!"),v(!1),E(""),_(""),te()):alert(se.error||"Transfer baarsz")}catch{alert("Transfer hatas")}P(!1)},ie=async()=>{if(!o)return;const se=!o.is_active,Pe=await G.updatePanelStatus(o.id,se);Pe!=null&&Pe.success&&c({...o,is_active:se})},de=se=>{navigator.clipboard.writeText(se),alert("Kopyaland!")},$e=async()=>{const se=await G.getBusinessTeam();se.success&&Q(se.members||[]);const Pe=await G.getBusinessInvites();Pe.success&&z(Pe.invites||[])},ha=async()=>{if(!le){alert("Email gerekli");return}H(!0);const se=await G.inviteBusinessMember(le,re);se.success?(alert(`Davet gnderildi!

Davet linki: ${se.invite_link}`),U(""),$e()):alert(se.error||"Davet gnderilemedi"),H(!1)},qs=async se=>{(await G.cancelBusinessInvite(se)).success&&$e()};return f?s.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:s.jsx("div",{className:"text-white",children:"Ykleniyor..."})}):g?s.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-4",children:[s.jsx("div",{className:"text-red-400 mb-4",children:g}),s.jsx("button",{onClick:()=>r("/"),className:"text-lime-400",children:"Ana Sayfaya Dn"})]}):s.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white p-4 pb-24",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-10 h-10 bg-lime-500 rounded-full flex items-center justify-center text-black font-bold",children:((Kn=n==null?void 0:n.name)==null?void 0:Kn[0])||"F"}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-lg",children:n==null?void 0:n.name}),s.jsx("p",{className:"text-xs text-gray-500",children:"letme Paneli"})]})]})}),s.jsx("button",{onClick:()=>r("/"),className:"text-gray-400",children:s.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-lime-600/20 to-green-600/20 border border-lime-500/30 rounded-2xl p-4 mb-4",children:[s.jsx("p",{className:"text-xs text-lime-400 font-bold uppercase mb-1",children:"# NUSD Adresiniz"}),s.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>de(ee),children:[s.jsx("span",{className:"font-mono font-bold text-xl text-lime-300",children:ee}),s.jsx("span",{className:"material-symbols-outlined text-lime-400 text-lg",children:"content_copy"})]}),s.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Bu adrese gelen transferler bakiyenize eklenir"})]}),s.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 mb-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Bakiye"}),s.jsxs("p",{className:"text-4xl font-bold text-white",children:["$",((t==null?void 0:t.balance)||0).toLocaleString()]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[s.jsxs("button",{onClick:()=>v(!0),className:"bg-lime-500 text-black font-bold py-3 rounded-xl flex flex-col items-center justify-center gap-1",children:[s.jsx("span",{className:"material-symbols-outlined",children:"send"}),s.jsx("span",{className:"text-xs",children:"Gnder"})]}),s.jsxs("button",{onClick:()=>A(!0),className:"bg-[#1a1a1a] text-white font-bold py-3 rounded-xl flex flex-col items-center justify-center gap-1 border border-gray-700",children:[s.jsx("span",{className:"material-symbols-outlined",children:"account_balance"}),s.jsx("span",{className:"text-xs",children:"ekim"})]}),s.jsxs("button",{onClick:()=>{K(!0),$e()},className:"bg-[#1a1a1a] text-white font-bold py-3 rounded-xl flex flex-col items-center justify-center gap-1 border border-gray-700",children:[s.jsx("span",{className:"material-symbols-outlined",children:"groups"}),s.jsx("span",{className:"text-xs",children:"Ekip"})]})]}),O&&s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-end justify-center z-50",children:s.jsxs("div",{className:"bg-[#1a1a1a] w-full max-w-lg rounded-t-3xl p-6 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"font-bold text-lg",children:"ekim Talepleri"}),s.jsx("button",{onClick:()=>A(!1),children:s.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"close"})})]}),I.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"inbox"}),s.jsx("p",{children:"Bekleyen ekim talebi yok"})]}):s.jsx("div",{className:"space-y-3",children:I.map(se=>s.jsxs("div",{className:"bg-[#0a0a0a] rounded-xl p-4 border border-white/5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"font-bold text-white",children:["$",se.amount]}),s.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/20 px-2 py-1 rounded",children:se.status})]}),s.jsxs("p",{className:"text-sm text-gray-400 mb-1",children:["Adres: ",se.wallet_address]}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:new Date(se.created_at).toLocaleString()}),s.jsx("button",{onClick:async()=>{W(se.id),alert("ekim tamamland olarak iaretlendi"),W(null)},disabled:R===se.id,className:"w-full bg-lime-500 text-black py-2 rounded-lg font-bold text-sm disabled:opacity-50",children:R===se.id?"leniyor...":"Gnderildi Olarak aretle"})]},se.id))})]})}),s.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"storefront"}),"Portallarm"]}),s.jsxs("button",{onClick:async()=>{const se=prompt("Portal ad girin:");if(!se)return;if(!(n!=null&&n.id)){alert("Departman bulunamad");return}const Pe=await G.createPortalRequest(n.id,se);Pe.success?alert("Portal talebi gnderildi! Admin onayndan sonra aktif olacak."):alert("Hata: "+(Pe.error||"Talep gnderilemedi"))},className:"bg-lime-500/20 text-lime-400 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Portal Talep Et"]})]}),o?s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"bg-[#0a0a0a] rounded-xl p-4 border border-white/5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${o.is_active?"bg-green-400":"bg-red-400"}`}),s.jsx("span",{className:"font-medium text-white",children:(n==null?void 0:n.name)||"Portal"})]}),s.jsx("button",{onClick:ie,className:`px-3 py-1 rounded-full text-xs font-bold transition-colors ${o.is_active?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"}`,children:o.is_active?"AKTF":"KAPALI"})]}),s.jsxs("div",{className:"bg-[#1a1a1a] p-3 rounded-lg flex items-center justify-between cursor-pointer hover:bg-[#222] transition-colors",onClick:()=>de(`${window.location.origin}/#/pay/${o.public_slug}`),children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Portal Linki"}),s.jsxs("p",{className:"text-sm text-lime-400 font-mono",children:[window.location.origin,"/#/pay/",o.public_slug]})]}),s.jsx("span",{className:"material-symbols-outlined text-lime-500",children:"content_copy"})]}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsxs("button",{onClick:()=>window.open(`${window.location.origin}/#/pay/${o.public_slug}`,"_blank"),className:"flex-1 bg-[#1a1a1a] text-white py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-1 hover:bg-[#222] transition-colors",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"open_in_new"}),"nizle"]}),s.jsxs("button",{onClick:()=>de(`${window.location.origin}/#/pay/${o.public_slug}`),className:"flex-1 bg-[#1a1a1a] text-white py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-1 hover:bg-[#222] transition-colors",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"share"}),"Payla"]})]})]})}):s.jsxs("div",{className:"text-center py-6 text-gray-500",children:[s.jsx("span",{className:"material-symbols-outlined text-3xl mb-2",children:"storefront"}),s.jsx("p",{className:"text-sm",children:"Henz portal yok"}),s.jsx("button",{onClick:()=>alert("Portal oluturma yaknda"),className:"mt-3 text-lime-400 text-sm font-medium",children:"lk portaln olutur "})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold mb-3",children:"Son Yatrmlar"}),d.length===0?s.jsx("div",{className:"bg-[#1a1a1a] rounded-xl p-6 text-center text-gray-500",children:"Henz yatrm yok"}):s.jsx("div",{className:"space-y-2",children:d.slice(0,5).map(se=>s.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-green-400 text-sm",children:"arrow_downward"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:se.sender_email||"Transfer"}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(se.created_at).toLocaleDateString()})]})]}),s.jsxs("p",{className:"text-green-400 font-bold",children:["+$",se.amount]})]},se.id))})]}),w&&s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-end justify-center z-50",children:s.jsxs("div",{className:"bg-[#1a1a1a] w-full max-w-lg rounded-t-3xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"font-bold text-lg",children:"NUSD Gnder"}),s.jsx("button",{onClick:()=>v(!1),children:s.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"close"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-2",children:"Alc NUSD Adresi"}),s.jsx("input",{type:"text",value:b,onChange:se=>E(se.target.value),placeholder:"NUSD-XXXXXX",className:"w-full bg-[#0a0a0a] border border-gray-700 rounded-xl p-3 text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-2",children:"Tutar"}),s.jsx("input",{type:"number",value:j,onChange:se=>_(se.target.value),placeholder:"0.00",className:"w-full bg-[#0a0a0a] border border-gray-700 rounded-xl p-3 text-white"})]}),s.jsx("button",{onClick:X,disabled:S,className:"w-full bg-lime-500 text-black font-bold py-4 rounded-xl disabled:opacity-50",children:S?"Gnderiliyor...":"Gnder"})]})]})}),F&&s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-end justify-center z-50",children:s.jsxs("div",{className:"bg-[#1a1a1a] w-full max-w-lg rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"groups"}),"Ekip Ynetimi"]}),s.jsx("button",{onClick:()=>K(!1),children:s.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"close"})})]}),s.jsxs("div",{className:"bg-[#0a0a0a] rounded-xl p-4 mb-6",children:[s.jsx("h3",{className:"font-bold text-sm mb-3 text-gray-300",children:"Yeni ye Davet Et"}),s.jsx("input",{type:"email",value:le,onChange:se=>U(se.target.value),placeholder:"Email adresi",className:"w-full bg-[#1a1a1a] border border-gray-700 rounded-lg p-3 text-white mb-3"}),s.jsxs("select",{value:re,onChange:se=>Z(se.target.value),className:"w-full bg-[#1a1a1a] border border-gray-700 rounded-lg p-3 text-white mb-3",children:[s.jsx("option",{value:"staff",children:"Staff (Sadece Grntleme)"}),s.jsx("option",{value:"manager",children:"Manager (lem Yapabilir)"})]}),s.jsx("button",{onClick:ha,disabled:V||!le,className:"w-full bg-lime-500 text-black font-bold py-3 rounded-lg disabled:opacity-50",children:V?"Gnderiliyor...":"Davet Gnder"})]}),Y.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold text-sm mb-3 text-gray-300",children:"Bekleyen Davetler"}),s.jsx("div",{className:"space-y-2",children:Y.map(se=>s.jsxs("div",{className:"bg-[#0a0a0a] rounded-lg p-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium",children:se.email}),s.jsx("p",{className:"text-xs text-amber-400",children:se.role})]}),s.jsx("button",{onClick:()=>qs(se.id),className:"text-red-400 text-xs",children:"ptal"})]},se.id))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold text-sm mb-3 text-gray-300",children:["Ekip yeleri (",$.length,")"]}),s.jsx("div",{className:"space-y-2",children:$.map(se=>{var Pe;return s.jsxs("div",{className:"bg-[#0a0a0a] rounded-lg p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${se.business_role==="owner"?"bg-lime-500/20 text-lime-400":"bg-gray-700 text-gray-300"}`,children:s.jsx("span",{className:"material-symbols-outlined text-sm",children:se.business_role==="owner"?"star":"person"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium",children:se.name||((Pe=se.email)==null?void 0:Pe.split("@")[0])}),s.jsx("p",{className:"text-xs text-gray-500",children:se.email})]})]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded ${se.business_role==="owner"?"bg-lime-500/20 text-lime-400":se.business_role==="manager"?"bg-blue-500/20 text-blue-400":"bg-gray-700 text-gray-400"}`,children:se.business_role==="owner"?"Sahip":se.business_role==="manager"?"Ynetici":"Personel"})]},se.id)})})]})]})})]})},$T=()=>{const{inviteCode:t}=vh(),e=we(),{user:r,refreshUser:n}=at(),[a,o]=N.useState(!1),[c,d]=N.useState(null),[h,f]=N.useState(null),x=async()=>{if(!t){d("Geersiz davet kodu");return}if(!r){e(`/login?redirect=/join/${t}`);return}o(!0),d(null);const g=await G.acceptBusinessInvite(t);g.success?(f(g.message||"Ekibe baaryla katldnz!"),n(),setTimeout(()=>{e("/business")},2e3)):d(g.error||"Davet kabul edilemedi"),o(!1)};return s.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-6 text-white",children:s.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-8 max-w-sm w-full text-center border border-white/10",children:[s.jsx("div",{className:"w-20 h-20 bg-lime-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("span",{className:"material-symbols-outlined text-5xl text-lime-400",children:"group_add"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"letme Daveti"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Bir iletme sizi ekibine davet etti. Katlmak iin aadaki butona tklayn."}),!r&&s.jsx("p",{className:"text-amber-400 text-sm mb-4",children:"Daveti kabul etmek iin nce giri yapmalsnz."}),c&&s.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-400 p-3 rounded-lg mb-4 text-sm",children:c}),h&&s.jsx("div",{className:"bg-lime-500/20 border border-lime-500/30 text-lime-400 p-3 rounded-lg mb-4 text-sm",children:h}),s.jsx("button",{onClick:x,disabled:a||!!h,className:"w-full bg-lime-500 hover:bg-lime-400 text-black font-bold py-4 rounded-xl disabled:opacity-50 transition-all mb-4",children:a?"Katlnyor...":r?"Ekibe Katl":"Giri Yap ve Katl"}),s.jsx("button",{onClick:()=>e("/"),className:"w-full text-gray-400 py-2",children:"Ana Sayfaya Dn"})]})})},FT=()=>{const t=we(),{user:e,refreshUser:r}=at(),[n,a]=N.useState(1),[o,c]=N.useState(null),[d,h]=N.useState(null),[f,x]=N.useState(!1),[g,y]=N.useState(null),[w,v]=N.useState(!0);N.useEffect(()=>{b()},[]);const b=async()=>{v(!0);try{const _=await G.getVerificationStatus("kyc");_&&(y(_),_.status==="approved"?a(3):_.status==="pending"&&a(4))}catch(_){console.error("Check KYC status error:",_)}finally{v(!1)}},E=_=>{var P;const S=(P=_.target.files)==null?void 0:P[0];if(S){c(S);const O=new FileReader;O.onloadend=()=>{h(O.result)},O.readAsDataURL(S)}},j=async()=>{if(o){x(!0);try{const _=await G.submitVerification("kyc",o);_.success?(a(4),await r()):alert(_.error||"Bir hata olutu")}catch(_){console.error("KYC error:",_),alert("Bir hata olutu. Ltfen tekrar deneyin.")}finally{x(!1)}}};return w?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-white/30 border-t-white rounded-full"})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0",children:[s.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Kimlik Dorulama"})]}),s.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[s.jsx("div",{className:"flex items-center justify-center gap-2",children:[1,2,3].map(_=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all ${n>=_?n===_?"bg-emerald-500 text-white":"bg-emerald-100 text-emerald-600":"bg-white/20 text-white/50"}`,children:n>_?s.jsx("span",{className:"material-symbols-outlined text-lg",children:"check"}):_}),_<3&&s.jsx("div",{className:`w-8 h-0.5 ${n>_?"bg-emerald-500":"bg-white/20"}`})]},_))}),n===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx("span",{className:"material-symbols-outlined text-amber-500 text-4xl",children:"badge"})}),s.jsx("h2",{className:"text-white font-bold text-xl mb-2",children:"Kimlik Dorulama"}),s.jsx("p",{className:"text-emerald-200 text-sm",children:"lem limitlerini artrmak ve hesabnz gvence altna almak iin kimlik belgenizi dorulayn."})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg space-y-3",children:[s.jsxs("h3",{className:"text-gray-900 font-bold text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"info"}),"Gerekli Belgeler"]}),s.jsxs("ul",{className:"text-gray-600 text-sm space-y-2",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-lg",children:"check_circle"}),"Kimlik kartnzn n yz (net ve okunakl)"]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-lg",children:"check_circle"}),"Fotoraf zerinde kesinti veya yansma olmamal"]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-lg",children:"check_circle"}),"Tm keler grnr olmal"]})]})]}),s.jsxs("button",{onClick:()=>a(2),className:"w-full bg-emerald-500 text-white py-4 rounded-2xl font-bold text-base hover:bg-emerald-400 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-emerald-500/20",children:["Bala",s.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]}),n===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-white font-bold text-xl mb-2",children:"Kimlik Belgesi Ykle"}),s.jsx("p",{className:"text-emerald-200 text-sm",children:"Kimlik kartnzn veya pasaportunuzun fotorafn ykleyin."})]}),s.jsxs("label",{className:"block cursor-pointer",children:[s.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:E,className:"hidden"}),s.jsx("div",{className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all ${d?"border-emerald-500 bg-emerald-50":"border-gray-300 bg-white hover:border-emerald-400"} shadow-lg`,children:d?s.jsxs("div",{className:"space-y-3",children:[s.jsx("img",{src:d,alt:"ID Preview",className:"max-h-48 mx-auto rounded-xl object-cover"}),s.jsx("p",{className:"text-emerald-600 text-sm font-medium",children:" Fotoraf yklendi - Deitirmek iin tklayn"})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto",children:s.jsx("span",{className:"material-symbols-outlined text-gray-400 text-3xl",children:"add_photo_alternate"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-900 font-medium",children:"Fotoraf ek veya Ykle"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Kamera veya galeri kullanabilirsiniz"})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-lg border-l-4 border-amber-500",children:s.jsxs("p",{className:"text-gray-600 text-sm flex items-start gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-lg shrink-0 text-amber-500",children:"tips_and_updates"}),"pucu: yi aydnlatlm bir ortamda, dz bir zemin zerinde fotoraf ekin."]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>a(1),className:"flex-1 bg-white text-gray-700 py-4 rounded-2xl font-bold text-base hover:bg-gray-50 transition-colors shadow",children:"Geri"}),s.jsx("button",{onClick:j,disabled:!o||f,className:`flex-1 py-4 rounded-2xl font-bold text-base transition-all flex items-center justify-center gap-2 shadow-lg ${o&&!f?"bg-emerald-500 text-white hover:bg-emerald-400 shadow-emerald-500/20":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Gnderiliyor..."]}):s.jsxs(s.Fragment,{children:["Gnder",s.jsx("span",{className:"material-symbols-outlined",children:"send"})]})})]})]}),n===3&&s.jsxs("div",{className:"space-y-6 text-center py-10",children:[s.jsx("div",{className:"w-24 h-24 bg-emerald-100 rounded-full flex items-center justify-center mx-auto shadow-lg",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-5xl",children:"verified_user"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-white font-bold text-2xl mb-2",children:"Kimlik Doruland!"}),s.jsx("p",{className:"text-emerald-200 text-sm",children:"Tebrikler! Hesabnz baaryla doruland. Artk tm zelliklere eriebilirsiniz."})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-500 text-sm",children:"Durum"}),s.jsxs("span",{className:"text-emerald-600 font-bold flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-outlined text-lg",children:"check_circle"}),"Dorulanm"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-500 text-sm",children:"Gnlk Limit"}),s.jsx("span",{className:"text-gray-900 font-bold",children:"$10,000"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-500 text-sm",children:"Aylk Limit"}),s.jsx("span",{className:"text-gray-900 font-bold",children:"$100,000"})]})]}),s.jsx("button",{onClick:()=>t("/profile"),className:"w-full bg-emerald-500 text-white py-4 rounded-2xl font-bold text-base hover:bg-emerald-400 transition-colors shadow-lg shadow-emerald-500/20",children:"Tamam"})]}),n===4&&s.jsxs("div",{className:"space-y-6 text-center py-10",children:[s.jsx("div",{className:"w-24 h-24 bg-amber-100 rounded-full flex items-center justify-center mx-auto shadow-lg",children:s.jsx("span",{className:"material-symbols-outlined text-amber-500 text-5xl",children:"schedule"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-white font-bold text-2xl mb-2",children:"nceleme Bekliyor"}),s.jsx("p",{className:"text-emerald-200 text-sm",children:"Belgeleriniz Telegram zerinden admin ekibimize iletildi. En ksa srede incelenecektir."})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-500 text-sm",children:"Durum"}),s.jsxs("span",{className:"text-amber-600 font-bold flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-outlined text-lg",children:"pending"}),"Beklemede"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-500 text-sm",children:"Gnderim Tarihi"}),s.jsx("span",{className:"text-gray-900 font-medium text-sm",children:g!=null&&g.created_at?new Date(g.created_at).toLocaleString("tr-TR"):new Date().toLocaleString("tr-TR")})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:s.jsxs("p",{className:"text-blue-700 text-sm flex items-start gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-lg shrink-0",children:"notifications_active"}),"Onaylandnda size bildirim gndereceiz."]})}),s.jsx("button",{onClick:()=>t("/profile"),className:"w-full bg-emerald-500 text-white py-4 rounded-2xl font-bold text-base hover:bg-emerald-400 transition-colors shadow-lg shadow-emerald-500/20",children:"Tamam"}),s.jsx("button",{onClick:()=>{a(2),c(null),h(null)},className:"w-full text-white/70 py-2 text-sm hover:text-white transition-colors",children:"Yeni Belge Gnder"})]}),(g==null?void 0:g.status)==="rejected"&&n!==2&&s.jsxs("div",{className:"space-y-6 text-center py-10",children:[s.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto shadow-lg",children:s.jsx("span",{className:"material-symbols-outlined text-red-500 text-5xl",children:"cancel"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-white font-bold text-2xl mb-2",children:"Dorulama Reddedildi"}),s.jsx("p",{className:"text-emerald-200 text-sm",children:(g==null?void 0:g.rejection_reason)||"Belgeleriniz uygun bulunmad. Ltfen geerli belgelerle tekrar deneyin."})]}),s.jsx("button",{onClick:()=>{a(2),c(null),h(null),y(null)},className:"w-full bg-emerald-500 text-white py-4 rounded-2xl font-bold text-base hover:bg-emerald-400 transition-colors shadow-lg shadow-emerald-500/20",children:"Tekrar Dene"})]})]})]})},HT=()=>{const t=we(),{refreshUser:e}=at(),[r,n]=N.useState(""),[a,o]=N.useState(""),[c,d]=N.useState(""),[h,f]=N.useState(!1),[x,g]=N.useState(!1),[y,w]=N.useState(!1);N.useEffect(()=>{v()},[]);const v=async()=>{f(!0);try{const{data:{user:j}}=await C.auth.getUser();if(!j)return;const{data:_}=await C.from("profiles").select("first_name, last_name, birth_date").eq("id",j.id).single();_&&(n(_.first_name||""),o(_.last_name||""),d(_.birth_date||""))}catch(j){console.error("Load profile error:",j)}finally{f(!1)}},b=async()=>{if(!(!r.trim()||!a.trim()||!c)){g(!0);try{const{data:{user:j}}=await C.auth.getUser();if(!j)throw new Error("No user");const{error:_}=await C.from("profiles").update({first_name:r.trim(),last_name:a.trim(),birth_date:c,name:`${r.trim()} ${a.trim()}`,profile_completed:!0}).eq("id",j.id);_&&console.error("Update error:",_),w(!0),await e(),setTimeout(()=>{t("/profile")},1500)}catch(j){console.error("Save error:",j)}finally{g(!1)}}},E=r.trim()&&a.trim()&&c;return h?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex items-center justify-center",children:s.jsx("div",{className:"w-10 h-10 border-2 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin"})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0",children:[s.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Profil Bilgileri"})]}),y&&s.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center max-w-xs w-full shadow-xl",children:[s.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-3xl",children:"check_circle"})}),s.jsx("h3",{className:"text-gray-900 font-bold text-lg mb-2",children:"Kaydedildi!"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Profil bilgileriniz gncellendi."})]})}),s.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[s.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center shrink-0",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-400",children:"info"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium text-sm",children:"Neden bu bilgiler gerekli?"}),s.jsx("p",{className:"text-emerald-200 text-xs mt-1",children:"Kimlik bilgileriniz hesap gvenlii ve yasal ykmllkler iin gereklidir."})]})]})}),s.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-gray-700 text-sm font-medium pl-1",children:"Ad"}),s.jsx("input",{type:"text",value:r,onChange:j=>n(j.target.value),placeholder:"Adnz girin",className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3.5 text-gray-900 placeholder-gray-400 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition-all"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-gray-700 text-sm font-medium pl-1",children:"Soyad"}),s.jsx("input",{type:"text",value:a,onChange:j=>o(j.target.value),placeholder:"Soyadnz girin",className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3.5 text-gray-900 placeholder-gray-400 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition-all"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-gray-700 text-sm font-medium pl-1",children:"Doum Tarihi"}),s.jsx("input",{type:"date",value:c,onChange:j=>d(j.target.value),className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3.5 text-gray-900 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 focus:outline-none transition-all"})]}),(r||a)&&s.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4 border border-emerald-100 mt-4",children:[s.jsx("p",{className:"text-emerald-600 text-xs font-medium mb-1",children:"nizleme"}),s.jsxs("p",{className:"text-gray-900 font-bold text-lg",children:[r," ",a]}),c&&s.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Doum: ",new Date(c).toLocaleDateString("tr-TR")]})]})]}),s.jsx("button",{onClick:b,disabled:!E||x,className:`w-full py-4 rounded-2xl font-bold text-base transition-all flex items-center justify-center gap-2 shadow-lg ${E&&!x?"bg-emerald-500 text-white hover:bg-emerald-400 active:scale-[0.98] shadow-emerald-500/30":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Kaydediliyor..."]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-outlined",children:"save"}),"Kaydet"]})})]})]})},WT=()=>{var y,w,v,b,E,j,_,S;const t=we(),[e,r]=N.useState(null),[n,a]=N.useState({profileComplete:!1,kycVerified:!1,emailVerified:!1}),[o,c]=N.useState(!0);N.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:{user:P}}=await C.auth.getUser();if(!P)return;const{data:O}=await C.rpc("get_user_limits",{p_user_id:P.id});O&&O.length>0&&r(O[0]);const{data:A}=await C.from("profiles").select("first_name, last_name, birth_date, profile_completed, kyc_verified, phone_verified").eq("id",P.id).single();A&&a({profileComplete:A.profile_completed||A.first_name&&A.last_name&&A.birth_date,kycVerified:A.kyc_verified||!1,emailVerified:!0})}catch(P){console.error("Load limits error:",P)}finally{c(!1)}};Object.values(n).filter(Boolean).length;const h=n.kycVerified,f=e?e.daily_used/e.daily_limit*100:0,x=e?e.monthly_used/e.monthly_limit*100:0,g=[{key:"profileComplete",icon:"person",label:"Profil Bilgileri",sublabel:"Ad, soyad, doum tarihi",completed:n.profileComplete,action:()=>t("/profile/edit")},{key:"kycVerified",icon:"badge",label:"Kimlik Belgesi",sublabel:"Kimlik kart dorulamas",completed:n.kycVerified,action:()=>t("/kyc")},{key:"emailVerified",icon:"mail",label:"E-posta Dorulama",sublabel:"E-posta adresi onay",completed:n.emailVerified,action:()=>{}}];return o?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex items-center justify-center",children:s.jsx("div",{className:"w-10 h-10 border-2 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin"})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsxs("div",{className:"px-4 py-4 flex items-center shrink-0",children:[s.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"lem Limitleri"})]}),s.jsxs("div",{className:"flex-1 p-5 space-y-6 overflow-y-auto pb-20",children:[s.jsxs("div",{className:"rounded-2xl p-5 shadow-lg bg-white",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${h?"bg-emerald-100":"bg-amber-100"}`,children:s.jsx("span",{className:`material-symbols-outlined text-2xl ${h?"text-emerald-500":"text-amber-500"}`,children:h?"verified_user":"pending"})}),s.jsxs("div",{children:[s.jsx("p",{className:`font-bold ${h?"text-emerald-600":"text-amber-600"}`,children:h?"Dorulanm Hesap":"Snrl Hesap"}),s.jsx("p",{className:"text-gray-500 text-sm",children:h?"Tm limitler aktif":"KYC ile limitleri artrn"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Gnlk Limit"}),s.jsxs("span",{className:"text-gray-900 font-bold",children:["$",((y=e==null?void 0:e.daily_used)==null?void 0:y.toLocaleString())||0," / $",((w=e==null?void 0:e.daily_limit)==null?void 0:w.toLocaleString())||500]})]}),s.jsx("div",{className:"h-3 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all ${f>80?"bg-red-500":f>50?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(f,100)}%`}})}),s.jsxs("p",{className:"text-right text-xs text-gray-500 mt-1",children:["Kalan: $",((v=e==null?void 0:e.daily_remaining)==null?void 0:v.toLocaleString())||((b=e==null?void 0:e.daily_limit)==null?void 0:b.toLocaleString())||500]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Aylk Limit"}),s.jsxs("span",{className:"text-gray-900 font-bold",children:["$",((E=e==null?void 0:e.monthly_used)==null?void 0:E.toLocaleString())||0," / $",((j=e==null?void 0:e.monthly_limit)==null?void 0:j.toLocaleString())||2e3]})]}),s.jsx("div",{className:"h-3 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all ${x>80?"bg-red-500":x>50?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(x,100)}%`}})}),s.jsxs("p",{className:"text-right text-xs text-gray-500 mt-1",children:["Kalan: $",((_=e==null?void 0:e.monthly_remaining)==null?void 0:_.toLocaleString())||((S=e==null?void 0:e.monthly_limit)==null?void 0:S.toLocaleString())||2e3]})]})]}),!h&&s.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center shrink-0",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-400",children:"trending_up"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold text-sm",children:"Limitleri 20x Artrn!"}),s.jsx("p",{className:"text-emerald-200 text-xs mt-1",children:"KYC dorulamas ile gnlk $10,000, aylk $100,000 limite ulan."})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Dorulama Admlar"}),s.jsx("div",{className:"bg-white rounded-2xl overflow-hidden shadow-lg divide-y divide-gray-100",children:g.map(P=>s.jsxs("button",{onClick:P.action,disabled:P.completed,className:`w-full p-4 flex items-center gap-4 text-left transition-colors ${P.completed?"opacity-70":"hover:bg-gray-50"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${P.completed?"bg-emerald-100":"bg-gray-100"}`,children:s.jsx("span",{className:`material-symbols-outlined ${P.completed?"text-emerald-500":"text-gray-400"}`,children:P.completed?"check_circle":P.icon})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm font-bold ${P.completed?"text-gray-500":"text-gray-900"}`,children:P.label}),s.jsx("p",{className:"text-xs text-gray-500",children:P.sublabel})]}),P.completed?s.jsx("span",{className:"text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full",children:" Tamam"}):s.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]},P.key))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider pl-2",children:"Limit Karlatrmas"}),s.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-lg",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-gray-500",children:[s.jsx("th",{className:"text-left py-2"}),s.jsx("th",{className:"text-center py-2",children:"KYC Yok"}),s.jsx("th",{className:"text-center py-2",children:"KYC Onayl"})]})}),s.jsxs("tbody",{className:"text-gray-900",children:[s.jsxs("tr",{className:"border-t border-gray-100",children:[s.jsx("td",{className:"py-3 text-gray-500",children:"Gnlk"}),s.jsx("td",{className:"text-center py-3",children:"$500"}),s.jsx("td",{className:"text-center py-3 text-emerald-600 font-bold",children:"$10,000"})]}),s.jsxs("tr",{className:"border-t border-gray-100",children:[s.jsx("td",{className:"py-3 text-gray-500",children:"Aylk"}),s.jsx("td",{className:"text-center py-3",children:"$2,000"}),s.jsx("td",{className:"text-center py-3 text-emerald-600 font-bold",children:"$100,000"})]})]})]})})]}),!n.kycVerified&&s.jsxs("button",{onClick:()=>t("/kyc"),className:"w-full bg-emerald-500 text-white py-4 rounded-2xl font-bold text-base hover:bg-emerald-400 transition-colors shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined",children:"verified_user"}),"KYC Dorulamas Balat"]})]})]})},VT=()=>{const t=we(),[e,r]=N.useState(""),[n,a]=N.useState(""),[o,c]=N.useState(""),[d,h]=N.useState(!1),[f,x]=N.useState(!1),[g,y]=N.useState(!1),[w,v]=N.useState(!1),[b,E]=N.useState(null),[j,_]=N.useState(!1),S=A=>A.length<6?"ifre en az 6 karakter olmaldr":null,P=async()=>{if(E(null),!e||!n||!o){E("Tm alanlar doldurun");return}if(n!==o){E("Yeni ifreler elemiyor");return}const A=S(n);if(A){E(A);return}if(e===n){E("Yeni ifre mevcut ifreden farkl olmaldr");return}v(!0);try{const{data:{user:I}}=await C.auth.getUser();if(!(I!=null&&I.email)){E("Kullanc bulunamad");return}const{error:B}=await C.auth.signInWithPassword({email:I.email,password:e});if(B){E("Mevcut ifre yanl"),v(!1);return}const{error:R}=await C.auth.updateUser({password:n});if(R){E(R.message),v(!1);return}_(!0),setTimeout(()=>{t("/profile")},2e3)}catch(I){console.error("Password change error:",I),E("Bir hata olutu. Ltfen tekrar deneyin.")}finally{v(!1)}},O=e&&n&&o&&n===o;return s.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[s.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 shrink-0",children:[s.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),s.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"ifre Deitir"})]}),j&&s.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 text-center max-w-xs w-full border border-lime-500/30",children:[s.jsx("div",{className:"w-16 h-16 bg-lime-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl",children:"check_circle"})}),s.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"ifre Deitirildi!"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"ifreniz baaryla gncellendi."})]})}),s.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[s.jsx("div",{className:"bg-amber-500/10 rounded-2xl p-4 border border-amber-500/20",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-amber-500/20 rounded-full flex items-center justify-center shrink-0",children:s.jsx("span",{className:"material-symbols-outlined text-amber-400",children:"shield"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold text-sm",children:"Gvenlik pucu"}),s.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Gl bir ifre en az 6 karakter iermeli ve baka hibir yerde kullanlmamaldr."})]})]})}),b&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-outlined text-red-400",children:"error"}),s.jsx("p",{className:"text-red-400 text-sm",children:b})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Mevcut ifre"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:d?"text":"password",value:e,onChange:A=>r(A.target.value),placeholder:"Mevcut ifrenizi girin",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3.5 pr-12 text-white placeholder-gray-500 focus:border-lime-500/50 focus:outline-none transition-colors"}),s.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 p-1",children:s.jsx("span",{className:"material-symbols-outlined text-xl",children:d?"visibility_off":"visibility"})})]})]}),s.jsx("div",{className:"border-t border-white/5 my-6"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Yeni ifre"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:f?"text":"password",value:n,onChange:A=>a(A.target.value),placeholder:"Yeni ifrenizi girin",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3.5 pr-12 text-white placeholder-gray-500 focus:border-lime-500/50 focus:outline-none transition-colors"}),s.jsx("button",{type:"button",onClick:()=>x(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 p-1",children:s.jsx("span",{className:"material-symbols-outlined text-xl",children:f?"visibility_off":"visibility"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Yeni ifre Tekrar"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:g?"text":"password",value:o,onChange:A=>c(A.target.value),placeholder:"Yeni ifrenizi tekrar girin",className:`w-full bg-[#1a1a1a] border rounded-xl px-4 py-3.5 pr-12 text-white placeholder-gray-500 focus:outline-none transition-colors ${o&&n!==o?"border-red-500/50 focus:border-red-500":o&&n===o?"border-lime-500/50 focus:border-lime-500":"border-white/10 focus:border-lime-500/50"}`}),s.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 p-1",children:s.jsx("span",{className:"material-symbols-outlined text-xl",children:g?"visibility_off":"visibility"})})]}),o&&n!==o&&s.jsx("p",{className:"text-red-400 text-xs pl-1",children:"ifreler elemiyor"}),o&&n===o&&s.jsxs("p",{className:"text-lime-400 text-xs pl-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"check"}),"ifreler eleiyor"]})]})]}),s.jsx("button",{onClick:P,disabled:!O||w,className:`w-full py-4 rounded-2xl font-bold text-base transition-all flex items-center justify-center gap-2 ${O&&!w?"bg-lime-500 text-black hover:bg-lime-400 active:scale-[0.98]":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:w?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Gncelleniyor..."]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-outlined",children:"lock_reset"}),"ifreyi Gncelle"]})})]})]})},qT={p2p_matched:{title:" Eleme Bulundu",message:"{amount} USDT tutarnda ileminiz eleti.",icon:"handshake"},p2p_payment_sent:{title:" deme Gnderildi",message:"Alc demeyi gnderdi. Ltfen kontrol edin.",icon:"payments"},p2p_completed:{title:" lem Tamamland",message:"{amount} USDT tutarnda ileminiz baaryla tamamland.",icon:"check_circle"},p2p_cancelled:{title:" lem ptal Edildi",message:"{amount} USDT tutarnda ileminiz iptal edildi.",icon:"cancel"},p2p_expired:{title:" Sre Doldu",message:"leminiz sre am nedeniyle iptal edildi.",icon:"timer_off"},balance_received:{title:" Para Geldi",message:"{amount} USDT hesabnza aktarld.",icon:"add_circle"},balance_sent:{title:" Para Gnderildi",message:"{amount} USDT gnderildi.",icon:"send"},deposit_approved:{title:" Yatrm Onayland",message:"{amount} USDT yatrmnz onayland.",icon:"verified"},withdraw_approved:{title:" ekim Onayland",message:"{amount} TRY ekim talebiniz onayland.",icon:"verified"},system_alert:{title:" Sistem Bildirimi",message:"{message}",icon:"info"},security_alert:{title:" Gvenlik Uyars",message:"Hesabnza yeni bir cihazdan giri yapld.",icon:"security"}},KT=()=>{const t=we(),[e,r]=N.useState([]),[n,a]=N.useState(!0);N.useEffect(()=>{o()},[]);const o=async()=>{a(!0);const g=await G.getNotificationHistory();r(g),a(!1)},c=async g=>{g.read||(await G.markNotificationAsRead(g.id),r(y=>y.map(w=>w.id===g.id?{...w,read:!0}:w))),(g.type.startsWith("p2p_")||g.type==="balance_received"||g.type==="balance_sent")&&t("/dashboard")},d=async()=>{await G.markAllNotificationsAsRead(),r(g=>g.map(y=>({...y,read:!0})))},h=g=>{const y=qT[g];return(y==null?void 0:y.icon)||"notifications"},f=g=>{const y=new Date,w=new Date(g),v=y.getTime()-w.getTime(),b=Math.floor(v/6e4),E=Math.floor(b/60),j=Math.floor(E/24);return b<1?"Az nce":b<60?`${b} dakika nce`:E<24?`${E} saat nce`:j<7?`${j} gn nce`:w.toLocaleDateString("tr-TR")},x=e.filter(g=>!g.read).length;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-800 via-emerald-900 to-emerald-950 flex flex-col font-display",children:[s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx("button",{onClick:()=>t(-1),className:"text-white hover:bg-white/10 p-2 rounded-full transition-colors",children:s.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),s.jsx("h1",{className:"text-white text-lg font-bold",children:"Bildirimler"}),s.jsx("div",{className:"w-10"})]}),x>0&&s.jsx("div",{className:"px-4 pb-4",children:s.jsxs("button",{onClick:d,className:"text-lime-400 text-sm flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"done_all"}),"Tmn okundu iaretle (",x,")"]})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:n?s.jsx("div",{className:"flex items-center justify-center h-40",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-lime-400"})}):e.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-60 text-emerald-300",children:[s.jsx("span",{className:"material-symbols-outlined text-5xl mb-2",children:"notifications_off"}),s.jsx("p",{children:"Henz bildirim yok"})]}):s.jsx("div",{className:"space-y-3",children:e.map(g=>s.jsxs("div",{onClick:()=>c(g),className:`p-4 rounded-2xl flex items-start gap-3 cursor-pointer transition-colors ${g.read?"bg-white/90 shadow":"bg-white shadow-lg"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${g.read?"bg-gray-100 text-gray-400":"bg-emerald-100 text-emerald-600"}`,children:s.jsx("span",{className:"material-symbols-outlined",children:h(g.type)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:`font-bold truncate ${g.read?"text-gray-500":"text-gray-900"}`,children:g.title}),!g.read&&s.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-0.5 line-clamp-2",children:g.message}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f(g.created_at)})]}),s.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]},g.id))})})]})},GT=()=>{const t=we(),{user:e}=at(),[r,n]=N.useState(null),[a,o]=N.useState([]),[c,d]=N.useState(""),[h,f]=N.useState(null),[x,g]=N.useState(!0),[y,w]=N.useState(!1),v=N.useRef(null);N.useEffect(()=>{(async()=>{const{data:{user:I}}=await C.auth.getUser();I&&n({id:I.id,email:I.email||""})})()},[]);const b=()=>{var A;(A=v.current)==null||A.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{b()},[a]),N.useEffect(()=>{if(!r)return;(async()=>{var I;try{const{data:B,error:R}=await C.from("support_conversations").select("*").eq("user_id",r.id).in("status",["open","waiting"]).order("created_at",{ascending:!1}).limit(1).single();if(B)f(B),await E(B.id),await j(B.id);else{const{data:W}=await C.from("profiles").select("first_name, last_name").eq("id",r.id).single(),F=W!=null&&W.first_name?`${W.first_name} ${W.last_name||""}`.trim():((I=r.email)==null?void 0:I.split("@")[0])||"User",{data:K,error:$}=await C.from("support_conversations").insert({user_id:r.id,user_name:F,user_email:r.email,subject:"Yeni Destek Talebi"}).select().single();K&&(f(K),await C.from("support_messages").insert({conversation_id:K.id,sender_type:"system",sender_name:"Sistem",message:"Merhaba! NUSD destek ekibine ho geldiniz. Size nasl yardmc olabiliriz?"}),await E(K.id))}}catch(B){console.error("Conversation error:",B)}finally{g(!1)}})()},[r]);const E=async A=>{const{data:I,error:B}=await C.from("support_messages").select("*").eq("conversation_id",A).order("created_at",{ascending:!0});I&&o(I)},j=async A=>{await C.rpc("mark_messages_read",{p_conversation_id:A,p_reader_type:"user"})};N.useEffect(()=>{if(!(h!=null&&h.id))return;const A=C.channel(`support_messages:${h.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"support_messages",filter:`conversation_id=eq.${h.id}`},I=>{const B=I.new;o(R=>[...R,B]),B.sender_type==="admin"&&j(h.id)}).subscribe();return()=>{C.removeChannel(A)}},[h==null?void 0:h.id]);const _=async()=>{var I;if(!c.trim()||!(h!=null&&h.id)||y)return;w(!0);const A=c.trim();d("");try{const{error:B}=await C.from("support_messages").insert({conversation_id:h.id,sender_type:"user",sender_id:r==null?void 0:r.id,sender_name:((I=r==null?void 0:r.email)==null?void 0:I.split("@")[0])||"User",message:A});B&&(console.error("Send error:",B),d(A))}catch(B){console.error("Send error:",B),d(A)}finally{w(!1)}},S=A=>new Date(A).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),P=A=>{const I=new Date(A),B=new Date,R=new Date(B);return R.setDate(R.getDate()-1),I.toDateString()===B.toDateString()?"Bugn":I.toDateString()===R.toDateString()?"Dn":I.toLocaleDateString("tr-TR",{day:"numeric",month:"long"})},O=a.reduce((A,I)=>{const B=P(I.created_at);return A[B]||(A[B]=[]),A[B].push(I),A},{});return x?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-emerald-600 to-emerald-800 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-white border-t-transparent"})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-600 to-emerald-800 flex flex-col",children:[s.jsxs("div",{className:"bg-emerald-700/50 backdrop-blur-sm border-b border-white/10 px-4 py-3 flex items-center gap-3",children:[s.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"arrow_back"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-white font-bold",children:"Canl Destek"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-emerald-200 text-sm",children:"evrimii"})]})]}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-white",children:"support_agent"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[Object.entries(O).map(([A,I])=>s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-center my-4",children:s.jsx("span",{className:"bg-white/20 text-white/70 text-xs px-3 py-1 rounded-full",children:A})}),I.map(B=>s.jsx("div",{className:`flex ${B.sender_type==="user"?"justify-end":"justify-start"} mb-3`,children:s.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2.5 ${B.sender_type==="user"?"bg-white text-gray-800 rounded-br-md":B.sender_type==="system"?"bg-emerald-500/30 text-white/90 rounded-bl-md":"bg-emerald-500/50 text-white rounded-bl-md"}`,children:[B.sender_type!=="user"&&s.jsx("p",{className:"text-xs font-medium text-emerald-200 mb-1",children:B.sender_type==="system"?" Sistem":" Destek"}),s.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:B.message}),s.jsxs("div",{className:`flex items-center gap-1 mt-1 ${B.sender_type==="user"?"justify-end":"justify-start"}`,children:[s.jsx("span",{className:`text-xs ${B.sender_type==="user"?"text-gray-400":"text-white/50"}`,children:S(B.created_at)}),B.sender_type==="user"&&s.jsx("span",{className:"material-symbols-outlined text-xs text-emerald-500",children:B.is_read?"done_all":"done"})]})]})},B.id))]},A)),s.jsx("div",{ref:v})]}),s.jsx("div",{className:"bg-emerald-700/50 backdrop-blur-sm border-t border-white/10 p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/10 rounded-full flex items-center px-4",children:s.jsx("input",{type:"text",value:c,onChange:A=>d(A.target.value),onKeyPress:A=>A.key==="Enter"&&_(),placeholder:"Mesajnz yazn...",className:"flex-1 bg-transparent text-white placeholder-white/50 py-3 outline-none"})}),s.jsx("button",{onClick:_,disabled:!c.trim()||y,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${c.trim()&&!y?"bg-white text-emerald-600 shadow-lg active:scale-95":"bg-white/20 text-white/50"}`,children:s.jsx("span",{className:"material-symbols-outlined",children:y?"hourglass_empty":"send"})})]})})]})},ZT=()=>{var B;const t=we(),[e,r]=N.useState([]),[n,a]=N.useState(null),[o,c]=N.useState([]),[d,h]=N.useState(""),[f,x]=N.useState(!0),[g,y]=N.useState(!1),[w,v]=N.useState("all"),b=N.useRef(null);N.useEffect(()=>{E();const R=C.channel("support_conversations_changes").on("postgres_changes",{event:"*",schema:"public",table:"support_conversations"},()=>E()).subscribe();return()=>{C.removeChannel(R)}},[]);const E=async()=>{const{data:R,error:W}=await C.from("support_conversations").select("*").order("last_message_at",{ascending:!1});R&&r(R),x(!1)};N.useEffect(()=>{if(!n)return;j(n.id),_(n.id);const R=C.channel(`admin_messages:${n.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"support_messages",filter:`conversation_id=eq.${n.id}`},W=>{const F=W.new;c(K=>[...K,F]),F.sender_type==="user"&&_(n.id)}).subscribe();return()=>{C.removeChannel(R)}},[n==null?void 0:n.id]),N.useEffect(()=>{var R;(R=b.current)==null||R.scrollIntoView({behavior:"smooth"})},[o]);const j=async R=>{const{data:W}=await C.from("support_messages").select("*").eq("conversation_id",R).order("created_at",{ascending:!0});W&&c(W)},_=async R=>{await C.rpc("mark_messages_read",{p_conversation_id:R,p_reader_type:"admin"})},S=async()=>{if(!d.trim()||!n||g)return;y(!0);const R=d.trim();h("");const{data:{user:W}}=await C.auth.getUser(),{error:F}=await C.from("support_messages").insert({conversation_id:n.id,sender_type:"admin",sender_id:W==null?void 0:W.id,sender_name:"Destek Ekibi",message:R});F&&(console.error("Send error:",F),h(R)),y(!1)},P=async R=>{n&&(await C.from("support_conversations").update({status:R}).eq("id",n.id),a({...n,status:R}),E())},O=e.filter(R=>w==="all"||R.status===w),A=R=>{const W=new Date(R),K=new Date().getTime()-W.getTime(),$=Math.floor(K/6e4),Q=Math.floor(K/36e5),Y=Math.floor(K/864e5);return $<1?"imdi":$<60?`${$}dk`:Q<24?`${Q}sa`:`${Y}g`},I=R=>{switch(R){case"open":return{bg:"bg-red-500",text:"Ak"};case"waiting":return{bg:"bg-yellow-500",text:"Bekliyor"};case"resolved":return{bg:"bg-green-500",text:"zld"};case"closed":return{bg:"bg-gray-500",text:"Kapal"};default:return{bg:"bg-gray-500",text:R}}};return f?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-emerald-500 border-t-transparent"})}):s.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col",children:[s.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>t("/admin"),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-white",children:"Canl Destek"}),s.jsxs("p",{className:"text-sm text-gray-400",children:[e.length," konuma"]})]})]}),s.jsx("div",{className:"flex gap-2",children:["all","open","waiting","resolved"].map(R=>s.jsx("button",{onClick:()=>v(R),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${w===R?"bg-emerald-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:R==="all"?"Tm":I(R).text},R))})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsx("div",{className:"w-80 bg-gray-800 border-r border-gray-700 overflow-y-auto",children:O.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"chat"}),s.jsx("p",{children:"Henz konuma yok"})]}):O.map(R=>{var W;return s.jsxs("div",{onClick:()=>a(R),className:`p-4 border-b border-gray-700 cursor-pointer transition-colors ${(n==null?void 0:n.id)===R.id?"bg-emerald-500/10 border-l-2 border-l-emerald-500":"hover:bg-gray-700/50"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:((W=R.user_name)==null?void 0:W.charAt(0).toUpperCase())||"?"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium text-sm",children:R.user_name}),s.jsx("p",{className:"text-gray-500 text-xs",children:R.user_email})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[R.unread_count_admin>0&&s.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:R.unread_count_admin}),s.jsx("span",{className:"text-gray-500 text-xs",children:A(R.last_message_at)})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${I(R.status).bg}`}),s.jsx("span",{className:"text-gray-400 text-xs",children:I(R.status).text})]})]},R.id)})}),s.jsx("div",{className:"flex-1 flex flex-col bg-gray-900",children:n?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 px-6 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500 flex items-center justify-center",children:s.jsx("span",{className:"text-white font-medium",children:(B=n.user_name)==null?void 0:B.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium",children:n.user_name}),s.jsx("p",{className:"text-gray-400 text-sm",children:n.user_email})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>P("resolved"),className:"px-3 py-1.5 bg-green-500/20 text-green-400 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:" zld"}),s.jsx("button",{onClick:()=>P("closed"),className:"px-3 py-1.5 bg-gray-500/20 text-gray-400 rounded-lg text-sm hover:bg-gray-500/30 transition-colors",children:"Kapat"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[o.map(R=>s.jsx("div",{className:`flex ${R.sender_type==="admin"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-2.5 ${R.sender_type==="admin"?"bg-emerald-500 text-white rounded-br-md":R.sender_type==="system"?"bg-gray-700 text-gray-300 rounded-bl-md":"bg-gray-700 text-white rounded-bl-md"}`,children:[R.sender_type==="user"&&s.jsx("p",{className:"text-emerald-400 text-xs font-medium mb-1",children:R.sender_name}),s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:R.message}),s.jsx("p",{className:`text-xs mt-1 ${R.sender_type==="admin"?"text-emerald-200":"text-gray-500"}`,children:new Date(R.created_at).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})},R.id)),s.jsx("div",{ref:b})]}),s.jsx("div",{className:"bg-gray-800 border-t border-gray-700 p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:d,onChange:R=>h(R.target.value),onKeyPress:R=>R.key==="Enter"&&S(),placeholder:"Mesaj yaz...",className:"flex-1 bg-gray-700 text-white rounded-lg px-4 py-3 outline-none focus:ring-2 focus:ring-emerald-500"}),s.jsx("button",{onClick:S,disabled:!d.trim()||g,className:`p-3 rounded-lg transition-all ${d.trim()&&!g?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-gray-700 text-gray-500"}`,children:s.jsx("span",{className:"material-symbols-outlined",children:"send"})})]})})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"material-symbols-outlined text-6xl mb-4",children:"forum"}),s.jsx("p",{className:"text-lg",children:"Bir konuma sein"})]})})})]})]})},YT=()=>{we();const[t,e]=N.useState("30d"),[r,n]=N.useState(null),[a,o]=N.useState([]),[c,d]=N.useState([]),[h,f]=N.useState(!0),[x,g]=N.useState(!1),y=()=>{const j=new Date,_=new Date;switch(t){case"7d":_.setDate(j.getDate()-7);break;case"30d":_.setDate(j.getDate()-30);break;case"90d":_.setDate(j.getDate()-90);break;case"all":_.setFullYear(2020);break}return{start:_.toISOString(),end:j.toISOString()}};N.useEffect(()=>{w()},[t]);const w=async()=>{f(!0);const{start:j,end:_}=y();try{const{data:S}=await C.from("transactions").select("*").gte("created_at",j).lte("created_at",_);if(S){const O=S.filter(R=>R.type==="deposit"&&R.status==="completed"),A=S.filter(R=>R.type==="withdraw"&&R.status==="completed"),I=S.filter(R=>R.status==="completed").reduce((R,W)=>R+(W.amount||0),0);n({totalTransactions:S.length,totalVolume:I,totalDeposits:O.reduce((R,W)=>R+(W.amount||0),0),totalWithdrawals:A.reduce((R,W)=>R+(W.amount||0),0),averageTransaction:S.length>0?I/S.length:0,activeUsers:new Set(S.map(R=>R.user_id)).size,newUsers:0,p2pTransactions:S.filter(R=>R.type==="p2p").length});const B={};S.forEach(R=>{const W=new Date(R.created_at).toISOString().split("T")[0];B[W]||(B[W]={date:W,deposits:0,withdrawals:0,volume:0,count:0}),B[W].count++,R.status==="completed"&&(B[W].volume+=R.amount||0,R.type==="deposit"&&(B[W].deposits+=R.amount||0),R.type==="withdraw"&&(B[W].withdrawals+=R.amount||0))}),o(Object.values(B).sort((R,W)=>R.date.localeCompare(W.date)))}const{data:P}=await C.from("transactions").select("user_id, amount, profiles!inner(email, first_name, last_name)").eq("status","completed").gte("created_at",j).lte("created_at",_);if(P){const O={};P.forEach(A=>{var B,R,W,F;const I=A.user_id;O[I]||(O[I]={id:I,email:((B=A.profiles)==null?void 0:B.email)||"",name:(R=A.profiles)!=null&&R.first_name?`${A.profiles.first_name} ${A.profiles.last_name||""}`.trim():((F=(W=A.profiles)==null?void 0:W.email)==null?void 0:F.split("@")[0])||"User",total_volume:0,transaction_count:0}),O[I].total_volume+=A.amount||0,O[I].transaction_count++}),d(Object.values(O).sort((A,I)=>I.total_volume-A.total_volume).slice(0,10))}}catch(S){console.error("Report error:",S)}finally{f(!1)}},v=async()=>{g(!0);const{start:j,end:_}=y();try{const{data:S}=await C.from("transactions").select("*, profiles(email, first_name, last_name)").gte("created_at",j).lte("created_at",_).order("created_at",{ascending:!1});if(S){const P=[["Tarih","Kullanc","Email","Tr","Miktar","Durum","Aklama"].join(",")];S.forEach(I=>{var B,R,W;P.push([new Date(I.created_at).toLocaleString("tr-TR"),((B=I.profiles)==null?void 0:B.first_name)||"-",((R=I.profiles)==null?void 0:R.email)||"-",I.type,((W=I.amount)==null?void 0:W.toFixed(2))||"0",I.status,I.description||"-"].map(F=>`"${F}"`).join(","))});const O=new Blob([P.join(`
`)],{type:"text/csv;charset=utf-8;"}),A=document.createElement("a");A.href=URL.createObjectURL(O),A.download=`nusd-rapor-${t}-${new Date().toISOString().split("T")[0]}.csv`,A.click()}}catch(S){console.error("Export error:",S)}finally{g(!1)}},b=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(j),E=Math.max(...a.map(j=>j.volume),1);return s.jsxs(rr,{title:"Raporlar",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[s.jsx("div",{className:"flex gap-2",children:[{value:"7d",label:"Son 7 Gn"},{value:"30d",label:"Son 30 Gn"},{value:"90d",label:"Son 90 Gn"},{value:"all",label:"Tm"}].map(j=>s.jsx("button",{onClick:()=>e(j.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===j.value?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-100"}`,children:j.label},j.value))}),s.jsxs("button",{onClick:v,disabled:x,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"download"}),x?"Hazrlanyor...":"CSV ndir"]})]}),h?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[s.jsx("div",{className:"flex items-center gap-3 mb-2",children:s.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"receipt_long"})})}),s.jsx("p",{className:"text-sm text-gray-500",children:"Toplam lem"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:(r==null?void 0:r.totalTransactions)||0})]}),s.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[s.jsx("div",{className:"flex items-center gap-3 mb-2",children:s.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/10 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"trending_up"})})}),s.jsx("p",{className:"text-sm text-gray-500",children:"Toplam Hacim"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:b((r==null?void 0:r.totalVolume)||0)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[s.jsx("div",{className:"flex items-center gap-3 mb-2",children:s.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/10 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-green-500",children:"south_west"})})}),s.jsx("p",{className:"text-sm text-gray-500",children:"Toplam Yatrm"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:b((r==null?void 0:r.totalDeposits)||0)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[s.jsx("div",{className:"flex items-center gap-3 mb-2",children:s.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-outlined text-red-500",children:"north_east"})})}),s.jsx("p",{className:"text-sm text-gray-500",children:"Toplam ekim"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:b((r==null?void 0:r.totalWithdrawals)||0)})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Gnlk lem Hacmi"}),a.length===0?s.jsxs("div",{className:"text-center py-10 text-gray-400",children:[s.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"bar_chart"}),s.jsx("p",{children:"Bu dnem iin veri yok"})]}):s.jsx("div",{className:"h-64 flex items-end gap-1",children:a.slice(-30).map((j,_)=>{const S=j.volume/E*100;return s.jsxs("div",{className:"flex-1 group relative",children:[s.jsx("div",{className:"bg-blue-500 hover:bg-blue-600 rounded-t transition-all cursor-pointer",style:{height:`${Math.max(S,2)}%`}}),s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:s.jsxs("div",{className:"bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:[s.jsx("p",{className:"font-medium",children:new Date(j.date).toLocaleDateString("tr-TR")}),s.jsx("p",{children:b(j.volume)}),s.jsxs("p",{children:[j.count," ilem"]})]})})]},j.date)})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-5 text-white",children:[s.jsx("p",{className:"text-purple-200 text-sm",children:"Ortalama lem"}),s.jsx("p",{className:"text-2xl font-bold",children:b((r==null?void 0:r.averageTransaction)||0)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-5 text-white",children:[s.jsx("p",{className:"text-orange-200 text-sm",children:"Aktif Kullanc"}),s.jsx("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.activeUsers)||0})]}),s.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-5 text-white",children:[s.jsx("p",{className:"text-cyan-200 text-sm",children:"P2P lem"}),s.jsx("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.p2pTransactions)||0})]}),s.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl p-5 text-white",children:[s.jsx("p",{className:"text-pink-200 text-sm",children:"Net Ak"}),s.jsx("p",{className:"text-2xl font-bold",children:b(((r==null?void 0:r.totalDeposits)||0)-((r==null?void 0:r.totalWithdrawals)||0))})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:s.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"En Aktif Kullanclar"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"#"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kullanc"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"lem Says"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Toplam Hacim"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:c.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-400",children:"Veri bulunamad"})}):c.map((j,_)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:_+1}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium text-sm",children:j.name.charAt(0).toUpperCase()}),s.jsx("span",{className:"font-medium text-gray-800",children:j.name})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:j.email}),s.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium text-gray-800",children:j.transaction_count}),s.jsx("td",{className:"px-6 py-4 text-right text-sm font-bold text-emerald-600",children:b(j.total_volume)})]},j.id))})]})})]})]})]})},JT=()=>{const t=we(),e=qn(),{t:r}=T0(),{isDark:n}=_l(),a=o=>e.pathname===o;return s.jsx("div",{className:"fixed bottom-4 left-0 right-0 z-50 flex justify-center",children:s.jsxs("div",{className:"bg-white rounded-full shadow-2xl shadow-black/20 px-4 py-2 flex items-center gap-8 relative",children:[s.jsx("button",{onClick:()=>t("/dashboard"),className:`flex flex-col items-center p-2 rounded-2xl transition-all ${a("/dashboard")?"bg-emerald-100 text-emerald-600":"text-gray-400 hover:text-gray-600"}`,children:s.jsx("span",{className:"material-symbols-outlined text-2xl",children:"home"})}),s.jsx("button",{onClick:()=>t("/qr-scan"),className:"absolute left-1/2 -translate-x-1/2 -top-6",children:s.jsx("div",{className:"w-16 h-16 bg-emerald-600 rounded-full flex items-center justify-center shadow-lg shadow-emerald-500/40 hover:bg-emerald-500 transition-all active:scale-95 border-4 border-white",children:s.jsx("span",{className:"material-symbols-outlined text-3xl text-white",children:"qr_code_scanner"})})}),s.jsx("div",{className:"w-10"}),s.jsx("button",{onClick:()=>t("/profile"),className:`flex flex-col items-center p-2 rounded-2xl transition-all ${a("/profile")?"bg-emerald-100 text-emerald-600":"text-gray-400 hover:text-gray-600"}`,children:s.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})})]})})},ib=N.createContext({}),at=()=>N.useContext(ib);async function io(t,e=15e3){var n,a,o,c;const r={email:t.email||"",name:((n=t.user_metadata)==null?void 0:n.name)||((a=t.email)==null?void 0:a.split("@")[0])||"User",balance:0,role:"user",isActive:!0,account_type:((o=t.user_metadata)==null?void 0:o.accountType)||"personal",business_name:(c=t.user_metadata)==null?void 0:c.businessName};return new Promise(d=>{const h=setTimeout(()=>{console.warn("Profile fetch timeout - using fallback user"),d(r)},e);XT(t,r).then(f=>{clearTimeout(h),d(f)}).catch(f=>{clearTimeout(h),console.error("Profile fetch error:",f),d(r)})})}async function XT(t,e){var r,n;try{let{data:a,error:o}=await C.from("profiles").select("*").eq("id",t.id).single();if(o&&o.code==="PGRST116"&&console.log("Profile not found by ID, will create new profile"),o&&o.code==="PGRST116"){const{data:c,error:d}=await C.from("profiles").insert({id:t.id,email:t.email,name:((r=t.user_metadata)==null?void 0:r.name)||((n=t.email)==null?void 0:n.split("@")[0])||"User",role:"user",is_active:!0,balance:0}).select().single();return d?(console.error("Profile creation error:",d.message),e):c?{id:c.id,email:c.email,name:c.name||"User",balance:c.balance||0,role:c.role||"user",isActive:c.is_active??!0,createdAt:c.created_at?new Date(c.created_at).getTime():Date.now(),trxAddress:c.trx_address,account_type:c.account_type||"personal",business_name:c.business_name,business_department_id:c.business_department_id,nusd_code:c.nusd_code}:e}else if(o)return console.error("Profile fetch error:",o.message),e;return a?{id:a.id,email:a.email,name:a.name||"User",balance:a.balance||0,role:a.role||"user",isActive:a.is_active??!0,createdAt:a.created_at?new Date(a.created_at).getTime():Date.now(),trxAddress:a.trx_address,account_type:a.account_type||"personal",business_name:a.business_name,business_department_id:a.business_department_id,nusd_code:a.nusd_code}:e}catch(a){return console.error("fetchProfileFromSupabase exception:",a),e}}const Je=({children:t,showBottomNav:e=!1})=>s.jsx("div",{className:"popup-layout flex justify-center min-h-screen bg-gray-100 dark:bg-gray-900 font-display",children:s.jsxs("div",{className:"w-full max-w-md bg-background-light dark:bg-background-dark min-h-screen shadow-xl relative overflow-x-hidden",children:[t,e&&s.jsx(JT,{})]})}),Ne=({children:t,adminOnly:e=!1})=>{const{user:r,session:n,isLoading:a}=at();return a?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):!n||!r?s.jsx(yp,{to:"/",replace:!0}):e&&r.role!=="admin"?s.jsx(yp,{to:"/dashboard",replace:!0}):s.jsx(s.Fragment,{children:t})},QT=()=>{const{pathname:t}=qn();return N.useEffect(()=>{window.scrollTo(0,0)},[t]),null},eC=()=>{const[t,e]=N.useState(null),[r,n]=N.useState(null),[a,o]=N.useState(!0);N.useEffect(()=>{let f=!0;(async()=>{try{const{data:{session:y}}=await C.auth.getSession();if(f&&(y!=null&&y.user)){e(y);const w=await io(y.user);f&&n(w)}}catch(y){console.error("Auth initialization error:",y)}finally{f&&o(!1)}})();const{data:{subscription:g}}=C.auth.onAuthStateChange(async(y,w)=>{if(console.log("Auth event:",y),y==="INITIAL_SESSION"||y==="TOKEN_REFRESHED"){w&&e(w);return}if(y==="SIGNED_IN"&&(w!=null&&w.user)){e(w);const v=await io(w.user);n(v)}else y==="SIGNED_OUT"&&(e(null),n(null))});return()=>{f=!1,g.unsubscribe()}},[]);const c=async(f,x)=>{try{const{data:g,error:y}=await C.auth.signInWithPassword({email:f,password:x});if(y)return console.error("Login error:",y.message),!1;if(g.session&&g.user){e(g.session);const w=await io(g.user);return n(w),!0}return!1}catch(g){return console.error("Login exception:",g),!1}},d=async()=>{await C.auth.signOut()},h=async()=>{const{data:{session:f}}=await C.auth.getSession();if(f!=null&&f.user){const x=await io(f.user);n(x)}};return N.useEffect(()=>{let f;const g=()=>{console.log("Session expired due to inactivity"),d()},y=()=>{t&&(clearTimeout(f),f=setTimeout(g,3e5))},w=["mousedown","mousemove","keydown","scroll","touchstart"];return t&&(y(),w.forEach(v=>window.addEventListener(v,y))),()=>{clearTimeout(f),w.forEach(v=>window.removeEventListener(v,y))}},[t]),s.jsx(oN,{children:s.jsx(aN,{children:s.jsx(ib.Provider,{value:{user:r,session:t,login:c,logout:d,refreshUser:h,isLoading:a},children:s.jsxs(tk,{children:[s.jsx(QT,{}),s.jsxs(XN,{children:[s.jsx(xe,{path:"/admin",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(ZP,{})})}),s.jsx(xe,{path:"/admin/users",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(YP,{})})}),s.jsx(xe,{path:"/admin/transactions",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(XP,{})})}),s.jsx(xe,{path:"/admin/p2p-orders",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(QP,{})})}),s.jsx(xe,{path:"/admin/vaults",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(lT,{})})}),s.jsx(xe,{path:"/admin/departments",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(dT,{})})}),s.jsx(xe,{path:"/admin/departments/:id",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(hT,{})})}),s.jsx(xe,{path:"/admin/exchange-rate",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(fT,{})})}),s.jsx(xe,{path:"/admin/logs",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(nT,{})})}),s.jsx(xe,{path:"/admin/support",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(ZT,{})})}),s.jsx(xe,{path:"/admin/reports",element:s.jsx(Ne,{adminOnly:!0,children:s.jsx(YT,{})})}),s.jsx(xe,{path:"/welcome",element:s.jsx(rk,{})}),s.jsx(xe,{path:"/",element:s.jsx(Je,{children:s.jsx(sk,{})})}),s.jsx(xe,{path:"/register",element:s.jsx(Je,{children:s.jsx(k1,{})})}),s.jsx(xe,{path:"/dashboard",element:s.jsx(Je,{showBottomNav:!0,children:s.jsx(Ne,{children:s.jsx(A1,{})})})}),s.jsx(xe,{path:"/profile",element:s.jsx(Je,{showBottomNav:!0,children:s.jsx(Ne,{children:s.jsx(VP,{})})})}),s.jsx(xe,{path:"/qr-scan",element:s.jsx(Je,{showBottomNav:!0,children:s.jsx(Ne,{children:s.jsx(qP,{})})})}),s.jsx(xe,{path:"/history",element:s.jsx(Je,{showBottomNav:!0,children:s.jsx(Ne,{children:s.jsx(B1,{})})})}),s.jsx(xe,{path:"/deposit",element:s.jsx(Je,{showBottomNav:!0,children:s.jsx(Ne,{children:s.jsx(O1,{})})})}),s.jsx(xe,{path:"/deposit/confirm",element:s.jsx(Je,{children:s.jsx(Ne,{children:s.jsx(L1,{})})})}),s.jsx(xe,{path:"/withdraw",element:s.jsx(Je,{showBottomNav:!0,children:s.jsx(Ne,{children:s.jsx(I1,{})})})}),s.jsx(xe,{path:"/crypto/withdraw",element:s.jsx(Je,{children:s.jsx(Ne,{children:s.jsx(R1,{})})})}),s.jsx(xe,{path:"/crypto/deposit",element:s.jsx(Je,{children:s.jsx(Ne,{children:s.jsx(D1,{})})})}),s.jsx(xe,{path:"/bank-accounts",element:s.jsx(Je,{children:s.jsx(Ne,{children:s.jsx(M1,{})})})}),s.jsx(xe,{path:"/kyc",element:s.jsx(Je,{children:s.jsx(Ne,{children:s.jsx(FT,{})})})}),s.jsx(xe,{path:"/profile/edit",element:s.jsx(Je,{children:s.jsx(Ne,{children:s.jsx(HT,{})})})}),s.jsx(xe,{path:"/limits",element:s.jsx(Je,{children:s.jsx(Ne,{children:s.jsx(WT,{})})})}),s.jsx(xe,{path:"/change-password",element:s.jsx(Je,{children:s.jsx(Ne,{children:s.jsx(VT,{})})})}),s.jsx(xe,{path:"/notifications",element:s.jsx(Je,{children:s.jsx(Ne,{children:s.jsx(KT,{})})})}),s.jsx(xe,{path:"/support",element:s.jsx(Ne,{children:s.jsx(GT,{})})}),s.jsx(xe,{path:"/privacy",element:s.jsx(KP,{})}),s.jsx(xe,{path:"/terms",element:s.jsx(GP,{})}),s.jsx(xe,{path:"/find-agent",element:s.jsx(BT,{})}),s.jsx(xe,{path:"/autologin",element:s.jsx(MT,{})}),s.jsx(xe,{path:"/pay/:slug",element:s.jsx(zT,{})}),s.jsx(xe,{path:"/business",element:s.jsx(Je,{children:s.jsx(Ne,{children:s.jsx(UT,{})})})}),s.jsx(xe,{path:"/join/:inviteCode",element:s.jsx($T,{})})]})]})})})})},ab=document.getElementById("root");if(!ab)throw new Error("Could not find root element to mount to");const ob=new URLSearchParams(window.location.search),hg=ob.get("token"),fg=ob.get("email");if(hg&&fg){console.log("Magic Link Detected (Pre-Mount)"),localStorage.setItem("nusd_auth_token",hg),localStorage.setItem("nusd_current_user",fg);let t=window.location.hash;(!t||t==="#/")&&(t="#/admin");const e=window.location.origin+window.location.pathname+t;window.history.replaceState({},"",e)}const tC=ru.createRoot(ab);tC.render(s.jsx(Cs.StrictMode,{children:s.jsx(eC,{})}));
