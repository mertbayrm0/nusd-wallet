function Wm(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var an=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Au(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Oi(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var Vm={exports:{}},Oo={},Zm={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Li=Symbol.for("react.element"),jv=Symbol.for("react.portal"),Nv=Symbol.for("react.fragment"),kv=Symbol.for("react.strict_mode"),Sv=Symbol.for("react.profiler"),Ev=Symbol.for("react.provider"),Pv=Symbol.for("react.context"),Tv=Symbol.for("react.forward_ref"),Cv=Symbol.for("react.suspense"),Av=Symbol.for("react.memo"),Ov=Symbol.for("react.lazy"),Qh=Symbol.iterator;function Lv(t){return t===null||typeof t!="object"?null:(t=Qh&&t[Qh]||t["@@iterator"],typeof t=="function"?t:null)}var qm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Km=Object.assign,Gm={};function ws(t,e,r){this.props=t,this.context=e,this.refs=Gm,this.updater=r||qm}ws.prototype.isReactComponent={};ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ym(){}Ym.prototype=ws.prototype;function Ou(t,e,r){this.props=t,this.context=e,this.refs=Gm,this.updater=r||qm}var Lu=Ou.prototype=new Ym;Lu.constructor=Ou;Km(Lu,ws.prototype);Lu.isPureReactComponent=!0;var ef=Array.isArray,Jm=Object.prototype.hasOwnProperty,Ru={current:null},Xm={key:!0,ref:!0,__self:!0,__source:!0};function Qm(t,e,r){var n,a={},o=null,c=null;if(e!=null)for(n in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)Jm.call(e,n)&&!Xm.hasOwnProperty(n)&&(a[n]=e[n]);var d=arguments.length-2;if(d===1)a.children=r;else if(1<d){for(var h=Array(d),m=0;m<d;m++)h[m]=arguments[m+2];a.children=h}if(t&&t.defaultProps)for(n in d=t.defaultProps,d)a[n]===void 0&&(a[n]=d[n]);return{$$typeof:Li,type:t,key:o,ref:c,props:a,_owner:Ru.current}}function Rv(t,e){return{$$typeof:Li,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Iu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Li}function Iv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var tf=/\/+/g;function zl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Iv(""+t.key):e.toString(36)}function Ia(t,e,r,n,a){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case Li:case jv:c=!0}}if(c)return c=t,a=a(c),t=n===""?"."+zl(c,0):n,ef(a)?(r="",t!=null&&(r=t.replace(tf,"$&/")+"/"),Ia(a,e,r,"",function(m){return m})):a!=null&&(Iu(a)&&(a=Rv(a,r+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(tf,"$&/")+"/")+t)),e.push(a)),1;if(c=0,n=n===""?".":n+":",ef(t))for(var d=0;d<t.length;d++){o=t[d];var h=n+zl(o,d);c+=Ia(o,e,r,h,a)}else if(h=Lv(t),typeof h=="function")for(t=h.call(t),d=0;!(o=t.next()).done;)o=o.value,h=n+zl(o,d++),c+=Ia(o,e,r,h,a);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function la(t,e,r){if(t==null)return t;var n=[],a=0;return Ia(t,n,"","",function(o){return e.call(r,o,a++)}),n}function Dv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ut={current:null},Da={transition:null},zv={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:Da,ReactCurrentOwner:Ru};function ep(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:la,forEach:function(t,e,r){la(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return la(t,function(){e++}),e},toArray:function(t){return la(t,function(e){return e})||[]},only:function(t){if(!Iu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=ws;he.Fragment=Nv;he.Profiler=Sv;he.PureComponent=Ou;he.StrictMode=kv;he.Suspense=Cv;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zv;he.act=ep;he.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Km({},t.props),a=t.key,o=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=Ru.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(h in e)Jm.call(e,h)&&!Xm.hasOwnProperty(h)&&(n[h]=e[h]===void 0&&d!==void 0?d[h]:e[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){d=Array(h);for(var m=0;m<h;m++)d[m]=arguments[m+2];n.children=d}return{$$typeof:Li,type:t.type,key:a,ref:o,props:n,_owner:c}};he.createContext=function(t){return t={$$typeof:Pv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ev,_context:t},t.Consumer=t};he.createElement=Qm;he.createFactory=function(t){var e=Qm.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:Tv,render:t}};he.isValidElement=Iu;he.lazy=function(t){return{$$typeof:Ov,_payload:{_status:-1,_result:t},_init:Dv}};he.memo=function(t,e){return{$$typeof:Av,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Da.transition;Da.transition={};try{t()}finally{Da.transition=e}};he.unstable_act=ep;he.useCallback=function(t,e){return ut.current.useCallback(t,e)};he.useContext=function(t){return ut.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return ut.current.useDeferredValue(t)};he.useEffect=function(t,e){return ut.current.useEffect(t,e)};he.useId=function(){return ut.current.useId()};he.useImperativeHandle=function(t,e,r){return ut.current.useImperativeHandle(t,e,r)};he.useInsertionEffect=function(t,e){return ut.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return ut.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return ut.current.useMemo(t,e)};he.useReducer=function(t,e,r){return ut.current.useReducer(t,e,r)};he.useRef=function(t){return ut.current.useRef(t)};he.useState=function(t){return ut.current.useState(t)};he.useSyncExternalStore=function(t,e,r){return ut.current.useSyncExternalStore(t,e,r)};he.useTransition=function(){return ut.current.useTransition()};he.version="18.3.1";Zm.exports=he;var S=Zm.exports;const hs=Au(S),Mv=Wm({__proto__:null,default:hs},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv=S,Uv=Symbol.for("react.element"),$v=Symbol.for("react.fragment"),Fv=Object.prototype.hasOwnProperty,Hv=Bv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wv={key:!0,ref:!0,__self:!0,__source:!0};function tp(t,e,r){var n,a={},o=null,c=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(n in e)Fv.call(e,n)&&!Wv.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Uv,type:t,key:o,ref:c,props:a,_owner:Hv.current}}Oo.Fragment=$v;Oo.jsx=tp;Oo.jsxs=tp;Vm.exports=Oo;var i=Vm.exports,xc={},rp={exports:{}},Et={},np={exports:{}},sp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,W){var U=M.length;M.push(W);e:for(;0<U;){var Y=U-1>>>1,H=M[Y];if(0<a(H,W))M[Y]=W,M[U]=H,U=Y;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var W=M[0],U=M.pop();if(U!==W){M[0]=U;e:for(var Y=0,H=M.length,de=H>>>1;Y<de;){var fe=2*(Y+1)-1,ne=M[fe],ae=fe+1,ft=M[ae];if(0>a(ne,U))ae<H&&0>a(ft,ne)?(M[Y]=ft,M[ae]=U,Y=ae):(M[Y]=ne,M[fe]=U,Y=fe);else if(ae<H&&0>a(ft,U))M[Y]=ft,M[ae]=U,Y=ae;else break e}}return W}function a(M,W){var U=M.sortIndex-W.sortIndex;return U!==0?U:M.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],m=[],g=1,x=null,v=3,_=!1,y=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(M){for(var W=r(m);W!==null;){if(W.callback===null)n(m);else if(W.startTime<=M)n(m),W.sortIndex=W.expirationTime,e(h,W);else break;W=r(m)}}function T(M){if(b=!1,k(M),!y)if(r(h)!==null)y=!0,V(D);else{var W=r(m);W!==null&&G(T,W.startTime-M)}}function D(M,W){y=!1,b&&(b=!1,N(B),B=-1),_=!0;var U=v;try{for(k(W),x=r(h);x!==null&&(!(x.expirationTime>W)||M&&!te());){var Y=x.callback;if(typeof Y=="function"){x.callback=null,v=x.priorityLevel;var H=Y(x.expirationTime<=W);W=t.unstable_now(),typeof H=="function"?x.callback=H:x===r(h)&&n(h),k(W)}else n(h);x=r(h)}if(x!==null)var de=!0;else{var fe=r(m);fe!==null&&G(T,fe.startTime-W),de=!1}return de}finally{x=null,v=U,_=!1}}var z=!1,C=null,B=-1,O=5,Z=-1;function te(){return!(t.unstable_now()-Z<O)}function X(){if(C!==null){var M=t.unstable_now();Z=M;var W=!0;try{W=C(!0,M)}finally{W?le():(z=!1,C=null)}}else z=!1}var le;if(typeof j=="function")le=function(){j(X)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,at=_e.port2;_e.port1.onmessage=X,le=function(){at.postMessage(null)}}else le=function(){E(X,0)};function V(M){C=M,z||(z=!0,le())}function G(M,W){B=E(function(){M(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){y||_||(y=!0,V(D))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(M){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var U=v;v=W;try{return M()}finally{v=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var U=v;v=M;try{return W()}finally{v=U}},t.unstable_scheduleCallback=function(M,W,U){var Y=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Y+U:Y):U=Y,M){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=U+H,M={id:g++,callback:W,priorityLevel:M,startTime:U,expirationTime:H,sortIndex:-1},U>Y?(M.sortIndex=U,e(m,M),r(h)===null&&M===r(m)&&(b?(N(B),B=-1):b=!0,G(T,U-Y))):(M.sortIndex=H,e(h,M),y||_||(y=!0,V(D))),M},t.unstable_shouldYield=te,t.unstable_wrapCallback=function(M){var W=v;return function(){var U=v;v=W;try{return M.apply(this,arguments)}finally{v=U}}}})(sp);np.exports=sp;var Vv=np.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv=S,St=Vv;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ip=new Set,di={};function Sn(t,e){fs(t,e),fs(t+"Capture",e)}function fs(t,e){for(di[t]=e,t=0;t<e.length;t++)ip.add(e[t])}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=Object.prototype.hasOwnProperty,qv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rf={},nf={};function Kv(t){return yc.call(nf,t)?!0:yc.call(rf,t)?!1:qv.test(t)?nf[t]=!0:(rf[t]=!0,!1)}function Gv(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yv(t,e,r,n){if(e===null||typeof e>"u"||Gv(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,r,n,a,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Du=/[\-:]([a-z])/g;function zu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Du,zu);et[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Du,zu);et[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Du,zu);et[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mu(t,e,r,n){var a=et.hasOwnProperty(e)?et[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yv(e,r,a,n)&&(r=null),n||a===null?Kv(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var br=Zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ca=Symbol.for("react.element"),Zn=Symbol.for("react.portal"),qn=Symbol.for("react.fragment"),Bu=Symbol.for("react.strict_mode"),vc=Symbol.for("react.profiler"),ap=Symbol.for("react.provider"),op=Symbol.for("react.context"),Uu=Symbol.for("react.forward_ref"),_c=Symbol.for("react.suspense"),bc=Symbol.for("react.suspense_list"),$u=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),lp=Symbol.for("react.offscreen"),sf=Symbol.iterator;function $s(t){return t===null||typeof t!="object"?null:(t=sf&&t[sf]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,Ml;function Gs(t){if(Ml===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ml=e&&e[1]||""}return`
`+Ml+t}var Bl=!1;function Ul(t,e){if(!t||Bl)return"";Bl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var n=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){n=m}t.call(e.prototype)}else{try{throw Error()}catch(m){n=m}t()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),o=n.stack.split(`
`),c=a.length-1,d=o.length-1;1<=c&&0<=d&&a[c]!==o[d];)d--;for(;1<=c&&0<=d;c--,d--)if(a[c]!==o[d]){if(c!==1||d!==1)do if(c--,d--,0>d||a[c]!==o[d]){var h=`
`+a[c].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=c&&0<=d);break}}}finally{Bl=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Gs(t):""}function Jv(t){switch(t.tag){case 5:return Gs(t.type);case 16:return Gs("Lazy");case 13:return Gs("Suspense");case 19:return Gs("SuspenseList");case 0:case 2:case 15:return t=Ul(t.type,!1),t;case 11:return t=Ul(t.type.render,!1),t;case 1:return t=Ul(t.type,!0),t;default:return""}}function wc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qn:return"Fragment";case Zn:return"Portal";case vc:return"Profiler";case Bu:return"StrictMode";case _c:return"Suspense";case bc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case op:return(t.displayName||"Context")+".Consumer";case ap:return(t._context.displayName||"Context")+".Provider";case Uu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $u:return e=t.displayName||null,e!==null?e:wc(t.type)||"Memo";case Pr:e=t._payload,t=t._init;try{return wc(t(e))}catch{}}return null}function Xv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wc(e);case 8:return e===Bu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qv(t){var e=cp(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(c){n=""+c,o.call(this,c)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(c){n=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ua(t){t._valueTracker||(t._valueTracker=Qv(t))}function up(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=cp(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ja(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jc(t,e){var r=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function af(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Vr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dp(t,e){e=e.checked,e!=null&&Mu(t,"checked",e,!1)}function Nc(t,e){dp(t,e);var r=Vr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kc(t,e.type,r):e.hasOwnProperty("defaultValue")&&kc(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function of(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function kc(t,e,r){(e!=="number"||Ja(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ys=Array.isArray;function ss(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Vr(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Sc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lf(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(F(92));if(Ys(r)){if(1<r.length)throw Error(F(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Vr(r)}}function hp(t,e){var r=Vr(e.value),n=Vr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function cf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ec(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var da,mp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(da=da||document.createElement("div"),da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hi(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e_=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){e_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ri[e]=ri[t]})});function pp(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ri.hasOwnProperty(t)&&ri[t]?(""+e).trim():e+"px"}function gp(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=pp(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var t_=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pc(t,e){if(e){if(t_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Tc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cc=null;function Fu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ac=null,is=null,as=null;function uf(t){if(t=Di(t)){if(typeof Ac!="function")throw Error(F(280));var e=t.stateNode;e&&(e=zo(e),Ac(t.stateNode,t.type,e))}}function xp(t){is?as?as.push(t):as=[t]:is=t}function yp(){if(is){var t=is,e=as;if(as=is=null,uf(t),e)for(t=0;t<e.length;t++)uf(e[t])}}function vp(t,e){return t(e)}function _p(){}var $l=!1;function bp(t,e,r){if($l)return t(e,r);$l=!0;try{return vp(t,e,r)}finally{$l=!1,(is!==null||as!==null)&&(_p(),yp())}}function fi(t,e){var r=t.stateNode;if(r===null)return null;var n=zo(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(F(231,e,typeof r));return r}var Oc=!1;if(xr)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){Oc=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{Oc=!1}function r_(t,e,r,n,a,o,c,d,h){var m=Array.prototype.slice.call(arguments,3);try{e.apply(r,m)}catch(g){this.onError(g)}}var ni=!1,Xa=null,Qa=!1,Lc=null,n_={onError:function(t){ni=!0,Xa=t}};function s_(t,e,r,n,a,o,c,d,h){ni=!1,Xa=null,r_.apply(n_,arguments)}function i_(t,e,r,n,a,o,c,d,h){if(s_.apply(this,arguments),ni){if(ni){var m=Xa;ni=!1,Xa=null}else throw Error(F(198));Qa||(Qa=!0,Lc=m)}}function En(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function wp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function df(t){if(En(t)!==t)throw Error(F(188))}function a_(t){var e=t.alternate;if(!e){if(e=En(t),e===null)throw Error(F(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return df(a),t;if(o===n)return df(a),e;o=o.sibling}throw Error(F(188))}if(r.return!==n.return)r=a,n=o;else{for(var c=!1,d=a.child;d;){if(d===r){c=!0,r=a,n=o;break}if(d===n){c=!0,n=a,r=o;break}d=d.sibling}if(!c){for(d=o.child;d;){if(d===r){c=!0,r=o,n=a;break}if(d===n){c=!0,n=o,r=a;break}d=d.sibling}if(!c)throw Error(F(189))}}if(r.alternate!==n)throw Error(F(190))}if(r.tag!==3)throw Error(F(188));return r.stateNode.current===r?t:e}function jp(t){return t=a_(t),t!==null?Np(t):null}function Np(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Np(t);if(e!==null)return e;t=t.sibling}return null}var kp=St.unstable_scheduleCallback,hf=St.unstable_cancelCallback,o_=St.unstable_shouldYield,l_=St.unstable_requestPaint,Ie=St.unstable_now,c_=St.unstable_getCurrentPriorityLevel,Hu=St.unstable_ImmediatePriority,Sp=St.unstable_UserBlockingPriority,eo=St.unstable_NormalPriority,u_=St.unstable_LowPriority,Ep=St.unstable_IdlePriority,Lo=null,ir=null;function d_(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(Lo,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:m_,h_=Math.log,f_=Math.LN2;function m_(t){return t>>>=0,t===0?32:31-(h_(t)/f_|0)|0}var ha=64,fa=4194304;function Js(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function to(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,o=t.pingedLanes,c=r&268435455;if(c!==0){var d=c&~a;d!==0?n=Js(d):(o&=c,o!==0&&(n=Js(o)))}else c=r&~a,c!==0?n=Js(c):o!==0&&(n=Js(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,o=e&-e,a>=o||a===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Kt(e),a=1<<r,n|=t[r],e&=~a;return n}function p_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g_(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,o=t.pendingLanes;0<o;){var c=31-Kt(o),d=1<<c,h=a[c];h===-1?(!(d&r)||d&n)&&(a[c]=p_(d,e)):h<=e&&(t.expiredLanes|=d),o&=~d}}function Rc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pp(){var t=ha;return ha<<=1,!(ha&4194240)&&(ha=64),t}function Fl(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ri(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kt(e),t[e]=r}function x_(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Kt(r),o=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~o}}function Wu(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Kt(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var ye=0;function Tp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cp,Vu,Ap,Op,Lp,Ic=!1,ma=[],zr=null,Mr=null,Br=null,mi=new Map,pi=new Map,Cr=[],y_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ff(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":mi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pi.delete(e.pointerId)}}function Hs(t,e,r,n,a,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},e!==null&&(e=Di(e),e!==null&&Vu(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function v_(t,e,r,n,a){switch(e){case"focusin":return zr=Hs(zr,t,e,r,n,a),!0;case"dragenter":return Mr=Hs(Mr,t,e,r,n,a),!0;case"mouseover":return Br=Hs(Br,t,e,r,n,a),!0;case"pointerover":var o=a.pointerId;return mi.set(o,Hs(mi.get(o)||null,t,e,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,pi.set(o,Hs(pi.get(o)||null,t,e,r,n,a)),!0}return!1}function Rp(t){var e=mn(t.target);if(e!==null){var r=En(e);if(r!==null){if(e=r.tag,e===13){if(e=wp(r),e!==null){t.blockedOn=e,Lp(t.priority,function(){Ap(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function za(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Dc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Cc=n,r.target.dispatchEvent(n),Cc=null}else return e=Di(r),e!==null&&Vu(e),t.blockedOn=r,!1;e.shift()}return!0}function mf(t,e,r){za(t)&&r.delete(e)}function __(){Ic=!1,zr!==null&&za(zr)&&(zr=null),Mr!==null&&za(Mr)&&(Mr=null),Br!==null&&za(Br)&&(Br=null),mi.forEach(mf),pi.forEach(mf)}function Ws(t,e){t.blockedOn===e&&(t.blockedOn=null,Ic||(Ic=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,__)))}function gi(t){function e(a){return Ws(a,t)}if(0<ma.length){Ws(ma[0],t);for(var r=1;r<ma.length;r++){var n=ma[r];n.blockedOn===t&&(n.blockedOn=null)}}for(zr!==null&&Ws(zr,t),Mr!==null&&Ws(Mr,t),Br!==null&&Ws(Br,t),mi.forEach(e),pi.forEach(e),r=0;r<Cr.length;r++)n=Cr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Cr.length&&(r=Cr[0],r.blockedOn===null);)Rp(r),r.blockedOn===null&&Cr.shift()}var os=br.ReactCurrentBatchConfig,ro=!0;function b_(t,e,r,n){var a=ye,o=os.transition;os.transition=null;try{ye=1,Zu(t,e,r,n)}finally{ye=a,os.transition=o}}function w_(t,e,r,n){var a=ye,o=os.transition;os.transition=null;try{ye=4,Zu(t,e,r,n)}finally{ye=a,os.transition=o}}function Zu(t,e,r,n){if(ro){var a=Dc(t,e,r,n);if(a===null)Xl(t,e,n,no,r),ff(t,n);else if(v_(a,t,e,r,n))n.stopPropagation();else if(ff(t,n),e&4&&-1<y_.indexOf(t)){for(;a!==null;){var o=Di(a);if(o!==null&&Cp(o),o=Dc(t,e,r,n),o===null&&Xl(t,e,n,no,r),o===a)break;a=o}a!==null&&n.stopPropagation()}else Xl(t,e,n,null,r)}}var no=null;function Dc(t,e,r,n){if(no=null,t=Fu(n),t=mn(t),t!==null)if(e=En(t),e===null)t=null;else if(r=e.tag,r===13){if(t=wp(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return no=t,null}function Ip(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c_()){case Hu:return 1;case Sp:return 4;case eo:case u_:return 16;case Ep:return 536870912;default:return 16}default:return 16}}var Rr=null,qu=null,Ma=null;function Dp(){if(Ma)return Ma;var t,e=qu,r=e.length,n,a="value"in Rr?Rr.value:Rr.textContent,o=a.length;for(t=0;t<r&&e[t]===a[t];t++);var c=r-t;for(n=1;n<=c&&e[r-n]===a[o-n];n++);return Ma=a.slice(t,1<n?1-n:void 0)}function Ba(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pa(){return!0}function pf(){return!1}function Pt(t){function e(r,n,a,o,c){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(r=t[d],this[d]=r?r(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?pa:pf,this.isPropagationStopped=pf,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),e}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ku=Pt(js),Ii=Oe({},js,{view:0,detail:0}),j_=Pt(Ii),Hl,Wl,Vs,Ro=Oe({},Ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vs&&(Vs&&t.type==="mousemove"?(Hl=t.screenX-Vs.screenX,Wl=t.screenY-Vs.screenY):Wl=Hl=0,Vs=t),Hl)},movementY:function(t){return"movementY"in t?t.movementY:Wl}}),gf=Pt(Ro),N_=Oe({},Ro,{dataTransfer:0}),k_=Pt(N_),S_=Oe({},Ii,{relatedTarget:0}),Vl=Pt(S_),E_=Oe({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),P_=Pt(E_),T_=Oe({},js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C_=Pt(T_),A_=Oe({},js,{data:0}),xf=Pt(A_),O_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=R_[t])?!!e[t]:!1}function Gu(){return I_}var D_=Oe({},Ii,{key:function(t){if(t.key){var e=O_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ba(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?L_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gu,charCode:function(t){return t.type==="keypress"?Ba(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ba(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),z_=Pt(D_),M_=Oe({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yf=Pt(M_),B_=Oe({},Ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gu}),U_=Pt(B_),$_=Oe({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),F_=Pt($_),H_=Oe({},Ro,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),W_=Pt(H_),V_=[9,13,27,32],Yu=xr&&"CompositionEvent"in window,si=null;xr&&"documentMode"in document&&(si=document.documentMode);var Z_=xr&&"TextEvent"in window&&!si,zp=xr&&(!Yu||si&&8<si&&11>=si),vf=" ",_f=!1;function Mp(t,e){switch(t){case"keyup":return V_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kn=!1;function q_(t,e){switch(t){case"compositionend":return Bp(e);case"keypress":return e.which!==32?null:(_f=!0,vf);case"textInput":return t=e.data,t===vf&&_f?null:t;default:return null}}function K_(t,e){if(Kn)return t==="compositionend"||!Yu&&Mp(t,e)?(t=Dp(),Ma=qu=Rr=null,Kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zp&&e.locale!=="ko"?null:e.data;default:return null}}var G_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!G_[t.type]:e==="textarea"}function Up(t,e,r,n){xp(n),e=so(e,"onChange"),0<e.length&&(r=new Ku("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ii=null,xi=null;function Y_(t){Jp(t,0)}function Io(t){var e=Jn(t);if(up(e))return t}function J_(t,e){if(t==="change")return e}var $p=!1;if(xr){var Zl;if(xr){var ql="oninput"in document;if(!ql){var wf=document.createElement("div");wf.setAttribute("oninput","return;"),ql=typeof wf.oninput=="function"}Zl=ql}else Zl=!1;$p=Zl&&(!document.documentMode||9<document.documentMode)}function jf(){ii&&(ii.detachEvent("onpropertychange",Fp),xi=ii=null)}function Fp(t){if(t.propertyName==="value"&&Io(xi)){var e=[];Up(e,xi,t,Fu(t)),bp(Y_,e)}}function X_(t,e,r){t==="focusin"?(jf(),ii=e,xi=r,ii.attachEvent("onpropertychange",Fp)):t==="focusout"&&jf()}function Q_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Io(xi)}function eb(t,e){if(t==="click")return Io(e)}function tb(t,e){if(t==="input"||t==="change")return Io(e)}function rb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:rb;function yi(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!yc.call(e,a)||!Yt(t[a],e[a]))return!1}return!0}function Nf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kf(t,e){var r=Nf(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nf(r)}}function Hp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wp(){for(var t=window,e=Ja();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ja(t.document)}return e}function Ju(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nb(t){var e=Wp(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Hp(r.ownerDocument.documentElement,r)){if(n!==null&&Ju(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=n.end===void 0?o:Math.min(n.end,a),!t.extend&&o>n&&(a=n,n=o,o=a),a=kf(r,o);var c=kf(r,n);a&&c&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sb=xr&&"documentMode"in document&&11>=document.documentMode,Gn=null,zc=null,ai=null,Mc=!1;function Sf(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Mc||Gn==null||Gn!==Ja(n)||(n=Gn,"selectionStart"in n&&Ju(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ai&&yi(ai,n)||(ai=n,n=so(zc,"onSelect"),0<n.length&&(e=new Ku("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Gn)))}function ga(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Yn={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionend:ga("Transition","TransitionEnd")},Kl={},Vp={};xr&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function Do(t){if(Kl[t])return Kl[t];if(!Yn[t])return t;var e=Yn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Vp)return Kl[t]=e[r];return t}var Zp=Do("animationend"),qp=Do("animationiteration"),Kp=Do("animationstart"),Gp=Do("transitionend"),Yp=new Map,Ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(t,e){Yp.set(t,e),Sn(e,[t])}for(var Gl=0;Gl<Ef.length;Gl++){var Yl=Ef[Gl],ib=Yl.toLowerCase(),ab=Yl[0].toUpperCase()+Yl.slice(1);qr(ib,"on"+ab)}qr(Zp,"onAnimationEnd");qr(qp,"onAnimationIteration");qr(Kp,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(Gp,"onTransitionEnd");fs("onMouseEnter",["mouseout","mouseover"]);fs("onMouseLeave",["mouseout","mouseover"]);fs("onPointerEnter",["pointerout","pointerover"]);fs("onPointerLeave",["pointerout","pointerover"]);Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ob=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xs));function Pf(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,i_(n,e,void 0,t),t.currentTarget=null}function Jp(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var c=n.length-1;0<=c;c--){var d=n[c],h=d.instance,m=d.currentTarget;if(d=d.listener,h!==o&&a.isPropagationStopped())break e;Pf(a,d,m),o=h}else for(c=0;c<n.length;c++){if(d=n[c],h=d.instance,m=d.currentTarget,d=d.listener,h!==o&&a.isPropagationStopped())break e;Pf(a,d,m),o=h}}}if(Qa)throw t=Lc,Qa=!1,Lc=null,t}function ke(t,e){var r=e[Hc];r===void 0&&(r=e[Hc]=new Set);var n=t+"__bubble";r.has(n)||(Xp(e,t,2,!1),r.add(n))}function Jl(t,e,r){var n=0;e&&(n|=4),Xp(r,t,n,e)}var xa="_reactListening"+Math.random().toString(36).slice(2);function vi(t){if(!t[xa]){t[xa]=!0,ip.forEach(function(r){r!=="selectionchange"&&(ob.has(r)||Jl(r,!1,t),Jl(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xa]||(e[xa]=!0,Jl("selectionchange",!1,e))}}function Xp(t,e,r,n){switch(Ip(e)){case 1:var a=b_;break;case 4:a=w_;break;default:a=Zu}r=a.bind(null,e,r,t),a=void 0,!Oc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Xl(t,e,r,n,a){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var c=n.tag;if(c===3||c===4){var d=n.stateNode.containerInfo;if(d===a||d.nodeType===8&&d.parentNode===a)break;if(c===4)for(c=n.return;c!==null;){var h=c.tag;if((h===3||h===4)&&(h=c.stateNode.containerInfo,h===a||h.nodeType===8&&h.parentNode===a))return;c=c.return}for(;d!==null;){if(c=mn(d),c===null)return;if(h=c.tag,h===5||h===6){n=o=c;continue e}d=d.parentNode}}n=n.return}bp(function(){var m=o,g=Fu(r),x=[];e:{var v=Yp.get(t);if(v!==void 0){var _=Ku,y=t;switch(t){case"keypress":if(Ba(r)===0)break e;case"keydown":case"keyup":_=z_;break;case"focusin":y="focus",_=Vl;break;case"focusout":y="blur",_=Vl;break;case"beforeblur":case"afterblur":_=Vl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=k_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=U_;break;case Zp:case qp:case Kp:_=P_;break;case Gp:_=F_;break;case"scroll":_=j_;break;case"wheel":_=W_;break;case"copy":case"cut":case"paste":_=C_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=yf}var b=(e&4)!==0,E=!b&&t==="scroll",N=b?v!==null?v+"Capture":null:v;b=[];for(var j=m,k;j!==null;){k=j;var T=k.stateNode;if(k.tag===5&&T!==null&&(k=T,N!==null&&(T=fi(j,N),T!=null&&b.push(_i(j,T,k)))),E)break;j=j.return}0<b.length&&(v=new _(v,y,null,r,g),x.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",v&&r!==Cc&&(y=r.relatedTarget||r.fromElement)&&(mn(y)||y[yr]))break e;if((_||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,_?(y=r.relatedTarget||r.toElement,_=m,y=y?mn(y):null,y!==null&&(E=En(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(_=null,y=m),_!==y)){if(b=gf,T="onMouseLeave",N="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(b=yf,T="onPointerLeave",N="onPointerEnter",j="pointer"),E=_==null?v:Jn(_),k=y==null?v:Jn(y),v=new b(T,j+"leave",_,r,g),v.target=E,v.relatedTarget=k,T=null,mn(g)===m&&(b=new b(N,j+"enter",y,r,g),b.target=k,b.relatedTarget=E,T=b),E=T,_&&y)t:{for(b=_,N=y,j=0,k=b;k;k=Bn(k))j++;for(k=0,T=N;T;T=Bn(T))k++;for(;0<j-k;)b=Bn(b),j--;for(;0<k-j;)N=Bn(N),k--;for(;j--;){if(b===N||N!==null&&b===N.alternate)break t;b=Bn(b),N=Bn(N)}b=null}else b=null;_!==null&&Tf(x,v,_,b,!1),y!==null&&E!==null&&Tf(x,E,y,b,!0)}}e:{if(v=m?Jn(m):window,_=v.nodeName&&v.nodeName.toLowerCase(),_==="select"||_==="input"&&v.type==="file")var D=J_;else if(bf(v))if($p)D=tb;else{D=Q_;var z=X_}else(_=v.nodeName)&&_.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(D=eb);if(D&&(D=D(t,m))){Up(x,D,r,g);break e}z&&z(t,v,m),t==="focusout"&&(z=v._wrapperState)&&z.controlled&&v.type==="number"&&kc(v,"number",v.value)}switch(z=m?Jn(m):window,t){case"focusin":(bf(z)||z.contentEditable==="true")&&(Gn=z,zc=m,ai=null);break;case"focusout":ai=zc=Gn=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,Sf(x,r,g);break;case"selectionchange":if(sb)break;case"keydown":case"keyup":Sf(x,r,g)}var C;if(Yu)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Kn?Mp(t,r)&&(B="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(B="onCompositionStart");B&&(zp&&r.locale!=="ko"&&(Kn||B!=="onCompositionStart"?B==="onCompositionEnd"&&Kn&&(C=Dp()):(Rr=g,qu="value"in Rr?Rr.value:Rr.textContent,Kn=!0)),z=so(m,B),0<z.length&&(B=new xf(B,t,null,r,g),x.push({event:B,listeners:z}),C?B.data=C:(C=Bp(r),C!==null&&(B.data=C)))),(C=Z_?q_(t,r):K_(t,r))&&(m=so(m,"onBeforeInput"),0<m.length&&(g=new xf("onBeforeInput","beforeinput",null,r,g),x.push({event:g,listeners:m}),g.data=C))}Jp(x,e)})}function _i(t,e,r){return{instance:t,listener:e,currentTarget:r}}function so(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=fi(t,r),o!=null&&n.unshift(_i(t,o,a)),o=fi(t,e),o!=null&&n.push(_i(t,o,a))),t=t.return}return n}function Bn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tf(t,e,r,n,a){for(var o=e._reactName,c=[];r!==null&&r!==n;){var d=r,h=d.alternate,m=d.stateNode;if(h!==null&&h===n)break;d.tag===5&&m!==null&&(d=m,a?(h=fi(r,o),h!=null&&c.unshift(_i(r,h,d))):a||(h=fi(r,o),h!=null&&c.push(_i(r,h,d)))),r=r.return}c.length!==0&&t.push({event:e,listeners:c})}var lb=/\r\n?/g,cb=/\u0000|\uFFFD/g;function Cf(t){return(typeof t=="string"?t:""+t).replace(lb,`
`).replace(cb,"")}function ya(t,e,r){if(e=Cf(e),Cf(t)!==e&&r)throw Error(F(425))}function io(){}var Bc=null,Uc=null;function $c(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fc=typeof setTimeout=="function"?setTimeout:void 0,ub=typeof clearTimeout=="function"?clearTimeout:void 0,Af=typeof Promise=="function"?Promise:void 0,db=typeof queueMicrotask=="function"?queueMicrotask:typeof Af<"u"?function(t){return Af.resolve(null).then(t).catch(hb)}:Fc;function hb(t){setTimeout(function(){throw t})}function Ql(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),gi(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);gi(e)}function Ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Of(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),sr="__reactFiber$"+Ns,bi="__reactProps$"+Ns,yr="__reactContainer$"+Ns,Hc="__reactEvents$"+Ns,fb="__reactListeners$"+Ns,mb="__reactHandles$"+Ns;function mn(t){var e=t[sr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[yr]||r[sr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Of(t);t!==null;){if(r=t[sr])return r;t=Of(t)}return e}t=r,r=t.parentNode}return null}function Di(t){return t=t[sr]||t[yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function zo(t){return t[bi]||null}var Wc=[],Xn=-1;function Kr(t){return{current:t}}function Se(t){0>Xn||(t.current=Wc[Xn],Wc[Xn]=null,Xn--)}function je(t,e){Xn++,Wc[Xn]=t.current,t.current=e}var Zr={},it=Kr(Zr),vt=Kr(!1),bn=Zr;function ms(t,e){var r=t.type.contextTypes;if(!r)return Zr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function _t(t){return t=t.childContextTypes,t!=null}function ao(){Se(vt),Se(it)}function Lf(t,e,r){if(it.current!==Zr)throw Error(F(168));je(it,e),je(vt,r)}function Qp(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(F(108,Xv(t)||"Unknown",a));return Oe({},r,n)}function oo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zr,bn=it.current,je(it,t),je(vt,vt.current),!0}function Rf(t,e,r){var n=t.stateNode;if(!n)throw Error(F(169));r?(t=Qp(t,e,bn),n.__reactInternalMemoizedMergedChildContext=t,Se(vt),Se(it),je(it,t)):Se(vt),je(vt,r)}var fr=null,Mo=!1,ec=!1;function eg(t){fr===null?fr=[t]:fr.push(t)}function pb(t){Mo=!0,eg(t)}function Gr(){if(!ec&&fr!==null){ec=!0;var t=0,e=ye;try{var r=fr;for(ye=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}fr=null,Mo=!1}catch(a){throw fr!==null&&(fr=fr.slice(t+1)),kp(Hu,Gr),a}finally{ye=e,ec=!1}}return null}var Qn=[],es=0,lo=null,co=0,Ot=[],Lt=0,wn=null,mr=1,pr="";function on(t,e){Qn[es++]=co,Qn[es++]=lo,lo=t,co=e}function tg(t,e,r){Ot[Lt++]=mr,Ot[Lt++]=pr,Ot[Lt++]=wn,wn=t;var n=mr;t=pr;var a=32-Kt(n)-1;n&=~(1<<a),r+=1;var o=32-Kt(e)+a;if(30<o){var c=a-a%5;o=(n&(1<<c)-1).toString(32),n>>=c,a-=c,mr=1<<32-Kt(e)+a|r<<a|n,pr=o+t}else mr=1<<o|r<<a|n,pr=t}function Xu(t){t.return!==null&&(on(t,1),tg(t,1,0))}function Qu(t){for(;t===lo;)lo=Qn[--es],Qn[es]=null,co=Qn[--es],Qn[es]=null;for(;t===wn;)wn=Ot[--Lt],Ot[Lt]=null,pr=Ot[--Lt],Ot[Lt]=null,mr=Ot[--Lt],Ot[Lt]=null}var kt=null,Nt=null,Pe=!1,Zt=null;function rg(t,e){var r=Rt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function If(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kt=t,Nt=Ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kt=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=wn!==null?{id:mr,overflow:pr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Rt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,kt=t,Nt=null,!0):!1;default:return!1}}function Vc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zc(t){if(Pe){var e=Nt;if(e){var r=e;if(!If(t,e)){if(Vc(t))throw Error(F(418));e=Ur(r.nextSibling);var n=kt;e&&If(t,e)?rg(n,r):(t.flags=t.flags&-4097|2,Pe=!1,kt=t)}}else{if(Vc(t))throw Error(F(418));t.flags=t.flags&-4097|2,Pe=!1,kt=t}}}function Df(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kt=t}function va(t){if(t!==kt)return!1;if(!Pe)return Df(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$c(t.type,t.memoizedProps)),e&&(e=Nt)){if(Vc(t))throw ng(),Error(F(418));for(;e;)rg(t,e),e=Ur(e.nextSibling)}if(Df(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Nt=Ur(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=kt?Ur(t.stateNode.nextSibling):null;return!0}function ng(){for(var t=Nt;t;)t=Ur(t.nextSibling)}function ps(){Nt=kt=null,Pe=!1}function ed(t){Zt===null?Zt=[t]:Zt.push(t)}var gb=br.ReactCurrentBatchConfig;function Zs(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(F(309));var n=r.stateNode}if(!n)throw Error(F(147,t));var a=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var d=a.refs;c===null?delete d[o]:d[o]=c},e._stringRef=o,e)}if(typeof t!="string")throw Error(F(284));if(!r._owner)throw Error(F(290,t))}return t}function _a(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zf(t){var e=t._init;return e(t._payload)}function sg(t){function e(N,j){if(t){var k=N.deletions;k===null?(N.deletions=[j],N.flags|=16):k.push(j)}}function r(N,j){if(!t)return null;for(;j!==null;)e(N,j),j=j.sibling;return null}function n(N,j){for(N=new Map;j!==null;)j.key!==null?N.set(j.key,j):N.set(j.index,j),j=j.sibling;return N}function a(N,j){return N=Wr(N,j),N.index=0,N.sibling=null,N}function o(N,j,k){return N.index=k,t?(k=N.alternate,k!==null?(k=k.index,k<j?(N.flags|=2,j):k):(N.flags|=2,j)):(N.flags|=1048576,j)}function c(N){return t&&N.alternate===null&&(N.flags|=2),N}function d(N,j,k,T){return j===null||j.tag!==6?(j=oc(k,N.mode,T),j.return=N,j):(j=a(j,k),j.return=N,j)}function h(N,j,k,T){var D=k.type;return D===qn?g(N,j,k.props.children,T,k.key):j!==null&&(j.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Pr&&zf(D)===j.type)?(T=a(j,k.props),T.ref=Zs(N,j,k),T.return=N,T):(T=Za(k.type,k.key,k.props,null,N.mode,T),T.ref=Zs(N,j,k),T.return=N,T)}function m(N,j,k,T){return j===null||j.tag!==4||j.stateNode.containerInfo!==k.containerInfo||j.stateNode.implementation!==k.implementation?(j=lc(k,N.mode,T),j.return=N,j):(j=a(j,k.children||[]),j.return=N,j)}function g(N,j,k,T,D){return j===null||j.tag!==7?(j=vn(k,N.mode,T,D),j.return=N,j):(j=a(j,k),j.return=N,j)}function x(N,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return j=oc(""+j,N.mode,k),j.return=N,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ca:return k=Za(j.type,j.key,j.props,null,N.mode,k),k.ref=Zs(N,null,j),k.return=N,k;case Zn:return j=lc(j,N.mode,k),j.return=N,j;case Pr:var T=j._init;return x(N,T(j._payload),k)}if(Ys(j)||$s(j))return j=vn(j,N.mode,k,null),j.return=N,j;_a(N,j)}return null}function v(N,j,k,T){var D=j!==null?j.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return D!==null?null:d(N,j,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ca:return k.key===D?h(N,j,k,T):null;case Zn:return k.key===D?m(N,j,k,T):null;case Pr:return D=k._init,v(N,j,D(k._payload),T)}if(Ys(k)||$s(k))return D!==null?null:g(N,j,k,T,null);_a(N,k)}return null}function _(N,j,k,T,D){if(typeof T=="string"&&T!==""||typeof T=="number")return N=N.get(k)||null,d(j,N,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ca:return N=N.get(T.key===null?k:T.key)||null,h(j,N,T,D);case Zn:return N=N.get(T.key===null?k:T.key)||null,m(j,N,T,D);case Pr:var z=T._init;return _(N,j,k,z(T._payload),D)}if(Ys(T)||$s(T))return N=N.get(k)||null,g(j,N,T,D,null);_a(j,T)}return null}function y(N,j,k,T){for(var D=null,z=null,C=j,B=j=0,O=null;C!==null&&B<k.length;B++){C.index>B?(O=C,C=null):O=C.sibling;var Z=v(N,C,k[B],T);if(Z===null){C===null&&(C=O);break}t&&C&&Z.alternate===null&&e(N,C),j=o(Z,j,B),z===null?D=Z:z.sibling=Z,z=Z,C=O}if(B===k.length)return r(N,C),Pe&&on(N,B),D;if(C===null){for(;B<k.length;B++)C=x(N,k[B],T),C!==null&&(j=o(C,j,B),z===null?D=C:z.sibling=C,z=C);return Pe&&on(N,B),D}for(C=n(N,C);B<k.length;B++)O=_(C,N,B,k[B],T),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?B:O.key),j=o(O,j,B),z===null?D=O:z.sibling=O,z=O);return t&&C.forEach(function(te){return e(N,te)}),Pe&&on(N,B),D}function b(N,j,k,T){var D=$s(k);if(typeof D!="function")throw Error(F(150));if(k=D.call(k),k==null)throw Error(F(151));for(var z=D=null,C=j,B=j=0,O=null,Z=k.next();C!==null&&!Z.done;B++,Z=k.next()){C.index>B?(O=C,C=null):O=C.sibling;var te=v(N,C,Z.value,T);if(te===null){C===null&&(C=O);break}t&&C&&te.alternate===null&&e(N,C),j=o(te,j,B),z===null?D=te:z.sibling=te,z=te,C=O}if(Z.done)return r(N,C),Pe&&on(N,B),D;if(C===null){for(;!Z.done;B++,Z=k.next())Z=x(N,Z.value,T),Z!==null&&(j=o(Z,j,B),z===null?D=Z:z.sibling=Z,z=Z);return Pe&&on(N,B),D}for(C=n(N,C);!Z.done;B++,Z=k.next())Z=_(C,N,B,Z.value,T),Z!==null&&(t&&Z.alternate!==null&&C.delete(Z.key===null?B:Z.key),j=o(Z,j,B),z===null?D=Z:z.sibling=Z,z=Z);return t&&C.forEach(function(X){return e(N,X)}),Pe&&on(N,B),D}function E(N,j,k,T){if(typeof k=="object"&&k!==null&&k.type===qn&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case ca:e:{for(var D=k.key,z=j;z!==null;){if(z.key===D){if(D=k.type,D===qn){if(z.tag===7){r(N,z.sibling),j=a(z,k.props.children),j.return=N,N=j;break e}}else if(z.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Pr&&zf(D)===z.type){r(N,z.sibling),j=a(z,k.props),j.ref=Zs(N,z,k),j.return=N,N=j;break e}r(N,z);break}else e(N,z);z=z.sibling}k.type===qn?(j=vn(k.props.children,N.mode,T,k.key),j.return=N,N=j):(T=Za(k.type,k.key,k.props,null,N.mode,T),T.ref=Zs(N,j,k),T.return=N,N=T)}return c(N);case Zn:e:{for(z=k.key;j!==null;){if(j.key===z)if(j.tag===4&&j.stateNode.containerInfo===k.containerInfo&&j.stateNode.implementation===k.implementation){r(N,j.sibling),j=a(j,k.children||[]),j.return=N,N=j;break e}else{r(N,j);break}else e(N,j);j=j.sibling}j=lc(k,N.mode,T),j.return=N,N=j}return c(N);case Pr:return z=k._init,E(N,j,z(k._payload),T)}if(Ys(k))return y(N,j,k,T);if($s(k))return b(N,j,k,T);_a(N,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,j!==null&&j.tag===6?(r(N,j.sibling),j=a(j,k),j.return=N,N=j):(r(N,j),j=oc(k,N.mode,T),j.return=N,N=j),c(N)):r(N,j)}return E}var gs=sg(!0),ig=sg(!1),uo=Kr(null),ho=null,ts=null,td=null;function rd(){td=ts=ho=null}function nd(t){var e=uo.current;Se(uo),t._currentValue=e}function qc(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ls(t,e){ho=t,td=ts=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yt=!0),t.firstContext=null)}function Dt(t){var e=t._currentValue;if(td!==t)if(t={context:t,memoizedValue:e,next:null},ts===null){if(ho===null)throw Error(F(308));ts=t,ho.dependencies={lanes:0,firstContext:t}}else ts=ts.next=t;return e}var pn=null;function sd(t){pn===null?pn=[t]:pn.push(t)}function ag(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,sd(e)):(r.next=a.next,a.next=r),e.interleaved=r,vr(t,n)}function vr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Tr=!1;function id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function og(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $r(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ge&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,vr(t,r)}return a=n.interleaved,a===null?(e.next=e,sd(n)):(e.next=a.next,a.next=e),n.interleaved=e,vr(t,r)}function Ua(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wu(t,r)}}function Mf(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var c={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=c:o=o.next=c,r=r.next}while(r!==null);o===null?a=o=e:o=o.next=e}else a=o=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function fo(t,e,r,n){var a=t.updateQueue;Tr=!1;var o=a.firstBaseUpdate,c=a.lastBaseUpdate,d=a.shared.pending;if(d!==null){a.shared.pending=null;var h=d,m=h.next;h.next=null,c===null?o=m:c.next=m,c=h;var g=t.alternate;g!==null&&(g=g.updateQueue,d=g.lastBaseUpdate,d!==c&&(d===null?g.firstBaseUpdate=m:d.next=m,g.lastBaseUpdate=h))}if(o!==null){var x=a.baseState;c=0,g=m=h=null,d=o;do{var v=d.lane,_=d.eventTime;if((n&v)===v){g!==null&&(g=g.next={eventTime:_,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var y=t,b=d;switch(v=e,_=r,b.tag){case 1:if(y=b.payload,typeof y=="function"){x=y.call(_,x,v);break e}x=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,v=typeof y=="function"?y.call(_,x,v):y,v==null)break e;x=Oe({},x,v);break e;case 2:Tr=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,v=a.effects,v===null?a.effects=[d]:v.push(d))}else _={eventTime:_,lane:v,tag:d.tag,payload:d.payload,callback:d.callback,next:null},g===null?(m=g=_,h=x):g=g.next=_,c|=v;if(d=d.next,d===null){if(d=a.shared.pending,d===null)break;v=d,d=v.next,v.next=null,a.lastBaseUpdate=v,a.shared.pending=null}}while(!0);if(g===null&&(h=x),a.baseState=h,a.firstBaseUpdate=m,a.lastBaseUpdate=g,e=a.shared.interleaved,e!==null){a=e;do c|=a.lane,a=a.next;while(a!==e)}else o===null&&(a.shared.lanes=0);Nn|=c,t.lanes=c,t.memoizedState=x}}function Bf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(F(191,a));a.call(n)}}}var zi={},ar=Kr(zi),wi=Kr(zi),ji=Kr(zi);function gn(t){if(t===zi)throw Error(F(174));return t}function ad(t,e){switch(je(ji,e),je(wi,t),je(ar,zi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ec(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ec(e,t)}Se(ar),je(ar,e)}function xs(){Se(ar),Se(wi),Se(ji)}function lg(t){gn(ji.current);var e=gn(ar.current),r=Ec(e,t.type);e!==r&&(je(wi,t),je(ar,r))}function od(t){wi.current===t&&(Se(ar),Se(wi))}var Ce=Kr(0);function mo(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tc=[];function ld(){for(var t=0;t<tc.length;t++)tc[t]._workInProgressVersionPrimary=null;tc.length=0}var $a=br.ReactCurrentDispatcher,rc=br.ReactCurrentBatchConfig,jn=0,Ae=null,He=null,qe=null,po=!1,oi=!1,Ni=0,xb=0;function tt(){throw Error(F(321))}function cd(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Yt(t[r],e[r]))return!1;return!0}function ud(t,e,r,n,a,o){if(jn=o,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$a.current=t===null||t.memoizedState===null?bb:wb,t=r(n,a),oi){o=0;do{if(oi=!1,Ni=0,25<=o)throw Error(F(301));o+=1,qe=He=null,e.updateQueue=null,$a.current=jb,t=r(n,a)}while(oi)}if($a.current=go,e=He!==null&&He.next!==null,jn=0,qe=He=Ae=null,po=!1,e)throw Error(F(300));return t}function dd(){var t=Ni!==0;return Ni=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ae.memoizedState=qe=t:qe=qe.next=t,qe}function zt(){if(He===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=qe===null?Ae.memoizedState:qe.next;if(e!==null)qe=e,He=t;else{if(t===null)throw Error(F(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},qe===null?Ae.memoizedState=qe=t:qe=qe.next=t}return qe}function ki(t,e){return typeof e=="function"?e(t):e}function nc(t){var e=zt(),r=e.queue;if(r===null)throw Error(F(311));r.lastRenderedReducer=t;var n=He,a=n.baseQueue,o=r.pending;if(o!==null){if(a!==null){var c=a.next;a.next=o.next,o.next=c}n.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,n=n.baseState;var d=c=null,h=null,m=o;do{var g=m.lane;if((jn&g)===g)h!==null&&(h=h.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:t(n,m.action);else{var x={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};h===null?(d=h=x,c=n):h=h.next=x,Ae.lanes|=g,Nn|=g}m=m.next}while(m!==null&&m!==o);h===null?c=n:h.next=d,Yt(n,e.memoizedState)||(yt=!0),e.memoizedState=n,e.baseState=c,e.baseQueue=h,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do o=a.lane,Ae.lanes|=o,Nn|=o,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function sc(t){var e=zt(),r=e.queue;if(r===null)throw Error(F(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,o=e.memoizedState;if(a!==null){r.pending=null;var c=a=a.next;do o=t(o,c.action),c=c.next;while(c!==a);Yt(o,e.memoizedState)||(yt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function cg(){}function ug(t,e){var r=Ae,n=zt(),a=e(),o=!Yt(n.memoizedState,a);if(o&&(n.memoizedState=a,yt=!0),n=n.queue,hd(fg.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||qe!==null&&qe.memoizedState.tag&1){if(r.flags|=2048,Si(9,hg.bind(null,r,n,a,e),void 0,null),Ke===null)throw Error(F(349));jn&30||dg(r,e,a)}return a}function dg(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function hg(t,e,r,n){e.value=r,e.getSnapshot=n,mg(e)&&pg(t)}function fg(t,e,r){return r(function(){mg(e)&&pg(t)})}function mg(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Yt(t,r)}catch{return!0}}function pg(t){var e=vr(t,1);e!==null&&Gt(e,t,1,-1)}function Uf(t){var e=rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:t},e.queue=t,t=t.dispatch=_b.bind(null,Ae,t),[e.memoizedState,t]}function Si(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function gg(){return zt().memoizedState}function Fa(t,e,r,n){var a=rr();Ae.flags|=t,a.memoizedState=Si(1|e,r,void 0,n===void 0?null:n)}function Bo(t,e,r,n){var a=zt();n=n===void 0?null:n;var o=void 0;if(He!==null){var c=He.memoizedState;if(o=c.destroy,n!==null&&cd(n,c.deps)){a.memoizedState=Si(e,r,o,n);return}}Ae.flags|=t,a.memoizedState=Si(1|e,r,o,n)}function $f(t,e){return Fa(8390656,8,t,e)}function hd(t,e){return Bo(2048,8,t,e)}function xg(t,e){return Bo(4,2,t,e)}function yg(t,e){return Bo(4,4,t,e)}function vg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _g(t,e,r){return r=r!=null?r.concat([t]):null,Bo(4,4,vg.bind(null,e,t),r)}function fd(){}function bg(t,e){var r=zt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&cd(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function wg(t,e){var r=zt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&cd(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function jg(t,e,r){return jn&21?(Yt(r,e)||(r=Pp(),Ae.lanes|=r,Nn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yt=!0),t.memoizedState=r)}function yb(t,e){var r=ye;ye=r!==0&&4>r?r:4,t(!0);var n=rc.transition;rc.transition={};try{t(!1),e()}finally{ye=r,rc.transition=n}}function Ng(){return zt().memoizedState}function vb(t,e,r){var n=Hr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},kg(t))Sg(e,r);else if(r=ag(t,e,r,n),r!==null){var a=ct();Gt(r,t,n,a),Eg(r,e,n)}}function _b(t,e,r){var n=Hr(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(kg(t))Sg(e,a);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,d=o(c,r);if(a.hasEagerState=!0,a.eagerState=d,Yt(d,c)){var h=e.interleaved;h===null?(a.next=a,sd(e)):(a.next=h.next,h.next=a),e.interleaved=a;return}}catch{}finally{}r=ag(t,e,a,n),r!==null&&(a=ct(),Gt(r,t,n,a),Eg(r,e,n))}}function kg(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function Sg(t,e){oi=po=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Eg(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wu(t,r)}}var go={readContext:Dt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},bb={readContext:Dt,useCallback:function(t,e){return rr().memoizedState=[t,e===void 0?null:e],t},useContext:Dt,useEffect:$f,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Fa(4194308,4,vg.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Fa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fa(4,2,t,e)},useMemo:function(t,e){var r=rr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=rr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=vb.bind(null,Ae,t),[n.memoizedState,t]},useRef:function(t){var e=rr();return t={current:t},e.memoizedState=t},useState:Uf,useDebugValue:fd,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=Uf(!1),e=t[0];return t=yb.bind(null,t[1]),rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ae,a=rr();if(Pe){if(r===void 0)throw Error(F(407));r=r()}else{if(r=e(),Ke===null)throw Error(F(349));jn&30||dg(n,e,r)}a.memoizedState=r;var o={value:r,getSnapshot:e};return a.queue=o,$f(fg.bind(null,n,o,t),[t]),n.flags|=2048,Si(9,hg.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=rr(),e=Ke.identifierPrefix;if(Pe){var r=pr,n=mr;r=(n&~(1<<32-Kt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ni++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=xb++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wb={readContext:Dt,useCallback:bg,useContext:Dt,useEffect:hd,useImperativeHandle:_g,useInsertionEffect:xg,useLayoutEffect:yg,useMemo:wg,useReducer:nc,useRef:gg,useState:function(){return nc(ki)},useDebugValue:fd,useDeferredValue:function(t){var e=zt();return jg(e,He.memoizedState,t)},useTransition:function(){var t=nc(ki)[0],e=zt().memoizedState;return[t,e]},useMutableSource:cg,useSyncExternalStore:ug,useId:Ng,unstable_isNewReconciler:!1},jb={readContext:Dt,useCallback:bg,useContext:Dt,useEffect:hd,useImperativeHandle:_g,useInsertionEffect:xg,useLayoutEffect:yg,useMemo:wg,useReducer:sc,useRef:gg,useState:function(){return sc(ki)},useDebugValue:fd,useDeferredValue:function(t){var e=zt();return He===null?e.memoizedState=t:jg(e,He.memoizedState,t)},useTransition:function(){var t=sc(ki)[0],e=zt().memoizedState;return[t,e]},useMutableSource:cg,useSyncExternalStore:ug,useId:Ng,unstable_isNewReconciler:!1};function Ft(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Kc(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Oe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Uo={isMounted:function(t){return(t=t._reactInternals)?En(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ct(),a=Hr(t),o=gr(n,a);o.payload=e,r!=null&&(o.callback=r),e=$r(t,o,a),e!==null&&(Gt(e,t,a,n),Ua(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ct(),a=Hr(t),o=gr(n,a);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=$r(t,o,a),e!==null&&(Gt(e,t,a,n),Ua(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ct(),n=Hr(t),a=gr(r,n);a.tag=2,e!=null&&(a.callback=e),e=$r(t,a,n),e!==null&&(Gt(e,t,n,r),Ua(e,t,n))}};function Ff(t,e,r,n,a,o,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,c):e.prototype&&e.prototype.isPureReactComponent?!yi(r,n)||!yi(a,o):!0}function Pg(t,e,r){var n=!1,a=Zr,o=e.contextType;return typeof o=="object"&&o!==null?o=Dt(o):(a=_t(e)?bn:it.current,n=e.contextTypes,o=(n=n!=null)?ms(t,a):Zr),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=o),e}function Hf(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Uo.enqueueReplaceState(e,e.state,null)}function Gc(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},id(t);var o=e.contextType;typeof o=="object"&&o!==null?a.context=Dt(o):(o=_t(e)?bn:it.current,a.context=ms(t,o)),a.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Kc(t,e,o,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Uo.enqueueReplaceState(a,a.state,null),fo(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function ys(t,e){try{var r="",n=e;do r+=Jv(n),n=n.return;while(n);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:a,digest:null}}function ic(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Yc(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Nb=typeof WeakMap=="function"?WeakMap:Map;function Tg(t,e,r){r=gr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){yo||(yo=!0,au=n),Yc(t,e)},r}function Cg(t,e,r){r=gr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){Yc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Yc(t,e),typeof n!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),r}function Wf(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Nb;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=Mb.bind(null,t,e,r),e.then(t,t))}function Vf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zf(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=gr(-1,1),e.tag=2,$r(r,e,1))),r.lanes|=1),t)}var kb=br.ReactCurrentOwner,yt=!1;function lt(t,e,r,n){e.child=t===null?ig(e,null,r,n):gs(e,t.child,r,n)}function qf(t,e,r,n,a){r=r.render;var o=e.ref;return ls(e,a),n=ud(t,e,r,n,o,a),r=dd(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,_r(t,e,a)):(Pe&&r&&Xu(e),e.flags|=1,lt(t,e,n,a),e.child)}function Kf(t,e,r,n,a){if(t===null){var o=r.type;return typeof o=="function"&&!bd(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,Ag(t,e,o,n,a)):(t=Za(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&a)){var c=o.memoizedProps;if(r=r.compare,r=r!==null?r:yi,r(c,n)&&t.ref===e.ref)return _r(t,e,a)}return e.flags|=1,t=Wr(o,n),t.ref=e.ref,t.return=e,e.child=t}function Ag(t,e,r,n,a){if(t!==null){var o=t.memoizedProps;if(yi(o,n)&&t.ref===e.ref)if(yt=!1,e.pendingProps=n=o,(t.lanes&a)!==0)t.flags&131072&&(yt=!0);else return e.lanes=t.lanes,_r(t,e,a)}return Jc(t,e,r,n,a)}function Og(t,e,r){var n=e.pendingProps,a=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(ns,wt),wt|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(ns,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,je(ns,wt),wt|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,je(ns,wt),wt|=n;return lt(t,e,a,r),e.child}function Lg(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Jc(t,e,r,n,a){var o=_t(r)?bn:it.current;return o=ms(e,o),ls(e,a),r=ud(t,e,r,n,o,a),n=dd(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,_r(t,e,a)):(Pe&&n&&Xu(e),e.flags|=1,lt(t,e,r,a),e.child)}function Gf(t,e,r,n,a){if(_t(r)){var o=!0;oo(e)}else o=!1;if(ls(e,a),e.stateNode===null)Ha(t,e),Pg(e,r,n),Gc(e,r,n,a),n=!0;else if(t===null){var c=e.stateNode,d=e.memoizedProps;c.props=d;var h=c.context,m=r.contextType;typeof m=="object"&&m!==null?m=Dt(m):(m=_t(r)?bn:it.current,m=ms(e,m));var g=r.getDerivedStateFromProps,x=typeof g=="function"||typeof c.getSnapshotBeforeUpdate=="function";x||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==n||h!==m)&&Hf(e,c,n,m),Tr=!1;var v=e.memoizedState;c.state=v,fo(e,n,c,a),h=e.memoizedState,d!==n||v!==h||vt.current||Tr?(typeof g=="function"&&(Kc(e,r,g,n),h=e.memoizedState),(d=Tr||Ff(e,r,d,n,v,h,m))?(x||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=h),c.props=n,c.state=h,c.context=m,n=d):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{c=e.stateNode,og(t,e),d=e.memoizedProps,m=e.type===e.elementType?d:Ft(e.type,d),c.props=m,x=e.pendingProps,v=c.context,h=r.contextType,typeof h=="object"&&h!==null?h=Dt(h):(h=_t(r)?bn:it.current,h=ms(e,h));var _=r.getDerivedStateFromProps;(g=typeof _=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==x||v!==h)&&Hf(e,c,n,h),Tr=!1,v=e.memoizedState,c.state=v,fo(e,n,c,a);var y=e.memoizedState;d!==x||v!==y||vt.current||Tr?(typeof _=="function"&&(Kc(e,r,_,n),y=e.memoizedState),(m=Tr||Ff(e,r,m,n,v,y,h)||!1)?(g||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,y,h),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,y,h)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),c.props=n,c.state=y,c.context=h,n=m):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),n=!1)}return Xc(t,e,r,n,o,a)}function Xc(t,e,r,n,a,o){Lg(t,e);var c=(e.flags&128)!==0;if(!n&&!c)return a&&Rf(e,r,!1),_r(t,e,o);n=e.stateNode,kb.current=e;var d=c&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&c?(e.child=gs(e,t.child,null,o),e.child=gs(e,null,d,o)):lt(t,e,d,o),e.memoizedState=n.state,a&&Rf(e,r,!0),e.child}function Rg(t){var e=t.stateNode;e.pendingContext?Lf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lf(t,e.context,!1),ad(t,e.containerInfo)}function Yf(t,e,r,n,a){return ps(),ed(a),e.flags|=256,lt(t,e,r,n),e.child}var Qc={dehydrated:null,treeContext:null,retryLane:0};function eu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ig(t,e,r){var n=e.pendingProps,a=Ce.current,o=!1,c=(e.flags&128)!==0,d;if((d=c)||(d=t!==null&&t.memoizedState===null?!1:(a&2)!==0),d?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),je(Ce,a&1),t===null)return Zc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=n.children,t=n.fallback,o?(n=e.mode,o=e.child,c={mode:"hidden",children:c},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=Ho(c,n,0,null),t=vn(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=eu(r),e.memoizedState=Qc,t):md(e,c));if(a=t.memoizedState,a!==null&&(d=a.dehydrated,d!==null))return Sb(t,e,c,n,d,a,r);if(o){o=n.fallback,c=e.mode,a=t.child,d=a.sibling;var h={mode:"hidden",children:n.children};return!(c&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=h,e.deletions=null):(n=Wr(a,h),n.subtreeFlags=a.subtreeFlags&14680064),d!==null?o=Wr(d,o):(o=vn(o,c,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,c=t.child.memoizedState,c=c===null?eu(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=t.childLanes&~r,e.memoizedState=Qc,n}return o=t.child,t=o.sibling,n=Wr(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function md(t,e){return e=Ho({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ba(t,e,r,n){return n!==null&&ed(n),gs(e,t.child,null,r),t=md(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Sb(t,e,r,n,a,o,c){if(r)return e.flags&256?(e.flags&=-257,n=ic(Error(F(422))),ba(t,e,c,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,a=e.mode,n=Ho({mode:"visible",children:n.children},a,0,null),o=vn(o,a,c,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&gs(e,t.child,null,c),e.child.memoizedState=eu(c),e.memoizedState=Qc,o);if(!(e.mode&1))return ba(t,e,c,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var d=n.dgst;return n=d,o=Error(F(419)),n=ic(o,n,void 0),ba(t,e,c,n)}if(d=(c&t.childLanes)!==0,yt||d){if(n=Ke,n!==null){switch(c&-c){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|c)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,vr(t,a),Gt(n,t,a,-1))}return _d(),n=ic(Error(F(421))),ba(t,e,c,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Bb.bind(null,t),a._reactRetry=e,null):(t=o.treeContext,Nt=Ur(a.nextSibling),kt=e,Pe=!0,Zt=null,t!==null&&(Ot[Lt++]=mr,Ot[Lt++]=pr,Ot[Lt++]=wn,mr=t.id,pr=t.overflow,wn=e),e=md(e,n.children),e.flags|=4096,e)}function Jf(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),qc(t.return,e,r)}function ac(t,e,r,n,a){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function Dg(t,e,r){var n=e.pendingProps,a=n.revealOrder,o=n.tail;if(lt(t,e,n.children,r),n=Ce.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jf(t,r,e);else if(t.tag===19)Jf(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(je(Ce,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&mo(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),ac(e,!1,a,r,o);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&mo(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}ac(e,!0,r,null,o);break;case"together":ac(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ha(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _r(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Nn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,r=Wr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Wr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Eb(t,e,r){switch(e.tag){case 3:Rg(e),ps();break;case 5:lg(e);break;case 1:_t(e.type)&&oo(e);break;case 4:ad(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;je(uo,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(je(Ce,Ce.current&1),e.flags|=128,null):r&e.child.childLanes?Ig(t,e,r):(je(Ce,Ce.current&1),t=_r(t,e,r),t!==null?t.sibling:null);je(Ce,Ce.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Dg(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),je(Ce,Ce.current),n)break;return null;case 22:case 23:return e.lanes=0,Og(t,e,r)}return _r(t,e,r)}var zg,tu,Mg,Bg;zg=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tu=function(){};Mg=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,gn(ar.current);var o=null;switch(r){case"input":a=jc(t,a),n=jc(t,n),o=[];break;case"select":a=Oe({},a,{value:void 0}),n=Oe({},n,{value:void 0}),o=[];break;case"textarea":a=Sc(t,a),n=Sc(t,n),o=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=io)}Pc(r,n);var c;r=null;for(m in a)if(!n.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var d=a[m];for(c in d)d.hasOwnProperty(c)&&(r||(r={}),r[c]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(di.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in n){var h=n[m];if(d=a!=null?a[m]:void 0,n.hasOwnProperty(m)&&h!==d&&(h!=null||d!=null))if(m==="style")if(d){for(c in d)!d.hasOwnProperty(c)||h&&h.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in h)h.hasOwnProperty(c)&&d[c]!==h[c]&&(r||(r={}),r[c]=h[c])}else r||(o||(o=[]),o.push(m,r)),r=h;else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(o=o||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(di.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&ke("scroll",t),o||d===h||(o=[])):(o=o||[]).push(m,h))}r&&(o=o||[]).push("style",r);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};Bg=function(t,e,r,n){r!==n&&(e.flags|=4)};function qs(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Pb(t,e,r){var n=e.pendingProps;switch(Qu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return _t(e.type)&&ao(),rt(e),null;case 3:return n=e.stateNode,xs(),Se(vt),Se(it),ld(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(va(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(cu(Zt),Zt=null))),tu(t,e),rt(e),null;case 5:od(e);var a=gn(ji.current);if(r=e.type,t!==null&&e.stateNode!=null)Mg(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(F(166));return rt(e),null}if(t=gn(ar.current),va(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[sr]=e,n[bi]=o,t=(e.mode&1)!==0,r){case"dialog":ke("cancel",n),ke("close",n);break;case"iframe":case"object":case"embed":ke("load",n);break;case"video":case"audio":for(a=0;a<Xs.length;a++)ke(Xs[a],n);break;case"source":ke("error",n);break;case"img":case"image":case"link":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"input":af(n,o),ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ke("invalid",n);break;case"textarea":lf(n,o),ke("invalid",n)}Pc(r,o),a=null;for(var c in o)if(o.hasOwnProperty(c)){var d=o[c];c==="children"?typeof d=="string"?n.textContent!==d&&(o.suppressHydrationWarning!==!0&&ya(n.textContent,d,t),a=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&ya(n.textContent,d,t),a=["children",""+d]):di.hasOwnProperty(c)&&d!=null&&c==="onScroll"&&ke("scroll",n)}switch(r){case"input":ua(n),of(n,o,!0);break;case"textarea":ua(n),cf(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=io)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{c=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fp(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=c.createElement(r,{is:n.is}):(t=c.createElement(r),r==="select"&&(c=t,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):t=c.createElementNS(t,r),t[sr]=e,t[bi]=n,zg(t,e,!1,!1),e.stateNode=t;e:{switch(c=Tc(r,n),r){case"dialog":ke("cancel",t),ke("close",t),a=n;break;case"iframe":case"object":case"embed":ke("load",t),a=n;break;case"video":case"audio":for(a=0;a<Xs.length;a++)ke(Xs[a],t);a=n;break;case"source":ke("error",t),a=n;break;case"img":case"image":case"link":ke("error",t),ke("load",t),a=n;break;case"details":ke("toggle",t),a=n;break;case"input":af(t,n),a=jc(t,n),ke("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Oe({},n,{value:void 0}),ke("invalid",t);break;case"textarea":lf(t,n),a=Sc(t,n),ke("invalid",t);break;default:a=n}Pc(r,a),d=a;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];o==="style"?gp(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&mp(t,h)):o==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&hi(t,h):typeof h=="number"&&hi(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(di.hasOwnProperty(o)?h!=null&&o==="onScroll"&&ke("scroll",t):h!=null&&Mu(t,o,h,c))}switch(r){case"input":ua(t),of(t,n,!1);break;case"textarea":ua(t),cf(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Vr(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?ss(t,!!n.multiple,o,!1):n.defaultValue!=null&&ss(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=io)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)Bg(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(F(166));if(r=gn(ji.current),gn(ar.current),va(e)){if(n=e.stateNode,r=e.memoizedProps,n[sr]=e,(o=n.nodeValue!==r)&&(t=kt,t!==null))switch(t.tag){case 3:ya(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ya(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[sr]=e,e.stateNode=n}return rt(e),null;case 13:if(Se(Ce),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Nt!==null&&e.mode&1&&!(e.flags&128))ng(),ps(),e.flags|=98560,o=!1;else if(o=va(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(F(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(F(317));o[sr]=e}else ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),o=!1}else Zt!==null&&(cu(Zt),Zt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?We===0&&(We=3):_d())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return xs(),tu(t,e),t===null&&vi(e.stateNode.containerInfo),rt(e),null;case 10:return nd(e.type._context),rt(e),null;case 17:return _t(e.type)&&ao(),rt(e),null;case 19:if(Se(Ce),o=e.memoizedState,o===null)return rt(e),null;if(n=(e.flags&128)!==0,c=o.rendering,c===null)if(n)qs(o,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=mo(t),c!==null){for(e.flags|=128,qs(o,!1),n=c.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,t=c.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return je(Ce,Ce.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ie()>vs&&(e.flags|=128,n=!0,qs(o,!1),e.lanes=4194304)}else{if(!n)if(t=mo(c),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),qs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!Pe)return rt(e),null}else 2*Ie()-o.renderingStartTime>vs&&r!==1073741824&&(e.flags|=128,n=!0,qs(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(r=o.last,r!==null?r.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ie(),e.sibling=null,r=Ce.current,je(Ce,n?r&1|2:r&1),e):(rt(e),null);case 22:case 23:return vd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?wt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function Tb(t,e){switch(Qu(e),e.tag){case 1:return _t(e.type)&&ao(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xs(),Se(vt),Se(it),ld(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return od(e),null;case 13:if(Se(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Ce),null;case 4:return xs(),null;case 10:return nd(e.type._context),null;case 22:case 23:return vd(),null;case 24:return null;default:return null}}var wa=!1,nt=!1,Cb=typeof WeakSet=="function"?WeakSet:Set,J=null;function rs(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Le(t,e,n)}else r.current=null}function ru(t,e,r){try{r()}catch(n){Le(t,e,n)}}var Xf=!1;function Ab(t,e){if(Bc=ro,t=Wp(),Ju(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var c=0,d=-1,h=-1,m=0,g=0,x=t,v=null;t:for(;;){for(var _;x!==r||a!==0&&x.nodeType!==3||(d=c+a),x!==o||n!==0&&x.nodeType!==3||(h=c+n),x.nodeType===3&&(c+=x.nodeValue.length),(_=x.firstChild)!==null;)v=x,x=_;for(;;){if(x===t)break t;if(v===r&&++m===a&&(d=c),v===o&&++g===n&&(h=c),(_=x.nextSibling)!==null)break;x=v,v=x.parentNode}x=_}r=d===-1||h===-1?null:{start:d,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(Uc={focusedElem:t,selectionRange:r},ro=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,E=y.memoizedState,N=e.stateNode,j=N.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ft(e.type,b),E);N.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(T){Le(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return y=Xf,Xf=!1,y}function li(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var o=a.destroy;a.destroy=void 0,o!==void 0&&ru(e,r,o)}a=a.next}while(a!==n)}}function $o(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function nu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Ug(t){var e=t.alternate;e!==null&&(t.alternate=null,Ug(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sr],delete e[bi],delete e[Hc],delete e[fb],delete e[mb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $g(t){return t.tag===5||t.tag===3||t.tag===4}function Qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$g(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function su(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=io));else if(n!==4&&(t=t.child,t!==null))for(su(t,e,r),t=t.sibling;t!==null;)su(t,e,r),t=t.sibling}function iu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(iu(t,e,r),t=t.sibling;t!==null;)iu(t,e,r),t=t.sibling}var Xe=null,Wt=!1;function Sr(t,e,r){for(r=r.child;r!==null;)Fg(t,e,r),r=r.sibling}function Fg(t,e,r){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(Lo,r)}catch{}switch(r.tag){case 5:nt||rs(r,e);case 6:var n=Xe,a=Wt;Xe=null,Sr(t,e,r),Xe=n,Wt=a,Xe!==null&&(Wt?(t=Xe,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Xe.removeChild(r.stateNode));break;case 18:Xe!==null&&(Wt?(t=Xe,r=r.stateNode,t.nodeType===8?Ql(t.parentNode,r):t.nodeType===1&&Ql(t,r),gi(t)):Ql(Xe,r.stateNode));break;case 4:n=Xe,a=Wt,Xe=r.stateNode.containerInfo,Wt=!0,Sr(t,e,r),Xe=n,Wt=a;break;case 0:case 11:case 14:case 15:if(!nt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var o=a,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&ru(r,e,c),a=a.next}while(a!==n)}Sr(t,e,r);break;case 1:if(!nt&&(rs(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(d){Le(r,e,d)}Sr(t,e,r);break;case 21:Sr(t,e,r);break;case 22:r.mode&1?(nt=(n=nt)||r.memoizedState!==null,Sr(t,e,r),nt=n):Sr(t,e,r);break;default:Sr(t,e,r)}}function em(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Cb),e.forEach(function(n){var a=Ub.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ut(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var o=t,c=e,d=c;e:for(;d!==null;){switch(d.tag){case 5:Xe=d.stateNode,Wt=!1;break e;case 3:Xe=d.stateNode.containerInfo,Wt=!0;break e;case 4:Xe=d.stateNode.containerInfo,Wt=!0;break e}d=d.return}if(Xe===null)throw Error(F(160));Fg(o,c,a),Xe=null,Wt=!1;var h=a.alternate;h!==null&&(h.return=null),a.return=null}catch(m){Le(a,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hg(e,t),e=e.sibling}function Hg(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ut(e,t),tr(t),n&4){try{li(3,t,t.return),$o(3,t)}catch(b){Le(t,t.return,b)}try{li(5,t,t.return)}catch(b){Le(t,t.return,b)}}break;case 1:Ut(e,t),tr(t),n&512&&r!==null&&rs(r,r.return);break;case 5:if(Ut(e,t),tr(t),n&512&&r!==null&&rs(r,r.return),t.flags&32){var a=t.stateNode;try{hi(a,"")}catch(b){Le(t,t.return,b)}}if(n&4&&(a=t.stateNode,a!=null)){var o=t.memoizedProps,c=r!==null?r.memoizedProps:o,d=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&dp(a,o),Tc(d,c);var m=Tc(d,o);for(c=0;c<h.length;c+=2){var g=h[c],x=h[c+1];g==="style"?gp(a,x):g==="dangerouslySetInnerHTML"?mp(a,x):g==="children"?hi(a,x):Mu(a,g,x,m)}switch(d){case"input":Nc(a,o);break;case"textarea":hp(a,o);break;case"select":var v=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var _=o.value;_!=null?ss(a,!!o.multiple,_,!1):v!==!!o.multiple&&(o.defaultValue!=null?ss(a,!!o.multiple,o.defaultValue,!0):ss(a,!!o.multiple,o.multiple?[]:"",!1))}a[bi]=o}catch(b){Le(t,t.return,b)}}break;case 6:if(Ut(e,t),tr(t),n&4){if(t.stateNode===null)throw Error(F(162));a=t.stateNode,o=t.memoizedProps;try{a.nodeValue=o}catch(b){Le(t,t.return,b)}}break;case 3:if(Ut(e,t),tr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gi(e.containerInfo)}catch(b){Le(t,t.return,b)}break;case 4:Ut(e,t),tr(t);break;case 13:Ut(e,t),tr(t),a=t.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(xd=Ie())),n&4&&em(t);break;case 22:if(g=r!==null&&r.memoizedState!==null,t.mode&1?(nt=(m=nt)||g,Ut(e,t),nt=m):Ut(e,t),tr(t),n&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!g&&t.mode&1)for(J=t,g=t.child;g!==null;){for(x=J=g;J!==null;){switch(v=J,_=v.child,v.tag){case 0:case 11:case 14:case 15:li(4,v,v.return);break;case 1:rs(v,v.return);var y=v.stateNode;if(typeof y.componentWillUnmount=="function"){n=v,r=v.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){Le(n,r,b)}}break;case 5:rs(v,v.return);break;case 22:if(v.memoizedState!==null){rm(x);continue}}_!==null?(_.return=v,J=_):rm(x)}g=g.sibling}e:for(g=null,x=t;;){if(x.tag===5){if(g===null){g=x;try{a=x.stateNode,m?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=x.stateNode,h=x.memoizedProps.style,c=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=pp("display",c))}catch(b){Le(t,t.return,b)}}}else if(x.tag===6){if(g===null)try{x.stateNode.nodeValue=m?"":x.memoizedProps}catch(b){Le(t,t.return,b)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;g===x&&(g=null),x=x.return}g===x&&(g=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Ut(e,t),tr(t),n&4&&em(t);break;case 21:break;default:Ut(e,t),tr(t)}}function tr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if($g(r)){var n=r;break e}r=r.return}throw Error(F(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(hi(a,""),n.flags&=-33);var o=Qf(t);iu(t,o,a);break;case 3:case 4:var c=n.stateNode.containerInfo,d=Qf(t);su(t,d,c);break;default:throw Error(F(161))}}catch(h){Le(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ob(t,e,r){J=t,Wg(t)}function Wg(t,e,r){for(var n=(t.mode&1)!==0;J!==null;){var a=J,o=a.child;if(a.tag===22&&n){var c=a.memoizedState!==null||wa;if(!c){var d=a.alternate,h=d!==null&&d.memoizedState!==null||nt;d=wa;var m=nt;if(wa=c,(nt=h)&&!m)for(J=a;J!==null;)c=J,h=c.child,c.tag===22&&c.memoizedState!==null?nm(a):h!==null?(h.return=c,J=h):nm(a);for(;o!==null;)J=o,Wg(o),o=o.sibling;J=a,wa=d,nt=m}tm(t)}else a.subtreeFlags&8772&&o!==null?(o.return=a,J=o):tm(t)}}function tm(t){for(;J!==null;){var e=J;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nt||$o(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!nt)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Ft(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Bf(e,o,n);break;case 3:var c=e.updateQueue;if(c!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Bf(e,c,r)}break;case 5:var d=e.stateNode;if(r===null&&e.flags&4){r=d;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var x=g.dehydrated;x!==null&&gi(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}nt||e.flags&512&&nu(e)}catch(v){Le(e,e.return,v)}}if(e===t){J=null;break}if(r=e.sibling,r!==null){r.return=e.return,J=r;break}J=e.return}}function rm(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var r=e.sibling;if(r!==null){r.return=e.return,J=r;break}J=e.return}}function nm(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{$o(4,e)}catch(h){Le(e,r,h)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(h){Le(e,a,h)}}var o=e.return;try{nu(e)}catch(h){Le(e,o,h)}break;case 5:var c=e.return;try{nu(e)}catch(h){Le(e,c,h)}}}catch(h){Le(e,e.return,h)}if(e===t){J=null;break}var d=e.sibling;if(d!==null){d.return=e.return,J=d;break}J=e.return}}var Lb=Math.ceil,xo=br.ReactCurrentDispatcher,pd=br.ReactCurrentOwner,It=br.ReactCurrentBatchConfig,ge=0,Ke=null,$e=null,Qe=0,wt=0,ns=Kr(0),We=0,Ei=null,Nn=0,Fo=0,gd=0,ci=null,gt=null,xd=0,vs=1/0,hr=null,yo=!1,au=null,Fr=null,ja=!1,Ir=null,vo=0,ui=0,ou=null,Wa=-1,Va=0;function ct(){return ge&6?Ie():Wa!==-1?Wa:Wa=Ie()}function Hr(t){return t.mode&1?ge&2&&Qe!==0?Qe&-Qe:gb.transition!==null?(Va===0&&(Va=Pp()),Va):(t=ye,t!==0||(t=window.event,t=t===void 0?16:Ip(t.type)),t):1}function Gt(t,e,r,n){if(50<ui)throw ui=0,ou=null,Error(F(185));Ri(t,r,n),(!(ge&2)||t!==Ke)&&(t===Ke&&(!(ge&2)&&(Fo|=r),We===4&&Ar(t,Qe)),bt(t,n),r===1&&ge===0&&!(e.mode&1)&&(vs=Ie()+500,Mo&&Gr()))}function bt(t,e){var r=t.callbackNode;g_(t,e);var n=to(t,t===Ke?Qe:0);if(n===0)r!==null&&hf(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&hf(r),e===1)t.tag===0?pb(sm.bind(null,t)):eg(sm.bind(null,t)),db(function(){!(ge&6)&&Gr()}),r=null;else{switch(Tp(n)){case 1:r=Hu;break;case 4:r=Sp;break;case 16:r=eo;break;case 536870912:r=Ep;break;default:r=eo}r=Xg(r,Vg.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Vg(t,e){if(Wa=-1,Va=0,ge&6)throw Error(F(327));var r=t.callbackNode;if(cs()&&t.callbackNode!==r)return null;var n=to(t,t===Ke?Qe:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=_o(t,n);else{e=n;var a=ge;ge|=2;var o=qg();(Ke!==t||Qe!==e)&&(hr=null,vs=Ie()+500,yn(t,e));do try{Db();break}catch(d){Zg(t,d)}while(!0);rd(),xo.current=o,ge=a,$e!==null?e=0:(Ke=null,Qe=0,e=We)}if(e!==0){if(e===2&&(a=Rc(t),a!==0&&(n=a,e=lu(t,a))),e===1)throw r=Ei,yn(t,0),Ar(t,n),bt(t,Ie()),r;if(e===6)Ar(t,n);else{if(a=t.current.alternate,!(n&30)&&!Rb(a)&&(e=_o(t,n),e===2&&(o=Rc(t),o!==0&&(n=o,e=lu(t,o))),e===1))throw r=Ei,yn(t,0),Ar(t,n),bt(t,Ie()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(F(345));case 2:ln(t,gt,hr);break;case 3:if(Ar(t,n),(n&130023424)===n&&(e=xd+500-Ie(),10<e)){if(to(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){ct(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Fc(ln.bind(null,t,gt,hr),e);break}ln(t,gt,hr);break;case 4:if(Ar(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var c=31-Kt(n);o=1<<c,c=e[c],c>a&&(a=c),n&=~o}if(n=a,n=Ie()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Lb(n/1960))-n,10<n){t.timeoutHandle=Fc(ln.bind(null,t,gt,hr),n);break}ln(t,gt,hr);break;case 5:ln(t,gt,hr);break;default:throw Error(F(329))}}}return bt(t,Ie()),t.callbackNode===r?Vg.bind(null,t):null}function lu(t,e){var r=ci;return t.current.memoizedState.isDehydrated&&(yn(t,e).flags|=256),t=_o(t,e),t!==2&&(e=gt,gt=r,e!==null&&cu(e)),t}function cu(t){gt===null?gt=t:gt.push.apply(gt,t)}function Rb(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!Yt(o(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~gd,e&=~Fo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Kt(e),n=1<<r;t[r]=-1,e&=~n}}function sm(t){if(ge&6)throw Error(F(327));cs();var e=to(t,0);if(!(e&1))return bt(t,Ie()),null;var r=_o(t,e);if(t.tag!==0&&r===2){var n=Rc(t);n!==0&&(e=n,r=lu(t,n))}if(r===1)throw r=Ei,yn(t,0),Ar(t,e),bt(t,Ie()),r;if(r===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ln(t,gt,hr),bt(t,Ie()),null}function yd(t,e){var r=ge;ge|=1;try{return t(e)}finally{ge=r,ge===0&&(vs=Ie()+500,Mo&&Gr())}}function kn(t){Ir!==null&&Ir.tag===0&&!(ge&6)&&cs();var e=ge;ge|=1;var r=It.transition,n=ye;try{if(It.transition=null,ye=1,t)return t()}finally{ye=n,It.transition=r,ge=e,!(ge&6)&&Gr()}}function vd(){wt=ns.current,Se(ns)}function yn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,ub(r)),$e!==null)for(r=$e.return;r!==null;){var n=r;switch(Qu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ao();break;case 3:xs(),Se(vt),Se(it),ld();break;case 5:od(n);break;case 4:xs();break;case 13:Se(Ce);break;case 19:Se(Ce);break;case 10:nd(n.type._context);break;case 22:case 23:vd()}r=r.return}if(Ke=t,$e=t=Wr(t.current,null),Qe=wt=e,We=0,Ei=null,gd=Fo=Nn=0,gt=ci=null,pn!==null){for(e=0;e<pn.length;e++)if(r=pn[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,o=r.pending;if(o!==null){var c=o.next;o.next=a,n.next=c}r.pending=n}pn=null}return t}function Zg(t,e){do{var r=$e;try{if(rd(),$a.current=go,po){for(var n=Ae.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}po=!1}if(jn=0,qe=He=Ae=null,oi=!1,Ni=0,pd.current=null,r===null||r.return===null){We=1,Ei=e,$e=null;break}e:{var o=t,c=r.return,d=r,h=e;if(e=Qe,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h,g=d,x=g.tag;if(!(g.mode&1)&&(x===0||x===11||x===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var _=Vf(c);if(_!==null){_.flags&=-257,Zf(_,c,d,o,e),_.mode&1&&Wf(o,m,e),e=_,h=m;var y=e.updateQueue;if(y===null){var b=new Set;b.add(h),e.updateQueue=b}else y.add(h);break e}else{if(!(e&1)){Wf(o,m,e),_d();break e}h=Error(F(426))}}else if(Pe&&d.mode&1){var E=Vf(c);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Zf(E,c,d,o,e),ed(ys(h,d));break e}}o=h=ys(h,d),We!==4&&(We=2),ci===null?ci=[o]:ci.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var N=Tg(o,h,e);Mf(o,N);break e;case 1:d=h;var j=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof j.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Fr===null||!Fr.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=Cg(o,d,e);Mf(o,T);break e}}o=o.return}while(o!==null)}Gg(r)}catch(D){e=D,$e===r&&r!==null&&($e=r=r.return);continue}break}while(!0)}function qg(){var t=xo.current;return xo.current=go,t===null?go:t}function _d(){(We===0||We===3||We===2)&&(We=4),Ke===null||!(Nn&268435455)&&!(Fo&268435455)||Ar(Ke,Qe)}function _o(t,e){var r=ge;ge|=2;var n=qg();(Ke!==t||Qe!==e)&&(hr=null,yn(t,e));do try{Ib();break}catch(a){Zg(t,a)}while(!0);if(rd(),ge=r,xo.current=n,$e!==null)throw Error(F(261));return Ke=null,Qe=0,We}function Ib(){for(;$e!==null;)Kg($e)}function Db(){for(;$e!==null&&!o_();)Kg($e)}function Kg(t){var e=Jg(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?Gg(t):$e=e,pd.current=null}function Gg(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Tb(r,e),r!==null){r.flags&=32767,$e=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,$e=null;return}}else if(r=Pb(r,e,wt),r!==null){$e=r;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);We===0&&(We=5)}function ln(t,e,r){var n=ye,a=It.transition;try{It.transition=null,ye=1,zb(t,e,r,n)}finally{It.transition=a,ye=n}return null}function zb(t,e,r,n){do cs();while(Ir!==null);if(ge&6)throw Error(F(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(x_(t,o),t===Ke&&($e=Ke=null,Qe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ja||(ja=!0,Xg(eo,function(){return cs(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=It.transition,It.transition=null;var c=ye;ye=1;var d=ge;ge|=4,pd.current=null,Ab(t,r),Hg(r,t),nb(Uc),ro=!!Bc,Uc=Bc=null,t.current=r,Ob(r),l_(),ge=d,ye=c,It.transition=o}else t.current=r;if(ja&&(ja=!1,Ir=t,vo=a),o=t.pendingLanes,o===0&&(Fr=null),d_(r.stateNode),bt(t,Ie()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(yo)throw yo=!1,t=au,au=null,t;return vo&1&&t.tag!==0&&cs(),o=t.pendingLanes,o&1?t===ou?ui++:(ui=0,ou=t):ui=0,Gr(),null}function cs(){if(Ir!==null){var t=Tp(vo),e=It.transition,r=ye;try{if(It.transition=null,ye=16>t?16:t,Ir===null)var n=!1;else{if(t=Ir,Ir=null,vo=0,ge&6)throw Error(F(331));var a=ge;for(ge|=4,J=t.current;J!==null;){var o=J,c=o.child;if(J.flags&16){var d=o.deletions;if(d!==null){for(var h=0;h<d.length;h++){var m=d[h];for(J=m;J!==null;){var g=J;switch(g.tag){case 0:case 11:case 15:li(8,g,o)}var x=g.child;if(x!==null)x.return=g,J=x;else for(;J!==null;){g=J;var v=g.sibling,_=g.return;if(Ug(g),g===m){J=null;break}if(v!==null){v.return=_,J=v;break}J=_}}}var y=o.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var E=b.sibling;b.sibling=null,b=E}while(b!==null)}}J=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,J=c;else e:for(;J!==null;){if(o=J,o.flags&2048)switch(o.tag){case 0:case 11:case 15:li(9,o,o.return)}var N=o.sibling;if(N!==null){N.return=o.return,J=N;break e}J=o.return}}var j=t.current;for(J=j;J!==null;){c=J;var k=c.child;if(c.subtreeFlags&2064&&k!==null)k.return=c,J=k;else e:for(c=j;J!==null;){if(d=J,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:$o(9,d)}}catch(D){Le(d,d.return,D)}if(d===c){J=null;break e}var T=d.sibling;if(T!==null){T.return=d.return,J=T;break e}J=d.return}}if(ge=a,Gr(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(Lo,t)}catch{}n=!0}return n}finally{ye=r,It.transition=e}}return!1}function im(t,e,r){e=ys(r,e),e=Tg(t,e,1),t=$r(t,e,1),e=ct(),t!==null&&(Ri(t,1,e),bt(t,e))}function Le(t,e,r){if(t.tag===3)im(t,t,r);else for(;e!==null;){if(e.tag===3){im(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Fr===null||!Fr.has(n))){t=ys(r,t),t=Cg(e,t,1),e=$r(e,t,1),t=ct(),e!==null&&(Ri(e,1,t),bt(e,t));break}}e=e.return}}function Mb(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&r,Ke===t&&(Qe&r)===r&&(We===4||We===3&&(Qe&130023424)===Qe&&500>Ie()-xd?yn(t,0):gd|=r),bt(t,e)}function Yg(t,e){e===0&&(t.mode&1?(e=fa,fa<<=1,!(fa&130023424)&&(fa=4194304)):e=1);var r=ct();t=vr(t,e),t!==null&&(Ri(t,e,r),bt(t,r))}function Bb(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Yg(t,r)}function Ub(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(F(314))}n!==null&&n.delete(e),Yg(t,r)}var Jg;Jg=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||vt.current)yt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return yt=!1,Eb(t,e,r);yt=!!(t.flags&131072)}else yt=!1,Pe&&e.flags&1048576&&tg(e,co,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ha(t,e),t=e.pendingProps;var a=ms(e,it.current);ls(e,r),a=ud(null,e,n,t,a,r);var o=dd();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_t(n)?(o=!0,oo(e)):o=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,id(e),a.updater=Uo,e.stateNode=a,a._reactInternals=e,Gc(e,n,t,r),e=Xc(null,e,n,!0,o,r)):(e.tag=0,Pe&&o&&Xu(e),lt(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ha(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Fb(n),t=Ft(n,t),a){case 0:e=Jc(null,e,n,t,r);break e;case 1:e=Gf(null,e,n,t,r);break e;case 11:e=qf(null,e,n,t,r);break e;case 14:e=Kf(null,e,n,Ft(n.type,t),r);break e}throw Error(F(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ft(n,a),Jc(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ft(n,a),Gf(t,e,n,a,r);case 3:e:{if(Rg(e),t===null)throw Error(F(387));n=e.pendingProps,o=e.memoizedState,a=o.element,og(t,e),fo(e,n,null,r);var c=e.memoizedState;if(n=c.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){a=ys(Error(F(423)),e),e=Yf(t,e,n,r,a);break e}else if(n!==a){a=ys(Error(F(424)),e),e=Yf(t,e,n,r,a);break e}else for(Nt=Ur(e.stateNode.containerInfo.firstChild),kt=e,Pe=!0,Zt=null,r=ig(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ps(),n===a){e=_r(t,e,r);break e}lt(t,e,n,r)}e=e.child}return e;case 5:return lg(e),t===null&&Zc(e),n=e.type,a=e.pendingProps,o=t!==null?t.memoizedProps:null,c=a.children,$c(n,a)?c=null:o!==null&&$c(n,o)&&(e.flags|=32),Lg(t,e),lt(t,e,c,r),e.child;case 6:return t===null&&Zc(e),null;case 13:return Ig(t,e,r);case 4:return ad(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=gs(e,null,n,r):lt(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ft(n,a),qf(t,e,n,a,r);case 7:return lt(t,e,e.pendingProps,r),e.child;case 8:return lt(t,e,e.pendingProps.children,r),e.child;case 12:return lt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,o=e.memoizedProps,c=a.value,je(uo,n._currentValue),n._currentValue=c,o!==null)if(Yt(o.value,c)){if(o.children===a.children&&!vt.current){e=_r(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){c=o.child;for(var h=d.firstContext;h!==null;){if(h.context===n){if(o.tag===1){h=gr(-1,r&-r),h.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?h.next=h:(h.next=g.next,g.next=h),m.pending=h}}o.lanes|=r,h=o.alternate,h!==null&&(h.lanes|=r),qc(o.return,r,e),d.lanes|=r;break}h=h.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(F(341));c.lanes|=r,d=c.alternate,d!==null&&(d.lanes|=r),qc(c,r,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}lt(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,ls(e,r),a=Dt(a),n=n(a),e.flags|=1,lt(t,e,n,r),e.child;case 14:return n=e.type,a=Ft(n,e.pendingProps),a=Ft(n.type,a),Kf(t,e,n,a,r);case 15:return Ag(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ft(n,a),Ha(t,e),e.tag=1,_t(n)?(t=!0,oo(e)):t=!1,ls(e,r),Pg(e,n,a),Gc(e,n,a,r),Xc(null,e,n,!0,t,r);case 19:return Dg(t,e,r);case 22:return Og(t,e,r)}throw Error(F(156,e.tag))};function Xg(t,e){return kp(t,e)}function $b(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,r,n){return new $b(t,e,r,n)}function bd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fb(t){if(typeof t=="function")return bd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uu)return 11;if(t===$u)return 14}return 2}function Wr(t,e){var r=t.alternate;return r===null?(r=Rt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Za(t,e,r,n,a,o){var c=2;if(n=t,typeof t=="function")bd(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case qn:return vn(r.children,a,o,e);case Bu:c=8,a|=8;break;case vc:return t=Rt(12,r,e,a|2),t.elementType=vc,t.lanes=o,t;case _c:return t=Rt(13,r,e,a),t.elementType=_c,t.lanes=o,t;case bc:return t=Rt(19,r,e,a),t.elementType=bc,t.lanes=o,t;case lp:return Ho(r,a,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ap:c=10;break e;case op:c=9;break e;case Uu:c=11;break e;case $u:c=14;break e;case Pr:c=16,n=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Rt(c,r,e,a),e.elementType=t,e.type=n,e.lanes=o,e}function vn(t,e,r,n){return t=Rt(7,t,n,e),t.lanes=r,t}function Ho(t,e,r,n){return t=Rt(22,t,n,e),t.elementType=lp,t.lanes=r,t.stateNode={isHidden:!1},t}function oc(t,e,r){return t=Rt(6,t,null,e),t.lanes=r,t}function lc(t,e,r){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hb(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fl(0),this.expirationTimes=Fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function wd(t,e,r,n,a,o,c,d,h){return t=new Hb(t,e,r,d,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Rt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},id(o),t}function Wb(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Qg(t){if(!t)return Zr;t=t._reactInternals;e:{if(En(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var r=t.type;if(_t(r))return Qp(t,r,e)}return e}function ex(t,e,r,n,a,o,c,d,h){return t=wd(r,n,!0,t,a,o,c,d,h),t.context=Qg(null),r=t.current,n=ct(),a=Hr(r),o=gr(n,a),o.callback=e??null,$r(r,o,a),t.current.lanes=a,Ri(t,a,n),bt(t,n),t}function Wo(t,e,r,n){var a=e.current,o=ct(),c=Hr(a);return r=Qg(r),e.context===null?e.context=r:e.pendingContext=r,e=gr(o,c),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=$r(a,e,c),t!==null&&(Gt(t,a,c,o),Ua(t,a,c)),c}function bo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function am(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function jd(t,e){am(t,e),(t=t.alternate)&&am(t,e)}function Vb(){return null}var tx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nd(t){this._internalRoot=t}Vo.prototype.render=Nd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Wo(t,e,null,null)};Vo.prototype.unmount=Nd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kn(function(){Wo(null,t,null,null)}),e[yr]=null}};function Vo(t){this._internalRoot=t}Vo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Op();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Cr.length&&e!==0&&e<Cr[r].priority;r++);Cr.splice(r,0,t),r===0&&Rp(t)}};function kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function om(){}function Zb(t,e,r,n,a){if(a){if(typeof n=="function"){var o=n;n=function(){var m=bo(c);o.call(m)}}var c=ex(e,n,t,0,null,!1,!1,"",om);return t._reactRootContainer=c,t[yr]=c.current,vi(t.nodeType===8?t.parentNode:t),kn(),c}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var d=n;n=function(){var m=bo(h);d.call(m)}}var h=wd(t,0,!1,null,null,!1,!1,"",om);return t._reactRootContainer=h,t[yr]=h.current,vi(t.nodeType===8?t.parentNode:t),kn(function(){Wo(e,h,r,n)}),h}function qo(t,e,r,n,a){var o=r._reactRootContainer;if(o){var c=o;if(typeof a=="function"){var d=a;a=function(){var h=bo(c);d.call(h)}}Wo(e,c,t,a)}else c=Zb(r,e,t,a,n);return bo(c)}Cp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Js(e.pendingLanes);r!==0&&(Wu(e,r|1),bt(e,Ie()),!(ge&6)&&(vs=Ie()+500,Gr()))}break;case 13:kn(function(){var n=vr(t,1);if(n!==null){var a=ct();Gt(n,t,1,a)}}),jd(t,1)}};Vu=function(t){if(t.tag===13){var e=vr(t,134217728);if(e!==null){var r=ct();Gt(e,t,134217728,r)}jd(t,134217728)}};Ap=function(t){if(t.tag===13){var e=Hr(t),r=vr(t,e);if(r!==null){var n=ct();Gt(r,t,e,n)}jd(t,e)}};Op=function(){return ye};Lp=function(t,e){var r=ye;try{return ye=t,e()}finally{ye=r}};Ac=function(t,e,r){switch(e){case"input":if(Nc(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=zo(n);if(!a)throw Error(F(90));up(n),Nc(n,a)}}}break;case"textarea":hp(t,r);break;case"select":e=r.value,e!=null&&ss(t,!!r.multiple,e,!1)}};vp=yd;_p=kn;var qb={usingClientEntryPoint:!1,Events:[Di,Jn,zo,xp,yp,yd]},Ks={findFiberByHostInstance:mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kb={bundleType:Ks.bundleType,version:Ks.version,rendererPackageName:Ks.rendererPackageName,rendererConfig:Ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:br.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jp(t),t===null?null:t.stateNode},findFiberByHostInstance:Ks.findFiberByHostInstance||Vb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Na.isDisabled&&Na.supportsFiber)try{Lo=Na.inject(Kb),ir=Na}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qb;Et.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kd(e))throw Error(F(200));return Wb(t,e,null,r)};Et.createRoot=function(t,e){if(!kd(t))throw Error(F(299));var r=!1,n="",a=tx;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=wd(t,1,!1,null,null,r,!1,n,a),t[yr]=e.current,vi(t.nodeType===8?t.parentNode:t),new Nd(e)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=jp(e),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return kn(t)};Et.hydrate=function(t,e,r){if(!Zo(e))throw Error(F(200));return qo(null,t,e,!0,r)};Et.hydrateRoot=function(t,e,r){if(!kd(t))throw Error(F(405));var n=r!=null&&r.hydratedSources||null,a=!1,o="",c=tx;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),e=ex(e,null,t,1,r??null,a,!1,o,c),t[yr]=e.current,vi(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Vo(e)};Et.render=function(t,e,r){if(!Zo(e))throw Error(F(200));return qo(null,t,e,!1,r)};Et.unmountComponentAtNode=function(t){if(!Zo(t))throw Error(F(40));return t._reactRootContainer?(kn(function(){qo(null,null,t,!1,function(){t._reactRootContainer=null,t[yr]=null})}),!0):!1};Et.unstable_batchedUpdates=yd;Et.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Zo(r))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return qo(t,e,r,!1,n)};Et.version="18.3.1-next-f1338f8080-20240426";function rx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rx)}catch(t){console.error(t)}}rx(),rp.exports=Et;var nx=rp.exports,lm=nx;xc.createRoot=lm.createRoot,xc.hydrateRoot=lm.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pi(){return Pi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pi.apply(this,arguments)}var Dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Dr||(Dr={}));const cm="popstate";function Gb(t){t===void 0&&(t={});function e(a,o){let{pathname:c="/",search:d="",hash:h=""}=Pn(a.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),uu("",{pathname:c,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(a,o){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let h=a.location.href,m=h.indexOf("#");d=m===-1?h:h.slice(0,m)}return d+"#"+(typeof o=="string"?o:sx(o))}function n(a,o){Ko(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Jb(e,r,n,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ko(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Yb(){return Math.random().toString(36).substr(2,8)}function um(t,e){return{usr:t.state,key:t.key,idx:e}}function uu(t,e,r,n){return r===void 0&&(r=null),Pi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Pn(e):e,{state:r,key:e&&e.key||n||Yb()})}function sx(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Pn(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Jb(t,e,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,d=Dr.Pop,h=null,m=g();m==null&&(m=0,c.replaceState(Pi({},c.state,{idx:m}),""));function g(){return(c.state||{idx:null}).idx}function x(){d=Dr.Pop;let E=g(),N=E==null?null:E-m;m=E,h&&h({action:d,location:b.location,delta:N})}function v(E,N){d=Dr.Push;let j=uu(b.location,E,N);r&&r(j,E),m=g()+1;let k=um(j,m),T=b.createHref(j);try{c.pushState(k,"",T)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(T)}o&&h&&h({action:d,location:b.location,delta:1})}function _(E,N){d=Dr.Replace;let j=uu(b.location,E,N);r&&r(j,E),m=g();let k=um(j,m),T=b.createHref(j);c.replaceState(k,"",T),o&&h&&h({action:d,location:b.location,delta:0})}function y(E){let N=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof E=="string"?E:sx(E);return j=j.replace(/ $/,"%20"),Fe(N,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,N)}let b={get action(){return d},get location(){return t(a,c)},listen(E){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(cm,x),h=E,()=>{a.removeEventListener(cm,x),h=null}},createHref(E){return e(a,E)},createURL:y,encodeLocation(E){let N=y(E);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:_,go(E){return c.go(E)}};return b}var dm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dm||(dm={}));function Xb(t,e,r){return r===void 0&&(r="/"),Qb(t,e,r)}function Qb(t,e,r,n){let a=typeof e=="string"?Pn(e):e,o=ox(a.pathname||"/",r);if(o==null)return null;let c=ix(t);ew(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let m=hw(o);d=cw(c[h],m)}return d}function ix(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(o,c,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&(Fe(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let m=_n([n,h.relativePath]),g=r.concat(h);o.children&&o.children.length>0&&(Fe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),ix(o.children,e,g,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:ow(m,o.index),routesMeta:g})};return t.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))a(o,c);else for(let h of ax(o.path))a(o,c,h)}),e}function ax(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=ax(n.join("/")),d=[];return d.push(...c.map(h=>h===""?o:[o,h].join("/"))),a&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function ew(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:lw(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const tw=/^:[\w-]+$/,rw=3,nw=2,sw=1,iw=10,aw=-2,hm=t=>t==="*";function ow(t,e){let r=t.split("/"),n=r.length;return r.some(hm)&&(n+=aw),e&&(n+=nw),r.filter(a=>!hm(a)).reduce((a,o)=>a+(tw.test(o)?rw:o===""?sw:iw),n)}function lw(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function cw(t,e,r){let{routesMeta:n}=t,a={},o="/",c=[];for(let d=0;d<n.length;++d){let h=n[d],m=d===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",x=uw({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},g),v=h.route;if(!x)return null;Object.assign(a,x.params),c.push({params:a,pathname:_n([o,x.pathname]),pathnameBase:xw(_n([o,x.pathnameBase])),route:v}),x.pathnameBase!=="/"&&(o=_n([o,x.pathnameBase]))}return c}function uw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=dw(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((m,g,x)=>{let{paramName:v,isOptional:_}=g;if(v==="*"){let b=d[x]||"";c=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const y=d[x];return _&&!y?m[v]=void 0:m[v]=(y||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:t}}function dw(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Ko(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(n.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function hw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ko(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ox(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const fw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mw=t=>fw.test(t);function pw(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Pn(t):t,o;if(r)if(mw(r))o=r;else{if(r.includes("//")){let c=r;r=r.replace(/\/\/+/g,"/"),Ko(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+r))}r.startsWith("/")?o=fm(r.substring(1),"/"):o=fm(r,e)}else o=e;return{pathname:o,search:yw(n),hash:vw(a)}}function fm(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function cc(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gw(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function lx(t,e){let r=gw(t);return e?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function cx(t,e,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=Pn(t):(a=Pi({},t),Fe(!a.pathname||!a.pathname.includes("?"),cc("?","pathname","search",a)),Fe(!a.pathname||!a.pathname.includes("#"),cc("#","pathname","hash",a)),Fe(!a.search||!a.search.includes("#"),cc("#","search","hash",a)));let o=t===""||a.pathname==="",c=o?"/":a.pathname,d;if(c==null)d=r;else{let x=e.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),x-=1;a.pathname=v.join("/")}d=x>=0?e[x]:"/"}let h=pw(a,d),m=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(m||g)&&(h.pathname+="/"),h}const _n=t=>t.join("/").replace(/\/\/+/g,"/"),xw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _w(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ux=["post","put","patch","delete"];new Set(ux);const bw=["get",...ux];new Set(bw);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ti(){return Ti=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ti.apply(this,arguments)}const Sd=S.createContext(null),ww=S.createContext(null),Mi=S.createContext(null),Go=S.createContext(null),Yr=S.createContext({outlet:null,matches:[],isDataRoute:!1}),dx=S.createContext(null);function Bi(){return S.useContext(Go)!=null}function Tn(){return Bi()||Fe(!1),S.useContext(Go).location}function hx(t){S.useContext(Mi).static||S.useLayoutEffect(t)}function ve(){let{isDataRoute:t}=S.useContext(Yr);return t?Iw():jw()}function jw(){Bi()||Fe(!1);let t=S.useContext(Sd),{basename:e,future:r,navigator:n}=S.useContext(Mi),{matches:a}=S.useContext(Yr),{pathname:o}=Tn(),c=JSON.stringify(lx(a,r.v7_relativeSplatPath)),d=S.useRef(!1);return hx(()=>{d.current=!0}),S.useCallback(function(m,g){if(g===void 0&&(g={}),!d.current)return;if(typeof m=="number"){n.go(m);return}let x=cx(m,JSON.parse(c),o,g.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:_n([e,x.pathname])),(g.replace?n.replace:n.push)(x,g.state,g)},[e,n,c,o,t])}function fx(){let{matches:t}=S.useContext(Yr),e=t[t.length-1];return e?e.params:{}}function Nw(t,e){return kw(t,e)}function kw(t,e,r,n){Bi()||Fe(!1);let{navigator:a}=S.useContext(Mi),{matches:o}=S.useContext(Yr),c=o[o.length-1],d=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let m=Tn(),g;if(e){var x;let E=typeof e=="string"?Pn(e):e;h==="/"||(x=E.pathname)!=null&&x.startsWith(h)||Fe(!1),g=E}else g=m;let v=g.pathname||"/",_=v;if(h!=="/"){let E=h.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=Xb(t,{pathname:_}),b=Cw(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},d,E.params),pathname:_n([h,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:_n([h,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,r,n);return e&&b?S.createElement(Go.Provider,{value:{location:Ti({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Dr.Pop}},b):b}function Sw(){let t=Rw(),e=_w(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),r?S.createElement("pre",{style:a},r):null,null)}const Ew=S.createElement(Sw,null);class Pw extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?S.createElement(Yr.Provider,{value:this.props.routeContext},S.createElement(dx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tw(t){let{routeContext:e,match:r,children:n}=t,a=S.useContext(Sd);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(Yr.Provider,{value:e},n)}function Cw(t,e,r,n){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let c=t,d=(a=r)==null?void 0:a.errors;if(d!=null){let g=c.findIndex(x=>x.route.id&&(d==null?void 0:d[x.route.id])!==void 0);g>=0||Fe(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,m=-1;if(r&&n&&n.v7_partialHydration)for(let g=0;g<c.length;g++){let x=c[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=g),x.route.id){let{loaderData:v,errors:_}=r,y=x.route.loader&&v[x.route.id]===void 0&&(!_||_[x.route.id]===void 0);if(x.route.lazy||y){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((g,x,v)=>{let _,y=!1,b=null,E=null;r&&(_=d&&x.route.id?d[x.route.id]:void 0,b=x.route.errorElement||Ew,h&&(m<0&&v===0?(Dw("route-fallback"),y=!0,E=null):m===v&&(y=!0,E=x.route.hydrateFallbackElement||null)));let N=e.concat(c.slice(0,v+1)),j=()=>{let k;return _?k=b:y?k=E:x.route.Component?k=S.createElement(x.route.Component,null):x.route.element?k=x.route.element:k=g,S.createElement(Tw,{match:x,routeContext:{outlet:g,matches:N,isDataRoute:r!=null},children:k})};return r&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?S.createElement(Pw,{location:r.location,revalidation:r.revalidation,component:b,error:_,children:j(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):j()},null)}var mx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mx||{}),px=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(px||{});function Aw(t){let e=S.useContext(Sd);return e||Fe(!1),e}function Ow(t){let e=S.useContext(ww);return e||Fe(!1),e}function Lw(t){let e=S.useContext(Yr);return e||Fe(!1),e}function gx(t){let e=Lw(),r=e.matches[e.matches.length-1];return r.route.id||Fe(!1),r.route.id}function Rw(){var t;let e=S.useContext(dx),r=Ow(),n=gx();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Iw(){let{router:t}=Aw(mx.UseNavigateStable),e=gx(px.UseNavigateStable),r=S.useRef(!1);return hx(()=>{r.current=!0}),S.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Ti({fromRouteId:e},o)))},[t,e])}const mm={};function Dw(t,e,r){mm[t]||(mm[t]=!0)}function zw(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function pm(t){let{to:e,replace:r,state:n,relative:a}=t;Bi()||Fe(!1);let{future:o,static:c}=S.useContext(Mi),{matches:d}=S.useContext(Yr),{pathname:h}=Tn(),m=ve(),g=cx(e,lx(d,o.v7_relativeSplatPath),h,a==="path"),x=JSON.stringify(g);return S.useEffect(()=>m(JSON.parse(x),{replace:r,state:n,relative:a}),[m,x,a,r,n]),null}function pe(t){Fe(!1)}function Mw(t){let{basename:e="/",children:r=null,location:n,navigationType:a=Dr.Pop,navigator:o,static:c=!1,future:d}=t;Bi()&&Fe(!1);let h=e.replace(/^\/*/,"/"),m=S.useMemo(()=>({basename:h,navigator:o,static:c,future:Ti({v7_relativeSplatPath:!1},d)}),[h,d,o,c]);typeof n=="string"&&(n=Pn(n));let{pathname:g="/",search:x="",hash:v="",state:_=null,key:y="default"}=n,b=S.useMemo(()=>{let E=ox(g,h);return E==null?null:{location:{pathname:E,search:x,hash:v,state:_,key:y},navigationType:a}},[h,g,x,v,_,y,a]);return b==null?null:S.createElement(Mi.Provider,{value:m},S.createElement(Go.Provider,{children:r,value:b}))}function Bw(t){let{children:e,location:r}=t;return Nw(du(e),r)}new Promise(()=>{});function du(t,e){e===void 0&&(e=[]);let r=[];return S.Children.forEach(t,(n,a)=>{if(!S.isValidElement(n))return;let o=[...e,a];if(n.type===S.Fragment){r.push.apply(r,du(n.props.children,o));return}n.type!==pe&&Fe(!1),!n.props.index||!n.props.children||Fe(!1);let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=du(n.props.children,o)),r.push(c)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Uw="6";try{window.__reactRouterVersion=Uw}catch{}const $w="startTransition",gm=Mv[$w];function Fw(t){let{basename:e,children:r,future:n,window:a}=t,o=S.useRef();o.current==null&&(o.current=Gb({window:a,v5Compat:!0}));let c=o.current,[d,h]=S.useState({action:c.action,location:c.location}),{v7_startTransition:m}=n||{},g=S.useCallback(x=>{m&&gm?gm(()=>h(x)):h(x)},[h,m]);return S.useLayoutEffect(()=>c.listen(g),[c,g]),S.useEffect(()=>zw(n),[n]),S.createElement(Mw,{basename:e,children:r,location:d.location,navigationType:d.action,navigator:c,future:n})}var xm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xm||(xm={}));var ym;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ym||(ym={}));const Hw=()=>{const t=ve(),e=()=>{localStorage.setItem("welcomeShown","true"),t("/")};return i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-lime-500/5 via-transparent to-purple-500/5 animate-pulse"}),i.jsxs("div",{className:"relative z-10 max-w-md text-center",children:[i.jsx("div",{className:"mb-8",children:i.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-lime-500 to-lime-600 rounded-3xl flex items-center justify-center shadow-2xl shadow-lime-500/50 transform hover:scale-105 transition-transform",children:i.jsx("span",{className:"material-symbols-outlined text-5xl text-black",children:"account_balance_wallet"})})}),i.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"NUSD Wallet'a Ho Geldiniz"}),i.jsx("p",{className:"text-gray-400 text-lg mb-8",children:"Kripto paranz gvenle ynetin. USDT yatrn, ekin ve ilemlerinizi takip edin."}),i.jsxs("div",{className:"space-y-4 mb-12",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-[#1a1a1a]/50 backdrop-blur-sm rounded-xl p-4 border border-white/5",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-lime-500/20 flex items-center justify-center shrink-0",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"currency_bitcoin"})}),i.jsx("span",{className:"text-gray-300 text-sm text-left",children:"TRC20, ERC20, BEP20 Destei"})]}),i.jsxs("div",{className:"flex items-center gap-3 bg-[#1a1a1a]/50 backdrop-blur-sm rounded-xl p-4 border border-white/5",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-lime-500/20 flex items-center justify-center shrink-0",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"verified_user"})}),i.jsx("span",{className:"text-gray-300 text-sm text-left",children:"Blockchain Dorulama"})]}),i.jsxs("div",{className:"flex items-center gap-3 bg-[#1a1a1a]/50 backdrop-blur-sm rounded-xl p-4 border border-white/5",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-lime-500/20 flex items-center justify-center shrink-0",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"bolt"})}),i.jsx("span",{className:"text-gray-300 text-sm text-left",children:"Hzl P2P Transferler"})]})]}),i.jsx("button",{onClick:e,className:"w-full bg-lime-500 hover:bg-lime-400 text-black font-bold py-4 px-8 rounded-xl text-lg shadow-2xl shadow-lime-500/30 transition-all transform hover:scale-105 active:scale-95",children:"Balayalm"}),i.jsx("p",{className:"text-gray-600 text-xs mt-6",children:"Devam ederek Gizlilik Politikas'n kabul etmi olursunuz"})]})]})},Ww=()=>{const t=ve(),{login:e}=ht(),[r,n]=S.useState(""),[a,o]=S.useState(""),[c,d]=S.useState(!1),[h,m]=S.useState(!1),[g,x]=S.useState(null),v=async _=>{_.preventDefault(),d(!0),x(null);try{console.log("Attempting login with:",r);const y=await e(r,a);console.log("Login result:",y),y?t("/dashboard"):x("Giri baarsz. Ltfen bilgileri kontrol edin. (Supabase Auth Hatas)")}catch(y){console.error("Login exception:",y),x(`Hata: ${y.message||"Sunucu balant hatas"}`)}finally{d(!1)}};return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[#111111] p-6 font-display",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent mb-2",children:"NUSD Wallet"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"Secure Crypto Management"}),i.jsx("p",{className:"text-[10px] text-gray-700 mt-1",children:"v2.0-web-fix"})]}),i.jsx("h1",{className:"text-3xl font-extrabold text-white mb-2 tracking-tight",children:"Welcome Back"}),i.jsx("p",{className:"text-gray-500 text-sm font-medium mb-8",children:"Securely access your wallet"}),i.jsxs("form",{onSubmit:v,className:"w-full space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Email"}),i.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-4 rounded-xl border border-white/10 focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none bg-[#1a1a1a] text-white font-medium placeholder:text-gray-600",placeholder:"name@example.com",value:r,onChange:_=>n(_.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:h?"text":"password",required:!0,className:"w-full pl-4 pr-12 py-4 rounded-xl border border-white/10 focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none bg-[#1a1a1a] text-white font-bold placeholder:font-normal placeholder:text-gray-600",placeholder:"Enter your password",value:a,onChange:_=>o(_.target.value)}),i.jsx("button",{type:"button",onClick:()=>m(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-xl",children:h?"visibility_off":"visibility"})})]})]}),g&&i.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:i.jsx("p",{className:"text-red-400 text-xs font-mono",children:g})}),i.jsx("button",{type:"submit",disabled:c,className:"w-full bg-lime-500 hover:bg-lime-400 active:scale-[0.98] text-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-lime-500/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Checking...":"Login"}),i.jsxs("div",{className:"relative py-2",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-white/10"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-4 bg-[#111111] text-gray-500 font-medium uppercase tracking-wider text-xs",children:"or"})})]}),i.jsx("button",{type:"button",onClick:()=>t("/register"),className:"w-full bg-[#1a1a1a] border border-white/10 hover:border-white/20 hover:bg-[#222] text-white py-4 rounded-xl font-bold text-lg transition-all",children:"Create Account"})]}),i.jsxs("div",{className:"mt-8 text-center space-y-1",children:[i.jsxs("p",{className:"text-gray-500 text-xs",children:["Demo User: ",i.jsx("span",{className:"font-mono text-gray-400",children:"demo@nusd.com"})]}),i.jsxs("p",{className:"text-gray-500 text-xs",children:["Admin: ",i.jsx("span",{className:"font-mono text-gray-400",children:"admin@nusd.com"})]})]})]})};var Ed={},wo={};function Vw(t,e,r,n){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(x){c(x)}}function h(g){try{m(n.throw(g))}catch(x){c(x)}}function m(g){g.done?o(g.value):a(g.value).then(d,h)}m((n=n.apply(t,e||[])).next())})}const Zw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Yo=class extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}},xx=class extends Yo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},hu=class extends Yo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},fu=class extends Yo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var jo;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(jo||(jo={}));class qw{constructor(e,{headers:r={},customFetch:n,region:a=jo.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=Zw(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Vw(this,arguments,void 0,function*(r,n={}){var a;let o,c;try{const{headers:d,method:h,body:m,signal:g,timeout:x}=n;let v={},{region:_}=n;_||(_=this.region);const y=new URL(`${this.url}/${r}`);_&&_!=="any"&&(v["x-region"]=_,y.searchParams.set("forceFunctionRegion",_));let b;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",b=m):typeof m=="string"?(v["Content-Type"]="text/plain",b=m):typeof FormData<"u"&&m instanceof FormData?b=m:(v["Content-Type"]="application/json",b=JSON.stringify(m)):b=m;let E=g;x&&(c=new AbortController,o=setTimeout(()=>c.abort(),x),g?(E=c.signal,g.addEventListener("abort",()=>c.abort())):E=c.signal);const N=yield this.fetch(y.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),d),body:b,signal:E}).catch(D=>{throw new xx(D)}),j=N.headers.get("x-relay-error");if(j&&j==="true")throw new hu(N);if(!N.ok)throw new fu(N);let k=((a=N.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),T;return k==="application/json"?T=yield N.json():k==="application/octet-stream"||k==="application/pdf"?T=yield N.blob():k==="text/event-stream"?T=N:k==="multipart/form-data"?T=yield N.formData():T=yield N.text(),{data:T,error:null,response:N}}catch(d){return{data:null,error:d,response:d instanceof fu||d instanceof hu?d.context:void 0}}finally{o&&clearTimeout(o)}})}}const Kw=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return jo},FunctionsClient:qw,FunctionsError:Yo,FunctionsFetchError:xx,FunctionsHttpError:fu,FunctionsRelayError:hu},Symbol.toStringTag,{value:"Module"})),yx=Oi(Kw);var st={},mu=function(t,e){return mu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},mu(t,e)};function vx(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var No=function(){return No=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},No.apply(this,arguments)};function _x(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function bx(t,e,r,n){var a=arguments.length,o=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var d=t.length-1;d>=0;d--)(c=t[d])&&(o=(a<3?c(o):a>3?c(e,r,o):c(e,r))||o);return a>3&&o&&Object.defineProperty(e,r,o),o}function wx(t,e){return function(r,n){e(r,n,t)}}function jx(t,e,r,n,a,o){function c(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var d=n.kind,h=d==="getter"?"get":d==="setter"?"set":"value",m=!e&&t?n.static?t:t.prototype:null,g=e||(m?Object.getOwnPropertyDescriptor(m,n.name):{}),x,v=!1,_=r.length-1;_>=0;_--){var y={};for(var b in n)y[b]=b==="access"?{}:n[b];for(var b in n.access)y.access[b]=n.access[b];y.addInitializer=function(N){if(v)throw new TypeError("Cannot add initializers after decoration has completed");o.push(c(N||null))};var E=(0,r[_])(d==="accessor"?{get:g.get,set:g.set}:g[h],y);if(d==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(x=c(E.get))&&(g.get=x),(x=c(E.set))&&(g.set=x),(x=c(E.init))&&a.unshift(x)}else(x=c(E))&&(d==="field"?a.unshift(x):g[h]=x)}m&&Object.defineProperty(m,n.name,g),v=!0}function Nx(t,e,r){for(var n=arguments.length>2,a=0;a<e.length;a++)r=n?e[a].call(t,r):e[a].call(t);return n?r:void 0}function kx(t){return typeof t=="symbol"?t:"".concat(t)}function Sx(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Ex(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Px(t,e,r,n){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(x){c(x)}}function h(g){try{m(n.throw(g))}catch(x){c(x)}}function m(g){g.done?o(g.value):a(g.value).then(d,h)}m((n=n.apply(t,e||[])).next())})}function Tx(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(m){return function(g){return h([m,g])}}function h(m){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(r=0)),r;)try{if(n=1,a&&(o=m[0]&2?a.return:m[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,m[1])).done)return o;switch(a=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,a=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){r.label=m[1];break}if(m[0]===6&&r.label<o[1]){r.label=o[1],o=m;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(m);break}o[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(g){m=[6,g],a=0}finally{n=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Jo=Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Cx(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Jo(e,t,r)}function ko(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pd(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,o=[],c;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(d){c={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return o}function Ax(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Pd(arguments[e]));return t}function Ox(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),a=0,e=0;e<r;e++)for(var o=arguments[e],c=0,d=o.length;c<d;c++,a++)n[a]=o[c];return n}function Lx(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,o;n<a;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function _s(t){return this instanceof _s?(this.v=t,this):new _s(t)}function Rx(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(_){return function(y){return Promise.resolve(y).then(_,x)}}function d(_,y){n[_]&&(a[_]=function(b){return new Promise(function(E,N){o.push([_,b,E,N])>1||h(_,b)})},y&&(a[_]=y(a[_])))}function h(_,y){try{m(n[_](y))}catch(b){v(o[0][3],b)}}function m(_){_.value instanceof _s?Promise.resolve(_.value.v).then(g,x):v(o[0][2],_)}function g(_){h("next",_)}function x(_){h("throw",_)}function v(_,y){_(y),o.shift(),o.length&&h(o[0][0],o[0][1])}}function Ix(t){var e,r;return e={},n("next"),n("throw",function(a){throw a}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(a,o){e[a]=t[a]?function(c){return(r=!r)?{value:_s(t[a](c)),done:!1}:o?o(c):c}:o}}function Dx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ko=="function"?ko(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(c){return new Promise(function(d,h){c=t[o](c),a(d,h,c.done,c.value)})}}function a(o,c,d,h){Promise.resolve(h).then(function(m){o({value:m,done:d})},c)}}function zx(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Gw=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},pu=function(t){return pu=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},pu(t)};function Mx(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=pu(t),n=0;n<r.length;n++)r[n]!=="default"&&Jo(e,t,r[n]);return Gw(e,t),e}function Bx(t){return t&&t.__esModule?t:{default:t}}function Ux(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function $x(t,e,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function Fx(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Hx(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var Yw=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Wx(t){function e(o){t.error=t.hasError?new Yw(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function a(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(a);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function Vx(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,o,c){return n?e?".jsx":".js":a&&(!o||!c)?r:a+o+"."+c.toLowerCase()+"js"}):t}const Jw={__extends:vx,__assign:No,__rest:_x,__decorate:bx,__param:wx,__esDecorate:jx,__runInitializers:Nx,__propKey:kx,__setFunctionName:Sx,__metadata:Ex,__awaiter:Px,__generator:Tx,__createBinding:Jo,__exportStar:Cx,__values:ko,__read:Pd,__spread:Ax,__spreadArrays:Ox,__spreadArray:Lx,__await:_s,__asyncGenerator:Rx,__asyncDelegator:Ix,__asyncValues:Dx,__makeTemplateObject:zx,__importStar:Mx,__importDefault:Bx,__classPrivateFieldGet:Ux,__classPrivateFieldSet:$x,__classPrivateFieldIn:Fx,__addDisposableResource:Hx,__disposeResources:Wx,__rewriteRelativeImportExtension:Vx},Xw=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Hx,get __assign(){return No},__asyncDelegator:Ix,__asyncGenerator:Rx,__asyncValues:Dx,__await:_s,__awaiter:Px,__classPrivateFieldGet:Ux,__classPrivateFieldIn:Fx,__classPrivateFieldSet:$x,__createBinding:Jo,__decorate:bx,__disposeResources:Wx,__esDecorate:jx,__exportStar:Cx,__extends:vx,__generator:Tx,__importDefault:Bx,__importStar:Mx,__makeTemplateObject:zx,__metadata:Ex,__param:wx,__propKey:kx,__read:Pd,__rest:_x,__rewriteRelativeImportExtension:Vx,__runInitializers:Nx,__setFunctionName:Sx,__spread:Ax,__spreadArray:Lx,__spreadArrays:Ox,__values:ko,default:Jw},Symbol.toStringTag,{value:"Module"})),ks=Oi(Xw);var ka={},Sa={},Ea={},Pa={},Ta={},Ca={},vm;function Zx(){if(vm)return Ca;vm=1,Object.defineProperty(Ca,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ca.default=t,Ca}var _m;function qx(){if(_m)return Ta;_m=1,Object.defineProperty(Ta,"__esModule",{value:!0});const e=ks.__importDefault(Zx());let r=class{constructor(a){var o,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var m,g,x,v;let _=null,y=null,b=null,E=h.status,N=h.statusText;if(h.ok){if(this.method!=="HEAD"){const D=await h.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?y=D:y=JSON.parse(D))}const k=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),T=(x=h.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");k&&T&&T.length>1&&(b=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(_={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,b=null,E=406,N="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const k=await h.text();try{_=JSON.parse(k),Array.isArray(_)&&h.status===404&&(y=[],_=null,E=200,N="OK")}catch{h.status===404&&k===""?(E=204,N="No Content"):_={message:k}}if(_&&this.isMaybeSingle&&(!((v=_==null?void 0:_.details)===null||v===void 0)&&v.includes("0 rows"))&&(_=null,E=200,N="OK"),_&&this.shouldThrowOnError)throw new e.default(_)}return{error:_,data:y,count:b,status:E,statusText:N}});return this.shouldThrowOnError||(d=d.catch(h=>{var m,g,x,v,_,y;let b="";const E=h==null?void 0:h.cause;if(E){const N=(m=E==null?void 0:E.message)!==null&&m!==void 0?m:"",j=(g=E==null?void 0:E.code)!==null&&g!==void 0?g:"";b=`${(x=h==null?void 0:h.name)!==null&&x!==void 0?x:"FetchError"}: ${h==null?void 0:h.message}`,b+=`

Caused by: ${(v=E==null?void 0:E.name)!==null&&v!==void 0?v:"Error"}: ${N}`,j&&(b+=` (${j})`),E!=null&&E.stack&&(b+=`
${E.stack}`)}else b=(_=h==null?void 0:h.stack)!==null&&_!==void 0?_:"";return{error:{message:`${(y=h==null?void 0:h.name)!==null&&y!==void 0?y:"FetchError"}: ${h==null?void 0:h.message}`,details:b,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(a,o)}returns(){return this}overrideTypes(){return this}};return Ta.default=r,Ta}var bm;function Kx(){if(bm)return Pa;bm=1,Object.defineProperty(Pa,"__esModule",{value:!0});const e=ks.__importDefault(qx());let r=class extends e.default{select(a){let o=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:c,foreignTable:d,referencedTable:h=d}={}){const m=h?`${h}.order`:"order",g=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${g?`${g},`:""}${a}.${o?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:c=o}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,o,{foreignTable:c,referencedTable:d=c}={}){const h=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${a}`),this.url.searchParams.set(m,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:c=!1,buffers:d=!1,wal:h=!1,format:m="text"}={}){var g;const x=[a?"analyze":null,o?"verbose":null,c?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${v}"; options=${x};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};return Pa.default=r,Pa}var wm;function Td(){if(wm)return Ea;wm=1,Object.defineProperty(Ea,"__esModule",{value:!0});const e=ks.__importDefault(Kx()),r=new RegExp("[,()]");let n=class extends e.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}regexMatch(o,c){return this.url.searchParams.append(o,`match.${c}`),this}regexIMatch(o,c){return this.url.searchParams.append(o,`imatch.${c}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}isDistinct(o,c){return this.url.searchParams.append(o,`isdistinct.${c}`),this}in(o,c){const d=Array.from(new Set(c)).map(h=>typeof h=="string"&&r.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:d,type:h}={}){let m="";h==="plain"?m="pl":h==="phrase"?m="ph":h==="websearch"&&(m="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${m}fts${g}.${c}`),this}match(o){return Object.entries(o).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(o,c,d){return this.url.searchParams.append(o,`not.${c}.${d}`),this}or(o,{foreignTable:c,referencedTable:d=c}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${o})`),this}filter(o,c,d){return this.url.searchParams.append(o,`${c}.${d}`),this}};return Ea.default=n,Ea}var jm;function Gx(){if(jm)return Sa;jm=1,Object.defineProperty(Sa,"__esModule",{value:!0});const e=ks.__importDefault(Td());let r=class{constructor(a,{headers:o={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(o),this.schema=c,this.fetch=d}select(a,o){const{head:c=!1,count:d}=o??{},h=c?"HEAD":"GET";let m=!1;const g=(a??"*").split("").map(x=>/\s/.test(x)&&!m?"":(x==='"'&&(m=!m),x)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:c=!0}={}){var d;const h="POST";if(o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(m.length>0){const g=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:c=!1,count:d,defaultToNull:h=!0}={}){var m;const g="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const x=a.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(x.length>0){const v=[...new Set(x)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:o}={}){var c;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var o;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};return Sa.default=r,Sa}var Nm;function Qw(){if(Nm)return ka;Nm=1,Object.defineProperty(ka,"__esModule",{value:!0});const t=ks,e=t.__importDefault(Gx()),r=t.__importDefault(Td());let n=class Yx{constructor(o,{headers:c={},schema:d,fetch:h}={}){this.url=o,this.headers=new Headers(c),this.schemaName=d,this.fetch=h}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new Yx(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:d=!1,get:h=!1,count:m}={}){var g;let x;const v=new URL(`${this.url}/rpc/${o}`);let _;d||h?(x=d?"HEAD":"GET",Object.entries(c).filter(([b,E])=>E!==void 0).map(([b,E])=>[b,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([b,E])=>{v.searchParams.append(b,E)})):(x="POST",_=c);const y=new Headers(this.headers);return m&&y.set("Prefer",`count=${m}`),new r.default({method:x,url:v,headers:y,schema:this.schemaName,body:_,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};return ka.default=n,ka}Object.defineProperty(st,"__esModule",{value:!0});st.PostgrestError=st.PostgrestBuilder=st.PostgrestTransformBuilder=st.PostgrestFilterBuilder=st.PostgrestQueryBuilder=st.PostgrestClient=void 0;const Ss=ks,Jx=Ss.__importDefault(Qw());st.PostgrestClient=Jx.default;const Xx=Ss.__importDefault(Gx());st.PostgrestQueryBuilder=Xx.default;const Qx=Ss.__importDefault(Td());st.PostgrestFilterBuilder=Qx.default;const e0=Ss.__importDefault(Kx());st.PostgrestTransformBuilder=e0.default;const t0=Ss.__importDefault(qx());st.PostgrestBuilder=t0.default;const r0=Ss.__importDefault(Zx());st.PostgrestError=r0.default;st.default={PostgrestClient:Jx.default,PostgrestQueryBuilder:Xx.default,PostgrestFilterBuilder:Qx.default,PostgrestTransformBuilder:e0.default,PostgrestBuilder:t0.default,PostgrestError:r0.default};class n0{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ej="2.87.1",tj=`realtime-js/${ej}`,s0="1.0.0",rj="2.0.0",km=s0,gu=1e4,nj=1e3,sj=100;var hn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(hn||(hn={}));var Be;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Be||(Be={}));var Vt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vt||(Vt={}));var xu;(function(t){t.websocket="websocket"})(xu||(xu={}));var fn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(fn||(fn={}));class ij{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const a=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var r,n;const a=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,r,n){var a,o;const c=e.topic,d=(a=e.ref)!==null&&a!==void 0?a:"",h=(o=e.join_ref)!==null&&o!==void 0?o:"",m=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},x=Object.keys(g).length===0?"":JSON.stringify(g);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+c.length+m.length+x.length,_=new ArrayBuffer(this.HEADER_LENGTH+v);let y=new DataView(_),b=0;y.setUint8(b++,this.KINDS.userBroadcastPush),y.setUint8(b++,h.length),y.setUint8(b++,d.length),y.setUint8(b++,c.length),y.setUint8(b++,m.length),y.setUint8(b++,x.length),y.setUint8(b++,r),Array.from(h,N=>y.setUint8(b++,N.charCodeAt(0))),Array.from(d,N=>y.setUint8(b++,N.charCodeAt(0))),Array.from(c,N=>y.setUint8(b++,N.charCodeAt(0))),Array.from(m,N=>y.setUint8(b++,N.charCodeAt(0))),Array.from(x,N=>y.setUint8(b++,N.charCodeAt(0)));var E=new Uint8Array(_.byteLength+n.byteLength);return E.set(new Uint8Array(_),0),E.set(new Uint8Array(n),_.byteLength),E.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[a,o,c,d,h]=n;return r({join_ref:a,ref:o,topic:c,event:d,payload:h})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,a)}}_decodeUserBroadcast(e,r,n){const a=r.getUint8(1),o=r.getUint8(2),c=r.getUint8(3),d=r.getUint8(4);let h=this.HEADER_LENGTH+4;const m=n.decode(e.slice(h,h+a));h=h+a;const g=n.decode(e.slice(h,h+o));h=h+o;const x=n.decode(e.slice(h,h+c));h=h+c;const v=e.slice(h,e.byteLength),_=d===this.JSON_ENCODING?JSON.parse(n.decode(v)):v,y={type:this.BROADCAST_EVENT,event:g,payload:_};return c>0&&(y.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class i0{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var we;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(we||(we={}));const Sm=(t,e,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=aj(c,t,e,a),o),{}):{}},aj=(t,e,r,n)=>{const a=e.find(d=>d.name===t),o=a==null?void 0:a.type,c=r[t];return o&&!n.includes(o)?a0(o,c):yu(c)},a0=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return uj(e,r)}switch(t){case we.bool:return oj(e);case we.float4:case we.float8:case we.int2:case we.int4:case we.int8:case we.numeric:case we.oid:return lj(e);case we.json:case we.jsonb:return cj(e);case we.timestamp:return dj(e);case we.abstime:case we.date:case we.daterange:case we.int4range:case we.int8range:case we.money:case we.reltime:case we.text:case we.time:case we.timestamptz:case we.timetz:case we.tsrange:case we.tstzrange:return yu(e);default:return yu(e)}},yu=t=>t,oj=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},lj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},cj=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},uj=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const c=t.slice(1,r);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(d=>a0(e,d))}return t},dj=t=>typeof t=="string"?t.replace(" ","T"):t,o0=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class uc{constructor(e,r,n={},a=gu){this.channel=e,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(vu||(vu={}));let l0=class qa{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qa.syncState(this.state,a,o,c),this.pendingDiffs.forEach(h=>{this.state=qa.syncDiff(this.state,h,o,c)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},a=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=qa.syncDiff(this.state,a,o,c),d())}),this.onJoin((a,o,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:c})}),this.onLeave((a,o,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,a){const o=this.cloneDeep(e),c=this.transformState(r),d={},h={};return this.map(o,(m,g)=>{c[m]||(h[m]=g)}),this.map(c,(m,g)=>{const x=o[m];if(x){const v=g.map(E=>E.presence_ref),_=x.map(E=>E.presence_ref),y=g.filter(E=>_.indexOf(E.presence_ref)<0),b=x.filter(E=>v.indexOf(E.presence_ref)<0);y.length>0&&(d[m]=y),b.length>0&&(h[m]=b)}else d[m]=g}),this.syncDiff(o,{joins:d,leaves:h},n,a)}static syncDiff(e,r,n,a){const{joins:o,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(o,(d,h)=>{var m;const g=(m=e[d])!==null&&m!==void 0?m:[];if(e[d]=this.cloneDeep(h),g.length>0){const x=e[d].map(_=>_.presence_ref),v=g.filter(_=>x.indexOf(_.presence_ref)<0);e[d].unshift(...v)}n(d,g,h)}),this.map(c,(d,h)=>{let m=e[d];if(!m)return;const g=h.map(x=>x.presence_ref);m=m.filter(x=>g.indexOf(x.presence_ref)<0),e[d]=m,a(d,m,h),m.length===0&&delete e[d]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const a=e[n];return"metas"in a?r[n]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var _u;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(_u||(_u={}));var us;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(us||(us={}));var nr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(nr||(nr={}));const hj=Be;let c0=class Qs{constructor(e,r={config:{}},n){var a,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new uc(this,Vt.join,this.params,this.timeout),this.rejoinTimer=new i0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vt.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new l0(this),this.broadcastEndpointURL=o0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:c,presence:d,private:h}}=this.params,m=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(_=>_.filter))!==null&&a!==void 0?a:[],g=!!this.bindings[us.PRESENCE]&&this.bindings[us.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,x={},v={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(_=>e==null?void 0:e(nr.CHANNEL_ERROR,_)),this._onClose(()=>e==null?void 0:e(nr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:_})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){e==null||e(nr.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,E=(y=b==null?void 0:b.length)!==null&&y!==void 0?y:0,N=[];for(let j=0;j<E;j++){const k=b[j],{filter:{event:T,schema:D,table:z,filter:C}}=k,B=_&&_[j];if(B&&B.event===T&&Qs.isFilterValueEqual(B.schema,D)&&Qs.isFilterValueEqual(B.table,z)&&Qs.isFilterValueEqual(B.filter,C))N.push(Object.assign(Object.assign({},k),{id:B.id}));else{this.unsubscribe(),this.state=Be.errored,e==null||e(nr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(nr.SUBSCRIBED);return}}).receive("error",_=>{this.state=Be.errored,e==null||e(nr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(nr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Be.joined&&e===us.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var a;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const m=await d.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(e,r={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,d,h;const m=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Be.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new uc(this,Vt.leave,{},e),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Be.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const a=new AbortController,o=setTimeout(()=>a.abort(),n),c=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),c}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new uc(this,e,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sj){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var a,o;const c=e.toLocaleLowerCase(),{close:d,error:h,leave:m,join:g}=Vt;if(n&&[d,h,m,g].indexOf(c)>=0&&n!==this._joinRef())return;let v=this._onMessage(c,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(_=>{var y,b,E;return((y=_.filter)===null||y===void 0?void 0:y.event)==="*"||((E=(b=_.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===c}).map(_=>_.callback(v,n)):(o=this.bindings[c])===null||o===void 0||o.filter(_=>{var y,b,E,N,j,k;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in _){const T=_.id,D=(y=_.filter)===null||y===void 0?void 0:y.event;return T&&((b=r.ids)===null||b===void 0?void 0:b.includes(T))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((E=r.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const T=(j=(N=_==null?void 0:_.filter)===null||N===void 0?void 0:N.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return T==="*"||T===((k=r==null?void 0:r.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===c}).map(_=>{if(typeof v=="object"&&"ids"in v){const y=v.data,{schema:b,table:E,commit_timestamp:N,type:j,errors:k}=y;v=Object.assign(Object.assign({},{schema:b,table:E,commit_timestamp:N,eventType:j,new:{},old:{},errors:k}),this._getPayloadRecords(y))}_.callback(v,n)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const a=e.toLocaleLowerCase(),o={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Qs.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vt.close,{},e)}_onError(e){this._on(Vt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Sm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Sm(e.columns,e.old_record)),r}};const dc=()=>{},Aa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},fj=[1e3,2e3,5e3,1e4],mj=1e4,pj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let gj=class{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gu,this.transport=null,this.heartbeatIntervalMs=Aa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dc,this.ref=0,this.reconnectTimer=null,this.vsn=km,this.logger=dc,this.conn=null,this.sendBuffer=[],this.serializer=new ij,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${xu.websocket}`,this.httpEndpoint=o0(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=n0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case hn.connecting:return fn.Connecting;case hn.open:return fn.Open;case hn.closing:return fn.Closing;default:return fn.Closed}}isConnected(){return this.connectionState()===fn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===n);if(a)return a;{const o=new c0(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:a,ref:o}=e,c=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${r} ${n} (${o})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(nj,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Aa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:o,ref:c}=r,d=c?`(${c})`:"",h=o.status||"";this.log("receive",`${h} ${n} ${a} ${d}`.trim(),o),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(a,o,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===hn.open||this.conn.readyState===hn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${n}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([pj],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const o={access_token:r,version:tj};r&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(Vt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new i0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Aa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,a,o,c,d,h,m,g,x,v,_;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:gu,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Aa.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:dc,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:km,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:y=>fj[y-1]||mj,this.vsn){case s0:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:(y,b)=>b(JSON.stringify(y)),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:(y,b)=>b(JSON.parse(y));break;case rj:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const xj=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:hj,get REALTIME_LISTEN_TYPES(){return us},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return _u},get REALTIME_PRESENCE_LISTEN_EVENTS(){return vu},get REALTIME_SUBSCRIBE_STATES(){return nr},RealtimeChannel:c0,RealtimeClient:gj,RealtimePresence:l0,WebSocketFactory:n0},Symbol.toStringTag,{value:"Module"})),u0=Oi(xj);function Q(t,e,r,n){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(x){c(x)}}function h(g){try{m(n.throw(g))}catch(x){c(x)}}function m(g){g.done?o(g.value):a(g.value).then(d,h)}m((n=n.apply(t,e||[])).next())})}class Ui extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ee(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class d0 extends Ui{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class So extends Ui{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Cd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),yj=()=>Response,bu=t=>{if(Array.isArray(t))return t.map(r=>bu(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=bu(n)}),e},vj=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},_j=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),hc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},bj=(t,e,r)=>Q(void 0,void 0,void 0,function*(){const n=yield yj();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const o=t.status||500,c=(a==null?void 0:a.statusCode)||o+"";e(new d0(hc(a),o,c))}).catch(a=>{e(new So(hc(a),a))}):e(new So(hc(t),t))}),wj=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?a:(vj(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function $i(t,e,r,n,a,o){return Q(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(r,wj(e,n,a,o)).then(h=>{if(!h.ok)throw h;return n!=null&&n.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>bj(h,d,n))})})}function Ci(t,e,r,n){return Q(this,void 0,void 0,function*(){return $i(t,"GET",e,r,n)})}function Ht(t,e,r,n,a){return Q(this,void 0,void 0,function*(){return $i(t,"POST",e,n,a,r)})}function wu(t,e,r,n,a){return Q(this,void 0,void 0,function*(){return $i(t,"PUT",e,n,a,r)})}function jj(t,e,r,n){return Q(this,void 0,void 0,function*(){return $i(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Ad(t,e,r,n,a){return Q(this,void 0,void 0,function*(){return $i(t,"DELETE",e,n,a,r)})}class Nj{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return Q(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ee(e))return{data:null,error:e};throw e}})}}var h0;class kj{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[h0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Nj(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Q(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ee(e))return{data:null,error:e};throw e}})}}h0=Symbol.toStringTag;const Sj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Em={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ej{constructor(e,r={},n,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Cd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,a){return Q(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},Em),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),h&&o.append("metadata",this.encodeMetadata(h)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),h&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(h))):(o=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(d=Object.assign(Object.assign({},d),a.headers));const m=this._removeEmptyFolders(r),g=this._getFinalPath(m),x=yield(e=="PUT"?wu:Ht)(this.fetch,`${this.url}/object/${g}`,o,Object.assign({headers:d},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:x.Id,fullPath:x.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ee(o))return{data:null,error:o};throw o}})}upload(e,r,n){return Q(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,a){return Q(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",r);try{let h;const m=Object.assign({upsert:Em.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",m.cacheControl)):(h=n,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType);const x=yield wu(this.fetch,d.toString(),h,{headers:g});return{data:{path:o,fullPath:x.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Ee(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,r){return Q(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield Ht(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),c=new URL(this.url+o.url),d=c.searchParams.get("token");if(!d)throw new Ui("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ee(n))return{data:null,error:n};throw n}})}update(e,r,n){return Q(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Q(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ee(a))return{data:null,error:a};throw a}})}copy(e,r,n){return Q(this,void 0,void 0,function*(){try{return{data:{path:(yield Ht(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ee(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,n){return Q(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Ht(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const c=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ee(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,n){return Q(this,void 0,void 0,function*(){try{const a=yield Ht(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ee(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),c=o?`?${o}`:"",d=this._getFinalPath(e),h=()=>Ci(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new kj(h,this.shouldThrowOnError)}info(e){return Q(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Ci(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:bu(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ee(n))return{data:null,error:n};throw n}})}exists(e){return Q(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield jj(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ee(n)&&n instanceof So){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const d=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});h!==""&&a.push(h);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${m}`)}}}remove(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Ad(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}list(e,r,n){return Q(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Sj),r),{prefix:e||""});return{data:yield Ht(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ee(a))return{data:null,error:a};throw a}})}listV2(e,r){return Q(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ht(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ee(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const f0="2.87.1",m0={"X-Client-Info":`storage-js/${f0}`};class Pj{constructor(e,r={},n,a){this.shouldThrowOnError=!1;const o=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},m0),r),this.fetch=Cd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Q(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Ci(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}getBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}createBucket(e){return Q(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ht(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ee(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return Q(this,void 0,void 0,function*(){try{return{data:yield wu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ee(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Ad(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Ai=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Tj(t,e,r){const n=new URL(e,t);if(r)for(const[a,o]of Object.entries(r))o!==void 0&&n.searchParams.set(a,o);return n.toString()}async function Cj(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Aj(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:o,headers:c}){const d=Tj(t.baseUrl,n,a),h=await Cj(t.auth),m=await e(d,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...h,...c},body:o?JSON.stringify(o):void 0}),g=await m.text(),x=(m.headers.get("content-type")||"").includes("application/json"),v=x&&g?JSON.parse(g):g;if(!m.ok){const _=x?v:void 0,y=_==null?void 0:_.error;throw new Ai((y==null?void 0:y.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:_})}return{status:m.status,headers:m.headers,data:v}}}}function Oa(t){return t.join("")}var Oj=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Oa(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Oa(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Oa(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Oa(t.namespace)}`}),!0}catch(e){if(e instanceof Ai&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Ai&&r.status===409)return;throw r}}};function Un(t){return t.join("")}var Lj=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Un(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Un(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Un(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Un(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Un(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Un(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Ai&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Ai&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},Rj=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Aj({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Oj(this.client,e),this.tableOps=new Lj(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class p0{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},m0),r),this.fetch=Cd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}listBuckets(e){return Q(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Ci(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Ad(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}from(e){if(!_j(e))throw new Ui("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Rj({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Q(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(o,c){const d=o[c];return typeof d!="function"?d:(...h)=>Q(this,void 0,void 0,function*(){try{return{data:yield d.apply(o,h),error:null}}catch(m){if(n)throw m;return{data:null,error:m}}})}})}}const Od={"X-Client-Info":`storage-js/${f0}`,"Content-Type":"application/json"};class Ld extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function xt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Ka extends Ld{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class g0 extends Ld{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var ju;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ju||(ju={}));const Xo=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ij=()=>Response,x0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Dj=t=>Array.from(new Float32Array(t)),zj=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},Pm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Mj=(t,e,r)=>Q(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const a=t.status||500,o=t;if(typeof o.json=="function")o.json().then(c=>{const d=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new Ka(Pm(c),a,d))}).catch(()=>{const c=a+"",d=o.statusText||`HTTP ${a} error`;e(new Ka(d,a,c))});else{const c=a+"",d=o.statusText||`HTTP ${a} error`;e(new Ka(d,a,c))}}else e(new g0(Pm(t),t))}),Bj=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(x0(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function Uj(t,e,r,n,a,o){return Q(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(r,Bj(e,n,a,o)).then(h=>{if(!h.ok)throw h;if(n!=null&&n.noResolveJson)return h;const m=h.headers.get("content-type");return!m||!m.includes("application/json")?{}:h.json()}).then(h=>c(h)).catch(h=>Mj(h,d,n))})})}function jt(t,e,r,n,a){return Q(this,void 0,void 0,function*(){return Uj(t,"POST",e,n,a,r)})}class y0{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Od),r),this.fetch=Xo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Q(this,void 0,void 0,function*(){try{return{data:(yield jt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}getIndex(e,r){return Q(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}listIndexes(e){return Q(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return Q(this,void 0,void 0,function*(){try{return{data:(yield jt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}}class v0{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Od),r),this.fetch=Xo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Q(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield jt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}getVectors(e){return Q(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}listVectors(e){return Q(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield jt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}queryVectors(e){return Q(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}deleteVectors(e){return Q(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield jt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}}class _0{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Od),r),this.fetch=Xo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:(yield jt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}getBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}listBuckets(){return Q(this,arguments,void 0,function*(e={}){try{return{data:yield jt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:(yield jt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}}class b0 extends _0{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new w0(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Q(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Q(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Q(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Q(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class w0 extends y0{constructor(e,r,n,a){super(e,r,a),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Q(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Q(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Q(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Q(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new j0(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class j0 extends v0{constructor(e,r,n,a,o){super(e,r,o),this.vectorBucketName=n,this.indexName=a}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Q(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Q(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Q(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Q(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Q(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class $j extends Pj{constructor(e,r={},n,a){super(e,r,n,a)}from(e){return new Ej(this.url,this.headers,e,this.fetch)}get vectors(){return new b0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new p0(this.url+"/iceberg",this.headers,this.fetch)}}const Fj=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:p0,StorageApiError:d0,StorageClient:$j,StorageError:Ui,StorageUnknownError:So,StorageVectorsApiError:Ka,StorageVectorsClient:b0,StorageVectorsError:Ld,get StorageVectorsErrorCode(){return ju},StorageVectorsUnknownError:g0,VectorBucketApi:_0,VectorBucketScope:w0,VectorDataApi:v0,VectorIndexApi:y0,VectorIndexScope:j0,isPlainObject:x0,isStorageError:Ee,isStorageVectorsError:xt,normalizeToFloat32:Dj,resolveFetch:Xo,resolveResponse:Ij,validateVectorDimension:zj},Symbol.toStringTag,{value:"Module"})),Hj=Oi(Fj);var N0={},Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.version=void 0;Qo.version="2.87.1";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=Qo;let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(N0);var k0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=a=>a?(...o)=>a(...o):(...o)=>fetch(...o);t.resolveFetch=e;const r=()=>Headers;t.resolveHeadersConstructor=r;const n=(a,o,c)=>{const d=(0,t.resolveFetch)(c),h=(0,t.resolveHeadersConstructor)();return async(m,g)=>{var x;const v=(x=await o())!==null&&x!==void 0?x:a;let _=new h(g==null?void 0:g.headers);return _.has("apikey")||_.set("apikey",a),_.has("Authorization")||_.set("Authorization",`Bearer ${v}`),d(m,Object.assign(Object.assign({},g),{headers:_}))}};t.fetchWithAuth=n})(k0);var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.isBrowser=void 0;Jr.uuid=Wj;Jr.ensureTrailingSlash=S0;Jr.applySettingDefaults=Zj;Jr.validateSupabaseUrl=qj;function Wj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t=="x"?e:e&3|8;return r.toString(16)})}function S0(t){return t.endsWith("/")?t:t+"/"}const Vj=()=>typeof window<"u";Jr.isBrowser=Vj;function Zj(t,e){var r,n;const{db:a,auth:o,realtime:c,global:d}=t,{db:h,auth:m,realtime:g,global:x}=e,v={db:Object.assign(Object.assign({},h),a),auth:Object.assign(Object.assign({},m),o),realtime:Object.assign(Object.assign({},g),c),storage:{},global:Object.assign(Object.assign(Object.assign({},x),d),{headers:Object.assign(Object.assign({},(r=x==null?void 0:x.headers)!==null&&r!==void 0?r:{}),(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function qj(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(S0(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var el={};function tl(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}const E0="2.87.1",Wn=30*1e3,Nu=3,fc=Nu*Wn,Kj="http://localhost:9999",Gj="supabase.auth.token",Yj={"X-Client-Info":`gotrue-js/${E0}`},ku="X-Supabase-Api-Version",P0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xj=10*60*1e3;let bs=class extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}};function ee(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let T0=class extends bs{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}};function C0(t){return ee(t)&&t.name==="AuthApiError"}let Or=class extends bs{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},wr=class extends bs{constructor(e,r,n,a){super(e,n,a),this.name=r,this.status=n}},pt=class extends wr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function A0(t){return ee(t)&&t.name==="AuthSessionMissingError"}let cn=class extends wr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ei=class extends wr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},ti=class extends wr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function O0(t){return ee(t)&&t.name==="AuthImplicitGrantRedirectError"}let Su=class extends wr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Eo=class extends wr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}};function Ga(t){return ee(t)&&t.name==="AuthRetryableFetchError"}let Eu=class extends wr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}};function Qj(t){return ee(t)&&t.name==="AuthWeakPasswordError"}let Po=class extends wr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const To="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tm=` 	
\r=`.split(""),eN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Tm.length;e+=1)t[Tm[e].charCodeAt(0)]=-2;for(let e=0;e<To.length;e+=1)t[To[e].charCodeAt(0)]=e;return t})();function Cm(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(To[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(To[n]),e.queuedBits-=6}}function L0(t,e,r){const n=eN[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Am(t){const e=[],r=c=>{e.push(String.fromCodePoint(c))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=c=>{nN(c,n,r)};for(let c=0;c<t.length;c+=1)L0(t.charCodeAt(c),a,o);return e.join("")}function tN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function rN(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}tN(n,e)}}function nN(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ds(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)L0(t.charCodeAt(a),r,n);return new Uint8Array(e)}function sN(t){const e=[];return rN(t,r=>e.push(r)),new Uint8Array(e)}function xn(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>Cm(a,r,n)),Cm(null,r,n),e.join("")}function iN(t){return Math.round(Date.now()/1e3)+t}function aN(){return Symbol("auth-callback")}const Je=()=>typeof window<"u"&&typeof document<"u",nn={tested:!1,writable:!1},R0=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(nn.tested)return nn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),nn.tested=!0,nn.writable=!0}catch{nn.tested=!0,nn.writable=!1}return nn.writable};function oN(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return r.searchParams.forEach((n,a)=>{e[a]=n}),e}const I0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),lN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Vn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},sn=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ye=async(t,e)=>{await t.removeItem(e)};class rl{constructor(){this.promise=new rl.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}rl.promiseConstructor=Promise;function mc(t){const e=t.split(".");if(e.length!==3)throw new Po("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Jj.test(e[n]))throw new Po("JWT not in base64url format");return{header:JSON.parse(Am(e[0])),payload:JSON.parse(Am(e[1])),signature:ds(e[2]),raw:{header:e[0],payload:e[1]}}}async function cN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function uN(t,e){return new Promise((n,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await t(o);if(!e(o,null,c)){n(c);return}}catch(c){if(!e(o,c)){a(c);return}}})()})}function dN(t){return("0"+t.toString(16)).substr(-2)}function hN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,dN).join("")}async function fN(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function mN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await fN(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $n(t,e,r=!1){const n=hN();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Vn(t,`${e}-code-verifier`,a);const o=await mN(n);return[o,n===o?"plain":"s256"]}const pN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gN(t){const e=t.headers.get(ku);if(!e||!e.match(pN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function xN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function yN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fn(t){if(!vN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pc(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _N(t,e){return new Proxy(t,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,a)}})}function Om(t){return JSON.parse(JSON.stringify(t))}const un=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bN=[502,503,504];async function Lm(t){var e;if(!lN(t))throw new Eo(un(t),0);if(bN.includes(t.status))throw new Eo(un(t),t.status);let r;try{r=await t.json()}catch(o){throw new Or(un(o),o)}let n;const a=gN(t);if(a&&a.getTime()>=P0["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Eu(un(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new pt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new Eu(un(r),t.status,r.weak_password.reasons);throw new T0(un(r),t.status||500,n)}const wN=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function se(t,e,r,n){var a;const o=Object.assign({},n==null?void 0:n.headers);o[ku]||(o[ku]=P0["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const c=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(c.redirect_to=n.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await jN(t,e,r+d,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(h):{data:Object.assign({},h),error:null}}async function jN(t,e,r,n,a,o){const c=wN(e,n,a,o);let d;try{d=await t(r,Object.assign({},c))}catch(h){throw console.error(h),new Eo(un(h),0)}if(d.ok||await Lm(d),n!=null&&n.noResolveJson)return d;try{return await d.json()}catch(h){await Lm(h)}}function $t(t){var e;let r=null;SN(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=iN(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Rm(t){const e=$t(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function NN(t){return{data:t,error:null}}function kN(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o}=t,c=tl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o},h=Object.assign({},c);return{data:{properties:d,user:h},error:null}}function Im(t){return t}function SN(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ya=["global","local","others"];let Rd=class{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=I0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Ya[0]){if(Ya.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ya.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Lr})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=tl(e,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:kN,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ee(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lr})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,a,o,c,d,h;try{const m={nextPage:null,lastPage:0,total:0},g=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Im});if(g.error)throw g.error;const x=await g.json(),v=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(h=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return _.length>0&&(_.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(y.split(";")[1].split("=")[1]);m[`${E}Page`]=b}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},x),m),error:null}}catch(m){if(ee(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Fn(e);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lr})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Fn(e);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Lr})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Fn(e);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Lr})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Fn(e.userId);try{const{data:r,error:n}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Fn(e.userId),Fn(e.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,a,o,c,d,h;try{const m={nextPage:null,lastPage:0,total:0},g=await se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Im});if(g.error)throw g.error;const x=await g.json(),v=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(h=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return _.length>0&&(_.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(y.split(";")[1].split("=")[1]);m[`${E}Page`]=b}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},x),m),error:null}}catch(m){if(ee(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}};function Dm(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const dn={debug:!!(globalThis&&R0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Id extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let D0=class extends Id{};class EN extends Id{}async function z0(t,e,r){dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),dn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new D0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(dn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const zm={};async function PN(t,e,r){var n;const a=(n=zm[t])!==null&&n!==void 0?n:Promise.resolve(),o=Promise.race([a.catch(()=>null),e>=0?new Promise((c,d)=>{setTimeout(()=>{d(new EN(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await r());return zm[t]=o.catch(async c=>{if(c&&c.isAcquireTimeout)return await a,null;throw c}),await o}function TN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function M0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function CN(t){return parseInt(t,16)}function AN(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function ON(t){var e;const{chainId:r,domain:n,expirationTime:a,issuedAt:o=new Date,nonce:c,notBefore:d,requestId:h,resources:m,scheme:g,uri:x,version:v}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const _=M0(t.address),y=g?`${g}://${n}`:n,b=t.statement?`${t.statement}
`:"",E=`${y} wants you to sign in with your Ethereum account:
${_}

${b}`;let N=`URI: ${x}
Version: ${v}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(a&&(N+=`
Expiration Time: ${a.toISOString()}`),d&&(N+=`
Not Before: ${d.toISOString()}`),h&&(N+=`
Request ID: ${h}`),m){let j=`
Resources:`;for(const k of m){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);j+=`
- ${k}`}N+=j}return`${E}
${N}`}class Ue extends Error{constructor({message:e,code:r,cause:n,name:a}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=a??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Co extends Ue{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function LN({error:t,options:e}){var r,n,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ue({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ue({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ue({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ue({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ue({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ue({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Ue({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ue({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(B0(c)){if(o.rp.id!==c)return new Ue({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ue({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ue({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function RN({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ue({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ue({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(B0(n)){if(r.rpId!==n)return new Ue({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ue({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class IN{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const DN=new IN;function zN(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,a=tl(t,["challenge","user","excludeCredentials"]),o=ds(e).buffer,c=Object.assign(Object.assign({},r),{id:ds(r.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:c});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const m=n[h];d.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:ds(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function MN(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=tl(t,["challenge","allowCredentials"]),a=ds(e).buffer,o=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];o.allowCredentials[c]=Object.assign(Object.assign({},d),{id:ds(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function BN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:xn(new Uint8Array(t.response.attestationObject)),clientDataJSON:xn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function UN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:xn(new Uint8Array(a.authenticatorData)),clientDataJSON:xn(new Uint8Array(a.clientDataJSON)),signature:xn(new Uint8Array(a.signature)),userHandle:a.userHandle?xn(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function B0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Mm(){var t,e;return!!(Je()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function $N(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Co("Browser returned unexpected credential type",e)}:{data:null,error:new Co("Empty credential response",e)}}catch(e){return{data:null,error:LN({error:e,options:t})}}}async function FN(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Co("Browser returned unexpected credential type",e)}:{data:null,error:new Co("Empty credential response",e)}}catch(e){return{data:null,error:RN({error:e,options:t})}}}const HN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},WN={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ao(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of t)if(a)for(const o in a){const c=a[o];if(c!==void 0)if(Array.isArray(c))n[o]=c;else if(r(c))n[o]=c;else if(e(c)){const d=n[o];e(d)?n[o]=Ao(d,c):n[o]=Ao(c)}else n[o]=c}return n}function VN(t,e){return Ao(HN,t,e||{})}function ZN(t,e){return Ao(WN,t,e||{})}class qN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:a},o){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!c)return{data:null,error:d};const h=a??DN.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=VN(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:g,error:x}=await $N({publicKey:m,signal:h});return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:x}}case"request":{const m=ZN(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:g,error:x}=await FN(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:h}));return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:x}}}}catch(c){return ee(c)?{data:null,error:c}:{data:null,error:new Or("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!r)return{data:null,error:new bs("rpId is required for WebAuthn authentication")};try{if(!Mm())return{data:null,error:new Or("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:o});if(!c)return{data:null,error:d};const{webauthn:h}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:n,credential_response:h.credential_response}})}catch(c){return ee(c)?{data:null,error:c}:{data:null,error:new Or("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!r)return{data:null,error:new bs("rpId is required for WebAuthn registration")};try{if(!Mm())return{data:null,error:new Or("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(g=>{var x;return(x=g.data)===null||x===void 0?void 0:x.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:d};const{data:h,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:o});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:n,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(c){return ee(c)?{data:null,error:c}:{data:null,error:new Or("Unexpected error in register",c)}}}}TN();const KN={url:Kj,storageKey:Gj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Bm(t,e,r){return await r()}const Hn={};let Dd=class Pu{get jwks(){var e,r;return(r=(e=Hn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Hn[this.storageKey]=Object.assign(Object.assign({},Hn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Hn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Hn[this.storageKey]=Object.assign(Object.assign({},Hn[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},KN),e);if(this.storageKey=o.storageKey,this.instanceID=(r=Pu.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Pu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Je()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Rd({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=I0(o.fetch),this.lock=o.lock||Bm,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Je()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=z0:this.lock=Bm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new qN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:R0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dm(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Dm(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${E0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Je()&&(r=oN(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Je()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),O0(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ee(r)?this._returnResult({error:r}):this._returnResult({error:new Or("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,a;try{const o=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:$t}),{data:c,error:d}=o;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const h=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(ee(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,n,a;try{let o;if("email"in e){const{email:g,password:x,options:v}=e;let _=null,y=null;this.flowType==="pkce"&&([_,y]=await $n(this.storage,this.storageKey)),o=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:x,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:_,code_challenge_method:y},xform:$t})}else if("phone"in e){const{phone:g,password:x,options:v}=e;o=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:x,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(a=v==null?void 0:v.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:$t})}else throw new ei("You must provide either an email or phone number and a password");const{data:c,error:d}=o;if(d||!c)return await Ye(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),ee(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:c,options:d}=e;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Rm})}else if("phone"in e){const{phone:o,password:c,options:d}=e;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Rm})}else throw new ei("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const o=new cn;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,a,o,c,d,h,m,g,x,v;let _,y;if("message"in e)_=e.message,y=e.signature;else{const{chain:b,wallet:E,statement:N,options:j}=e;let k;if(Je())if(typeof E=="object")k=E;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")k=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=E}const T=new URL((r=j==null?void 0:j.url)!==null&&r!==void 0?r:window.location.href),D=await k.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=M0(D[0]);let C=(n=j==null?void 0:j.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const O=await k.request({method:"eth_chainId"});C=CN(O)}const B={domain:T.host,address:z,statement:N,uri:T.href,version:"1",chainId:C,nonce:(a=j==null?void 0:j.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(o=j==null?void 0:j.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=j==null?void 0:j.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=j==null?void 0:j.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=j==null?void 0:j.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(g=j==null?void 0:j.signInWithEthereum)===null||g===void 0?void 0:g.resources};_=ON(B),y=await k.request({method:"personal_sign",params:[AN(_),z]})}try{const{data:b,error:E}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:y},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:$t});if(E)throw E;if(!b||!b.session||!b.user){const N=new cn;return this._returnResult({data:{user:null,session:null},error:N})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:E})}catch(b){if(ee(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(e){var r,n,a,o,c,d,h,m,g,x,v,_;let y,b;if("message"in e)y=e.message,b=e.signature;else{const{chain:E,wallet:N,statement:j,options:k}=e;let T;if(Je())if(typeof N=="object")T=N;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))T=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=N}const D=new URL((r=k==null?void 0:k.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in T&&T.signIn){const z=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),j?{statement:j}:null));let C;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")C=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)C=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),b=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${D.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(a=(n=k==null?void 0:k.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((m=k==null?void 0:k.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((x=(g=k==null?void 0:k.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||x===void 0)&&x.length?["Resources",...k.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const z=await T.signMessage(new TextEncoder().encode(y),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=z}}try{const{data:E,error:N}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:xn(b)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:$t});if(N)throw N;if(!E||!E.session||!E.user){const j=new cn;return this._returnResult({data:{user:null,session:null},error:j})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:N})}catch(E){if(ee(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const r=await sn(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:o,error:c}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:$t});if(await Ye(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const d=new cn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:c})}catch(o){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),ee(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:a,access_token:o,nonce:c}=e,d=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:$t}),{data:h,error:m}=d;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h||!h.session||!h.user){const g=new cn;return this._returnResult({data:{user:null,session:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:m})}catch(r){if(ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,a,o,c;try{if("email"in e){const{email:d,options:h}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await $n(this.storage,this.storageKey));const{error:x}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(n=h==null?void 0:h.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in e){const{phone:d,options:h}=e,{data:m,error:g}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:g})}throw new ei("You must provide either an email or phone number.")}catch(d){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),ee(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var r,n;try{let a,o;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:c,error:d}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:$t});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,m=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(a){if(ee(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,n,a,o,c;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await $n(this.storage,this.storageKey));const m=await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:NN});return!((o=m.data)===null||o===void 0)&&o.url&&Je()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(d){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),ee(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new pt;const{error:a}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(ee(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:o}=e,{error:c}=await se(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:n,type:a,options:o}=e,{data:c,error:d}=await se(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new ei("You must provide either an email or phone number and a type")}catch(r){if(ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await sn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<fc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const c=await sn(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=pc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=_N(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lr}):await this._useSession(async r=>{var n,a,o;const{data:c,error:d}=r;if(d)throw d;return!(!((n=c.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pt}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Lr})})}catch(r){if(ee(r))return A0(r)&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:a,error:o}=n;if(o)throw o;if(!a.session)throw new pt;const c=a.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await $n(this.storage,this.storageKey));const{data:m,error:g}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:c.access_token,xform:Lr});if(g)throw g;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(n){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),ee(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pt;const r=Date.now()/1e3;let n=r,a=!0,o=null;const{payload:c}=mc(e.access_token);if(c.exp&&(n=c.exp,a=n<=r),a){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(ee(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:c,error:d}=r;if(d)throw d;e=(n=c.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new pt;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Je())throw new ti("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ti(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Su("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ti("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Su("No code detected.");const{data:j,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:o,refresh_token:c,expires_in:d,expires_at:h,token_type:m}=e;if(!o||!d||!c||!m)throw new ti("No session defined in URL");const g=Math.round(Date.now()/1e3),x=parseInt(d);let v=g+x;h&&(v=parseInt(h));const _=v-g;_*1e3<=Wn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${x}s`);const y=v-x;g-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,v,g):g-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,v,g);const{data:b,error:E}=await this._getUser(o);if(E)throw E;const N={provider_token:n,provider_refresh_token:a,access_token:o,expires_in:x,expires_at:v,refresh_token:c,token_type:m,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:e.type},error:null})}catch(n){if(ee(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await sn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return this._returnResult({error:o});const c=(n=a.session)===null||n===void 0?void 0:n.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(C0(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=aN(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,a;try{const{data:{session:o},error:c}=r;if(c)throw c;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await $n(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),ee(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:a}=await this._useSession(async o=>{var c,d,h,m,g;const{data:x,error:v}=o;if(v)throw v;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",_,{headers:this.headers,jwt:(g=(m=x.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return Je()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ee(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:o}}=r;if(a)throw a;const{options:c,provider:d,token:h,access_token:m,nonce:g}=e,x=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:h,access_token:m,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:$t}),{data:v,error:_}=x;return _?this._returnResult({data:{user:null,session:null},error:_}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new cn}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:_}))}catch(a){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),ee(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,a;const{data:o,error:c}=r;if(c)throw c;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await uN(async a=>(a>0&&await cN(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$t})),(a,o)=>{const c=200*Math.pow(2,a);return o&&Ga(o)&&Date.now()+c-n<Wn})}catch(n){if(this._debug(r,"error",n),ee(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Je()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await sn(this.storage,this.storageKey);if(a&&this.userStorage){let c=await sn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Vn(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:pc()}else if(a&&!a.user&&!a.user){const c=await sn(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await Ye(this.storage,this.storageKey+"-user"),await Vn(this.storage,this.storageKey,a)):a.user=pc()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<fc;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${fc}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Ga(c)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(n,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new rl;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new pt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),ee(o)){const c={data:null,error:o};return Ga(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,r)}catch(h){o.push(h)}});if(await Promise.all(c),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ye(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Vn(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=Om(a);await Vn(this.storage,this.storageKey,o)}else{const a=Om(r);await Vn(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ye(this.storage,this.storageKey),await Ye(this.storage,this.storageKey+"-code-verifier"),await Ye(this.storage,this.storageKey+"-user"),this.userStorage&&await Ye(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Je()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/Wn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Wn}ms, refresh threshold is ${Nu} ticks`),a<=Nu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Id)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Je()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,c]=await $n(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);a.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;return o?this._returnResult({data:null,error:o}):await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,a;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:m}=await se(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&h.type==="totp"&&(!((a=h==null?void 0:h.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?BN(e.webauthn.credential_response):UN(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:zN(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:MN(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=mc(n.access_token);let c=null;o.aal&&(c=o.aal);let d=c;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const m=o.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await se(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new pt})})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:a},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new pt});const c=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Je()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:a},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new pt});const c=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Je()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new pt})})}catch(e){if(ee(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pt})})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(d=>d.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(d=>d.kid===e),n&&this.jwks_cached_at+Xj>a)return n;const{data:o,error:c}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,n=o.keys.find(d=>d.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:_,error:y}=await this.getSession();if(y||!_.session)return this._returnResult({data:null,error:y});n=_.session.access_token}const{header:a,payload:o,signature:c,raw:{header:d,payload:h}}=mc(n);r!=null&&r.allowExpired||xN(o.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:_}=await this.getUser(n);if(_)throw _;return{data:{claims:o,header:a,signature:c},error:null}}const g=yN(a.alg),x=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,x,c,sN(`${d}.${h}`)))throw new Po("Invalid JWT signature");return{data:{claims:o,header:a,signature:c},error:null}}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}};Dd.nextInstanceID={};const GN=Rd,YN=Dd,JN=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:GN,AuthApiError:T0,AuthClient:YN,AuthError:bs,AuthImplicitGrantRedirectError:ti,AuthInvalidCredentialsError:ei,AuthInvalidJwtError:Po,AuthInvalidTokenResponseError:cn,AuthPKCEGrantCodeExchangeError:Su,AuthRetryableFetchError:Eo,AuthSessionMissingError:pt,AuthUnknownError:Or,AuthWeakPasswordError:Eu,CustomAuthError:wr,GoTrueAdminApi:Rd,GoTrueClient:Dd,NavigatorLockAcquireTimeoutError:D0,SIGN_OUT_SCOPES:Ya,isAuthApiError:C0,isAuthError:ee,isAuthImplicitGrantRedirectError:O0,isAuthRetryableFetchError:Ga,isAuthSessionMissingError:A0,isAuthWeakPasswordError:Qj,lockInternals:dn,navigatorLock:z0,processLock:PN},Symbol.toStringTag,{value:"Module"})),U0=Oi(JN);Object.defineProperty(el,"__esModule",{value:!0});el.SupabaseAuthClient=void 0;const XN=U0;class QN extends XN.AuthClient{constructor(e){super(e)}}el.SupabaseAuthClient=QN;Object.defineProperty(wo,"__esModule",{value:!0});const e1=yx,t1=st,r1=u0,n1=Hj,La=N0,s1=k0,Um=Jr,i1=el;let a1=class{constructor(e,r,n){var a,o,c;this.supabaseUrl=e,this.supabaseKey=r;const d=(0,Um.validateSupabaseUrl)(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:La.DEFAULT_DB_OPTIONS,realtime:La.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},La.DEFAULT_AUTH_OPTIONS),{storageKey:h}),global:La.DEFAULT_GLOBAL_OPTIONS},g=(0,Um.applySettingDefaults)(n??{},m);this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,g.global.fetch),this.fetch=(0,s1.fetchWithAuth)(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new t1.PostgrestClient(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new n1.StorageClient(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new e1.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:o,storageKey:c,flowType:d,lock:h,debug:m,throwOnError:g},x,v){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i1.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),x),storageKey:c,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:o,flowType:d,lock:h,debug:m,throwOnError:g,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new r1.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};wo.default=a1;(function(t){var e=an&&an.__createBinding||(Object.create?function(g,x,v,_){_===void 0&&(_=v);var y=Object.getOwnPropertyDescriptor(x,v);(!y||("get"in y?!x.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return x[v]}}),Object.defineProperty(g,_,y)}:function(g,x,v,_){_===void 0&&(_=v),g[_]=x[v]}),r=an&&an.__exportStar||function(g,x){for(var v in g)v!=="default"&&!Object.prototype.hasOwnProperty.call(x,v)&&e(x,g,v)},n=an&&an.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const a=n(wo);r(U0,t);var o=st;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return o.PostgrestError}});var c=yx;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),r(u0,t);var d=wo;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return n(d).default}});const h=(g,x,v)=>new a.default(g,x,v);t.createClient=h;function m(){if(typeof window<"u"||typeof process>"u")return!1;const g=process.version;if(g==null)return!1;const x=g.match(/^v(\d+)\./);return x?parseInt(x[1],10)<=18:!1}m()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Ed);const $0=Au(Ed),o1=Wm({__proto__:null,default:$0},[Ed]),{PostgrestError:Qk,FunctionsHttpError:eS,FunctionsFetchError:tS,FunctionsRelayError:rS,FunctionsError:nS,FunctionRegion:sS,SupabaseClient:iS,createClient:l1,GoTrueAdminApi:aS,GoTrueClient:oS,AuthAdminApi:lS,AuthClient:cS,navigatorLock:uS,NavigatorLockAcquireTimeoutError:dS,lockInternals:hS,processLock:fS,SIGN_OUT_SCOPES:mS,AuthError:pS,AuthApiError:gS,AuthUnknownError:xS,CustomAuthError:yS,AuthSessionMissingError:vS,AuthInvalidTokenResponseError:_S,AuthInvalidCredentialsError:bS,AuthImplicitGrantRedirectError:wS,AuthPKCEGrantCodeExchangeError:jS,AuthRetryableFetchError:NS,AuthWeakPasswordError:kS,AuthInvalidJwtError:SS,isAuthError:ES,isAuthApiError:PS,isAuthSessionMissingError:TS,isAuthImplicitGrantRedirectError:CS,isAuthRetryableFetchError:AS,isAuthWeakPasswordError:OS,RealtimePresence:LS,RealtimeChannel:RS,RealtimeClient:IS,REALTIME_LISTEN_TYPES:DS,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:zS,REALTIME_PRESENCE_LISTEN_EVENTS:MS,REALTIME_SUBSCRIBE_STATES:BS,REALTIME_CHANNEL_STATES:US}=$0||o1,c1="https://bzbzcnyipynpkzaqauxd.supabase.co",u1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ6YnpjbnlpcHlucGt6YXFhdXhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2MDg3ODIsImV4cCI6MjA4MTE4NDc4Mn0.1CfLmFr80h9B0_tvicYxQSJUAmaWBBi3V5ZkD451r-g",I=l1(c1,u1,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0}}),q={login:async(t,e)=>{var r,n,a;try{const{data:o,error:c}=await I.auth.signInWithPassword({email:t,password:e||"demo123"});if(c)return console.error("Login error:",c.message),null;if(o.user){let{data:d}=await I.from("profiles").select("*").eq("id",o.user.id).single();if(!d){const{data:h,error:m}=await I.from("profiles").insert({id:o.user.id,email:o.user.email,name:((r=o.user.user_metadata)==null?void 0:r.name)||t.split("@")[0],role:"user",is_active:!0,balance:0}).select().single();m?console.error("Profile insert error:",m.message):d=h}return{token:(n=o.session)==null?void 0:n.access_token,user:{email:(d==null?void 0:d.email)||o.user.email,name:(d==null?void 0:d.name)||((a=o.user.user_metadata)==null?void 0:a.name)||"User",balance:(d==null?void 0:d.balance)||0,role:(d==null?void 0:d.role)||"user",isActive:(d==null?void 0:d.is_active)??!0,createdAt:d!=null&&d.created_at?new Date(d.created_at).getTime():Date.now(),trxAddress:d==null?void 0:d.trx_address,account_type:(d==null?void 0:d.account_type)||"personal",business_name:d==null?void 0:d.business_name,business_department_id:d==null?void 0:d.business_department_id}}}return null}catch(o){return console.error("Login error:",o),null}},register:async(t,e,r,n="personal",a)=>{var o;try{const{data:c,error:d}=await I.auth.signUp({email:e,password:r||"demo123",options:{data:{name:t,accountType:n,businessName:a}}});if(d)return console.error("Register error:",d.message),alert(d.message||"Registration failed"),null;if(c.user){let h=null;if(n==="business"&&a){const{data:x,error:v}=await I.from("departments").insert({name:a,category:"business",commission_mode:"percentage",commission_value:0,is_active:!0,color:"#FFD700",owner_id:c.user.id}).select().single();v?console.error("Department creation error:",v.message):h=x==null?void 0:x.id}const m={id:c.user.id,email:c.user.email,name:n==="business"?a:t,role:"user",is_active:!0,balance:0,account_type:n};n==="business"&&(m.business_name=a,m.business_department_id=h);const{error:g}=await I.from("profiles").insert(m);return g&&console.error("Profile creation error:",g.message),{token:(o=c.session)==null?void 0:o.access_token,user:{email:c.user.email,name:n==="business"?a:t,balance:0,role:"user",isActive:!0,accountType:n,businessName:n==="business"?a:void 0}}}return null}catch(c){return console.error("Register error:",c),null}},logout:async()=>{await I.auth.signOut()},getUser:async t=>{try{const{data:e}=await I.from("profiles").select("*").eq("email",t).single();if(e)return{email:e.email,name:e.name,balance:e.balance||0,role:e.role||"user",isActive:e.is_active,createdAt:new Date(e.created_at).getTime(),trxAddress:e.trx_address,account_type:e.account_type||"personal",business_name:e.business_name,business_department_id:e.business_department_id}}catch(e){console.error("Get user error:",e)}return null},getNotifications:async t=>{try{const{data:e}=await I.from("profiles").select("id").eq("email",t).single();if(!e)return[];const{data:r}=await I.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return r||[]}catch{return[]}},markNotificationRead:async t=>{try{await I.from("notifications").update({is_read:!0}).eq("id",t)}catch(e){console.error("Mark notification read error:",e)}},getTransactions:async t=>{try{if(!t)return[];const{data:e,error:r}=await I.from("profiles").select("id").eq("email",t).single();if(r)return console.error("getTransactions profile error:",r.message),[];if(!e)return[];const{data:n,error:a}=await I.from("transactions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return a?(console.error("getTransactions tx error:",a.message),[]):(n||[]).map(o=>{var c,d;return{id:o.id,type:((c=o.type)==null?void 0:c.toLowerCase())||"unknown",amount:o.amount,currency:"NUSD",date:o.created_at,status:((d=o.status)==null?void 0:d.toLowerCase())||"pending",title:`${o.type||"Unknown"} Transaction`,network:o.network,txHash:o.tx_hash}})}catch(e){return console.error("getTransactions exception:",e.message),[]}},getBankAccounts:async t=>{try{const{data:e}=await I.from("profiles").select("id").eq("email",t).single();if(!e)return[];const{data:r}=await I.from("bank_accounts").select("*").eq("user_id",e.id);return(r||[]).map(n=>({id:n.id,bankName:n.bank_name,iban:n.iban,accountName:n.account_name,addedAt:n.added_at}))}catch{return[]}},addBankAccount:async(t,e,r,n)=>{try{const{data:a}=await I.from("profiles").select("id").eq("email",t).single();if(!a)return null;const{data:o,error:c}=await I.from("bank_accounts").insert({user_id:a.id,bank_name:e,iban:r,account_name:n}).select().single();return c?(console.error("Add bank account error:",c),null):{id:o.id,bankName:o.bank_name,iban:o.iban,accountName:o.account_name}}catch{return null}},deleteBankAccount:async(t,e)=>{try{const{error:r}=await I.from("bank_accounts").delete().eq("id",e);return!r}catch{return null}},createWithdrawal:async(t,e,r=!1,n="withdraw",a,o)=>{try{const{data:c,error:d}=await I.functions.invoke("create-withdrawal",{body:{amount:e,network:a,address:o}});if(d)throw d;return{success:!0,transaction:c}}catch(c){return console.error("Withdrawal error:",c),c.context&&c.context.json&&c.context.json().then(d=>console.error("Edge Function Error Body:",JSON.stringify(d,null,2))),{success:!1,error:c.message||"Withdrawal failed"}}},notifyDeposit:async(t,e,r,n,a)=>{try{const{data:o}=await I.from("profiles").select("id").eq("email",t).single();if(!o)return{success:!1,error:"User not found"};const{error:c}=await I.from("transactions").insert({user_id:o.id,type:"DEPOSIT",amount:e,status:"PENDING",network:r,tx_hash:n});return c?{success:!1,error:c.message}:{success:!0}}catch{return{success:!1,error:"Connection error"}}},getPendingApprovals:async t=>{try{const{data:e}=await I.from("profiles").select("id").eq("email",t).single();return e?[]:[]}catch{return[]}},getPublicAgents:async()=>{try{const{data:t}=await I.from("merchants").select("*").eq("is_agent",!0).eq("is_active",!0);return t||[]}catch{return[]}},getMerchantBySlug:async t=>{try{const{data:e}=await I.from("merchants").select("*, departments(*)").eq("slug",t).single();return e}catch{return null}},getAllUsers:async()=>{try{const{data:t}=await I.from("profiles").select("*").order("created_at",{ascending:!1});return(t||[]).map(e=>({email:e.email,name:e.name,balance:e.balance,role:e.role,isActive:e.is_active,createdAt:new Date(e.created_at).getTime()}))}catch{return[]}},getAllTransactions:async()=>{try{const{data:t}=await I.from("transactions").select("*, profiles(email, name)").order("created_at",{ascending:!1});return(t||[]).map(e=>{var r,n;return{id:e.id,type:e.type,amount:e.amount,status:e.status,network:e.network,txHash:e.tx_hash,timestamp:e.created_at,userEmail:(r=e.profiles)==null?void 0:r.email,userName:(n=e.profiles)==null?void 0:n.name}})}catch{return[]}},getSystemStats:async()=>{try{const{data:t}=await I.from("profiles").select("balance, is_active"),{data:e}=await I.from("transactions").select("type, amount, status"),{data:r}=await I.from("departments").select("id"),{data:n}=await I.from("vaults").select("balance"),a=(t==null?void 0:t.reduce((b,E)=>b+(E.balance||0),0))||0,o=(t==null?void 0:t.filter(b=>b.is_active).length)||0,c=(n==null?void 0:n.reduce((b,E)=>b+(E.balance||0),0))||0,d=e||[],h=d.length,m=d.filter(b=>b.status==="PENDING").length,x=d.filter(b=>b.type==="DEPOSIT"||b.amount>0&&b.status==="COMPLETED").reduce((b,E)=>b+Math.abs(E.amount),0),_=d.filter(b=>b.type==="WITHDRAW"||b.type==="P2P_SELL"||b.amount<0&&b.status==="COMPLETED").reduce((b,E)=>b+Math.abs(E.amount),0),y=d.reduce((b,E)=>b+Math.abs(E.amount||0),0);return{totalUserBalance:a,totalVaultBalance:c,totalDeposits:x,totalWithdrawals:_,vaultDeposits:0,vaultWithdrawals:0,pendingTransactions:m,totalTransactions:h,activeUsers:o,departmentCount:(r==null?void 0:r.length)||0,totalRevenue:0,totalVolume:y}}catch(t){return console.error("getSystemStats error:",t),{totalUserBalance:0,totalVaultBalance:0,totalDeposits:0,totalWithdrawals:0,vaultDeposits:0,vaultWithdrawals:0,pendingTransactions:0,totalTransactions:0,activeUsers:0,departmentCount:0,totalRevenue:0,totalVolume:0}}},toggleUserStatus:async t=>{try{const{data:e}=await I.from("profiles").select("id, is_active").eq("email",t).single();return e?(await I.from("profiles").update({is_active:!e.is_active}).eq("id",e.id),{success:!0}):{success:!1}}catch{return{success:!1}}},approveTransaction:async t=>{try{const{data:e,error:r}=await I.functions.invoke("approve-transaction",{body:{transactionId:t,action:"approve"}});return r?(console.error("Approve error:",r),!1):(e==null?void 0:e.success)||!1}catch(e){return console.error("Approve exception:",e),!1}},rejectTransaction:async t=>{try{const{data:e,error:r}=await I.functions.invoke("approve-transaction",{body:{transactionId:t,action:"reject"}});return r?(console.error("Reject error:",r),!1):(e==null?void 0:e.success)||!1}catch(e){return console.error("Reject exception:",e),!1}},getTransactionLogs:async t=>{try{const{data:e,error:r}=await I.from("transaction_audit_logs").select("*").eq("transaction_id",t).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(e){return console.error("Audit log fetch error:",e),[]}},getDepartments:async()=>{try{const{data:t,error:e}=await I.from("departments").select(`
          *,
          members:department_members(count)
        `).order("created_at",{ascending:!1});return e?(console.error("getDepartments error:",e),[]):t||[]}catch(t){return console.error("getDepartments exception:",t),[]}},createDepartment:async t=>{try{const{data:e,error:r}=await I.functions.invoke("create-department",{body:t});if(r)throw r;return e}catch(e){return console.error("createDepartment fully detailed error:",e),e.context&&e.context.json&&e.context.json().then(r=>console.error("Edge Function Error Body:",JSON.stringify(r,null,2))),{success:!1,error:e}}},updateDepartment:async(t,e)=>{try{const{data:r,error:n}=await I.from("departments").update({name:e.name,color:e.color,category:e.category,commission_type:e.commissionType,commission_rate:e.commissionRate}).eq("id",t).select().single();return n?null:r}catch{return null}},deleteDepartment:async t=>{try{const{error:e}=await I.from("departments").delete().eq("id",t);return!e}catch{return!1}},getDepartment:async t=>{try{const{data:e,error:r}=await I.from("departments").select(`
          *,
          panels:payment_panels(*),
          vaults(*),
          owner:profiles!departments_owner_id_fkey(id, email, full_name, balance)
        `).eq("id",t).single();if(r)throw r;return e}catch(e){return console.error("getDepartment error:",e),null}},createPaymentPanel:async t=>{try{const{data:e,error:r}=await I.functions.invoke("create-payment-panel",{body:t});if(r)throw r;return e}catch(e){return console.error("createPaymentPanel error:",e),{success:!1,error:e}}},getPanelBySlug:async t=>{try{const{data:e,error:r}=await I.from("payment_panels").select(`
                *,
                department:departments(name)
            `).eq("public_slug",t).single();if(r)throw r;return e}catch(e){return console.error("getPanelBySlug error:",e),null}},payViaPanel:async(t,e)=>{try{const{data:r,error:n}=await I.functions.invoke("create-transaction-from-panel",{body:{slug:t,amount:e}});if(n)throw n;return r}catch(r){return console.error("payViaPanel error:",r),{success:!1,error:r}}},getVaults:async()=>{try{const{data:t}=await I.from("vaults").select("*, departments(name, color)");return{vaults:t||[]}}catch{return{vaults:[]}}},getVaultByDepartment:async t=>{try{const{data:e,error:r}=await I.from("vaults").select("*").eq("department_id",t).eq("is_primary",!0).single();return r?(console.error("getVaultByDepartment error:",r),null):e}catch(e){return console.error("getVaultByDepartment exception:",e),null}},getAdminVaults:async()=>{try{const{data:t,error:e}=await I.from("vaults").select("*");return e?(console.error("Vaults fetch error:",e),{vaults:[],ledger:[]}):{vaults:t||[],ledger:[]}}catch(t){return console.error("Vaults exception:",t),{vaults:[],ledger:[]}}},getAllRequests:async()=>[],getAdminLogs:async()=>[],resetDB:async()=>{},cryptoDeposit:async()=>{},findMatches:async()=>null,lockMatch:async()=>!1,markPaymentSent:async(t,e,r,n)=>{},approveRelease:async()=>{},manualVaultDeposit:async(t,e,r,n,a)=>{try{const{data:o,error:c}=await I.from("vaults").select("balance").eq("id",t).single();if(c||!o)return console.error("Vault not found:",c),!1;const{error:d}=await I.from("vaults").update({balance:(o.balance||0)+e}).eq("id",t);if(d)return console.error("Failed to update vault balance:",d),!1;if(a&&r&&r!=="External Transfer"){const{data:h}=await I.from("profiles").select("id, balance").eq("email",r).single();h&&(await I.from("profiles").update({balance:(h.balance||0)+e}).eq("id",h.id),await I.from("transactions").insert({user_id:h.id,type:"DEPOSIT",amount:e,status:"COMPLETED",network:n}))}return!0}catch(o){return console.error("manualVaultDeposit error:",o),!1}},getAvailableVaults:async()=>{try{const{data:t,error:e}=await I.from("vaults").select("*").is("department_id",null);if(e)throw e;return t||[]}catch(t){return console.error("getAvailableVaults error:",t),[]}},assignVault:async(t,e)=>{try{const{data:r,error:n}=await I.functions.invoke("manage-vault",{body:{action:"assign",vault_id:t,department_id:e}});if(n)throw n;return!0}catch(r){return console.error("assignVault error:",r),!1}},unassignVault:async t=>{try{const{data:e,error:r}=await I.functions.invoke("manage-vault",{body:{action:"unassign",vault_id:t}});if(r)throw r;return!0}catch(e){return console.error("unassignVault error:",e),!1}},setPrimaryVault:async(t,e)=>{try{const{data:r,error:n}=await I.functions.invoke("manage-vault",{body:{action:"set_primary",vault_id:t,department_id:e}});if(n)throw n;return!0}catch(r){return console.error("setPrimaryVault error:",r),!1}},createP2POrder:async(t,e,r,n,a,o)=>{try{const c=t==="BUY"?"P2P_BUY":"P2P_SELL",{data:d,error:h}=await I.functions.invoke("create-withdrawal",{body:{amount:e,type:c,memo_code:c==="P2P_SELL"?`${a} - ${n}`:void 0,network:"P2P"}});let m=d;if(d&&d.error)throw{message:d.error,context:{json:()=>Promise.resolve(d)}}}catch(c){console.error("createP2POrder error:",c);let d=null,h="Unknown";if(c.context&&typeof c.context.json=="function")try{d=await c.context.json()}catch{}if(!d&&c.response&&typeof c.response.json=="function")try{d=await c.response.json()}catch{}if(d)console.error("Edge Function Error Body:",JSON.stringify(d,null,2)),h=d.stage||"Unknown",alert(`Sistem Hatas: ${d.error||"Bilinmeyen Hata"} (Stage: ${h})`);else{const m=JSON.stringify(c,Object.getOwnPropertyNames(c));console.error("Raw Error Object:",m),alert(`lem Baarsz: ${c.message||"Bilinmeyen Hata"} 

Detay: ${m.substring(0,200)}`)}return{success:!1,error:c.message}}},createP2POrderNew:async(t,e,r,n,a)=>{try{const{data:o,error:c}=await I.functions.invoke("p2p-create-order",{body:{side:t,amount_usd:e,iban:r,bank_name:n,account_name:a}});return c?(console.error("P2P create order error:",c),{success:!1,error:c.message||"Edge function error"}):(o==null?void 0:o.success)===!1?{success:!1,error:o.error||"Order creation failed"}:{success:!0,order:(o==null?void 0:o.order)||o}}catch(o){return console.error("P2P create order exception:",o),{success:!1,error:o.message||"Network error"}}},matchP2POrder:async t=>{try{const{data:e,error:r}=await I.functions.invoke("p2p-match",{body:{orderId:t}});return r?(console.error("P2P match error:",r),{success:!1,error:r.message||"Match error"}):(e==null?void 0:e.success)===!1?{success:!1,error:e.error||"No match found",waiting:e.waiting}:{success:!0,match:(e==null?void 0:e.match)||e}}catch(e){return console.error("P2P match exception:",e),{success:!1,error:e.message||"Network error"}}},markP2PPaid:async t=>{try{const{data:e,error:r}=await I.functions.invoke("p2p-mark-paid",{body:{orderId:t}});return r?(console.error("P2P mark paid error:",r),{success:!1,error:r.message}):e}catch(e){return console.error("P2P mark paid exception:",e),{success:!1,error:e.message}}},buyerConfirmP2P:async(t,e)=>{try{const{data:r,error:n}=await I.functions.invoke("p2p-buyer-confirm",{body:{orderId:t,confirm:e}});return n?(console.error("P2P buyer confirm error:",n),{success:!1,error:n.message}):r}catch(r){return console.error("P2P buyer confirm exception:",r),{success:!1,error:r.message}}},adminConfirmP2P:async(t,e)=>{try{const{data:r,error:n}=await I.functions.invoke("p2p-admin-confirm",{body:{orderId:t,confirm:e}});return n?(console.error("P2P admin confirm error:",n),{success:!1,error:n.message}):r}catch(r){return console.error("P2P admin confirm exception:",r),{success:!1,error:r.message}}},getP2POrderStatus:async t=>{try{const{data:e,error:r}=await I.from("p2p_orders").select("*").eq("id",t).single();return r?(console.error("P2P order status error:",r),null):e}catch(e){return console.error("P2P order status exception:",e),null}},getActiveP2POrder:async()=>{try{const{data:{user:t}}=await I.auth.getUser();if(!t)return null;const{data:e,error:r}=await I.from("p2p_orders").select("id, status, amount_usd, created_at").eq("seller_id",t.id).in("status",["OPEN","PAID"]).order("created_at",{ascending:!1}).limit(1);if(r&&console.error("getActiveP2POrder SELL error:",r),e&&e.length>0)return console.log("Active SELL order found:",e[0]),{...e[0],type:"SELL"};const{data:n,error:a}=await I.from("p2p_orders").select("id, status, amount_usd, created_at").eq("buyer_id",t.id).in("status",["OPEN","PAID"]).order("created_at",{ascending:!1}).limit(1);return a&&console.error("getActiveP2POrder BUY error:",a),n&&n.length>0?(console.log("Active BUY order found:",n[0]),{...n[0],type:"BUY"}):(console.log("No active P2P orders found"),null)}catch(t){return console.error("getActiveP2POrder error:",t),null}},cancelP2POrder:async t=>{try{const{data:e,error:r}=await I.functions.invoke("p2p-cancel-order",{body:{orderId:t}});return r?(console.error("Cancel P2P order error:",r),{success:!1,error:r.message}):(e==null?void 0:e.success)===!1?{success:!1,error:e.error||"Cancel failed"}:{success:!0,order:(e==null?void 0:e.order)||e}}catch(e){return console.error("Cancel P2P order exception:",e),{success:!1,error:e.message}}},getMyP2POrders:async()=>{try{const{data:{user:t}}=await I.auth.getUser();if(!t)return[];const{data:e,error:r}=await I.from("p2p_orders").select("*").or(`buyer_id.eq.${t.id},seller_id.eq.${t.id}`).order("created_at",{ascending:!1});return r?(console.error("My P2P orders error:",r),[]):e||[]}catch(t){return console.error("My P2P orders exception:",t),[]}},getP2PEvents:async t=>{try{const{data:e,error:r}=await I.from("p2p_events").select("*").eq("order_id",t).order("created_at",{ascending:!0});return r?(console.error("P2P events error:",r),[]):e||[]}catch(e){return console.error("P2P events exception:",e),[]}},markP2PPaymentSent:async()=>({success:!1}),confirmP2PPaymentReceived:async()=>({success:!1}),getMyP2PActivity:async()=>({orders:[],trades:[]}),getAllMerchants:async()=>[],createMerchant:async()=>({success:!1}),updateMerchant:async()=>({success:!1}),deleteMerchant:async()=>!1,getDepartmentMerchant:async()=>null,p2pAction:async(t,e={})=>{try{const{data:r,error:n}=await I.functions.invoke("p2p-action",{body:{action:t,...e}});return n?(console.error("P2P action error:",n),{success:!1,error:n.message||"Edge function error"}):r||{success:!1,error:"No response"}}catch(r){return console.error("P2P action exception:",r),{success:!1,error:r.message||"Network error"}}},getProfile:async()=>{try{const{data:{user:t}}=await I.auth.getUser();if(!t)return null;const{data:e,error:r}=await I.from("profiles").select("*, business_department_id, business_name, account_type").eq("id",t.id).single();if(r)throw r;return e}catch(t){return console.error("getProfile error:",t),null}},getDepartmentTransactions:async t=>{try{const{data:e}=await I.from("departments").select("owner_id").eq("id",t).single();if(!(e!=null&&e.owner_id))return console.log("No owner_id for department:",t),[];const{data:r,error:n}=await I.from("transactions").select("*").eq("user_id",e.owner_id).order("created_at",{ascending:!1}).limit(50);if(n)throw n;return r||[]}catch(e){return console.error("getDepartmentTransactions error:",e),[]}},internalTransfer:async(t,e)=>{try{const{data:r,error:n}=await I.functions.invoke("internal-transfer",{body:{recipient_code:t,amount:e}});if(n)throw n;return r||{success:!1,error:"No response"}}catch(r){return console.error("internalTransfer error:",r),{success:!1,error:r.message||"Transfer failed"}}},updatePanelStatus:async(t,e)=>{try{const{data:r,error:n}=await I.from("payment_panels").update({is_active:e}).eq("id",t).select().single();if(n)throw n;return{success:!0,panel:r}}catch(r){return console.error("updatePanelStatus error:",r),{success:!1,error:r.message}}},createBusinessAccount:async t=>{try{const{data:e,error:r}=await I.functions.invoke("create-business-account",{body:{businessName:t}});if(r)throw r;return e||{success:!1,error:"No response"}}catch(e){return console.error("createBusinessAccount error:",e),{success:!1,error:e.message||"Failed to create business account"}}},getAllP2POrders:async()=>{try{const{data:t,error:e}=await I.from("p2p_orders").select(`
          *,
          buyer:profiles!p2p_orders_buyer_id_fkey(email, name),
          seller:profiles!p2p_orders_seller_id_fkey(email, name)
        `).order("created_at",{ascending:!1});if(e){console.error("getAllP2POrders error:",e);const{data:a}=await I.from("p2p_orders").select("*").order("created_at",{ascending:!1});return a||[]}const r=new Set;return(t||[]).filter(a=>{if(a.matched_order_id){const o=[a.id,a.matched_order_id].sort().join("|");if(r.has(o))return!1;r.add(o)}return!0})}catch(t){return console.error("getAllP2POrders error:",t),[]}},adminForceCompleteP2POrder:async t=>{try{const{data:e,error:r}=await I.functions.invoke("p2p-admin-action",{body:{action:"forceComplete",orderId:t}});return r?(console.error("Admin force complete error:",r),{success:!1,error:r.message}):e}catch(e){return console.error("adminForceCompleteP2POrder error:",e),{success:!1,error:e.message}}},adminForceCancelP2POrder:async t=>{try{const{data:e,error:r}=await I.functions.invoke("p2p-admin-action",{body:{action:"forceCancel",orderId:t}});return r?(console.error("Admin force cancel error:",r),{success:!1,error:r.message}):e}catch(e){return console.error("adminForceCancelP2POrder error:",e),{success:!1,error:e.message}}},getExchangeRate:async()=>{try{const{data:t,error:e}=await I.from("exchange_rates").select("rate, buy_rate, sell_rate, spread, fetched_at").eq("pair","USDT/TRY").order("fetched_at",{ascending:!1}).limit(1).single();return e?(console.error("getExchangeRate error:",e),{rate:42.5,buy_rate:42.6,sell_rate:42.4,spread:.1,fetched_at:new Date().toISOString(),is_fallback:!0}):{rate:t.rate,buy_rate:t.buy_rate,sell_rate:t.sell_rate,spread:t.spread,fetched_at:t.fetched_at,is_fallback:!1}}catch(t){return console.error("getExchangeRate exception:",t),{rate:42.5,buy_rate:42.6,sell_rate:42.4,spread:.1,fetched_at:new Date().toISOString(),is_fallback:!0}}},updateExchangeRate:async()=>{try{return await(await fetch("https://bzbzcnyipynpkzaqauxd.supabase.co/functions/v1/update-exchange-rate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ6YnpjbnlpcHlucGt6YXFhdXhkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2MDg3ODIsImV4cCI6MjA4MTE4NDc4Mn0.1CfLmFr80h9B0_tvicYxQSJUAmaWBBi3V5ZkD451r-g"}})).json()}catch(t){return console.error("updateExchangeRate error:",t),{success:!1,error:t.message}}},getNotificationHistory:async()=>{try{const{data:{user:t}}=await I.auth.getUser();if(!t)return[];const{data:e,error:r}=await I.from("notifications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(15);return r?(console.error("getNotificationHistory error:",r),[]):e||[]}catch(t){return console.error("getNotificationHistory exception:",t),[]}},createNotification:async(t,e,r,n={})=>{try{const{data:{user:a}}=await I.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};const{data:o,error:c}=await I.from("notifications").insert({user_id:a.id,type:t,title:e,message:r,data:n}).select().single();if(c)return console.error("createNotification insert error:",c),{success:!1,error:c.message};const{data:d}=await I.from("notifications").select("id").eq("user_id",a.id).order("created_at",{ascending:!1});if(d&&d.length>15){const h=d.slice(15).map(m=>m.id);await I.from("notifications").delete().in("id",h)}return{success:!0,notification:o}}catch(a){return console.error("createNotification exception:",a),{success:!1,error:a.message}}},markNotificationAsRead:async t=>{try{const{error:e}=await I.from("notifications").update({read:!0}).eq("id",t);return e?(console.error("markNotificationAsRead error:",e),{success:!1,error:e.message}):{success:!0}}catch(e){return console.error("markNotificationAsRead exception:",e),{success:!1,error:e.message}}},markAllNotificationsAsRead:async()=>{try{const{data:{user:t}}=await I.auth.getUser();if(!t)return{success:!1,error:"Not authenticated"};const{error:e}=await I.from("notifications").update({read:!0}).eq("user_id",t.id).eq("read",!1);return e?(console.error("markAllNotificationsAsRead error:",e),{success:!1,error:e.message}):{success:!0}}catch(t){return console.error("markAllNotificationsAsRead exception:",t),{success:!1,error:t.message}}},getUnreadNotificationCount:async()=>{try{const{data:{user:t}}=await I.auth.getUser();if(!t)return 0;const{count:e,error:r}=await I.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",t.id).eq("read",!1);return r?(console.error("getUnreadNotificationCount error:",r),0):e||0}catch(t){return console.error("getUnreadNotificationCount exception:",t),0}}},d1=()=>{const t=ve(),{login:e}=ht(),[r,n]=S.useState("personal"),[a,o]=S.useState(""),[c,d]=S.useState(""),[h,m]=S.useState(""),[g,x]=S.useState(""),[v,_]=S.useState(""),[y,b]=S.useState(!1),E=async()=>{var j;if(!a||!h||!g)return alert("Please fill all fields");if(g.length<6)return alert("ifre en az 6 karakter olmaldr");if(g!==v)return alert("Passwords do not match");if(r==="business"&&!c)return alert("Business name is required for commercial accounts");b(!0);const N=await q.register(a,h,g,r,c);N&&((j=N.user)!=null&&j.email)&&(await e(N.user.email,g),t("/dashboard")),b(!1)};return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[#111111] p-6 font-display",children:[i.jsx("div",{className:"w-16 h-16 bg-lime-500/20 rounded-2xl flex items-center justify-center mb-4",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl",children:"person_add"})}),i.jsx("h1",{className:"text-2xl font-extrabold text-white mb-6",children:"Create Account"}),i.jsxs("div",{className:"w-full mb-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-3",children:"Account Type"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{type:"button",onClick:()=>n("personal"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${r==="personal"?"border-lime-500 bg-lime-500/10":"border-white/10 bg-[#1a1a1a] hover:border-white/20"}`,children:[i.jsx("span",{className:`material-symbols-outlined text-2xl mb-2 ${r==="personal"?"text-lime-400":"text-gray-500"}`,children:"person"}),i.jsx("span",{className:`text-sm font-bold ${r==="personal"?"text-lime-400":"text-gray-400"}`,children:"Kiisel Wallet"}),i.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Bireysel kullanm"})]}),i.jsxs("button",{type:"button",onClick:()=>n("business"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${r==="business"?"border-lime-500 bg-lime-500/10":"border-white/10 bg-[#1a1a1a] hover:border-white/20"}`,children:[i.jsx("span",{className:`material-symbols-outlined text-2xl mb-2 ${r==="business"?"text-lime-400":"text-gray-500"}`,children:"store"}),i.jsx("span",{className:`text-sm font-bold ${r==="business"?"text-lime-400":"text-gray-400"}`,children:"Ticari Wallet"}),i.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Firma hesab"})]})]})]}),i.jsxs("div",{className:"w-full space-y-5",children:[r==="business"&&i.jsxs("div",{className:"animate-fadeIn",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:["Firma Ad ",i.jsx("span",{className:"text-lime-400",children:"*"})]}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-xl border border-lime-500/30 focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none bg-[#1a1a1a] text-white font-medium placeholder:text-gray-600",placeholder:"irket / letme Ad",value:c,onChange:N=>d(N.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:r==="business"?"Yetkili Kii Ad":"Full Name"}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-xl border border-white/10 focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none bg-[#1a1a1a] text-white font-medium placeholder:text-gray-600",placeholder:r==="business"?"Yetkili kiinin ad":"John Doe",value:a,onChange:N=>o(N.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Email"}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-xl border border-white/10 focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none bg-[#1a1a1a] text-white font-medium placeholder:text-gray-600",placeholder:"name@example.com",value:h,onChange:N=>m(N.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Password"}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-xl border border-white/10 focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none bg-[#1a1a1a] text-white font-medium placeholder:text-gray-600",type:"password",placeholder:"Create a password",value:g,onChange:N=>x(N.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Confirm Password"}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-xl border border-white/10 focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none bg-[#1a1a1a] text-white font-medium placeholder:text-gray-600",type:"password",placeholder:"Repeat password",value:v,onChange:N=>_(N.target.value)})]}),i.jsx("button",{onClick:E,disabled:y,className:"w-full bg-lime-500 hover:bg-lime-400 active:scale-[0.98] text-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-lime-500/20 transition-all mb-4 disabled:opacity-70 disabled:cursor-not-allowed",children:y?"Creating Account...":r==="business"?"Create Business Account":"Sign Up"})]}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Already have an account?"}),i.jsx("button",{onClick:()=>t("/"),className:"text-lime-400 font-bold text-sm hover:underline mt-1",children:"Log in here"})]})]})},F0=({isOpen:t,onClose:e,title:r,message:n,buttonText:a="Tamam"})=>t?i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-sm w-full overflow-hidden animate-scale-in",children:[i.jsx("div",{className:"pt-8 pb-4 flex justify-center",children:i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/30",children:i.jsx("span",{className:"material-symbols-outlined text-white text-4xl",children:"check_circle"})})}),i.jsxs("div",{className:"px-6 pb-4 text-center",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed",children:n})]}),i.jsx("div",{className:"px-6 pb-6",children:i.jsx("button",{onClick:e,className:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold rounded-2xl transition-all shadow-lg shadow-green-500/30 hover:shadow-green-500/50 active:scale-95",children:a})})]})}):null,qt=({className:t=""})=>i.jsx("div",{className:`animate-pulse bg-gradient-to-r from-gray-800 via-gray-700 to-gray-800 bg-[length:200%_100%] rounded ${t}`,style:{animation:"shimmer 1.5s infinite"}}),h1=()=>i.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a1a] to-[#242424] p-5 rounded-2xl border border-white/5",children:[i.jsx("div",{className:"flex items-center gap-2 mb-3",children:i.jsx(qt,{className:"w-16 h-4"})}),i.jsx(qt,{className:"w-32 h-10 mb-2"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(qt,{className:"w-20 h-4"})})]}),gc=()=>i.jsxs("div",{className:"flex items-center gap-4 p-3 bg-[#1a1a1a] rounded-xl border border-white/5",children:[i.jsx(qt,{className:"w-10 h-10 rounded-full shrink-0"}),i.jsxs("div",{className:"flex-1",children:[i.jsx(qt,{className:"w-24 h-4 mb-2"}),i.jsx(qt,{className:"w-16 h-3"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx(qt,{className:"w-20 h-5 mb-1"}),i.jsx(qt,{className:"w-14 h-3"})]})]}),f1=()=>i.jsxs("div",{className:"space-y-3",children:[i.jsx(gc,{}),i.jsx(gc,{}),i.jsx(gc,{})]}),m1=()=>i.jsx("div",{className:"grid grid-cols-4 gap-3",children:[1,2,3,4].map(t=>i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(qt,{className:"w-14 h-14 rounded-2xl"}),i.jsx(qt,{className:"w-12 h-3"})]},t))}),p1=()=>i.jsxs("div",{className:"px-5 space-y-6",children:[i.jsx(h1,{}),i.jsx(m1,{}),i.jsxs("div",{children:[i.jsx(qt,{className:"w-28 h-5 mb-4"}),i.jsx(f1,{})]})]}),g1=`
@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}
`;if(typeof document<"u"){const t=document.createElement("style");t.textContent=g1,document.head.querySelector("[data-skeleton-shimmer]")||(t.setAttribute("data-skeleton-shimmer","true"),document.head.appendChild(t))}const x1=()=>{var z;const t=ve(),{user:e,refreshUser:r}=ht(),[n,a]=S.useState([]),[o,c]=S.useState([]),[d,h]=S.useState(null),[m,g]=S.useState([]),[x,v]=S.useState(null),[_,y]=S.useState({isOpen:!1,title:"",message:""}),[b,E]=S.useState(!0);S.useEffect(()=>{if(r(),e){N(),I.auth.getUser().then(({data:B})=>{if(B!=null&&B.user){v(B.user.id);const O=I.channel("p2p-realtime").on("postgres_changes",{event:"*",schema:"public",table:"p2p_orders",filter:`buyer_id=eq.${B.user.id}`},te=>{console.log("[REALTIME] P2P order change (buyer):",te),N(),r()}).on("postgres_changes",{event:"*",schema:"public",table:"p2p_orders",filter:`seller_id=eq.${B.user.id}`},te=>{console.log("[REALTIME] P2P order change (seller):",te),N(),r()}).subscribe(),Z=I.channel("balance-realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${B.user.id}`},te=>{console.log("[REALTIME] Balance updated:",te.new),r()}).subscribe();return()=>{I.removeChannel(O),I.removeChannel(Z)}}});const C=setInterval(()=>{N()},3e4);return()=>{clearInterval(C)}}},[e]);const N=async()=>{if(!e)return;const{data:{user:C}}=await I.auth.getUser();C&&v(C.id);try{const[B,O,Z,te]=await Promise.all([q.getTransactions(e.email),q.getMyP2POrders(),q.getPendingApprovals(e.email),q.getNotifications(e.email)]),X=(O||[]).filter(V=>V.status==="OPEN"||V.status==="COMPLETED").map(V=>{const G=V.seller_id!==null&&V.buyer_id===null;return{id:V.id,title:G?"P2P SELL Order":"P2P BUY Order",amount:G?-V.amount_usd:V.amount_usd,status:V.status==="OPEN"?"PENDING":V.status,date:V.created_at,type:G?"P2P_SELL":"P2P_BUY"}}),le=[...B,...X].sort((V,G)=>new Date(G.date).getTime()-new Date(V.date).getTime());a(le.slice(0,4));const _e=(O||[]).filter(V=>V.status==="MATCHED"||V.status==="PAID"&&!V.buyer_confirmed_at);g(_e),c(Z);const at=te.filter(V=>!V.read);if(at.length>0){const V=at[0];h(G=>(G==null?void 0:G.id)===V.id?G:V)}}catch(B){console.error("Dashboard loadData error:",B)}finally{E(!1)}},j=async C=>{const B=await q.p2pAction("confirm",{orderId:C});B!=null&&B.success?(y({isOpen:!0,title:"Transfer Onayland!",message:"Bakiye alcya baaryla aktarld."}),N(),r()):alert("Hata: "+((B==null?void 0:B.error)||"lem baarsz"))},k=async C=>{const B=await q.p2pAction("reject",{orderId:C});B!=null&&B.success?(alert("lem reddedildi. Eleme iptal edildi."),N()):alert("Hata: "+((B==null?void 0:B.error)||"lem baarsz"))},T=async()=>{d&&(await q.markNotificationRead(d.id),h(null),N())},D=async C=>{await q.approveRelease(C),r(),y({isOpen:!0,title:"Approved!",message:"Transaction has been approved successfully."})};return e?b?i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display pb-20",children:[i.jsxs("div",{className:"px-5 py-4 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 animate-pulse"}),i.jsxs("div",{children:[i.jsx("div",{className:"w-24 h-4 bg-gray-800 rounded animate-pulse mb-1"}),i.jsx("div",{className:"w-16 h-3 bg-gray-800 rounded animate-pulse"})]})]}),i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 animate-pulse"})]}),i.jsx(p1,{})]}):i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display pb-20",children:[i.jsx(F0,{isOpen:_.isOpen,onClose:()=>y({..._,isOpen:!1}),title:_.title,message:_.message}),i.jsxs("div",{className:"px-5 py-4 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-lime-400 to-green-600 flex items-center justify-center text-black font-bold text-sm shadow-lg shadow-lime-500/30",children:((z=e.name)==null?void 0:z.charAt(0))||"U"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-bold text-sm",children:e.name||e.email}),i.jsx("p",{className:"text-gray-500 text-xs",children:"NUSD Wallet"})]})]}),i.jsxs("button",{onClick:()=>t("/notifications"),className:"w-10 h-10 rounded-full bg-[#1a1a1a] flex items-center justify-center text-gray-400 hover:text-white transition-colors relative",children:[i.jsx("span",{className:"material-symbols-outlined text-xl",children:"notifications"}),d&&i.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"})]})]}),d&&i.jsx("div",{className:"fixed top-20 left-4 right-4 z-50 animate-slide-in-top cursor-pointer",onClick:T,children:i.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-xl border border-lime-500/50 p-4 rounded-2xl shadow-2xl shadow-lime-500/10 flex items-start gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-lime-500/20 text-lime-400 flex items-center justify-center shrink-0",children:i.jsx("span",{className:"material-symbols-outlined",children:"notifications_active"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-white font-bold text-sm",children:d.title}),i.jsx("p",{className:"text-gray-400 text-xs mt-1 leading-relaxed",children:d.message})]}),i.jsx("button",{onClick:C=>{C.stopPropagation(),T()},className:"text-gray-500 hover:text-white",children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:"close"})})]})}),i.jsxs("div",{className:"px-5 flex-1 overflow-y-auto",children:[o.length>0&&i.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 p-4 rounded-2xl mb-6 backdrop-blur-sm",children:[i.jsxs("h3",{className:"font-bold text-amber-400 flex items-center gap-2 mb-3 text-sm",children:[i.jsx("span",{className:"material-symbols-outlined text-lg",children:"notifications_active"}),"Pending Approvals"]}),o.map(C=>i.jsxs("div",{className:"flex justify-between items-center bg-[#1a1a1a] p-3 rounded-xl mb-2 last:mb-0",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"REQUEST"}),i.jsxs("span",{className:"text-sm font-bold text-white",children:["From: ",C.lockedBy," ",i.jsxs("span",{className:"text-lime-400",children:["($",C.amount,")"]})]})]}),i.jsx("button",{onClick:()=>D(C.id),className:"bg-lime-500 text-black px-4 py-2 rounded-lg text-xs font-bold hover:bg-lime-400 transition-colors",children:"Approve"})]},C.id))]}),m.filter(C=>C.status==="PAID"&&C.seller_id===x).length>0&&i.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 max-w-xs w-full border border-gray-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-lime-500/20 flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"payments"})}),i.jsx("h3",{className:"text-white font-bold text-lg",children:"deme Onay"})]}),i.jsx("p",{className:"text-gray-400 text-sm mb-5",children:"Hesabnza para aktarlmtr demeyi onaylyor musunuz?"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{const C=m.find(B=>B.status==="PAID");C&&k(C.id)},className:"flex-1 bg-[#2a2a2a] text-gray-300 py-3 rounded-xl font-semibold hover:bg-[#333] transition-colors",children:"Reddet"}),i.jsx("button",{onClick:()=>{const C=m.find(B=>B.status==="PAID");C&&j(C.id)},className:"flex-1 bg-lime-500 text-black py-3 rounded-xl font-bold hover:bg-lime-400 transition-colors",children:"Onaylyorum"})]})]})}),i.jsxs("div",{className:"mb-8 relative",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-lime-500/10 via-transparent to-purple-500/10 rounded-3xl blur-xl"}),i.jsxs("div",{className:"relative bg-[#1a1a1a]/80 backdrop-blur-xl p-6 rounded-3xl border border-white/5",children:[e.account_type==="business"&&i.jsxs("button",{onClick:()=>t("/business"),className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 active:scale-[0.98] transition-all text-black py-3 rounded-xl font-bold text-sm shadow-lg shadow-amber-500/30 mb-4",children:[i.jsx("span",{className:"material-symbols-outlined text-lg",children:"storefront"}),"letme Paneli"]}),i.jsx("p",{className:"text-gray-500 font-medium text-sm mb-2",children:"Your balance"}),i.jsxs("h2",{className:"text-5xl font-extrabold text-white tracking-tight mb-6",children:["$",e.balance.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),i.jsxs("div",{className:"flex justify-between gap-2",children:[i.jsxs("button",{onClick:()=>t("/deposit"),className:"flex flex-col items-center gap-2 group flex-1",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-lime-500 flex items-center justify-center shadow-lg shadow-lime-500/30 group-hover:scale-110 group-active:scale-95 transition-all",children:i.jsx("span",{className:"material-symbols-outlined text-black text-xl",children:"arrow_downward"})}),i.jsx("span",{className:"text-gray-400 text-xs font-medium group-hover:text-white transition-colors",children:"Deposit"})]}),i.jsxs("button",{onClick:()=>t("/withdraw"),className:"flex flex-col items-center gap-2 group flex-1",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-lime-500 flex items-center justify-center shadow-lg shadow-lime-500/30 group-hover:scale-110 group-active:scale-95 transition-all",children:i.jsx("span",{className:"material-symbols-outlined text-black text-xl",children:"arrow_upward"})}),i.jsx("span",{className:"text-gray-400 text-xs font-medium group-hover:text-white transition-colors",children:"Withdraw"})]}),i.jsxs("button",{onClick:()=>t("/crypto/deposit"),className:"flex flex-col items-center gap-2 group flex-1",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-lime-500 flex items-center justify-center shadow-lg shadow-lime-500/30 group-hover:scale-110 group-active:scale-95 transition-all",children:i.jsx("span",{className:"material-symbols-outlined text-black text-xl",children:"download"})}),i.jsxs("span",{className:"text-gray-400 text-[10px] font-medium group-hover:text-white transition-colors text-center leading-tight",children:["Crypto",i.jsx("br",{}),"Deposit"]})]}),i.jsxs("button",{onClick:()=>t("/crypto/withdraw"),className:"flex flex-col items-center gap-2 group flex-1",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-lime-500 flex items-center justify-center shadow-lg shadow-lime-500/30 group-hover:scale-110 group-active:scale-95 transition-all",children:i.jsx("span",{className:"material-symbols-outlined text-black text-xl",children:"upload"})}),i.jsxs("span",{className:"text-gray-400 text-[10px] font-medium group-hover:text-white transition-colors text-center leading-tight",children:["Crypto",i.jsx("br",{}),"Withdraw"]})]})]}),i.jsxs("button",{onClick:()=>t("/find-agent"),className:"mt-4 w-full bg-[#222] border border-white/10 p-3 rounded-2xl flex items-center justify-between group hover:bg-[#2a2a2a] transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-lime-500/20 flex items-center justify-center text-lime-400 group-hover:bg-lime-500 group-hover:text-black transition-colors",children:i.jsx("span",{className:"material-symbols-outlined",children:"map"})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"text-white font-bold text-sm",children:"Find Agent"}),i.jsx("p",{className:"text-gray-500 text-xs",children:"Locate nearest exchange points"})]})]}),i.jsx("span",{className:"material-symbols-outlined text-gray-500 group-hover:text-white",children:"chevron_right"})]})]})]}),e.role==="admin"&&i.jsxs("button",{onClick:()=>t("/admin"),className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 active:scale-[0.98] transition-all text-white py-4 rounded-2xl font-bold text-sm shadow-xl shadow-purple-500/30 mb-3",children:[i.jsx("span",{className:"material-symbols-outlined text-lg",children:"admin_panel_settings"}),"Admin Panel"]}),i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-lg text-white",children:"Recent Activity"}),i.jsxs("button",{onClick:()=>t("/history"),className:"text-lime-400 text-xs font-bold flex items-center hover:text-lime-300 transition-colors",children:["View All ",i.jsx("span",{className:"material-symbols-outlined text-sm ml-1",children:"arrow_forward"})]})]}),i.jsx("div",{className:"space-y-3",children:n.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-[#1a1a1a] rounded-2xl border border-white/5 text-gray-500",children:[i.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-30",children:"history"}),i.jsx("p",{className:"text-sm font-medium",children:"No recent transactions"})]}):n.map(C=>{var B,O,Z;return i.jsxs("div",{className:"bg-[#1a1a1a] p-4 rounded-2xl border border-white/5 flex justify-between items-center transition-all hover:bg-[#222] hover:border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${C.amount>0?"bg-lime-500/20 text-lime-400":"bg-red-500/20 text-red-400"}`,children:i.jsx("span",{className:"material-symbols-outlined text-xl",children:C.amount>0?"arrow_downward":"arrow_upward"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-white text-sm",children:C.title}),i.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[((B=C.date)==null?void 0:B.split(",")[0])||((O=C.date)==null?void 0:O.split("T")[0]),"  ",i.jsx("span",{className:((Z=C.status)==null?void 0:Z.toLowerCase())==="completed"?"text-lime-400":"text-amber-400",children:C.status==="PAYMENT_REVIEW"?"PENDING":C.status})]})]})]}),i.jsxs("span",{className:`font-bold text-base ${C.amount>0?"text-lime-400":"text-white"}`,children:[C.amount>0?"+":"",C.amount.toFixed(2)]})]},C.id)})})]})]}):null},zd=({isOpen:t,title:e,message:r,type:n="info",onClose:a,confirmText:o="Tamam"})=>{if(!t)return null;const c=()=>{switch(n){case"success":return{icon:"check_circle",color:"text-lime-400",bg:"bg-lime-500/20"};case"error":return{icon:"error",color:"text-red-400",bg:"bg-red-500/20"};case"warning":return{icon:"warning",color:"text-yellow-400",bg:"bg-yellow-500/20"};default:return{icon:"info",color:"text-blue-400",bg:"bg-blue-500/20"}}},{icon:d,color:h,bg:m}=c();return i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:a}),i.jsxs("div",{className:"relative bg-[#1a1a1a] border border-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-scale-in",children:[i.jsx("div",{className:`w-16 h-16 ${m} rounded-full flex items-center justify-center mx-auto mb-4`,children:i.jsx("span",{className:`material-symbols-outlined text-4xl ${h}`,children:d})}),i.jsx("h2",{className:"text-white text-xl font-bold text-center mb-2",children:e}),i.jsx("p",{className:"text-gray-400 text-center mb-6",children:r}),i.jsx("button",{onClick:a,className:`w-full py-3 rounded-xl font-semibold text-black transition-all ${n==="error"?"bg-red-500 hover:bg-red-400":n==="warning"?"bg-yellow-500 hover:bg-yellow-400":"bg-lime-400 hover:bg-lime-300"}`,children:o})]})]})},y1=()=>{var _e,at;const t=ve(),{user:e}=ht(),[r,n]=S.useState(""),[a,o]=S.useState(null),[c,d]=S.useState(!1),[h,m]=S.useState(null),[g,x]=S.useState([]),[v,_]=S.useState(!0),[y,b]=S.useState(null),[E,N]=S.useState(null),[j,k]=S.useState(null),[T,D]=S.useState(42.5),[z,C]=S.useState({isOpen:!1,type:"info",title:"",message:""});S.useEffect(()=>{O(),B()},[]);const B=async()=>{try{const V=await q.getExchangeRate();V!=null&&V.buy_rate&&(D(V.buy_rate),console.log("[Deposit] Exchange rate fetched:",V.buy_rate))}catch(V){console.error("[Deposit] Failed to fetch exchange rate:",V)}};S.useEffect(()=>{(async()=>{if(e!=null&&e.email){const G=await q.getBankAccounts(e.email);x(G||[]),G&&G.length>0&&m(G[0])}_(!1)})()},[e==null?void 0:e.email]),S.useEffect(()=>()=>{E&&clearInterval(E)},[E]);const O=async()=>{const V=await q.getActiveP2POrder();V&&k(V)},Z=async()=>{if(!j)return;_(!0);const V=await q.cancelP2POrder(j.id);V.success?(k(null),C({isOpen:!0,type:"success",title:"ptal Edildi",message:"lem iptal edildi"})):C({isOpen:!0,type:"error",title:"Hata",message:"ptal hatas: "+V.error}),_(!1)},te=async()=>{var V,G,M;if(!h){C({isOpen:!0,type:"warning",title:"Banka Sein",message:"Ltfen nce bir banka hesab sein veya ekleyin."});return}_(!0);try{const W=await q.createP2POrderNew("BUY",parseFloat(r));if(!W){C({isOpen:!0,type:"error",title:"Sunucu Hatas",message:"Sunucu hatas: Yant alnamad"}),_(!1);return}if(W.success&&W.order){const U=W.order.id;b(U);const Y=await q.matchP2POrder(U);if(Y!=null&&Y.success&&(Y!=null&&Y.match)){const H=Y.match.amount_usd||W.order.amount_usd;o({id:Y.match.matchedOrderId,amount:H*T,amountUsd:H,sellerIBAN:((V=Y.match.counterparty)==null?void 0:V.iban)||"N/A",sellerName:((G=Y.match.counterparty)==null?void 0:G.account_name)||"Satc",sellerBank:((M=Y.match.counterparty)==null?void 0:M.bank_name)||"Banka",timeRemaining:Y.match.lock_expires_at}),b(null)}else X(U)}else C({isOpen:!0,type:"error",title:"Hata",message:"stek oluturulamad: "+((W==null?void 0:W.error)||"Bilinmeyen hata")})}catch(W){console.error("Search error:",W),C({isOpen:!0,type:"error",title:"Balant Hatas",message:"Hata: "+(W.message||"Balant hatas")})}_(!1)},X=V=>{const G=I.channel(`order-${V}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"p2p_orders",filter:`id=eq.${V}`},W=>{console.log("[REALTIME] Order updated:",W.new);const U=W.new;U.status==="MATCHED"?(async()=>{const Y=U.matched_order_id?await q.getP2POrderStatus(U.matched_order_id):null,H=(Y==null?void 0:Y.amount_usd)||U.amount_usd;d(!1),o({id:V,amount:H*T,amountUsd:H,sellerIBAN:U.seller_iban||"N/A",sellerName:U.seller_account_name||"Satc",sellerBank:U.seller_bank_name||"Banka"}),b(null),I.removeChannel(G),N(null)})():(U.status==="EXPIRED"||U.status==="CANCELLED")&&(I.removeChannel(G),N(null),C({isOpen:!0,type:"warning",title:"Sre Doldu",message:"Sipari sresi doldu veya iptal edildi"}))}).subscribe();N(G);const M=setInterval(async()=>{const W=await q.getP2POrderStatus(V);if(W&&W.status==="MATCHED"){const U=W.matched_order_id?await q.getP2POrderStatus(W.matched_order_id):null,Y=(U==null?void 0:U.amount_usd)||W.amount_usd;d(!1),o({id:V,amount:Y*T,amountUsd:Y,sellerIBAN:W.seller_iban||"N/A",sellerName:W.seller_account_name||"Satc",sellerBank:W.seller_bank_name||"Banka"}),b(null),clearInterval(M),I.removeChannel(G),N(null)}else((W==null?void 0:W.status)==="EXPIRED"||(W==null?void 0:W.status)==="CANCELLED")&&(clearInterval(M),I.removeChannel(G),N(null),alert("Sipari sresi doldu veya iptal edildi"))},15e3);setTimeout(()=>{clearInterval(M),I.removeChannel(G),N(null),y&&C({isOpen:!0,type:"warning",title:"Eleme Bulunamad",message:"Eleme bulunamad. Ltfen daha sonra tekrar deneyin."})},10*60*1e3)},le=async()=>{a&&await q.lockMatch(a.id,(e==null?void 0:e.email)||""),t("/deposit/confirm",{state:{amount:parseFloat(r),matchId:a==null?void 0:a.id,orderId:y,matchedInvestorEmail:a==null?void 0:a.userId,bankAccount:h,matchDetails:a}})};return i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display pb-20",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 sticky top-0 z-10",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Para Yatr"})]}),i.jsx("div",{className:"p-4 space-y-6",children:j?i.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center",children:[i.jsx("div",{className:"w-24 h-24 rounded-full bg-amber-500/20 flex items-center justify-center mb-6",children:i.jsx("span",{className:"material-symbols-outlined text-5xl text-amber-400",children:"pending"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Bekleyen leminiz Var"}),i.jsxs("p",{className:"text-gray-400 mb-6 max-w-xs",children:["Aktif bir ",j.type==="SELL"?"sat":"al"," emriniz bulunuyor. Yeni ilem oluturmak iin nce mevcut ilemi tamamlamanz veya iptal etmeniz gerekiyor."]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 w-full max-w-xs mb-6",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-gray-500",children:"lem Tipi:"}),i.jsx("span",{className:`font-bold ${j.type==="SELL"?"text-red-400":"text-green-400"}`,children:j.type==="SELL"?"ekim (Sat)":"Yatrm (Al)"})]}),i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-gray-500",children:"Miktar:"}),i.jsxs("span",{className:"text-white font-bold",children:["$",j.amount_usd," USDT"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Durum:"}),i.jsx("span",{className:"text-amber-400 font-bold",children:j.status})]})]}),i.jsxs("div",{className:"space-y-3 w-full max-w-xs",children:[i.jsx("button",{onClick:Z,disabled:v||j.status==="PAID",className:"w-full bg-red-500/20 hover:bg-red-500/30 text-red-400 py-3 rounded-xl font-bold transition-colors disabled:opacity-50",children:v?"ptal Ediliyor...":j.status==="PAID"?"deme Yapld - ptal Edilemez":"lemi ptal Et"}),i.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-white/10 hover:bg-white/20 text-white py-3 rounded-xl font-bold transition-colors",children:"Dashboard'a Dn"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 flex gap-3",children:[i.jsx("span",{className:"material-symbols-outlined text-blue-400 shrink-0",children:"info"}),i.jsx("div",{children:i.jsxs("p",{className:"text-sm text-blue-300",children:[i.jsx("span",{className:"font-bold",children:"Dekont Ykleme stee Bal:"})," Dekont yklerseniz ilem 20 dakika iinde otomatik onaylanr."]})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400",children:"Banka Hesabnz"}),i.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"text-xs text-lime-400 font-bold hover:underline flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Yeni Ekle"]})]}),v?i.jsx("div",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-white/10 animate-pulse",children:i.jsx("div",{className:"h-6 bg-gray-700 rounded w-1/2"})}):g.length===0?i.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"w-full bg-[#1a1a1a] rounded-xl p-4 border border-dashed border-white/20 hover:border-lime-500/50 transition-colors text-center",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl mb-2",children:"add_card"}),i.jsx("p",{className:"text-white font-bold",children:"Banka Hesab Ekle"}),i.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Para yatrmak iin bir banka hesab eklemelisiniz"})]}):i.jsx("div",{className:"space-y-2",children:g.map(V=>i.jsxs("button",{onClick:()=>m(V),className:`w-full p-4 rounded-xl border transition-all text-left flex items-center gap-3 ${(h==null?void 0:h.id)===V.id?"bg-lime-500/10 border-lime-500/50":"bg-[#1a1a1a] border-white/10 hover:border-white/20"}`,children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${(h==null?void 0:h.id)===V.id?"bg-lime-500/20 text-lime-400":"bg-blue-500/20 text-blue-400"}`,children:i.jsx("span",{className:"material-symbols-outlined",children:"account_balance"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-white font-bold truncate",children:V.bankName}),i.jsx("p",{className:"text-gray-500 text-xs font-mono truncate",children:V.iban})]}),(h==null?void 0:h.id)===V.id&&i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"check_circle"})]},V.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Yatrlacak Tutar (USDT)"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-bold text-gray-500",children:"$"}),i.jsx("input",{className:"w-full pl-10 pr-4 py-3.5 rounded-xl border border-white/10 focus:border-lime-500 transition-all outline-none bg-[#1a1a1a] text-white font-bold text-xl placeholder:text-gray-600",type:"number",placeholder:"0.00",value:r,onChange:V=>n(V.target.value)})]})]}),i.jsxs("div",{className:"flex gap-2",children:[[100,500,1e3,5e3].map(V=>i.jsxs("button",{onClick:()=>n(V.toString()),className:"flex-1 py-2 rounded-lg bg-[#1a1a1a] border border-white/10 text-gray-400 font-bold text-sm hover:border-lime-500/50 hover:text-lime-400 transition-colors",children:["$",V]},V)),"\\n                "]}),y&&!a&&i.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-2xl p-6 mt-4 text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),i.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"En Uygun Eleme Aranyor..."}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Size uygun satcy aryoruz"})]}),a?i.jsxs("div",{className:"bg-[#1a1a1a] p-6 rounded-2xl border border-lime-500/30 text-center animate-fade-in mt-4",children:[i.jsxs("div",{className:"w-16 h-16 rounded-full bg-lime-500/20 flex items-center justify-center mx-auto mb-4 relative",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl",children:"task_alt"}),i.jsx("div",{className:"absolute inset-0 rounded-full border border-lime-500/30 animate-ping"})]}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Uygun Eleme Bulundu!"}),i.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Yatrm tutarnz iin uygun bir satc bulundu."}),i.jsxs("div",{className:"bg-black/30 p-4 rounded-2xl mb-6 border border-white/5",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-gray-500 text-xs",children:"A"}),i.jsx("span",{className:"text-white text-xs font-bold",children:"P2P Secure"})]}),i.jsx("div",{className:"border-t border-white/5 my-2"}),i.jsx("p",{className:"text-xs text-gray-500 mb-1 mt-2",children:"lem Tutar"}),i.jsxs("p",{className:"text-3xl font-bold text-white tracking-tight",children:["",(_e=a.amount)==null?void 0:_e.toLocaleString()]}),i.jsxs("p",{className:"text-xs text-lime-500 mt-1 font-mono",children:[" ",((at=a.amountUsd)==null?void 0:at.toLocaleString())||parseFloat(r).toLocaleString()," USDT"]})]}),i.jsx("button",{onClick:le,className:"w-full bg-lime-500 hover:bg-lime-400 text-black font-bold py-4 rounded-xl text-lg transition-all shadow-lg shadow-lime-500/20 active:scale-95",children:"lemi Onayla & Bilgileri Gr"}),i.jsx("p",{className:"text-[10px] text-gray-500 mt-3",children:"lemi onayladnzda deme bilgileri gsterilecek ve 30 dakika sre balayacaktr."})]}):!y&&i.jsx("button",{onClick:te,disabled:!h||!r||v,className:"w-full bg-lime-500 hover:bg-lime-400 active:scale-[0.98] transition-all text-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-lime-500/20 mt-4 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Ykleniyor...":"Eleme Bul"})]})}),i.jsx(zd,{isOpen:z.isOpen,type:z.type,title:z.title,message:z.message,onClose:()=>C({...z,isOpen:!1})})]})},v1=()=>{var te;const t=ve(),{state:e}=Tn(),{user:r}=ht(),[n,a]=S.useState(1200),[o,c]=S.useState({name:"",bankAccount:null}),[d,h]=S.useState(null),[m,g]=S.useState(!1),[x,v]=S.useState(32.5),[_,y]=S.useState(!1),b=1200;S.useEffect(()=>{const X=setInterval(()=>{a(le=>le<=1?(E(),0):le-1)},1e3);return()=>clearInterval(X)},[]);const E=async()=>{const X=(e==null?void 0:e.orderId)||(e==null?void 0:e.matchId);X?(console.log("[TIMEOUT] Order expired, cancelling:",X),await q.cancelP2POrder(X),y(!0)):t("/dashboard")};S.useEffect(()=>{(async()=>{const le=await q.getExchangeRate();le!=null&&le.buy_rate&&v(le.buy_rate)})()},[]),S.useEffect(()=>{(async()=>{if(e!=null&&e.matchDetails)c({name:e.matchDetails.sellerName,bankAccount:{id:"temp_p2p",bankName:e.matchDetails.sellerBank,iban:e.matchDetails.sellerIBAN}});else if(e!=null&&e.matchedInvestorEmail){const le=await q.getUser(e.matchedInvestorEmail),_e=await q.getBankAccounts(e.matchedInvestorEmail);c({name:(le==null?void 0:le.name)||"Unknown",bankAccount:_e[0]||null})}})()},[e]);const j=(X=>{const le=Math.floor(X/60),_e=X%60;return{m:le.toString().padStart(2,"0"),s:_e.toString().padStart(2,"0")}})(n),k=n/b*100,T=2*Math.PI*54,D=T-k/100*T,z=X=>{X.target.files&&X.target.files[0]&&h(X.target.files[0])},C=async()=>{d&&console.log("Receipt file selected:",d.name);const X=(e==null?void 0:e.orderId)||(e==null?void 0:e.matchId);if(X){const le=await q.markP2PPaid(X);le!=null&&le.success?g(!0):alert("Hata: "+((le==null?void 0:le.error)||"lem baarsz"))}else await q.markPaymentSent((r==null?void 0:r.email)||"",e==null?void 0:e.matchId,e==null?void 0:e.amount,!0),g(!0)},B=()=>{g(!1),t("/dashboard")},O=(e==null?void 0:e.amount)||1e3,Z=(O*x).toLocaleString("tr-TR",{minimumFractionDigits:0,maximumFractionDigits:0});return i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsx(F0,{isOpen:m,onClose:B,title:"deme Bildiriminiz Alnd!",message:"deme bildiriminiz baaryla iletildi. Satc onayladnda bakiyeniz hesabnza geecektir."}),i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 sticky top-0 z-10",children:[i.jsx("button",{onClick:()=>t("/deposit"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"deme Onay"})]}),i.jsxs("div",{className:"p-4 pb-10",children:[i.jsx("div",{className:"text-center mb-6 mt-2",children:i.jsxs("h2",{className:"text-2xl font-extrabold text-white leading-tight",children:["Yatrmnz",i.jsx("br",{}),"Rezerve Edildi!"]})}),i.jsx("div",{className:"flex justify-center mb-8",children:i.jsxs("div",{className:"relative w-36 h-36",children:[i.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 120 120",children:[i.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#1a1a1a",strokeWidth:"8"}),i.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"url(#gradient)",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:T,strokeDashoffset:D,className:"transition-all duration-1000 ease-linear"}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"#84cc16"}),i.jsx("stop",{offset:"100%",stopColor:"#22c55e"})]})})]}),i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[i.jsxs("span",{className:"text-3xl font-bold text-white tracking-tight",children:[j.m,":",j.s]}),i.jsx("span",{className:"text-xs text-gray-500 font-medium mt-1",children:"kald"})]})]})}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-white/5 mb-6",children:[i.jsx("p",{className:"text-gray-500 font-medium text-sm mb-1",children:"Yatrlacak Tutar"}),i.jsxs("div",{className:"flex items-baseline gap-2",children:[i.jsxs("h3",{className:"text-2xl font-extrabold text-white",children:["",Z," TRY"]}),i.jsxs("span",{className:"text-gray-500 font-medium",children:["($",O.toLocaleString()," USD)"]})]})]}),i.jsx("h3",{className:"font-bold text-white mb-3 px-1",children:"Banka Transfer Bilgileri"}),o.bankAccount?i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/5 divide-y divide-white/5 mb-6",children:[i.jsxs("div",{className:"p-4",children:[i.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-1",children:"Alc Ad Soyad"}),i.jsx("p",{className:"font-bold text-white text-lg",children:o.name})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-1",children:"Banka"}),i.jsx("p",{className:"font-bold text-white text-base",children:o.bankAccount.bankName})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-1",children:"IBAN"}),i.jsx("p",{className:"font-bold text-lime-400 text-base font-mono tracking-tight text-wrap break-all",children:(te=o.bankAccount.iban.match(/.{1,4}/g))==null?void 0:te.join(" ")})]})]}):i.jsx("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/5 p-6 mb-6 text-center",children:i.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 mb-2"}),i.jsx("p",{className:"text-gray-500",children:"Satc bilgileri ykleniyor..."})]})}),i.jsxs("div",{className:"border-2 border-dashed border-white/10 rounded-2xl p-6 flex flex-col items-center mb-6 relative bg-[#1a1a1a]/50 hover:border-lime-500/30 transition-colors",children:[i.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:z,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),i.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-3 ${d?"bg-lime-500/20":"bg-white/5"}`,children:i.jsx("span",{className:`material-symbols-outlined text-2xl ${d?"text-lime-400":"text-gray-500"}`,children:d?"check_circle":"upload_file"})}),i.jsx("p",{className:"text-gray-400 font-medium text-sm text-center",children:d?`Seildi: ${d.name}`:"Dekont Ykle (stee Bal)"}),d&&i.jsx("button",{onClick:X=>{X.stopPropagation(),h(null)},className:"mt-2 text-xs text-red-400 hover:underline",children:"Kaldr"})]}),i.jsx("button",{onClick:C,className:"w-full bg-lime-500 hover:bg-lime-400 active:scale-[0.98] text-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-lime-500/20 transition-all",children:"demeyi Gnderdim"})]}),i.jsx(zd,{isOpen:_,type:"warning",title:"Sre Doldu!",message:"lem sresi doldu ve iptal edildi. Ltfen yeni bir ilem balatn.",onClose:()=>{y(!1),t("/dashboard")}})]})},_1=()=>{var Y;const t=ve(),{user:e,refreshUser:r}=ht(),[n,a]=S.useState(""),[o,c]=S.useState(!1),[d,h]=S.useState(1),[m,g]=S.useState(null),[x,v]=S.useState(null),[_,y]=S.useState(!1),[b,E]=S.useState(null),[N,j]=S.useState([]),[k,T]=S.useState(null),[D,z]=S.useState(!0),[C,B]=S.useState(null),[O,Z]=S.useState(32),[te,X]=S.useState({isOpen:!1,type:"info",title:"",message:""});S.useEffect(()=>{le(),_e()},[]),S.useEffect(()=>{e!=null&&e.email&&V()},[e==null?void 0:e.email]),S.useEffect(()=>()=>{b&&clearInterval(b)},[b]);const le=async()=>{const H=await q.getActiveP2POrder();H&&B(H)},_e=async()=>{const H=await q.getExchangeRate();H!=null&&H.sell_rate&&Z(H.sell_rate)},at=async()=>{if(!C)return;y(!0);const H=await q.cancelP2POrder(C.id);H.success?(B(null),X({isOpen:!0,type:"success",title:"ptal Edildi",message:"lem iptal edildi"})):X({isOpen:!0,type:"error",title:"Hata",message:"ptal hatas: "+H.error}),y(!1)},V=async()=>{if(e!=null&&e.email){z(!0);try{const H=await q.getBankAccounts(e.email);j(H||[]),H&&H.length>0&&!k&&T(H[0])}catch(H){console.error("Failed to load bank accounts:",H)}z(!1)}},G=()=>{if(!n||parseFloat(n)<10){X({isOpen:!0,type:"warning",title:"Minimum Tutar",message:"Minimum 10 USDT"});return}if(parseFloat(n)>((e==null?void 0:e.balance)||0)){X({isOpen:!0,type:"error",title:"Yetersiz Bakiye",message:"Yetersiz bakiye"});return}if(o)M();else{if(!k){X({isOpen:!0,type:"warning",title:"Banka Sein",message:"Ltfen bir banka hesab sein"});return}W()}},M=async()=>{y(!0);try{if(!e)return;const{data:H,error:de}=await I.functions.invoke("withdraw-request",{body:{amount:parseFloat(n),asset:"TRY"}});de?X({isOpen:!0,type:"error",title:"Hata",message:de.message||"Hata olutu"}):H!=null&&H.success?(X({isOpen:!0,type:"success",title:"Baarl",message:"ekim talebiniz oluturuldu. Onay bekliyor."}),r(),t("/dashboard")):X({isOpen:!0,type:"error",title:"Hata",message:(H==null?void 0:H.error)||"Hata olutu"})}catch(H){X({isOpen:!0,type:"error",title:"Hata",message:H.message||"Hata olutu"})}y(!1)},W=async()=>{var H;if(k){y(!0);try{const de=await q.createP2POrderNew("SELL",parseFloat(n),k.iban,k.bankName,k.accountName);if(de.success&&de.order){const fe=de.order.id;g(fe),h(2);const ne=await q.matchP2POrder(fe);ne.success&&ne.match?v({tradeId:ne.match.matchedOrderId,buyer:(H=ne.match.counterparty)==null?void 0:H.email,amount:de.order.amount_usd,fiatAmount:de.order.amount_usd*O,status:"MATCHED"}):U(fe)}else X({isOpen:!0,type:"error",title:"Hata",message:"Hata: "+(de.error||"stek oluturulamad")})}catch(de){X({isOpen:!0,type:"error",title:"Balant Hatas",message:de.message||"Balant hatas"})}y(!1)}},U=H=>{const de=I.channel(`withdraw-order-${H}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"p2p_orders",filter:`id=eq.${H}`},ne=>{console.log("[REALTIME] Withdraw order updated:",ne.new);const ae=ne.new;ae.status==="MATCHED"?(v({tradeId:H,buyer:"Eleme bulundu",amount:ae.amount_usd,fiatAmount:ae.amount_usd*O,status:"MATCHED"}),I.removeChannel(de),E(null)):(ae.status==="EXPIRED"||ae.status==="CANCELLED")&&(I.removeChannel(de),E(null),X({isOpen:!0,type:"warning",title:"Sre Doldu",message:"Sipari sresi doldu veya iptal edildi"}),t("/dashboard"))}).subscribe();E(de);const fe=setInterval(async()=>{const ne=await q.getP2POrderStatus(H);ne&&ne.status==="MATCHED"?(v({tradeId:H,buyer:"Eleme bulundu",amount:ne.amount_usd,fiatAmount:ne.amount_usd*O,status:"MATCHED"}),clearInterval(fe),I.removeChannel(de),E(null)):((ne==null?void 0:ne.status)==="EXPIRED"||(ne==null?void 0:ne.status)==="CANCELLED")&&(clearInterval(fe),I.removeChannel(de),E(null),alert("Sipari sresi doldu veya iptal edildi"),t("/dashboard"))},15e3)};return i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display pb-20",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 sticky top-0 z-10",children:[i.jsx("button",{onClick:()=>d>1?h(1):t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:d===1?"ekim":"lem Durumu"})]}),i.jsxs("div",{className:"p-4 space-y-6",children:[C?i.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center",children:[i.jsx("div",{className:"w-24 h-24 rounded-full bg-amber-500/20 flex items-center justify-center mb-6",children:i.jsx("span",{className:"material-symbols-outlined text-5xl text-amber-400",children:"pending"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Bekleyen leminiz Var"}),i.jsxs("p",{className:"text-gray-400 mb-6 max-w-xs",children:["Aktif bir ",C.type==="SELL"?"sat":"al"," emriniz bulunuyor. Yeni ilem oluturmak iin nce mevcut ilemi tamamlamanz veya iptal etmeniz gerekiyor."]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 w-full max-w-xs mb-6",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-gray-500",children:"lem Tipi:"}),i.jsx("span",{className:`font-bold ${C.type==="SELL"?"text-red-400":"text-green-400"}`,children:C.type==="SELL"?"ekim (Sat)":"Yatrm (Al)"})]}),i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-gray-500",children:"Miktar:"}),i.jsxs("span",{className:"text-white font-bold",children:["$",C.amount_usd," USDT"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Durum:"}),i.jsx("span",{className:"text-amber-400 font-bold",children:C.status})]})]}),i.jsxs("div",{className:"space-y-3 w-full max-w-xs",children:[i.jsx("button",{onClick:at,disabled:_||C.status==="PAID",className:"w-full bg-red-500/20 hover:bg-red-500/30 text-red-400 py-3 rounded-xl font-bold transition-colors disabled:opacity-50",children:_?"ptal Ediliyor...":C.status==="PAID"?"deme Yapld - ptal Edilemez":"lemi ptal Et"}),i.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-white/10 hover:bg-white/20 text-white py-3 rounded-xl font-bold transition-colors",children:"Dashboard'a Dn"})]})]}):d===1&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-[#1a1a1a] p-6 rounded-2xl border border-white/5",children:[i.jsx("p",{className:"text-gray-500 font-medium text-sm mb-1",children:"Mevcut Bakiye"}),i.jsxs("h2",{className:"text-3xl font-extrabold text-white tracking-tight",children:[e==null?void 0:e.balance.toFixed(2)," ",i.jsx("span",{className:"text-xl font-bold text-gray-500",children:"NUSD"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400",children:"deme Alacanz Hesap"}),i.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"text-xs text-lime-400 font-bold hover:underline flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Yeni Ekle"]})]}),D?i.jsx("div",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-white/10 animate-pulse",children:i.jsx("div",{className:"h-6 bg-gray-700 rounded w-1/2"})}):N.length===0?i.jsxs("button",{onClick:()=>t("/bank-accounts"),className:"w-full bg-[#1a1a1a] rounded-xl p-4 border border-dashed border-white/20 hover:border-lime-500/50 transition-colors text-center",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl mb-2",children:"add_card"}),i.jsx("p",{className:"text-white font-bold",children:"Banka Hesab Ekle"}),i.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"ekim yapmak iin bir banka hesab eklemelisiniz"})]}):i.jsx("div",{className:"space-y-2",children:N.map(H=>i.jsxs("button",{onClick:()=>T(H),className:`w-full p-4 rounded-xl border transition-all text-left flex items-center gap-3 ${(k==null?void 0:k.id)===H.id?"bg-lime-500/10 border-lime-500/50":"bg-[#1a1a1a] border-white/10 hover:border-white/20"}`,children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${(k==null?void 0:k.id)===H.id?"bg-lime-500/20 text-lime-400":"bg-blue-500/20 text-blue-400"}`,children:i.jsx("span",{className:"material-symbols-outlined",children:"account_balance"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-bold text-white",children:H.bankName}),i.jsx("p",{className:"text-xs text-gray-500 font-mono",children:H.iban})]}),(k==null?void 0:k.id)===H.id&&i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"check_circle"})]},H.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"ekim Tutar (USDT)"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-bold text-gray-500",children:"$"}),i.jsx("input",{className:"w-full pl-10 pr-4 py-4 rounded-xl border border-white/10 focus:border-lime-500 transition-all outline-none bg-[#1a1a1a] text-white font-bold text-lg placeholder:text-gray-600",type:"number",value:n,onChange:H=>a(H.target.value),placeholder:"0.00"})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Minimum: 10 USDT  Alacanz: ",(parseFloat(n||"0")*32).toLocaleString()," TL"]})]}),i.jsx("div",{className:"flex gap-2",children:[50,100,500,1e3].map(H=>i.jsxs("button",{onClick:()=>a(H.toString()),className:"flex-1 py-2 rounded-lg bg-[#1a1a1a] border border-white/10 text-gray-400 font-bold text-sm hover:border-lime-500/50 hover:text-lime-400 transition-colors",children:["$",H]},H))}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:()=>c(!1),className:`p-4 rounded-2xl border-2 text-left transition-all ${o?"bg-[#1a1a1a] border-white/5 hover:border-white/10":"bg-lime-500/10 border-lime-500/50"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:`font-bold text-lg ${o?"text-white":"text-lime-400"}`,children:"Standart"}),!o&&i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"check_circle"})]}),i.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"P2P Eleme"}),i.jsx("p",{className:"text-xs text-lime-400 font-bold mt-1",children:"%0 Komisyon"})]}),i.jsxs("button",{onClick:()=>c(!0),className:`p-4 rounded-2xl border-2 text-left transition-all ${o?"bg-lime-500/10 border-lime-500/50":"bg-[#1a1a1a] border-white/5 hover:border-white/10"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:`font-bold text-lg ${o?"text-lime-400":"text-white"}`,children:"Hzl"}),o&&i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"check_circle"})]}),i.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Sistem deme"}),i.jsx("p",{className:"text-xs text-red-400 font-bold mt-1",children:"%2 Komisyon"})]})]}),i.jsx("button",{onClick:G,disabled:_||!o&&!k,className:"w-full bg-lime-500 hover:bg-lime-400 disabled:opacity-50 active:scale-[0.98] transition-all text-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-lime-500/20",children:_?"leniyor...":"ekim Yap"})]}),d===2&&i.jsx("div",{className:"text-center py-8",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-20 h-20 rounded-full bg-lime-500/20 flex items-center justify-center mx-auto mb-6",children:i.jsx("span",{className:"material-symbols-outlined text-5xl text-lime-400",children:"check_circle"})}),i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Eleme Bulundu!"}),i.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Alc demeyi yaptnda bakiyenizden dlecek."}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 text-left space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Sat Tutar"}),i.jsxs("span",{className:"font-bold text-lime-400",children:[x.amount," USDT"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Alacanz"}),i.jsxs("span",{className:"font-bold text-white",children:[(Y=x.fiatAmount)==null?void 0:Y.toLocaleString()," TL"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Durum"}),i.jsx("span",{className:"text-amber-400 font-bold",children:x.status||"deme Bekleniyor"})]})]}),i.jsx("button",{onClick:()=>t("/dashboard"),className:"mt-6 w-full bg-white/10 hover:bg-white/20 text-white py-3 rounded-xl font-bold",children:"Dashboard'a Dn"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-20 h-20 border-4 border-lime-500/30 border-t-lime-500 rounded-full animate-spin mx-auto mb-6"}),i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Alc Bekleniyor"}),i.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Sizin iin uygun bir alc aranyor..."}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 text-left space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Sat Tutar"}),i.jsxs("span",{className:"font-bold text-white",children:[n," USDT"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Hesap"}),i.jsx("span",{className:"text-xs text-gray-400",children:k==null?void 0:k.bankName})]})]})]})})]}),i.jsx(zd,{isOpen:te.isOpen,type:te.type,title:te.title,message:te.message,onClose:()=>X({...te,isOpen:!1})})]})},b1=()=>{const t=ve(),{user:e,refreshUser:r}=ht(),[n,a]=S.useState(""),[o,c]=S.useState(""),[d,h]=S.useState("Tron (TRC20)"),[m,g]=S.useState(!1),[x,v]=S.useState(null),[_,y]=S.useState(!0),[b,E]=S.useState(!1);S.useEffect(()=>{(async()=>{try{const{data:{user:Z}}=await I.auth.getUser();if(!Z)return;const{data:te}=await I.from("transactions").select("id, amount, created_at, network").eq("user_id",Z.id).eq("type","WITHDRAW").eq("status","PENDING").limit(1);te&&te.length>0&&v(te[0])}catch(Z){console.error("Check pending error:",Z)}y(!1)})()},[]);const N=async()=>{if(x){E(!0);try{const{data:O,error:Z}=await I.functions.invoke("cancel-withdrawal",{body:{transactionId:x.id}});Z?alert(Z.message||"ptal baarsz"):O!=null&&O.success?(alert(" ekim talebi iptal edildi. Bakiyeniz iade edildi."),v(null),r()):alert((O==null?void 0:O.error)||"ptal baarsz")}catch(O){alert(O.message||"ptal baarsz")}E(!1)}},j=o.toUpperCase().startsWith("NUSD-"),k=j?0:1,T=parseFloat(n)||0,D=T>k?T-k:0,z=o.length>5&&T>=10,C=()=>{e&&a(e.balance.toString())},B=async()=>{if(z){g(!0);try{if(j){const{data:O,error:Z}=await I.functions.invoke("internal-transfer",{body:{amount:T,recipient_code:o.toUpperCase()}});Z?alert(Z.message||"Transfer failed"):O!=null&&O.success?(alert(` ${T} USDT transferred to ${o.toUpperCase()}`),r(),t("/dashboard")):alert((O==null?void 0:O.error)||"Transfer failed")}else{const{data:O,error:Z}=await I.functions.invoke("withdraw-request",{body:{amount:T,asset:d}});Z?alert(Z.message||"Withdrawal failed"):O!=null&&O.success?(alert("Withdrawal Request Submitted (Pending)"),r(),t("/dashboard")):O!=null&&O.hasPendingWithdrawal?(v(O.pendingWithdrawal),alert(O.error)):alert((O==null?void 0:O.error)||"Withdrawal failed")}}catch(O){alert(O.message||"Transfer failed")}g(!1)}};return _?i.jsx("div",{className:"min-h-screen bg-[#111111] flex items-center justify-center",children:i.jsx("div",{className:"text-gray-400",children:"Ykleniyor..."})}):x?i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 sticky top-0 z-10",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Send USDT"})]}),i.jsx("div",{className:"p-4 flex-1 flex flex-col items-center justify-center",children:i.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-2xl p-6 max-w-sm w-full text-center",children:[i.jsx("span",{className:"material-symbols-outlined text-amber-400 text-5xl mb-4",children:"pending"}),i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Bekleyen ekim Talebi"}),i.jsx("p",{className:"text-gray-400 mb-4",children:"Zaten bir ekim talebiniz ileniyor. Yeni talep oluturmak iin mevcut talebin tamamlanmasn bekleyin veya iptal edin."}),i.jsxs("div",{className:"bg-[#0a0a0a] rounded-xl p-4 mb-4",children:[i.jsxs("p",{className:"text-2xl font-bold text-amber-400",children:["$",x.amount]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(x.created_at).toLocaleString()}),i.jsx("p",{className:"text-xs text-gray-500",children:x.network})]}),i.jsx("button",{onClick:N,disabled:b,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-xl font-bold disabled:opacity-50 mb-3",children:b?"ptal Ediliyor...":"Talebi ptal Et"}),i.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-[#1a1a1a] text-gray-400 py-3 rounded-xl font-bold border border-white/10",children:"Bekle, Geri Dn"})]})})]}):i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 sticky top-0 z-10",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Send USDT"})]}),i.jsxs("div",{className:"p-4 space-y-6",children:[i.jsxs("div",{className:"bg-[#1a1a1a] p-6 rounded-2xl border border-white/5",children:[i.jsx("p",{className:"text-gray-500 font-medium text-sm mb-1",children:"Available Balance"}),i.jsxs("h2",{className:"text-3xl font-extrabold text-white tracking-tight",children:[e==null?void 0:e.balance.toLocaleString()," ",i.jsx("span",{className:"text-xl font-bold text-gray-500",children:"USDT"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Recipient Address or NUSD Code"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{className:"w-full pl-4 pr-12 py-3.5 rounded-xl border border-white/10 focus:border-lime-500 transition-all outline-none bg-[#1a1a1a] text-white font-medium placeholder:text-gray-600",placeholder:"NUSD-XXXX or TAeaxx...",value:o,onChange:O=>c(O.target.value)}),i.jsx("span",{className:`material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 ${j?"text-lime-400":"text-gray-500"}`,children:j?"bolt":"qr_code_scanner"})]}),o.length>3&&i.jsxs("div",{className:`mt-2 px-3 py-1.5 rounded-lg text-xs font-bold inline-flex items-center gap-1 ${j?"bg-lime-500/20 text-lime-400":"bg-blue-500/20 text-blue-400"}`,children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:j?"bolt":"language"}),j?"Internal Transfer (Instant, No Fee)":"External Withdraw (Blockchain)"]})]}),!j&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Network"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{className:"w-full px-4 py-3.5 rounded-xl border border-white/10 focus:border-lime-500 transition-all outline-none bg-[#1a1a1a] text-white font-medium appearance-none",value:d,onChange:O=>h(O.target.value),children:[i.jsx("option",{children:"Tron (TRC20)"}),i.jsx("option",{children:"Ethereum (ERC20)"}),i.jsx("option",{children:"BSC (BEP20)"})]}),i.jsx("span",{className:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none",children:"expand_more"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400",children:"Amount"}),i.jsx("button",{onClick:C,className:"text-lime-400 text-xs font-bold hover:text-lime-300",children:"MAX"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{className:"w-full pl-4 pr-16 py-3.5 rounded-xl border border-white/10 focus:border-lime-500 transition-all outline-none bg-[#1a1a1a] text-white font-bold text-lg placeholder:text-gray-600",type:"number",placeholder:"Min 10.00",value:n,onChange:O=>a(O.target.value)}),i.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 font-bold text-gray-500",children:"USDT"})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-white/5 space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Fee"}),i.jsx("span",{className:`font-bold ${j?"text-lime-400":"text-white"}`,children:j?"FREE":`${k.toFixed(2)} USDT`})]}),i.jsxs("div",{className:"flex justify-between text-base border-t border-white/5 pt-2 mt-2",children:[i.jsx("span",{className:"font-bold text-white",children:"Receive Amount"}),i.jsxs("span",{className:"font-bold text-lime-400",children:[(j?T:D).toFixed(2)," USDT"]})]})]}),i.jsx("button",{onClick:B,disabled:!z||m,className:`w-full py-4 rounded-xl font-bold text-lg shadow-xl transition-all ${z&&!m?"bg-lime-500 hover:bg-lime-400 active:scale-[0.98] text-black shadow-lime-500/20":"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none"}`,children:m?"Processing...":j?" Send Instantly":"Confirm Withdrawal"})]})]})},w1=()=>{const t=ve(),{user:e}=ht(),[r,n]=S.useState("TRC20"),[a,o]=S.useState(null),[c,d]=S.useState(""),[h,m]=S.useState(""),[g,x]=S.useState(!1),[v,_]=S.useState(!1),y="TAeaxxAUqqpdKJmvg9JPHajTNQLRfwdJ3F",b=S.useMemo(()=>{if(!(e!=null&&e.email))return"NUSD-XXXX";const j=e.email.split("").reduce((T,D)=>(T<<5)-T+D.charCodeAt(0),0);return`NUSD-${Math.abs(j).toString(36).toUpperCase().slice(0,6)}`},[e==null?void 0:e.email]),E=(j,k)=>{navigator.clipboard.writeText(j),o(k),setTimeout(()=>o(null),2e3)},N=async j=>{if(j.preventDefault(),!c||parseFloat(c)<10){alert("Minimum deposit is 10 USDT");return}x(!0);try{const{data:k,error:T}=await I.functions.invoke("deposit-request",{body:{amount:parseFloat(c),asset:r,tx_hash:h||null}});T?alert(T.message||"Failed to submit deposit notification"):k!=null&&k.success?_(!0):alert((k==null?void 0:k.error)||"Failed to submit deposit notification")}catch{alert("Connection error")}x(!1)};return v?i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 sticky top-0 z-10",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Deposit USDT"})]}),i.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-8 border border-white/5 text-center max-w-sm",children:[i.jsx("div",{className:"w-16 h-16 bg-lime-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl",children:"check_circle"})}),i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Deposit Submitted!"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"Your deposit notification has been submitted. An admin will verify and approve it shortly."}),i.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-lime-500 text-black py-3 rounded-xl font-bold",children:"Back to Dashboard"})]})})]}):i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 sticky top-0 z-10",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Deposit USDT"})]}),i.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-400 mb-2 text-sm",children:"Select Network"}),i.jsx("div",{className:"grid grid-cols-3 gap-2 bg-[#1a1a1a] p-1 rounded-xl border border-white/5",children:["TRC20","ERC20","BEP20"].map(j=>i.jsx("button",{onClick:()=>n(j),className:`py-2 rounded-lg text-sm font-bold transition-all ${r===j?"bg-lime-500 text-black":"text-gray-400 hover:bg-white/5"}`,children:j},j))})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 border border-white/5",children:[i.jsxs("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-wide mb-2",children:["Deposit Address (",r,")"]}),i.jsxs("div",{className:"bg-[#111111] rounded-xl p-3 flex items-center justify-between cursor-pointer hover:bg-[#0a0a0a]",onClick:()=>E(y,"address"),children:[i.jsx("p",{className:"font-mono text-white font-medium text-sm truncate mr-2",children:y}),i.jsx("span",{className:`material-symbols-outlined transition-colors ${a==="address"?"text-lime-400":"text-lime-500"}`,children:a==="address"?"check":"content_copy"})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-lime-500/10 to-purple-500/10 rounded-2xl p-4 border border-lime-500/20",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-lg",children:"tag"}),i.jsx("p",{className:"text-xs text-lime-400 font-bold uppercase tracking-wide",children:"Your MEMO Code (Important!)"})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-3 flex items-center justify-between cursor-pointer hover:bg-[#222] border border-lime-500/20",onClick:()=>E(b,"memo"),children:[i.jsx("p",{className:"font-mono text-white font-bold text-lg tracking-widest",children:b}),i.jsx("span",{className:`material-symbols-outlined transition-colors ${a==="memo"?"text-lime-400":"text-lime-500"}`,children:a==="memo"?"check":"content_copy"})]}),i.jsx("p",{className:"text-xs text-lime-400/70 mt-2",children:"Add this code to the MEMO/Note field when sending funds."})]}),i.jsxs("form",{onSubmit:N,className:"bg-[#1a1a1a] rounded-2xl p-4 border border-white/5 space-y-4",children:[i.jsxs("h3",{className:"font-bold text-gray-400 text-sm flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lg",children:"receipt_long"}),"Notify Deposit"]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-500 font-bold mb-1",children:"Amount (USDT)"}),i.jsx("input",{type:"number",value:c,onChange:j=>d(j.target.value),placeholder:"0.00",min:"10",step:"0.01",required:!0,className:"w-full border border-white/10 bg-[#111111] rounded-xl p-3 text-lg text-white font-bold focus:outline-none focus:ring-2 focus:ring-lime-500 placeholder:text-gray-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-500 font-bold mb-1",children:"Transaction Hash (Optional)"}),i.jsx("input",{type:"text",value:h,onChange:j=>m(j.target.value),placeholder:"Paste TX hash...",className:"w-full border border-white/10 bg-[#111111] rounded-xl p-3 font-mono text-sm text-white focus:outline-none focus:ring-2 focus:ring-lime-500 placeholder:text-gray-600"})]}),i.jsx("button",{type:"submit",disabled:g||!c,className:"w-full bg-lime-500 hover:bg-lime-400 text-black py-3 rounded-xl font-bold disabled:opacity-50 transition-colors",children:g?"Submitting...":"Submit Deposit Notification"})]}),i.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 flex gap-3",children:[i.jsx("span",{className:"material-symbols-outlined text-amber-400 shrink-0",children:"warning"}),i.jsxs("div",{className:"text-amber-300 text-sm",children:[i.jsx("p",{className:"font-bold mb-1",children:"Important:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-amber-300/80",children:[i.jsxs("li",{children:["Send only ",i.jsxs("span",{className:"font-bold",children:["USDT (",r,")"]})]}),i.jsxs("li",{children:["Include your ",i.jsx("span",{className:"font-bold",children:"MEMO code"})]}),i.jsxs("li",{children:["Minimum deposit: ",i.jsx("span",{className:"font-bold",children:"10.00 USDT"})]})]})]})]})]})]})},j1=()=>{const t=ve(),[e,r]=S.useState([]),[n,a]=S.useState(!0);S.useEffect(()=>{(async()=>{try{const{data:{user:m}}=await I.auth.getUser();if(console.log("[History] Current user:",m==null?void 0:m.id,m==null?void 0:m.email),!m){console.log("[History] No user found"),a(!1);return}const{data:g,error:x}=await I.from("transactions").select("*").eq("user_id",m.id).order("created_at",{ascending:!1});console.log("[History] Query result:",{data:g,error:x,count:g==null?void 0:g.length}),x?console.error("[History] Transactions fetch error:",x):r(g||[])}catch(m){console.error("[History] Transactions exception:",m)}a(!1)})()},[]);const o=h=>{switch(h==null?void 0:h.toUpperCase()){case"COMPLETED":return"text-lime-400";case"PENDING":return"text-amber-400";case"CANCELLED":return"text-red-400";default:return"text-gray-400"}},c=h=>{switch(h==null?void 0:h.toUpperCase()){case"DEPOSIT":return"arrow_downward";case"WITHDRAW":return"arrow_upward";case"TRANSFER":return"swap_horiz";default:return"receipt_long"}},d=h=>new Date(h).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 sticky top-0 z-10",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"lem Gemii"})]}),i.jsx("div",{className:"p-4 space-y-3",children:n?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-500",children:[i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-lime-500 mb-4"}),i.jsx("p",{className:"font-medium",children:"Ykleniyor..."})]}):e.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-500",children:[i.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"history_toggle_off"}),i.jsx("p",{className:"font-medium",children:"Henz ilem yok"})]}):e.map(h=>i.jsxs("div",{className:"bg-[#1a1a1a] p-4 rounded-2xl border border-white/5 flex items-center justify-between hover:bg-[#222] transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${h.type==="DEPOSIT"?"bg-lime-500/20 text-lime-400":h.type==="WITHDRAW"?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:i.jsx("span",{className:"material-symbols-outlined",children:c(h.type)})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-white text-sm",children:h.type==="DEPOSIT"?"Yatrm":h.type==="WITHDRAW"?"ekim":h.type==="TRANSFER"?"Transfer":h.type}),i.jsx("p",{className:"text-gray-500 text-xs font-medium mt-0.5",children:d(h.created_at)})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:`font-bold text-base ${h.type==="DEPOSIT"?"text-lime-400":"text-white"}`,children:[h.type==="DEPOSIT"?"+":h.type==="WITHDRAW"?"-":"",Math.abs(h.amount).toLocaleString()," ",i.jsx("span",{className:"text-xs text-gray-500 font-bold ml-0.5",children:"USDT"})]}),i.jsx("p",{className:`text-xs font-medium mt-0.5 capitalize ${o(h.status)}`,children:h.status==="COMPLETED"?"Tamamland":h.status==="PENDING"?"Beklemede":h.status==="CANCELLED"?"ptal Edildi":h.status})]})]},h.id))})]})},$m=["Ziraat Bankas","Trkiye  Bankas","Garanti BBVA","Yap Kredi","Akbank"],N1=()=>{const t=ve(),{user:e}=ht(),[r,n]=S.useState([]),[a,o]=S.useState($m[0]),[c,d]=S.useState(""),[h,m]=S.useState(""),[g,x]=S.useState(!1);S.useEffect(()=>{e&&q.getBankAccounts(e.email).then(n)},[e]);const v=async()=>{if(!e)return;if(!c.trim()||!h.trim())return alert("Ltfen tm alanlar doldurunuz");const y=c.replace(/\s/g,"").toUpperCase();if(!y.startsWith("TR")||y.length!==26)return alert("Geersiz IBAN. TR ile balamal ve 26 karakter olmal.");x(!0);const b=await q.addBankAccount(e.email,a,y,h);b&&(n([...r,b]),d(""),m(""),alert("Banka hesab eklendi!")),x(!1)},_=async y=>{e&&confirm("Bu hesab silmek istediinizden emin misiniz?")&&(await q.deleteBankAccount(e.email,y),n(r.filter(b=>b.id!==y)))};return i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-5 py-4 flex items-center gap-3 shadow-lg sticky top-0 z-10 border-b border-white/5",children:[i.jsx("button",{onClick:()=>t(-1),className:"text-gray-400 hover:text-lime-400 hover:bg-lime-400/10 p-2 rounded-full transition-colors",children:i.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),i.jsx("h1",{className:"font-extrabold text-lg text-white",children:"Banka Hesaplar"})]}),i.jsxs("div",{className:"px-5 py-6 flex-1 overflow-y-auto",children:[i.jsxs("div",{className:"bg-[#1a1a1a]/50 backdrop-blur-sm p-6 rounded-2xl border border-white/5 mb-6",children:[i.jsxs("h2",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-500",children:"add_circle"}),"Yeni Hesap Ekle"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Banka"}),i.jsx("select",{value:a,onChange:y=>o(y.target.value),className:"w-full px-4 py-3 rounded-xl border border-white/10 bg-[#111111] text-white font-medium focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none",children:$m.map(y=>i.jsx("option",{value:y,children:y},y))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Hesap Sahibi Ad Soyad"}),i.jsx("input",{value:h,onChange:y=>m(y.target.value),placeholder:"rn: Ahmet Ylmaz",className:"w-full px-4 py-3 rounded-xl border border-white/10 bg-[#111111] text-white font-medium focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none placeholder-gray-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"IBAN"}),i.jsx("input",{value:c,onChange:y=>d(y.target.value),placeholder:"TR00 0000 0000 0000 0000 0000 00",maxLength:34,className:"w-full px-4 py-3 rounded-xl border border-white/10 bg-[#111111] text-white font-mono focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none placeholder-gray-600"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"TR ile balamal, 26 karakter olmal"})]}),i.jsx("button",{onClick:v,disabled:g||!c||!h,className:"w-full bg-lime-500 hover:bg-lime-400 active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed text-black py-3 rounded-xl font-bold shadow-lg shadow-lime-500/20 transition-all",children:g?"Ekleniyor...":"Hesap Ekle"})]})]}),i.jsx("h2",{className:"font-bold text-white mb-3 px-1",children:"Kaytl Hesaplar"}),r.length===0?i.jsxs("div",{className:"bg-[#1a1a1a]/50 backdrop-blur-sm p-8 rounded-2xl border border-white/5 text-center",children:[i.jsx("span",{className:"material-symbols-outlined text-5xl text-gray-600 mb-3",children:"account_balance"}),i.jsx("p",{className:"text-gray-500 font-medium",children:"Henz banka hesab eklemediniz"})]}):i.jsx("div",{className:"space-y-3",children:r.map(y=>{var b;return i.jsxs("div",{className:"bg-[#1a1a1a]/50 backdrop-blur-sm p-5 rounded-2xl border border-white/5 flex items-start justify-between hover:border-lime-500/30 transition-all",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-500",children:"account_balance"}),i.jsx("h3",{className:"font-bold text-white",children:y.bankName})]}),i.jsx("p",{className:"font-mono text-sm text-gray-400 bg-[#111111] px-3 py-2 rounded-lg inline-block",children:(b=y.iban.match(/.{1,4}/g))==null?void 0:b.join(" ")}),i.jsx("p",{className:"text-xs text-gray-600 mt-2",children:y.addedAt})]}),i.jsx("button",{onClick:()=>_(y.id),className:"text-red-400 hover:bg-red-500/10 p-2 rounded-full transition-colors ml-2",children:i.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]},y.id)})})]})]})},Me=({icon:t,iconBg:e,label:r,sublabel:n,onClick:a,badge:o,toggle:c,toggleValue:d})=>i.jsxs("button",{onClick:a,className:"w-full p-4 flex items-center gap-4 hover:bg-white/5 transition-colors text-left",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl ${e} flex items-center justify-center`,children:i.jsx("span",{className:"material-symbols-outlined",children:t})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-sm font-bold text-white",children:r}),o&&i.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full ${o.color}`,children:o.text})]}),n&&i.jsx("p",{className:"text-xs text-gray-500",children:n})]}),c?i.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${d?"bg-lime-500":"bg-gray-600"}`,children:i.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-transform ${d?"translate-x-5":""}`})}):i.jsx("span",{className:"material-symbols-outlined text-gray-600",children:"chevron_right"})]}),k1=()=>{var c;const{user:t,logout:e}=ht(),r=ve(),[n,a]=S.useState(null);S.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:{user:d}}=await I.auth.getUser();if(!d)return;const{data:h}=await I.from("profiles").select("first_name, last_name, birth_date, profile_completed").eq("id",d.id).single(),m=(h==null?void 0:h.profile_completed)||(h==null?void 0:h.first_name)&&(h==null?void 0:h.last_name)&&(h==null?void 0:h.birth_date);a(!!m)}catch(d){console.error("Check profile error:",d),a(!1)}};return i.jsxs("div",{className:"h-screen bg-[#111111] flex flex-col font-display overflow-hidden",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 shrink-0 z-10",children:[i.jsx("button",{onClick:()=>r("/dashboard"),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Ayarlar"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[i.jsxs("div",{className:"bg-[#1a1a1a] rounded-3xl p-6 flex flex-col items-center text-center border border-white/5",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-lime-400 to-green-600 rounded-full flex items-center justify-center shadow-lg shadow-lime-500/20",children:i.jsx("span",{className:"text-black text-2xl font-bold",children:((c=t==null?void 0:t.name)==null?void 0:c.charAt(0))||"U"})}),i.jsx("button",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-[#2a2a2a] border-2 border-[#111111] rounded-full flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-sm",children:"edit"})})]}),i.jsx("h2",{className:"text-lg font-extrabold text-white mt-3 mb-0.5",children:(t==null?void 0:t.name)||"User"}),i.jsx("p",{className:"text-gray-500 font-medium text-sm mb-3",children:t==null?void 0:t.email}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"bg-lime-500/20 text-lime-400 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide",children:(t==null?void 0:t.role)||"User"}),i.jsx("span",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide",children:"Aktif"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Hesap Dorulama"}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 divide-y divide-white/5",children:[i.jsx(Me,{icon:"verified_user",iconBg:"bg-amber-500/20 text-amber-400",label:"Kimlik Dorulama (KYC)",sublabel:"Limitleri artrmak iin dorulayn",badge:{text:"Bekliyor",color:"bg-amber-500/20 text-amber-400"},onClick:()=>r("/kyc")}),i.jsx(Me,{icon:"phone_android",iconBg:"bg-green-500/20 text-green-400",label:"Telefon Dorulama",sublabel:"+90 *** *** 45 67",badge:{text:"Doruland",color:"bg-green-500/20 text-green-400"},onClick:()=>{}}),i.jsx(Me,{icon:"mail",iconBg:"bg-blue-500/20 text-blue-400",label:"E-posta Dorulama",sublabel:t==null?void 0:t.email,badge:{text:"Doruland",color:"bg-green-500/20 text-green-400"},onClick:()=>{}})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Hesap Bilgileri"}),i.jsx("div",{className:"bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 divide-y divide-white/5",children:i.jsx(Me,{icon:"person",iconBg:"bg-lime-500/20 text-lime-400",label:"Profil Bilgileri",sublabel:n===null?"Kontrol ediliyor...":n?"Tamamland":"Eksik - Tamamlayn",badge:n?{text:"Tamam",color:"bg-green-500/20 text-green-400"}:n===!1?{text:"Eksik",color:"bg-red-500/20 text-red-400"}:void 0,onClick:()=>r("/profile/edit")})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Finans"}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 divide-y divide-white/5",children:[i.jsx(Me,{icon:"account_balance",iconBg:"bg-blue-500/20 text-blue-400",label:"Banka Hesaplar",sublabel:"Bal hesaplar ynet",onClick:()=>r("/bank-accounts")}),i.jsx(Me,{icon:"speed",iconBg:"bg-orange-500/20 text-orange-400",label:"lem Limitleri",sublabel:"Limitleri grntle ve artr",onClick:()=>r("/limits")})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Gvenlik"}),i.jsx("div",{className:"bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 divide-y divide-white/5",children:i.jsx(Me,{icon:"lock",iconBg:"bg-red-500/20 text-red-400",label:"ifre Deitir",sublabel:"Hesap gvenlii iin ifrenizi deitirin",onClick:()=>r("/change-password")})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Bildirimler"}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 divide-y divide-white/5",children:[i.jsx(Me,{icon:"notifications",iconBg:"bg-yellow-500/20 text-yellow-400",label:"Push Bildirimleri",sublabel:"lem ve gvenlik uyarlar",toggle:!0,toggleValue:!0,onClick:()=>{}}),i.jsx(Me,{icon:"email",iconBg:"bg-sky-500/20 text-sky-400",label:"E-posta Bildirimleri",sublabel:"Haftalk zet ve kampanyalar",toggle:!0,toggleValue:!1,onClick:()=>{}})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Tercihler"}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 divide-y divide-white/5",children:[i.jsx(Me,{icon:"language",iconBg:"bg-violet-500/20 text-violet-400",label:"Dil",sublabel:"Trke",onClick:()=>{}}),i.jsx(Me,{icon:"currency_exchange",iconBg:"bg-lime-500/20 text-lime-400",label:"Para Birimi Gsterimi",sublabel:"TRY ()",onClick:()=>{}}),i.jsx(Me,{icon:"dark_mode",iconBg:"bg-slate-500/20 text-slate-400",label:"Karanlk Mod",sublabel:"Her zaman ak",toggle:!0,toggleValue:!0,onClick:()=>{}})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Yardm & Destek"}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 divide-y divide-white/5",children:[i.jsx(Me,{icon:"help",iconBg:"bg-blue-500/20 text-blue-400",label:"SSS",sublabel:"Ska sorulan sorular",onClick:()=>{}}),i.jsx(Me,{icon:"support_agent",iconBg:"bg-green-500/20 text-green-400",label:"Canl Destek",sublabel:"7/24 mteri hizmetleri",onClick:()=>{}}),i.jsx(Me,{icon:"bug_report",iconBg:"bg-red-500/20 text-red-400",label:"Hata Bildir",sublabel:"Uygulama sorunlarn raporla",onClick:()=>{}})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Yasal"}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 divide-y divide-white/5",children:[i.jsx(Me,{icon:"description",iconBg:"bg-gray-500/20 text-gray-400",label:"Kullanm Koullar",onClick:()=>r("/terms")}),i.jsx(Me,{icon:"privacy_tip",iconBg:"bg-gray-500/20 text-gray-400",label:"Gizlilik Politikas",onClick:()=>r("/privacy")}),i.jsx(Me,{icon:"cookie",iconBg:"bg-gray-500/20 text-gray-400",label:"erez Tercihleri",onClick:()=>{}})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Uygulama"}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 divide-y divide-white/5",children:[i.jsx(Me,{icon:"info",iconBg:"bg-gray-500/20 text-gray-400",label:"Uygulama Hakknda",sublabel:"NUSD Wallet v1.0.0",onClick:()=>{}}),i.jsx(Me,{icon:"star",iconBg:"bg-yellow-500/20 text-yellow-400",label:"Uygulamay Deerlendir",sublabel:"App Store'da puan ver",onClick:()=>{}})]})]}),i.jsxs("button",{onClick:()=>{e(),r("/")},className:"w-full bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 active:scale-[0.98] transition-all py-4 rounded-xl font-bold flex items-center justify-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"logout"}),"k Yap"]}),i.jsx("button",{className:"w-full text-gray-500 hover:text-red-400 py-3 text-sm font-medium transition-colors",children:"Hesabm Sil"}),i.jsx("div",{className:"h-40 w-full shrink-0"})]})]})},S1=()=>{const t=ve(),[e,r]=S.useState(""),n=()=>{e.trim()&&alert(`QR verisi: ${e}`)};return i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-5 py-4 flex items-center gap-3 shadow-lg border-b border-white/5",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"text-gray-400 hover:text-lime-400 hover:bg-lime-400/10 p-2 rounded-full transition-colors",children:i.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),i.jsx("h1",{className:"font-extrabold text-lg text-white",children:"QR Kod Tara"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[i.jsxs("div",{className:"relative w-full max-w-sm aspect-square mb-8",children:[i.jsx("div",{className:"absolute inset-0 border-4 border-lime-500 rounded-3xl bg-lime-500/5 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"material-symbols-outlined text-8xl text-lime-500 mb-4 animate-pulse",children:"qr_code_scanner"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"QR Kodu Kamerann nne Tutun"})]})}),i.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-lime-500 rounded-tl-3xl"}),i.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-lime-500 rounded-tr-3xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-lime-500 rounded-bl-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-lime-500 rounded-br-3xl"})]}),i.jsxs("div",{className:"w-full max-w-sm",children:[i.jsx("p",{className:"text-gray-500 text-sm text-center mb-4",children:"veya manuel girin:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:e,onChange:a=>r(a.target.value),placeholder:"Czdan adresi veya deme kodu",className:"flex-1 px-4 py-3 rounded-xl border border-white/10 bg-[#1a1a1a] text-white placeholder-gray-600 focus:border-lime-500 focus:ring-2 focus:ring-lime-500/20 transition-all outline-none"}),i.jsx("button",{onClick:n,className:"bg-lime-500 hover:bg-lime-400 text-black p-3 rounded-xl transition-all active:scale-95",children:i.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})})]})]}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx("p",{className:"text-gray-600 text-xs",children:"Gvenli deme yapmak iin QR kod tarayn"})})]})]})},E1=()=>{const t=ve();return i.jsxs("div",{className:"h-screen bg-[#111111] flex flex-col font-display overflow-hidden",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 shrink-0 z-10",children:[i.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Gizlilik Politikas"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 pb-20",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"material-symbols-outlined text-purple-400 text-3xl",children:"privacy_tip"})}),i.jsx("p",{className:"text-gray-500 text-sm",children:"Son gncelleme: 9 Aralk 2025"})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-purple-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"info"}),"1. Giri"]}),i.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"NUSD Wallet olarak gizliliinize nem veriyoruz. Bu politika, kripto para alc ve satclarn buluturan P2P platformumuzda bilgilerinizin nasl toplandn, kullanldn ve korunduunu aklar."})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-blue-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"folder_open"}),"2. Toplanan Bilgiler"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"bg-[#222] rounded-xl p-3",children:[i.jsx("p",{className:"text-lime-400 font-bold text-sm mb-1",children:"Hesap Bilgileri"}),i.jsx("p",{className:"text-gray-400 text-xs",children:"Ad, e-posta adresi, telefon numaras"})]}),i.jsxs("div",{className:"bg-[#222] rounded-xl p-3",children:[i.jsx("p",{className:"text-lime-400 font-bold text-sm mb-1",children:"lem Verileri"}),i.jsx("p",{className:"text-gray-400 text-xs",children:"lem gemii, tutar bilgileri, tarih/saat kaytlar"})]}),i.jsxs("div",{className:"bg-[#222] rounded-xl p-3",children:[i.jsx("p",{className:"text-lime-400 font-bold text-sm mb-1",children:"Cihaz Bilgileri"}),i.jsx("p",{className:"text-gray-400 text-xs",children:"IP adresi, tarayc tr, iletim sistemi"})]})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-amber-500/20 space-y-4",children:[i.jsxs("h2",{className:"text-amber-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"account_balance"}),"3. Banka Hesap Bilgileri Hakknda"]}),i.jsx("div",{className:"bg-amber-500/10 rounded-xl p-4 border border-amber-500/20",children:i.jsx("p",{className:"text-amber-300 text-sm leading-relaxed font-medium",children:" NEML UYARI"})}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2 list-disc list-inside",children:[i.jsxs("li",{children:["Platformda paylalan banka hesap bilgileri (IBAN, hesap numaras vb.)",i.jsx("span",{className:"text-amber-400 font-bold",children:" kullanclar arasnda dorudan paylalr"}),"."]}),i.jsx("li",{children:"NUSD Wallet, bu bilgileri sadece ilem eletirmesi iin geici olarak saklar."}),i.jsx("li",{children:"Banka hesaplarnn doruluunu veya gvenliini garanti etmiyoruz."}),i.jsx("li",{children:"Kullanclar, banka bilgilerini paylamadan nce kar taraf dorulamaldr."}),i.jsx("li",{children:"Banka transferlerinden doan sorunlar kullanclarn sorumluluundadr."})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-green-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"check_circle"}),"4. Bilgilerin Kullanm"]}),i.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Toplanan bilgiler aadaki amalarla kullanlr:"}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2 list-disc list-inside",children:[i.jsx("li",{children:"P2P eletirme hizmetinin salanmas"}),i.jsx("li",{children:"Hesap gvenliinin korunmas"}),i.jsx("li",{children:"Dolandrclk nleme"}),i.jsx("li",{children:"Yasal ykmllklerin yerine getirilmesi"}),i.jsx("li",{children:"Mteri destei salanmas"})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-red-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"share"}),"5. Bilgi Paylam"]}),i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Bilgileriniz aadaki durumlar dnda nc taraflarla",i.jsx("span",{className:"text-lime-400 font-bold",children:" PAYLAILMAZ"}),":"]}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2 list-disc list-inside",children:[i.jsx("li",{children:"Yasal zorunluluk durumunda (mahkeme karar, resmi talep)"}),i.jsx("li",{children:"P2P ilem taraflar arasnda (sadece gerekli bilgiler)"}),i.jsx("li",{children:"Gvenlik tehdidi tespit edildiinde"})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-cyan-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"lock"}),"6. Veri Gvenlii"]}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2 list-disc list-inside",children:[i.jsx("li",{children:"256-bit SSL ifreleme ile veri iletimi"}),i.jsx("li",{children:"ifreli veritaban depolama"}),i.jsx("li",{children:"ki faktrl kimlik dorulama seenei"}),i.jsx("li",{children:"Dzenli gvenlik denetimleri"})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-orange-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"timer"}),"7. Veri Saklama Sresi"]}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2 list-disc list-inside",children:[i.jsx("li",{children:"Aktif hesap bilgileri: Hesap aktif olduu srece"}),i.jsx("li",{children:"lem kaytlar: 5 yl (yasal zorunluluk)"}),i.jsx("li",{children:"Kapatlan hesaplar: 1 yl sonra tamamen silinir"})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-lime-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"person_raised_hand"}),"8. Kullanc Haklar"]}),i.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"KVKK ve GDPR kapsamnda aadaki haklara sahipsiniz:"}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2 list-disc list-inside",children:[i.jsx("li",{children:"Verilerinize eriim talep etme"}),i.jsx("li",{children:"Verilerin dzeltilmesini isteme"}),i.jsx("li",{children:"Verilerin silinmesini talep etme"}),i.jsx("li",{children:"Veri ilemeye itiraz etme"}),i.jsx("li",{children:"Veri tanabilirlii"})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-gray-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"contact_support"}),"9. letiim"]}),i.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Gizlilik ile ilgili sorularnz iin:"}),i.jsx("p",{className:"text-lime-400 font-medium",children:"privacy@nusd.com"})]}),i.jsx("div",{className:"text-center pt-4 pb-10",children:i.jsx("p",{className:"text-gray-600 text-xs",children:"NUSD Wallet' kullanarak bu gizlilik politikasn kabul etmi saylrsnz."})})]})]})},P1=()=>{const t=ve();return i.jsxs("div",{className:"h-screen bg-[#111111] flex flex-col font-display overflow-hidden",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 shrink-0 z-10",children:[i.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Kullanm Koullar"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 pb-20",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-lime-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl",children:"description"})}),i.jsx("p",{className:"text-gray-500 text-sm",children:"Son gncelleme: 9 Aralk 2025"})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-lime-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"gavel"}),"1. Hizmet Tanm"]}),i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["NUSD Wallet, kripto para alm-satm yapmak isteyen kullanclar birbirleriyle buluturan bir ",i.jsx("span",{className:"text-lime-400 font-bold",children:"eler aras (P2P) platform"}),"dur. Platform, kullanclar arasnda dorudan ilem yaplmasn kolaylatrmak amacyla tasarlanmtr."]}),i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["NUSD Wallet, bir kripto para borsas, arac kurum veya finans kuruluu",i.jsx("span",{className:"text-red-400 font-bold",children:" DELDR"}),". Platform, yalnzca kullanclarn birbirini bulmasna ve iletiim kurmasna araclk eder."]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-amber-500/20 space-y-4",children:[i.jsxs("h2",{className:"text-amber-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"warning"}),"2. Sorumluluk Reddi - Banka Hesaplar"]}),i.jsx("div",{className:"bg-amber-500/10 rounded-xl p-4 border border-amber-500/20",children:i.jsx("p",{className:"text-amber-300 text-sm leading-relaxed font-medium",children:" NEML: Kullanclar tarafndan platformda paylalan banka hesap bilgileri, IBAN numaralar ve dier finansal bilgiler tamamen kullanclarn kendi sorumluluundadr."})}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2 list-disc list-inside",children:[i.jsx("li",{children:"NUSD Wallet, kullanclar arasnda gerekletirilen banka transferlerinden sorumlu tutulamaz."}),i.jsx("li",{children:"Banka hesap bilgilerinin doruluu kullanc tarafndan kontrol edilmelidir."}),i.jsx("li",{children:"Hatal hesap bilgisi nedeniyle oluan kayplardan platform sorumlu deildir."}),i.jsx("li",{children:"Kullanclar, paylatklar bilgilerin gvenliinden kendileri sorumludur."})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-blue-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"handshake"}),"3. P2P lem Koullar"]}),i.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Tm ilemler, alc ve satc arasnda dorudan gerekletirilir. NUSD Wallet:"}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2 list-disc list-inside",children:[i.jsx("li",{children:"lemlerin taraf deildir, yalnzca araclk hizmeti sunar."}),i.jsx("li",{children:"Kullanclar arasndaki anlamazlklarda taraf olmaz."}),i.jsx("li",{children:"Kripto para veya fiat para transferlerini dorudan gerekletirmez."}),i.jsx("li",{children:"lem srelerinde danmanlk veya garanti salamaz."})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-purple-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"person"}),"4. Kullanc Sorumluluklar"]}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2 list-disc list-inside",children:[i.jsx("li",{children:"Doru ve gncel bilgiler salamak"}),i.jsx("li",{children:"lem yapmadan nce kar taraf dorulamak"}),i.jsx("li",{children:"Yerel yasalara ve dzenlemelere uymak"}),i.jsx("li",{children:"Hesap gvenliini salamak"}),i.jsx("li",{children:"pheli aktiviteleri bildirmek"})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-red-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"block"}),"5. Yasaklanan Faaliyetler"]}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2 list-disc list-inside",children:[i.jsx("li",{children:"Kara para aklama veya yasa d fon transferi"}),i.jsx("li",{children:"Dolandrclk veya sahte ilemler"}),i.jsx("li",{children:"Bakalarnn kimlik bilgilerini kullanma"}),i.jsx("li",{children:"Platform gvenliini tehlikeye atma"}),i.jsx("li",{children:"Spam veya zararl ierik paylam"})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-cyan-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"verified_user"}),"6. Hesap Askya Alma"]}),i.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"NUSD Wallet, bu koullar ihlal eden hesaplar nceden bildirimde bulunmakszn askya alma veya kalc olarak kapatma hakkn sakl tutar."})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 border border-white/5 space-y-4",children:[i.jsxs("h2",{className:"text-gray-400 font-bold text-lg flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"contact_support"}),"7. letiim"]}),i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Sorularnz iin: ",i.jsx("span",{className:"text-lime-400",children:"support@nusd.com"})]})]}),i.jsx("div",{className:"text-center pt-4 pb-10",children:i.jsx("p",{className:"text-gray-600 text-xs",children:"Bu koullar kabul ederek NUSD Wallet' kullanmaya devam edebilirsiniz."})})]})]})},or=({children:t,title:e})=>{const r=ve(),n=Tn(),{logout:a}=ht(),o=[{icon:"dashboard",label:"Dashboard",path:"/admin"},{icon:"group",label:"Users",path:"/admin/users"},{icon:"swap_horiz",label:"P2P Orders",path:"/admin/p2p-orders"},{icon:"currency_exchange",label:"Kur Ynetimi",path:"/admin/exchange-rate"},{icon:"lock",label:"Crypto Vaults",path:"/admin/vaults"},{icon:"business",label:"Departmanlar",path:"/admin/departments"},{icon:"terminal",label:"System Logs",path:"/admin/logs"}];return i.jsxs("div",{className:"admin-layout flex h-screen bg-gray-100 font-display",children:[i.jsxs("div",{className:"w-64 bg-[#111827] text-white flex flex-col shadow-2xl z-20",children:[i.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-gray-800",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"admin_panel_settings"})}),i.jsx("span",{className:"font-bold text-lg tracking-tight",children:"NUSD Admin"})]}),i.jsx("div",{className:"flex-1 py-6 space-y-1 px-3",children:o.map(c=>{const d=n.pathname===c.path;return i.jsxs("button",{onClick:()=>r(c.path),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${d?"bg-blue-600 text-white font-bold shadow-lg shadow-blue-900/50":"text-gray-400 hover:bg-gray-800 hover:text-white font-medium"}`,children:[i.jsx("span",{className:"material-symbols-outlined",children:c.icon}),c.label]},c.path)})}),i.jsxs("div",{className:"p-4 border-t border-gray-800",children:[i.jsxs("button",{onClick:()=>r("/dashboard"),className:"w-full flex items-center gap-3 px-4 py-2 text-gray-400 hover:text-white transition-colors text-sm mb-2",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"exit_to_app"}),"Exit Admin Mode"]}),i.jsxs("button",{onClick:()=>{a(),r("/")},className:"w-full flex items-center gap-3 px-4 py-2 text-red-400 hover:text-red-300 transition-colors text-sm",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"logout"}),"Logout"]})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden h-screen",children:[i.jsxs("div",{className:"bg-white shadow-sm border-b border-gray-200 px-8 py-4 flex justify-between items-center z-10",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined text-gray-600 text-sm",children:"person"})}),i.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Administrator"})]})]}),i.jsx("div",{className:"flex-1 overflow-auto p-8 bg-gray-50/50",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})]})},Er=({icon:t,iconBg:e,label:r,value:n,sublabel:a,trend:o})=>i.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("div",{className:`w-12 h-12 ${e} rounded-xl flex items-center justify-center`,children:i.jsx("span",{className:"material-symbols-outlined",children:t})}),o&&i.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${o==="up"?"bg-green-100 text-green-600":o==="down"?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:o==="up"?"":o==="down"?"":""})]}),i.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider mb-1",children:r}),i.jsx("h3",{className:"text-2xl font-extrabold text-gray-900",children:n}),a&&i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:a})]}),T1=()=>{var o,c,d,h,m,g,x,v,_,y,b,E,N;const[t,e]=S.useState(null),[r,n]=S.useState(!0);S.useEffect(()=>{const j=()=>{q.getSystemStats().then(T=>{e(T),n(!1)})};j();const k=setInterval(j,1e4);return()=>clearInterval(k)},[]);const a=async()=>{window.confirm("Emin misiniz? Tm ilemler silinecek ve bakiyeler sfrlanacak.")&&(await q.resetDB(),window.location.reload())};return i.jsxs(or,{title:"Sistem zeti",children:[i.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 rounded-2xl p-6 mb-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-emerald-100 text-sm font-bold uppercase tracking-wider mb-1",children:"Toplam Sistem Bakiyesi"}),i.jsxs("h2",{className:"text-4xl font-extrabold",children:["$",r?"":(((t==null?void 0:t.totalUserBalance)||0)+((t==null?void 0:t.totalVaultBalance)||0)).toLocaleString()]}),i.jsxs("p",{className:"text-emerald-200 text-sm mt-2",children:["Kullanc: $",((o=t==null?void 0:t.totalUserBalance)==null?void 0:o.toLocaleString())||0,"  Vault: $",((c=t==null?void 0:t.totalVaultBalance)==null?void 0:c.toLocaleString())||0]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mb-2",children:i.jsx("span",{className:"material-symbols-outlined text-4xl",children:"account_balance_wallet"})}),i.jsx("p",{className:"text-xs text-emerald-200",children:"Canl Gncelleniyor"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsx(Er,{icon:"south_west",iconBg:"bg-green-50 text-green-600",label:"Gelen Bakiye",value:`$${((d=t==null?void 0:t.totalDeposits)==null?void 0:d.toLocaleString())||0}`,sublabel:`Vault: $${((h=t==null?void 0:t.vaultDeposits)==null?void 0:h.toLocaleString())||0}`,trend:"up"}),i.jsx(Er,{icon:"north_east",iconBg:"bg-red-50 text-red-600",label:"kan Bakiye",value:`$${((m=t==null?void 0:t.totalWithdrawals)==null?void 0:m.toLocaleString())||0}`,sublabel:`Vault: $${((g=t==null?void 0:t.vaultWithdrawals)==null?void 0:g.toLocaleString())||0}`,trend:"down"}),i.jsx(Er,{icon:"lock",iconBg:"bg-purple-50 text-purple-600",label:"Vault Bakiye",value:`$${((x=t==null?void 0:t.totalVaultBalance)==null?void 0:x.toLocaleString())||0}`,sublabel:"Kripto kasas"}),i.jsx(Er,{icon:"sync",iconBg:"bg-amber-50 text-amber-600",label:"Net Ak",value:`$${(((t==null?void 0:t.totalDeposits)||0)-((t==null?void 0:t.totalWithdrawals)||0)).toLocaleString()}`,sublabel:"Gelen - kan",trend:((t==null?void 0:t.totalDeposits)||0)>=((t==null?void 0:t.totalWithdrawals)||0)?"up":"down"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsx(Er,{icon:"receipt_long",iconBg:"bg-blue-50 text-blue-600",label:"Toplam lem",value:((v=t==null?void 0:t.totalTransactions)==null?void 0:v.toString())||"0"}),i.jsx(Er,{icon:"pending",iconBg:"bg-orange-50 text-orange-600",label:"Bekleyen lem",value:((_=t==null?void 0:t.pendingTransactions)==null?void 0:_.toString())||"0"}),i.jsx(Er,{icon:"group",iconBg:"bg-cyan-50 text-cyan-600",label:"Aktif Kullanc",value:((y=t==null?void 0:t.activeUsers)==null?void 0:y.toString())||"0"}),i.jsx(Er,{icon:"business",iconBg:"bg-indigo-50 text-indigo-600",label:"Departman",value:((b=t==null?void 0:t.departmentCount)==null?void 0:b.toString())||"0"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined",children:"attach_money"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider",children:"Toplam Gelir"}),i.jsxs("h3",{className:"text-3xl font-extrabold text-gray-900",children:["$",((E=t==null?void 0:t.totalRevenue)==null?void 0:E.toFixed(2))||"0.00"]})]})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Komisyon ve ilem cretlerinden"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-50 text-purple-600 rounded-xl flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined",children:"bar_chart"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider",children:"Toplam Hacim"}),i.jsxs("h3",{className:"text-3xl font-extrabold text-gray-900",children:["$",((N=t==null?void 0:t.totalVolume)==null?void 0:N.toLocaleString())||"0.00"]})]})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Tm ilemlerin toplam deeri"})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Tehlikeli Blge"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{onClick:a,className:"px-6 py-3 bg-red-50 text-red-600 hover:bg-red-100 border border-red-100 rounded-xl font-bold transition-colors flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"restart_alt"}),"Veritabann Sfrla"]}),i.jsxs("button",{className:"px-6 py-3 bg-gray-50 text-gray-600 hover:bg-gray-100 border border-gray-200 rounded-xl font-bold transition-colors flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"build"}),"Bakm Modu"]})]})]})]})},C1=()=>{const[t,e]=S.useState([]);S.useEffect(()=>{r()},[]);const r=()=>q.getAllUsers().then(e),n=async a=>{window.confirm("Change user status?")&&(await q.toggleUserStatus(a),r())};return i.jsx(or,{title:"User Management",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"TRX Wallet"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Role"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Balance"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(a=>{var o;return i.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-900 text-white flex items-center justify-center text-xs font-bold",children:a.name.substring(0,1)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900 text-sm",children:a.name}),i.jsx("p",{className:"text-gray-500 text-xs",children:a.email})]})]})}),i.jsx("td",{className:"p-4",children:i.jsx("p",{className:"font-mono text-xs text-gray-600 max-w-[150px] truncate",title:a.trxAddress,children:a.trxAddress||"-"})}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${a.role==="admin"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:a.role})}),i.jsxs("td",{className:"p-4 font-mono font-bold text-gray-700",children:["$",(o=a.balance)==null?void 0:o.toFixed(2)]}),i.jsx("td",{className:"p-4",children:i.jsxs("span",{className:`flex items-center gap-1.5 text-xs font-bold ${a.isActive?"text-green-600":"text-red-600"}`,children:[i.jsx("span",{className:`w-2 h-2 rounded-full ${a.isActive?"bg-green-600":"bg-red-600"}`}),a.isActive?"Active":"Suspended"]})}),i.jsx("td",{className:"p-4 text-right",children:i.jsx("button",{onClick:()=>n(a.email),className:`text-xs font-bold px-3 py-1.5 rounded-lg border transition-colors ${a.isActive?"border-red-200 text-red-600 hover:bg-red-50":"border-green-200 text-green-600 hover:bg-green-50"}`,children:a.isActive?"Suspend":"Activate"})})]},a.email)})})]})})})})},A1=({transactionId:t})=>{const[e,r]=S.useState([]),[n,a]=S.useState(!0);return S.useEffect(()=>{t&&(async()=>{a(!0);const c=await q.getTransactionLogs(t);r(c),a(!1)})()},[t]),n?i.jsx("div",{className:"p-4 text-gray-500 text-sm",children:"Loading logs..."}):e.length===0?i.jsx("div",{className:"p-4 bg-gray-50 rounded-lg text-gray-500 text-sm italic",children:"No audit logs found for this transaction. This might be an old transaction created before the audit system was active."}):i.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-base",children:"history_edu"}),"Transaction Audit Trail"]}),i.jsx("div",{className:"space-y-4",children:e.map(o=>i.jsxs("div",{className:"relative pl-6 pb-2 border-l-2 border-slate-200 last:border-0 last:pb-0",children:[i.jsx("div",{className:`absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white 
                            ${o.action==="APPROVE"?"bg-green-500":o.action==="REJECT"?"bg-red-500":o.action==="CREATE"?"bg-blue-500":"bg-slate-400"}`}),i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded mr-2 
                                    ${o.action==="APPROVE"?"bg-green-100 text-green-700":o.action==="REJECT"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:o.action}),i.jsxs("span",{className:"text-xs text-slate-500 font-mono",children:["by ",o.actor_role,o.actor_role==="admin"?"":" (system)"]})]}),i.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:new Date(o.created_at).toLocaleString("tr-TR")})]}),o.metadata&&Object.keys(o.metadata).length>0&&i.jsx("div",{className:"mt-2 bg-white border border-slate-200 rounded p-2 text-xs font-mono text-slate-600 overflow-x-auto",children:i.jsx("pre",{className:"m-0 whitespace-pre-wrap",children:JSON.stringify(o.metadata,null,2)})})]},o.id))})]})},O1=()=>{const[t,e]=S.useState([]),[r,n]=S.useState("all"),[a,o]=S.useState(null),[c,d]=S.useState({}),[h,m]=S.useState(null);S.useEffect(()=>{q.getAllTransactions().then(e)},[]);const g=t.filter(b=>r==="all"||b.status===r),x=async b=>{if(!b.txHash){alert("No TX hash provided for this transaction");return}o(b.id);try{const N=await(await fetch(`/api/admin/verify-tx/${b.txHash}?expectedAmount=${b.amount}&transactionId=${b.id}`)).json();d(j=>({...j,[b.id]:N})),q.getAllTransactions().then(e)}catch{d(N=>({...N,[b.id]:{valid:!1,error:"API request failed"}}))}o(null)},v=async b=>{confirm("Approve this transaction?")&&(await q.approveTransaction(b.id)?q.getAllTransactions().then(e):alert("Failed to approve"))},_=async b=>{confirm("ptal etmek istediinize emin misiniz? Bu ilem geri alnamaz.")&&(await q.rejectTransaction(b.id)?q.getAllTransactions().then(e):alert("Failed to reject"))},y=b=>{m(E=>E===b?null:b)};return i.jsxs(or,{title:"Transactions",children:[i.jsx("div",{className:"mb-6 flex gap-2",children:["all","completed","pending","cancelled"].map(b=>i.jsx("button",{onClick:()=>n(b),className:`px-4 py-2 rounded-lg text-sm font-bold capitalize transition-colors ${r===b?"bg-blue-600 text-white shadow-md shadow-blue-500/20":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:b},b))}),i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"ID"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Type"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Amount"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"TX Hash"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Status"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:g.map(b=>{var j;const E=c[b.id],N=h===b.id;return i.jsxs(hs.Fragment,{children:[i.jsxs("tr",{className:`hover:bg-gray-50/50 transition-colors ${N?"bg-slate-50":""}`,children:[i.jsxs("td",{className:"p-4 text-xs text-gray-400 font-mono",children:[b.id.substring(0,12),"..."]}),i.jsx("td",{className:"p-4 text-sm font-bold text-gray-700",children:b.owner}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase tracking-wider ${b.type.startsWith("P2P")?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:b.type})}),i.jsxs("td",{className:`p-4 font-mono font-bold ${b.amount>0?"text-green-600":"text-gray-900"}`,children:[b.amount>0?"+":"",b.amount.toLocaleString()," ",b.currency]}),i.jsx("td",{className:"p-4",children:b.txHash?i.jsxs("a",{href:`https://tronscan.org/#/transaction/${b.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-mono text-blue-600 hover:underline",children:[b.txHash.substring(0,16),"..."]}):i.jsx("span",{className:"text-xs text-gray-400",children:"No TX hash"})}),i.jsx("td",{className:"p-4 text-right",children:i.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase tracking-wide ${b.status==="completed"||b.status==="COMPLETED"?"bg-green-50 text-green-600":b.status==="pending"||b.status==="PENDING"?"bg-amber-50 text-amber-600":b.status==="cancelled"||b.status==="CANCELLED"?"bg-red-50 text-red-600":"bg-gray-50 text-gray-500"}`,children:b.status})}),i.jsx("td",{className:"p-4 text-right",children:i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>y(b.id),className:`p-1 rounded hover:bg-gray-200 text-gray-500 transition-colors ${N?"bg-gray-200 text-gray-800":""}`,title:"View Audit Logs",children:i.jsx("span",{className:"material-symbols-outlined text-base",children:"history"})}),b.status==="PENDING"&&b.txHash&&i.jsx("button",{onClick:()=>x(b),disabled:a===b.id,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm flex items-center gap-1",children:a===b.id?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"animate-spin",children:""})," Verifying..."]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"search"}),"Verify TX"]})}),b.status==="PENDING"&&i.jsx("button",{onClick:()=>v(b),className:"bg-green-500 hover:bg-green-600 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:"Approve"}),b.status==="PENDING"&&i.jsx("button",{onClick:()=>_(b),className:"bg-red-500 hover:bg-red-600 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:"ptal"})]})})]}),E&&i.jsx("tr",{className:`${E.valid?E.recommendApprove?"bg-green-50":"bg-amber-50":"bg-red-50"}`,children:i.jsx("td",{colSpan:7,className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsx("span",{className:`material-symbols-outlined text-xl ${E.valid?E.recommendApprove?"text-green-600":"text-amber-600":"text-red-600"}`,children:E.valid?E.recommendApprove?"check_circle":"warning":"cancel"}),E.valid?i.jsxs("div",{className:"flex gap-6 flex-wrap",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500 text-xs",children:"Blockchain Amount:"}),i.jsxs("span",{className:"ml-2 font-bold",children:[(j=E.amount)==null?void 0:j.toFixed(2)," USDT"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500 text-xs",children:"Confirmed:"}),i.jsx("span",{className:`ml-2 font-bold ${E.confirmed?"text-green-600":"text-amber-600"}`,children:E.confirmed?"Yes":"Pending"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500 text-xs",children:"Vault Match:"}),i.jsx("span",{className:`ml-2 font-bold ${E.vaultMatch?"text-green-600":"text-red-600"}`,children:E.vaultMatch?" Correct":" Wrong Address"})]}),E.recommendApprove&&i.jsx("span",{className:"bg-green-600 text-white text-xs font-bold px-2 py-1 rounded",children:" RECOMMENDED TO APPROVE"})]}):i.jsx("span",{className:"text-red-600 font-medium",children:E.error})]})})}),N&&i.jsx("tr",{children:i.jsxs("td",{colSpan:7,className:"p-4 bg-slate-50 border-b border-gray-100",children:[b.metadata&&b.metadata.source==="payment_panel"&&i.jsxs("div",{className:"mb-4 bg-white p-4 rounded-lg border border-blue-100 shadow-sm",children:[i.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-blue-500 text-base",children:"payments"}),"Payment Panel Details"]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Panel Name"}),i.jsx("div",{className:"font-bold",children:b.metadata.panel_name||"Unknown Panel"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Source Slug"}),i.jsx("a",{href:`/#/pay/${b.metadata.public_slug}`,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline font-mono text-xs",children:b.metadata.public_slug})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Commission"}),i.jsxs("div",{className:"font-bold text-red-500",children:["-",b.metadata.commission," ",b.asset_type,i.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["(",b.metadata.commission_type==="percentage"?`%${b.metadata.commission_val}`:"Fixed",")"]})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Net Amount to User"}),i.jsxs("div",{className:"font-bold text-green-600 text-lg",children:[b.metadata.net_amount," ",b.asset_type]})]})]})]}),i.jsx(A1,{transactionId:b.id})]})})]},b.id)})})]})})})]})},L1=()=>{const[t,e]=S.useState([]),[r,n]=S.useState("all"),[a,o]=S.useState(!0),[c,d]=S.useState(null);S.useEffect(()=>{h()},[]);const h=async()=>{o(!0);const y=await q.getAllP2POrders();e(y),o(!1)},m=t.filter(y=>r==="all"||y.status===r.toUpperCase()),g=async y=>{if(!confirm("Bu siparii zorla tamamlamak istediinize emin misiniz?"))return;d(y);const b=await q.adminForceCompleteP2POrder(y);d(null),b.success?(alert("Sipari baaryla tamamland"),h()):alert(`Hata: ${b.error}`)},x=async y=>{if(!confirm("Bu siparii zorla iptal etmek istediinize emin misiniz?"))return;d(y);const b=await q.adminForceCancelP2POrder(y);d(null),b.success?(alert("Sipari baaryla iptal edildi"),h()):alert(`Hata: ${b.error}`)},v=y=>{switch(y){case"OPEN":return"bg-blue-50 text-blue-600";case"MATCHED":return"bg-purple-50 text-purple-600";case"PAID":return"bg-amber-50 text-amber-600";case"COMPLETED":return"bg-green-50 text-green-600";case"CANCELLED":return"bg-red-50 text-red-600";default:return"bg-gray-50 text-gray-600"}},_=y=>new Date(y).toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return i.jsxs(or,{title:"P2P Orders",children:[i.jsxs("div",{className:"mb-6 flex gap-2 flex-wrap",children:[["all","open","matched","paid","completed","cancelled"].map(y=>i.jsx("button",{onClick:()=>n(y),className:`px-4 py-2 rounded-lg text-sm font-bold capitalize transition-colors ${r===y?"bg-purple-600 text-white shadow-md shadow-purple-500/20":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:y==="all"?"Tm":y},y)),i.jsxs("button",{onClick:h,className:"ml-auto px-4 py-2 rounded-lg text-sm font-bold bg-gray-100 hover:bg-gray-200 text-gray-600 transition-colors flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-base",children:"refresh"}),"Yenile"]})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"ID"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Alc (Buyer)"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Satc (Seller)"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Miktar"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Durum"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Tarih"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"lemler"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:a?i.jsx("tr",{children:i.jsxs("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:[i.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full"}),i.jsx("p",{className:"mt-2",children:"Ykleniyor..."})]})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"Gsterilecek sipari yok"})}):m.map(y=>i.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[i.jsxs("td",{className:"p-4 text-xs text-gray-400 font-mono",children:[y.id.substring(0,8),"..."]}),i.jsx("td",{className:"p-4",children:y.buyer?i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-gray-700",children:y.buyer.name||"N/A"}),i.jsx("div",{className:"text-xs text-gray-400",children:y.buyer.email})]}):i.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),i.jsx("td",{className:"p-4",children:y.seller?i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-gray-700",children:y.seller.name||"N/A"}),i.jsx("div",{className:"text-xs text-gray-400",children:y.seller.email})]}):i.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),i.jsxs("td",{className:"p-4 font-mono font-bold text-gray-900",children:["$",y.amount_usd.toLocaleString()]}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase tracking-wide ${v(y.status)}`,children:y.status})}),i.jsx("td",{className:"p-4 text-xs text-gray-500",children:_(y.created_at)}),i.jsx("td",{className:"p-4 text-right",children:i.jsxs("div",{className:"flex gap-2 justify-end",children:[["OPEN","MATCHED","PAID"].includes(y.status)&&i.jsx("button",{onClick:()=>g(y.id),disabled:c===y.id,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:c===y.id?"...":"Zorla Tamamla"}),["OPEN","MATCHED","PAID"].includes(y.status)&&i.jsx("button",{onClick:()=>x(y.id),disabled:c===y.id,className:"bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white text-xs font-bold px-3 py-1 rounded transition-colors shadow-sm",children:c===y.id?"...":"Zorla ptal"}),["COMPLETED","CANCELLED"].includes(y.status)&&i.jsx("span",{className:"text-xs text-gray-400",children:"-"})]})})]},y.id))})]})})}),i.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-5 gap-4",children:["OPEN","MATCHED","PAID","COMPLETED","CANCELLED"].map(y=>i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[i.jsx("div",{className:`text-2xl font-bold ${v(y).replace("bg-","text-").replace("-50","-600")}`,children:t.filter(b=>b.status===y).length}),i.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:y})]},y))})]})},R1=()=>{const[t,e]=S.useState([]);return S.useEffect(()=>{const r=()=>q.getAdminLogs().then(e);r();const n=setInterval(r,3e3);return()=>clearInterval(n)},[]),i.jsx(or,{title:"System Logs",children:i.jsxs("div",{className:"bg-[#1E1E1E] rounded-xl shadow-lg border border-gray-800 overflow-hidden font-mono text-sm",children:[i.jsxs("div",{className:"bg-[#2D2D2D] px-4 py-2 border-b border-gray-700 flex justify-between items-center",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),i.jsx("span",{className:"text-gray-400 text-xs",children:"system_logs.log  Live"})]}),i.jsxs("div",{className:"p-4 h-[600px] overflow-y-auto space-y-2",children:[t.map(r=>i.jsxs("div",{className:"flex gap-4 hover:bg-white/5 p-1 rounded transition-colors group",children:[i.jsxs("span",{className:"text-gray-500 shrink-0 w-36 select-none",children:["[",r.formattedTime,"]"]}),i.jsx("span",{className:`font-bold shrink-0 w-24 ${r.type==="ERROR"?"text-red-400":r.type==="AUTH"?"text-blue-400":r.type==="ADMIN"?"text-purple-400":"text-green-400"}`,children:r.type}),i.jsx("span",{className:"text-gray-300 flex-1",children:r.description}),i.jsx("span",{className:"text-gray-600 text-xs group-hover:text-gray-400",children:r.user})]},r.id)),t.length===0&&i.jsx("p",{className:"text-gray-600 italic",children:"Waiting for system activity..."})]})]})})},H0="f8f57351-2bcf-428c-92d0-7d8652807847",W0="https://api.trongrid.io",I1="TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",D1=async t=>{try{const e=await fetch(`${W0}/v1/accounts/${t}`,{headers:{"TRON-PRO-API-KEY":H0}});if(!e.ok)return 0;const r=await e.json();return r.data&&r.data.length>0?(r.data[0].balance||0)/1e6:0}catch{return 0}},z1=async t=>{try{const e=await fetch(`${W0}/v1/accounts/${t}/tokens?token_id=${I1}`,{headers:{"TRON-PRO-API-KEY":H0}});if(!e.ok)return 0;const r=await e.json();return r.data&&r.data.length>0?(parseFloat(r.data[0].balance)||0)/1e6:0}catch{return 0}},M1=async t=>{const[e,r]=await Promise.all([D1(t),z1(t)]);return{trx:e,usdt:r}},B1=()=>{const[t,e]=S.useState({vaults:[],ledger:[]}),[r,n]=S.useState(!0),[a,o]=S.useState({}),[c,d]=S.useState(!1),[h,m]=S.useState(null),[g,x]=S.useState(""),[v,_]=S.useState(""),[y,b]=S.useState(!1),[E,N]=S.useState(!1);S.useEffect(()=>{const T=()=>q.getAdminVaults().then(z=>{e(z),n(!1)});T();const D=setInterval(T,5e3);return()=>clearInterval(D)},[]),S.useEffect(()=>{const T=async()=>{for(const D of t.vaults)if(D.address&&D.address.startsWith("T")){o(z=>({...z,[D.id]:{trx:0,usdt:0,loading:!0}}));try{const z=await M1(D.address);o(C=>({...C,[D.id]:{...z,loading:!1}}))}catch{o(C=>({...C,[D.id]:{trx:0,usdt:0,loading:!1}}))}}};t.vaults.length>0&&T()},[t.vaults]);const j=T=>{navigator.clipboard.writeText(T)},k=async T=>{if(T.preventDefault(),!h||!g)return;N(!0),await q.manualVaultDeposit(h.id,parseFloat(g),v||"External Transfer","TRC20",y)?(d(!1),x(""),_(""),b(!1),N(!1),q.getAdminVaults().then(e)):(alert("Failed to deposit"),N(!1))};return i.jsx(or,{title:"Crypto Vaults (TRX)",children:i.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-[calc(100vh-140px)] relative",children:[c&&h&&i.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm rounded-2xl",children:i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl w-96 max-w-full",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:["Add Funds to ",h.name]}),i.jsxs("form",{onSubmit:k,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Amount (USDT)"}),i.jsx("input",{type:"number",value:g,onChange:T=>x(T.target.value),className:"w-full border border-gray-300 rounded-lg p-2",placeholder:"0.00",step:"0.01",required:!0})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Sender Email (Optional)"}),i.jsx("input",{type:"text",value:v,onChange:T=>_(T.target.value),className:"w-full border border-gray-300 rounded-lg p-2",placeholder:"external@sender.com"})]}),v&&i.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"addToUser",checked:y,onChange:T=>b(T.target.checked),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"addToUser",className:"text-sm text-gray-700 font-medium select-none",children:"Also credit user's balance"})]}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm font-bold",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-bold",children:E?"Processing...":"Add Funds"})]})]})]})}),i.jsxs("div",{className:"lg:w-1/3 flex flex-col bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center",children:[i.jsx("h2",{className:"font-bold text-gray-800",children:"Vault Accounts"}),i.jsxs("span",{className:"text-xs font-bold text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[t.vaults.length," Active"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.vaults.map(T=>{const D=a[T.id];return i.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition-all group relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-red-50 text-red-500 flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"account_balance_wallet"})}),i.jsx("h3",{className:"font-bold text-gray-700 text-sm",children:T.name})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"text-lg font-extrabold text-[#111827]",children:["$",T.balance.toLocaleString()]}),i.jsx("p",{className:"text-[10px] text-gray-400",children:"Platform Balance"})]}),i.jsx("button",{onClick:z=>{z.stopPropagation(),m(T),d(!0)},className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-colors",title:"Add Funds Manually",children:i.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})})]})]}),T.address&&T.address.startsWith("T")&&i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-2 mb-2 border border-green-100",children:[i.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-1",children:" Blockchain Balance"}),D!=null&&D.loading?i.jsx("p",{className:"text-xs text-gray-400 animate-pulse",children:"Loading..."}):D?i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("span",{className:"text-sm font-bold text-green-600",children:[D.usdt.toLocaleString()," USDT"]}),i.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[D.trx.toFixed(2)," TRX"]})]}):i.jsx("p",{className:"text-xs text-gray-400",children:"-"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 flex justify-between items-center cursor-pointer hover:bg-gray-100 group-hover:bg-blue-50 transition-colors",onClick:()=>j(T.address),title:"Click to copy",children:[i.jsx("p",{className:"font-mono text-xs text-gray-500 truncate w-48",children:T.address}),i.jsx("span",{className:"material-symbols-outlined text-gray-400 text-xs group-hover:text-blue-500",children:"content_copy"})]})]},T.id)})})]}),i.jsxs("div",{className:"flex-1 flex flex-col bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[i.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:i.jsx("h2",{className:"font-bold text-gray-800",children:"Vault Ledger"})}),i.jsx("div",{className:"flex-1 overflow-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-white border-b border-gray-100 sticky top-0 z-10 shadow-sm",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Time"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Network"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Amount"}),i.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Type"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:t.ledger.length===0?i.jsx("tr",{children:i.jsxs("td",{colSpan:5,className:"p-12 text-center text-gray-400 italic",children:[i.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-20",children:"receipt_long"}),i.jsx("p",{children:"No transaction history"})]})}):t.ledger.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[i.jsx("td",{className:"p-4 text-xs text-gray-500 whitespace-nowrap",children:new Date(T.timestamp).toLocaleString()}),i.jsx("td",{className:"p-4 text-xs font-bold text-gray-700",children:T.userEmail}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider bg-blue-100 text-blue-700",children:T.network})}),i.jsxs("td",{className:`p-4 font-mono font-bold text-sm ${T.type==="withdraw"?"text-red-600":"text-green-600"}`,children:[T.type==="withdraw"?"-":"+","$",T.amount.toLocaleString()]}),i.jsx("td",{className:"p-4 text-right",children:i.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${T.type==="withdraw"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:T.type})})]},T.id))})]})})]})]})})},U1=[{id:"Kobi",label:"Kobi",color:"bg-green-100 text-green-700"},{id:"Forex",label:"Forex",color:"bg-blue-100 text-blue-700"},{id:"Cash Point",label:"Cash Point",color:"bg-purple-100 text-purple-700"}],$1=["#10B981","#3B82F6","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6366F1"],F1=()=>{const t=ve(),[e,r]=S.useState([]),[n,a]=S.useState(!0),[o,c]=S.useState(!1),[d,h]=S.useState({name:"",category:"Kobi",color:"#10B981",is_active:!0}),[m,g]=S.useState(!1);S.useEffect(()=>{x()},[]);const x=async()=>{a(!0);const _=await q.getDepartments();r(_),a(!1)},v=async _=>{_.preventDefault(),g(!0);const y=await q.createDepartment(d);y&&y.success?(c(!1),h({name:"",category:"Kobi",color:"#10B981",is_active:!0}),x()):alert("Failed to create department"),g(!1)};return i.jsxs(or,{title:"Departman Ynetimi",children:[i.jsx("div",{className:"flex gap-6 h-[calc(100vh-140px)]",children:i.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-gray-700",children:"Departmanlar"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:x,className:"p-2 bg-white rounded-full text-gray-400 hover:text-gray-600 shadow-sm border border-gray-100",children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:"refresh"})}),i.jsx("button",{onClick:()=>c(!0),className:"p-2 bg-green-100 rounded-full text-green-600 hover:bg-green-200 shadow-sm",children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})})]})]}),i.jsx("div",{className:"space-y-4",children:n?i.jsx("div",{className:"text-center py-10 text-gray-400",children:"Loading..."}):e.length===0?i.jsx("div",{className:"text-center py-10 text-gray-400 bg-white rounded-xl border border-dashed border-gray-200",children:"No departments found."}):e.map(_=>{var y;return i.jsxs("div",{onClick:()=>t(`/admin/departments/${_.id}`),className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md hover:border-blue-200 transition-all cursor-pointer group",children:[i.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white text-xl font-bold shadow-sm",style:{backgroundColor:_.color||d.color||"#10B981"},children:i.jsx("span",{className:"material-symbols-outlined",children:"business"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-blue-600 transition-colors",children:_.name}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex gap-2",children:[i.jsxs("span",{children:[_.vaults_count||1," vault"]}),i.jsx("span",{children:""}),i.jsxs("span",{children:[_.members&&((y=_.members[0])==null?void 0:y.count)||0," ye"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[i.jsx("div",{className:"text-xs text-gray-400 font-bold uppercase mb-1",children:"Bakiye"}),i.jsx("div",{className:"font-bold text-gray-800",children:"$0"})]}),i.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[i.jsx("div",{className:"text-xs text-gray-400 font-bold uppercase mb-1",children:"lem"}),i.jsx("div",{className:"font-bold text-gray-800",children:"0"})]})]})]},_.id)})})]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6 shadow-2xl transform transition-all scale-100",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Yeni Departman"}),i.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Kategori / Tip"}),i.jsx("div",{className:"flex gap-2",children:U1.map(_=>i.jsx("button",{type:"button",onClick:()=>h({...d,category:_.id}),className:`flex-1 py-2 rounded-lg text-xs font-bold border transition-colors ${d.category===_.id?"bg-white border-green-500 text-green-600 shadow-sm ring-1 ring-green-500":"bg-gray-50 border-gray-200 text-gray-500 hover:bg-gray-100"}`,children:_.label},_.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Departman Ad"}),i.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition-all font-bold text-gray-800",placeholder:"rn: Firma A",value:d.name,onChange:_=>h({...d,name:_.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Renk Etiketi"}),i.jsx("div",{className:"flex gap-3",children:$1.map(_=>i.jsx("button",{type:"button",onClick:()=>h({...d,color:_}),className:`w-8 h-8 rounded-full transition-transform ${d.color===_?"scale-125 ring-2 ring-offset-2 ring-gray-300":"hover:scale-110"}`,style:{backgroundColor:_}},_))})]}),i.jsxs("div",{className:"pt-6 flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 py-3 bg-white border border-gray-200 hover:bg-gray-50 text-gray-700 font-bold rounded-xl transition-colors",children:"ptal"}),i.jsx("button",{type:"submit",disabled:m,className:"flex-1 py-3 bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white font-bold rounded-xl shadow-lg shadow-green-500/30 transition-all",children:m?"...":"Olutur"})]})]})]})})]})},H1=()=>{var B;const{id:t}=fx(),e=ve(),[r,n]=S.useState(null),[a,o]=S.useState([]),[c,d]=S.useState([]),[h,m]=S.useState([]),[g,x]=S.useState(!0),[v,_]=S.useState("portal"),[y,b]=S.useState(!1),[E,N]=S.useState(!1),[j,k]=S.useState({name:"",commission_mode:"percentage",commission_value:0,asset:"USDT",settlement_type:"external",is_active:!0});S.useEffect(()=>{t&&(T(),z(),D())},[t]);const T=async()=>{const O=await q.getDepartment(t);O?n(O):e("/admin/departments"),x(!1)},D=async()=>{const O=await q.getDepartmentTransactions(t);m(O)},z=async()=>{const O=await q.getAvailableVaults();d(O)},C=async O=>{O.preventDefault();const Z=await q.createPaymentPanel({department_id:t,...j});Z!=null&&Z.success?(N(!1),T()):alert("Error creating panel")};return g||!r?i.jsx(or,{title:"...",children:"Loading..."}):(r.vaults,i.jsxs(or,{title:"",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[i.jsx("span",{className:"cursor-pointer hover:text-gray-600",onClick:()=>e("/admin/departments"),children:"Departmanlar"}),i.jsx("span",{children:"/"}),i.jsx("span",{className:"text-gray-800 font-bold",children:r.name})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[i.jsx("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("h3",{className:"text-green-600 font-bold text-2xl",children:["$",(((B=r.owner)==null?void 0:B.balance)||0).toLocaleString()]}),i.jsx("p",{className:"text-green-800 text-xs font-bold uppercase mt-1",children:"Toplam Bakiye"})]})}),i.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("h3",{className:"text-blue-600 font-bold text-2xl",children:["$",h.filter(O=>O.type==="DEPOSIT"||O.amount>0).reduce((O,Z)=>O+Math.abs(Z.amount||0),0).toLocaleString()]}),i.jsx("p",{className:"text-blue-800 text-xs font-bold uppercase mt-1",children:"Yatrmlar"})]})}),i.jsx("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("h3",{className:"text-red-600 font-bold text-2xl",children:["$",h.filter(O=>O.type==="WITHDRAW"||O.amount<0).reduce((O,Z)=>O+Math.abs(Z.amount||0),0).toLocaleString()]}),i.jsx("p",{className:"text-red-800 text-xs font-bold uppercase mt-1",children:"ekimler"})]})}),i.jsx("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-purple-600 font-bold text-2xl",children:h.length}),i.jsx("p",{className:"text-purple-800 text-xs font-bold uppercase mt-1",children:"lemler"})]})})]}),i.jsx("div",{className:"flex gap-8 border-b border-gray-100 mb-6",children:["transactions","members","portal"].map(O=>i.jsx("button",{onClick:()=>_(O),className:`pb-3 text-sm font-bold capitalize transition-colors ${v===O?"text-green-600 border-b-2 border-green-500":"text-gray-400 hover:text-gray-600"}`,children:O==="transactions"?"lemler":O==="members"?"yeler":"deme Portal"},O))}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 min-h-[400px]",children:[v==="transactions"&&i.jsx("div",{className:"p-6",children:h.length===0?i.jsx("div",{className:"text-center text-gray-400 py-12",children:"Henz ilem yok."}):i.jsx("div",{className:"space-y-3",children:h.map(O=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${O.type==="DEPOSIT"||O.amount>0?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:O.type==="DEPOSIT"||O.amount>0?"arrow_downward":"arrow_upward"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-800",children:O.type==="DEPOSIT"?"Yatrm":O.type==="WITHDRAW"?"ekim":O.type==="TRANSFER"?"Transfer":O.type}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(O.created_at).toLocaleString("tr-TR")})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:`font-bold ${O.amount>0?"text-green-600":"text-red-600"}`,children:[O.amount>0?"+":"",Math.abs(O.amount).toLocaleString()," USDT"]}),i.jsx("p",{className:`text-xs ${O.status==="COMPLETED"?"text-green-500":O.status==="PENDING"?"text-amber-500":"text-gray-500"}`,children:O.status==="COMPLETED"?"Tamamland":O.status==="PENDING"?"Beklemede":O.status})]})]},O.id))})}),v==="members"&&i.jsx("div",{className:"p-8 text-center text-gray-400",children:"Henz ye yok."}),v==="portal"&&i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl border border-green-200 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-green-600 font-bold uppercase mb-1",children:"# NUSD Adresi"}),i.jsx("p",{className:"font-mono font-bold text-xl text-green-700",children:(()=>{var te;const O=((te=r.owner)==null?void 0:te.email)||r.owner_email||"";if(!O)return"ye email bulunamad";const Z=O.split("").reduce((X,le)=>(X<<5)-X+le.charCodeAt(0),0);return`NUSD-${Math.abs(Z).toString(36).toUpperCase().slice(0,6)}`})()})]}),i.jsxs("button",{onClick:()=>{var X;const O=((X=r.owner)==null?void 0:X.email)||r.owner_email||"";if(!O)return;const Z=O.split("").reduce((le,_e)=>(le<<5)-le+_e.charCodeAt(0),0),te=`NUSD-${Math.abs(Z).toString(36).toUpperCase().slice(0,6)}`;navigator.clipboard.writeText(te),alert("Kopyaland!")},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"content_copy"}),"Kopyala"]})]})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"font-bold text-gray-800",children:"deme Portallar"}),i.jsx("button",{onClick:()=>N(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold px-4 py-2 rounded-lg",children:"+ Yeni Portal"})]}),r.panels&&r.panels.length>0?i.jsx("div",{className:"space-y-4",children:r.panels.map(O=>i.jsxs("div",{className:"border border-gray-200 p-4 rounded-xl",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center text-green-700 font-bold text-xl",children:O.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-gray-800",children:O.name}),i.jsxs("p",{className:"text-xs text-gray-400",children:["/",O.public_slug]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${O.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:O.is_active?"AKTF":"PASF"})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg flex items-center gap-2",children:[i.jsxs("code",{className:"flex-1 text-xs text-gray-600 truncate font-mono",children:[window.location.origin,"/#/pay/",O.public_slug]}),i.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md text-xs font-bold transition-colors",onClick:()=>window.open(`/#/pay/${O.public_slug}`,"_blank"),children:"Portal A "}),i.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1.5 rounded-md text-xs font-bold transition-colors",children:"Kopyala"})]})]},O.id))}):i.jsx("div",{className:"text-center py-10 text-gray-400 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:"Henz portal oluturulmam."})]})]})]}),E&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[i.jsx("h3",{className:"font-bold text-lg mb-4",children:"Yeni Portal Olutur"}),i.jsxs("form",{onSubmit:C,className:"space-y-4",children:[i.jsx("input",{className:"w-full p-3 border rounded-lg",placeholder:"Portal Ad",value:j.name,onChange:O=>k({...j,name:O.target.value}),required:!0}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-xl font-bold",children:"Olutur"}),i.jsx("button",{type:"button",onClick:()=>N(!1),className:"w-full text-gray-500 mt-2",children:"ptal"})]})]})})]}))},W1=()=>{const[t,e]=S.useState(null),[r,n]=S.useState(!0),[a,o]=S.useState(!1),[c,d]=S.useState(null),[h,m]=S.useState(null);S.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{const y=await q.getExchangeRate();e(y),y.fetched_at&&d(new Date(y.fetched_at))}catch(y){console.error("Load rate error:",y)}finally{n(!1)}},x=async()=>{o(!0),m(null);try{const y=await q.updateExchangeRate();y.success?(m({success:!0,message:`Kur gncellendi: 1 USDT = ${y.rate.toFixed(2)} TRY`}),e({rate:y.rate,buy_rate:y.buy_rate,sell_rate:y.sell_rate,spread:y.spread,fetched_at:y.fetched_at,is_fallback:!1}),d(new Date(y.fetched_at))):m({success:!1,message:y.error||"Gncelleme baarsz"})}catch(y){m({success:!1,message:y.message||"Balant hatas"})}finally{o(!1)}},v=y=>y.toLocaleString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),_=()=>{if(!c)return"Bilinmiyor";const y=Date.now()-c.getTime(),b=Math.floor(y/6e4);if(b<1)return"Az nce";if(b<60)return`${b} dakika nce`;const E=Math.floor(b/60);return E<24?`${E} saat nce`:v(c)};return i.jsx(or,{title:"Kur Ynetimi",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Kur Ynetimi"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"USDT/TRY dviz kuru ayarlar"})]}),i.jsx("button",{onClick:x,disabled:a,className:`px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-all ${a?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-lime-500 text-black hover:bg-lime-400 active:scale-[0.98]"}`,children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Gncelleniyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-symbols-outlined",children:"refresh"}),"Kuru Gncelle"]})})]}),h&&i.jsx("div",{className:`mb-6 p-4 rounded-xl border ${h.success?"bg-lime-500/10 border-lime-500/30 text-lime-400":"bg-red-500/10 border-red-500/30 text-red-400"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:h.success?"check_circle":"error"}),h.message]})}),r?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx("div",{className:"w-10 h-10 border-2 border-lime-500/30 border-t-lime-500 rounded-full animate-spin"})}):t?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-white/5",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined text-blue-400 text-2xl",children:"show_chart"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Piyasa Kuru"}),i.jsx("p",{className:"text-xs text-gray-500",children:"CoinGecko"})]})]}),i.jsxs("p",{className:"text-3xl font-bold text-white",children:["",t.rate.toFixed(2)]}),i.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"1 USDT"})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-lime-500/20",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-lime-500/20 rounded-xl flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-2xl",children:"add_circle"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Alm Kuru"}),i.jsxs("p",{className:"text-xs text-lime-400",children:["+",t.spread.toFixed(2)," spread"]})]})]}),i.jsxs("p",{className:"text-3xl font-bold text-lime-400",children:["",t.buy_rate.toFixed(2)]}),i.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Kullanc USDT alrken der"})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-red-500/20",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined text-red-400 text-2xl",children:"remove_circle"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Satm Kuru"}),i.jsxs("p",{className:"text-xs text-red-400",children:["-",t.spread.toFixed(2)," spread"]})]})]}),i.jsxs("p",{className:"text-3xl font-bold text-red-400",children:["",t.sell_rate.toFixed(2)]}),i.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Kullanc USDT satarken alr"})]})]}):null,i.jsxs("div",{className:"mt-6 bg-[#1a1a1a] rounded-2xl p-6 border border-white/5",children:[i.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"info"}),"Kur Bilgileri"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[i.jsx("span",{className:"text-gray-400",children:"Son Gncelleme"}),i.jsx("span",{className:"text-white",children:_()})]}),i.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[i.jsx("span",{className:"text-gray-400",children:"Kaynak"}),i.jsx("span",{className:"text-white",children:"CoinGecko API"})]}),i.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[i.jsx("span",{className:"text-gray-400",children:"Spread"}),i.jsxs("span",{className:"text-white",children:["",(t==null?void 0:t.spread.toFixed(2))||"0.10"]})]}),i.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[i.jsx("span",{className:"text-gray-400",children:"Veri Tipi"}),i.jsx("span",{className:t!=null&&t.is_fallback?"text-amber-400":"text-lime-400",children:t!=null&&t.is_fallback?"Fallback (Varsaylan)":"Gerek Zamanl"})]})]})]}),i.jsxs("div",{className:"mt-6 bg-amber-500/10 rounded-2xl p-6 border border-amber-500/20",children:[i.jsxs("h3",{className:"text-amber-400 font-bold mb-2 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"calculate"}),"Spread Nasl alr?"]}),i.jsx("p",{className:"text-gray-300 text-sm",children:"Her ilemde 0.10 spread uygulanr:"}),i.jsxs("ul",{className:"list-none mt-2 space-y-1",children:[i.jsxs("li",{children:[" ",i.jsx("strong",{className:"text-lime-400",children:"Alm:"})," Kullanc USDT satn alrken piyasa kuru + 0.10 der"]}),i.jsxs("li",{children:[" ",i.jsx("strong",{className:"text-red-400",children:"Satm:"})," Kullanc USDT satarken piyasa kuru - 0.10 alr"]})]})]})]})})};function V0(t,e){const r=S.useRef(e);S.useEffect(function(){e!==r.current&&t.attributionControl!=null&&(r.current!=null&&t.attributionControl.removeAttribution(r.current),e!=null&&t.attributionControl.addAttribution(e)),r.current=e},[t,e])}const V1=1;function Z1(t){return Object.freeze({__version:V1,map:t})}function q1(t,e){return Object.freeze({...t,...e})}const Z0=S.createContext(null),q0=Z0.Provider;function Md(){const t=S.useContext(Z0);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function K1(t){function e(r,n){const{instance:a,context:o}=t(r).current;return S.useImperativeHandle(n,()=>a),r.children==null?null:hs.createElement(q0,{value:o},r.children)}return S.forwardRef(e)}function G1(t){function e(r,n){const[a,o]=S.useState(!1),{instance:c}=t(r,o).current;S.useImperativeHandle(n,()=>c),S.useEffect(function(){a&&c.update()},[c,a,r.children]);const d=c._contentNode;return d?nx.createPortal(r.children,d):null}return S.forwardRef(e)}function Y1(t){function e(r,n){const{instance:a}=t(r).current;return S.useImperativeHandle(n,()=>a),null}return S.forwardRef(e)}function K0(t,e){const r=S.useRef();S.useEffect(function(){return e!=null&&t.instance.on(e),r.current=e,function(){r.current!=null&&t.instance.off(r.current),r.current=null}},[t,e])}function Bd(t,e){const r=t.pane??e.pane;return r?{...t,pane:r}:t}function J1(t,e){return function(n,a){const o=Md(),c=t(Bd(n,o),o);return V0(o.map,n.attribution),K0(c.current,n.eventHandlers),e(c.current,o,n,a),c}}var Tu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(r,n){n(e)})(an,function(r){var n="1.9.4";function a(s){var l,u,f,p;for(u=1,f=arguments.length;u<f;u++){p=arguments[u];for(l in p)s[l]=p[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function c(s,l){var u=Array.prototype.slice;if(s.bind)return s.bind.apply(s,u.call(arguments,1));var f=u.call(arguments,2);return function(){return s.apply(l,f.length?f.concat(u.call(arguments)):arguments)}}var d=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++d),s._leaflet_id}function m(s,l,u){var f,p,w,P;return P=function(){f=!1,p&&(w.apply(u,p),p=!1)},w=function(){f?p=arguments:(s.apply(u,arguments),setTimeout(P,l),f=!0)},w}function g(s,l,u){var f=l[1],p=l[0],w=f-p;return s===f&&u?s:((s-p)%w+w)%w+p}function x(){return!1}function v(s,l){if(l===!1)return s;var u=Math.pow(10,l===void 0?6:l);return Math.round(s*u)/u}function _(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function y(s){return _(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var u in l)s.options[u]=l[u];return s.options}function E(s,l,u){var f=[];for(var p in s)f.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(s[p]));return(!l||l.indexOf("?")===-1?"?":"&")+f.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function j(s,l){return s.replace(N,function(u,f){var p=l[f];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(l)),p})}var k=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function T(s,l){for(var u=0;u<s.length;u++)if(s[u]===l)return u;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var C=0;function B(s){var l=+new Date,u=Math.max(0,16-(l-C));return C=l+u,window.setTimeout(s,u)}var O=window.requestAnimationFrame||z("RequestAnimationFrame")||B,Z=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function te(s,l,u){if(u&&O===B)s.call(l);else return O.call(window,c(s,l))}function X(s){s&&Z.call(window,s)}var le={__proto__:null,extend:a,create:o,bind:c,get lastId(){return d},stamp:h,throttle:m,wrapNum:g,falseFn:x,formatNum:v,trim:_,splitWords:y,setOptions:b,getParamString:E,template:j,isArray:k,indexOf:T,emptyImageUrl:D,requestFn:O,cancelFn:Z,requestAnimFrame:te,cancelAnimFrame:X};function _e(){}_e.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=l.__super__=this.prototype,f=o(u);f.constructor=l,l.prototype=f;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(l[p]=this[p]);return s.statics&&a(l,s.statics),s.includes&&(at(s.includes),a.apply(null,[f].concat(s.includes))),a(f,s),delete f.statics,delete f.includes,f.options&&(f.options=u.options?o(u.options):{},a(f.options,s.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,P=f._initHooks.length;w<P;w++)f._initHooks[w].call(this)}},l},_e.include=function(s){var l=this.prototype.options;return a(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},_e.mergeOptions=function(s){return a(this.prototype.options,s),this},_e.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),u=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function at(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=k(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(s,l,u){if(typeof s=="object")for(var f in s)this._on(f,s[f],l);else{s=y(s);for(var p=0,w=s.length;p<w;p++)this._on(s[p],l,u)}return this},off:function(s,l,u){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var f in s)this._off(f,s[f],l);else{s=y(s);for(var p=arguments.length===1,w=0,P=s.length;w<P;w++)p?this._off(s[w]):this._off(s[w],l,u)}return this},_on:function(s,l,u,f){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,u)===!1){u===this&&(u=void 0);var p={fn:l,ctx:u};f&&(p.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(p)}},_off:function(s,l,u){var f,p,w;if(this._events&&(f=this._events[s],!!f)){if(arguments.length===1){if(this._firingCount)for(p=0,w=f.length;p<w;p++)f[p].fn=x;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var P=this._listens(s,l,u);if(P!==!1){var A=f[P];this._firingCount&&(A.fn=x,this._events[s]=f=f.slice()),f.splice(P,1)}}},fire:function(s,l,u){if(!this.listens(s,u))return this;var f=a({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var p=this._events[s];if(p){this._firingCount=this._firingCount+1||1;for(var w=0,P=p.length;w<P;w++){var A=p[w],R=A.fn;A.once&&this.off(s,R,A.ctx),R.call(A.ctx||this,f)}this._firingCount--}}return u&&this._propagateEvent(f),this},listens:function(s,l,u,f){typeof s!="string"&&console.warn('"string" type argument expected');var p=l;typeof l!="function"&&(f=!!l,p=void 0,u=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,p,u)!==!1)return!0;if(f){for(var P in this._eventParents)if(this._eventParents[P].listens(s,l,u,f))return!0}return!1},_listens:function(s,l,u){if(!this._events)return!1;var f=this._events[s]||[];if(!l)return!!f.length;u===this&&(u=void 0);for(var p=0,w=f.length;p<w;p++)if(f[p].fn===l&&f[p].ctx===u)return p;return!1},once:function(s,l,u){if(typeof s=="object")for(var f in s)this._on(f,s[f],l,!0);else{s=y(s);for(var p=0,w=s.length;p<w;p++)this._on(s[p],l,u,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,a({layer:s.target,propagatedFrom:s.target},s),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var G=_e.extend(V);function M(s,l,u){this.x=u?Math.round(s):s,this.y=u?Math.round(l):l}var W=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};M.prototype={clone:function(){return new M(this.x,this.y)},add:function(s){return this.clone()._add(U(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(U(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new M(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new M(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=W(this.x),this.y=W(this.y),this},distanceTo:function(s){s=U(s);var l=s.x-this.x,u=s.y-this.y;return Math.sqrt(l*l+u*u)},equals:function(s){return s=U(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=U(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function U(s,l,u){return s instanceof M?s:k(s)?new M(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new M(s.x,s.y):new M(s,l,u)}function Y(s,l){if(s)for(var u=l?[s,l]:s,f=0,p=u.length;f<p;f++)this.extend(u[f])}Y.prototype={extend:function(s){var l,u;if(!s)return this;if(s instanceof M||typeof s[0]=="number"||"x"in s)l=u=U(s);else if(s=H(s),l=s.min,u=s.max,!l||!u)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=u.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(s){return U((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return U(this.min.x,this.max.y)},getTopRight:function(){return U(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,u;return typeof s[0]=="number"||s instanceof M?s=U(s):s=H(s),s instanceof Y?(l=s.min,u=s.max):l=u=s,l.x>=this.min.x&&u.x<=this.max.x&&l.y>=this.min.y&&u.y<=this.max.y},intersects:function(s){s=H(s);var l=this.min,u=this.max,f=s.min,p=s.max,w=p.x>=l.x&&f.x<=u.x,P=p.y>=l.y&&f.y<=u.y;return w&&P},overlaps:function(s){s=H(s);var l=this.min,u=this.max,f=s.min,p=s.max,w=p.x>l.x&&f.x<u.x,P=p.y>l.y&&f.y<u.y;return w&&P},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,u=this.max,f=Math.abs(l.x-u.x)*s,p=Math.abs(l.y-u.y)*s;return H(U(l.x-f,l.y-p),U(u.x+f,u.y+p))},equals:function(s){return s?(s=H(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function H(s,l){return!s||s instanceof Y?s:new Y(s,l)}function de(s,l){if(s)for(var u=l?[s,l]:s,f=0,p=u.length;f<p;f++)this.extend(u[f])}de.prototype={extend:function(s){var l=this._southWest,u=this._northEast,f,p;if(s instanceof ne)f=s,p=s;else if(s instanceof de){if(f=s._southWest,p=s._northEast,!f||!p)return this}else return s?this.extend(ae(s)||fe(s)):this;return!l&&!u?(this._southWest=new ne(f.lat,f.lng),this._northEast=new ne(p.lat,p.lng)):(l.lat=Math.min(f.lat,l.lat),l.lng=Math.min(f.lng,l.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(s){var l=this._southWest,u=this._northEast,f=Math.abs(l.lat-u.lat)*s,p=Math.abs(l.lng-u.lng)*s;return new de(new ne(l.lat-f,l.lng-p),new ne(u.lat+f,u.lng+p))},getCenter:function(){return new ne((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ne(this.getNorth(),this.getWest())},getSouthEast:function(){return new ne(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ne||"lat"in s?s=ae(s):s=fe(s);var l=this._southWest,u=this._northEast,f,p;return s instanceof de?(f=s.getSouthWest(),p=s.getNorthEast()):f=p=s,f.lat>=l.lat&&p.lat<=u.lat&&f.lng>=l.lng&&p.lng<=u.lng},intersects:function(s){s=fe(s);var l=this._southWest,u=this._northEast,f=s.getSouthWest(),p=s.getNorthEast(),w=p.lat>=l.lat&&f.lat<=u.lat,P=p.lng>=l.lng&&f.lng<=u.lng;return w&&P},overlaps:function(s){s=fe(s);var l=this._southWest,u=this._northEast,f=s.getSouthWest(),p=s.getNorthEast(),w=p.lat>l.lat&&f.lat<u.lat,P=p.lng>l.lng&&f.lng<u.lng;return w&&P},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=fe(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(s,l){return s instanceof de?s:new de(s,l)}function ne(s,l,u){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,u!==void 0&&(this.alt=+u)}ne.prototype={equals:function(s,l){if(!s)return!1;s=ae(s);var u=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return u<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return jr.distance(this,ae(s))},wrap:function(){return jr.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,u=l/Math.cos(Math.PI/180*this.lat);return fe([this.lat-l,this.lng-u],[this.lat+l,this.lng+u])},clone:function(){return new ne(this.lat,this.lng,this.alt)}};function ae(s,l,u){return s instanceof ne?s:k(s)&&typeof s[0]!="object"?s.length===3?new ne(s[0],s[1],s[2]):s.length===2?new ne(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ne(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new ne(s,l,u)}var ft={latLngToPoint:function(s,l){var u=this.projection.project(s),f=this.scale(l);return this.transformation._transform(u,f)},pointToLatLng:function(s,l){var u=this.scale(l),f=this.transformation.untransform(s,u);return this.projection.unproject(f)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,u=this.scale(s),f=this.transformation.transform(l.min,u),p=this.transformation.transform(l.max,u);return new Y(f,p)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?g(s.lng,this.wrapLng,!0):s.lng,u=this.wrapLat?g(s.lat,this.wrapLat,!0):s.lat,f=s.alt;return new ne(u,l,f)},wrapLatLngBounds:function(s){var l=s.getCenter(),u=this.wrapLatLng(l),f=l.lat-u.lat,p=l.lng-u.lng;if(f===0&&p===0)return s;var w=s.getSouthWest(),P=s.getNorthEast(),A=new ne(w.lat-f,w.lng-p),R=new ne(P.lat-f,P.lng-p);return new de(A,R)}},jr=a({},ft,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var u=Math.PI/180,f=s.lat*u,p=l.lat*u,w=Math.sin((l.lat-s.lat)*u/2),P=Math.sin((l.lng-s.lng)*u/2),A=w*w+Math.cos(f)*Math.cos(p)*P*P,R=2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));return this.R*R}}),Hd=6378137,nl={R:Hd,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,u=this.MAX_LATITUDE,f=Math.max(Math.min(u,s.lat),-u),p=Math.sin(f*l);return new M(this.R*s.lng*l,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(s){var l=180/Math.PI;return new ne((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Hd*Math.PI;return new Y([-s,-s],[s,s])}()};function sl(s,l,u,f){if(k(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=u,this._d=f}sl.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new M((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Es(s,l,u,f){return new sl(s,l,u,f)}var il=a({},jr,{code:"EPSG:3857",projection:nl,transformation:function(){var s=.5/(Math.PI*nl.R);return Es(s,.5,-s,.5)}()}),Q0=a({},il,{code:"EPSG:900913"});function Wd(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Vd(s,l){var u="",f,p,w,P,A,R;for(f=0,w=s.length;f<w;f++){for(A=s[f],p=0,P=A.length;p<P;p++)R=A[p],u+=(p?"L":"M")+R.x+" "+R.y;u+=l?re.svg?"z":"x":""}return u||"M0 0"}var al=document.documentElement.style,Hi="ActiveXObject"in window,ey=Hi&&!document.addEventListener,Zd="msLaunchUri"in navigator&&!("documentMode"in document),ol=Jt("webkit"),qd=Jt("android"),Kd=Jt("android 2")||Jt("android 3"),ty=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ry=qd&&Jt("Google")&&ty<537&&!("AudioNode"in window),ll=!!window.opera,Gd=!Zd&&Jt("chrome"),Yd=Jt("gecko")&&!ol&&!ll&&!Hi,ny=!Gd&&Jt("safari"),Jd=Jt("phantom"),Xd="OTransition"in al,sy=navigator.platform.indexOf("Win")===0,Qd=Hi&&"transition"in al,cl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Kd,eh="MozPerspective"in al,iy=!window.L_DISABLE_3D&&(Qd||cl||eh)&&!Xd&&!Jd,Ps=typeof orientation<"u"||Jt("mobile"),ay=Ps&&ol,oy=Ps&&cl,th=!window.PointerEvent&&window.MSPointerEvent,rh=!!(window.PointerEvent||th),nh="ontouchstart"in window||!!window.TouchEvent,ly=!window.L_NO_TOUCH&&(nh||rh),cy=Ps&&ll,uy=Ps&&Yd,dy=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hy=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",x,l),window.removeEventListener("testPassiveEventSupport",x,l)}catch{}return s}(),fy=function(){return!!document.createElement("canvas").getContext}(),ul=!!(document.createElementNS&&Wd("svg").createSVGRect),my=!!ul&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),py=!ul&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),gy=navigator.platform.indexOf("Mac")===0,xy=navigator.platform.indexOf("Linux")===0;function Jt(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var re={ie:Hi,ielt9:ey,edge:Zd,webkit:ol,android:qd,android23:Kd,androidStock:ry,opera:ll,chrome:Gd,gecko:Yd,safari:ny,phantom:Jd,opera12:Xd,win:sy,ie3d:Qd,webkit3d:cl,gecko3d:eh,any3d:iy,mobile:Ps,mobileWebkit:ay,mobileWebkit3d:oy,msPointer:th,pointer:rh,touch:ly,touchNative:nh,mobileOpera:cy,mobileGecko:uy,retina:dy,passiveEvents:hy,canvas:fy,svg:ul,vml:py,inlineSvg:my,mac:gy,linux:xy},sh=re.msPointer?"MSPointerDown":"pointerdown",ih=re.msPointer?"MSPointerMove":"pointermove",ah=re.msPointer?"MSPointerUp":"pointerup",oh=re.msPointer?"MSPointerCancel":"pointercancel",dl={touchstart:sh,touchmove:ih,touchend:ah,touchcancel:oh},lh={touchstart:jy,touchmove:Wi,touchend:Wi,touchcancel:Wi},Cn={},ch=!1;function yy(s,l,u){return l==="touchstart"&&wy(),lh[l]?(u=lh[l].bind(this,u),s.addEventListener(dl[l],u,!1),u):(console.warn("wrong event specified:",l),x)}function vy(s,l,u){if(!dl[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(dl[l],u,!1)}function _y(s){Cn[s.pointerId]=s}function by(s){Cn[s.pointerId]&&(Cn[s.pointerId]=s)}function uh(s){delete Cn[s.pointerId]}function wy(){ch||(document.addEventListener(sh,_y,!0),document.addEventListener(ih,by,!0),document.addEventListener(ah,uh,!0),document.addEventListener(oh,uh,!0),ch=!0)}function Wi(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var u in Cn)l.touches.push(Cn[u]);l.changedTouches=[l],s(l)}}function jy(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Ge(l),Wi(s,l)}function Ny(s){var l={},u,f;for(f in s)u=s[f],l[f]=u&&u.bind?u.bind(s):u;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var ky=200;function Sy(s,l){s.addEventListener("dblclick",l);var u=0,f;function p(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var P=ph(w);if(!(P.some(function(R){return R instanceof HTMLLabelElement&&R.attributes.for})&&!P.some(function(R){return R instanceof HTMLInputElement||R instanceof HTMLSelectElement}))){var A=Date.now();A-u<=ky?(f++,f===2&&l(Ny(w))):f=1,u=A}}}return s.addEventListener("click",p),{dblclick:l,simDblclick:p}}function Ey(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var hl=qi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ts=qi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),dh=Ts==="webkitTransition"||Ts==="OTransition"?Ts+"End":"transitionend";function hh(s){return typeof s=="string"?document.getElementById(s):s}function Cs(s,l){var u=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!u||u==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(s,null);u=f?f[l]:null}return u==="auto"?null:u}function xe(s,l,u){var f=document.createElement(s);return f.className=l||"",u&&u.appendChild(f),f}function Te(s){var l=s.parentNode;l&&l.removeChild(s)}function Vi(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function An(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function On(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function fl(s,l){if(s.classList!==void 0)return s.classList.contains(l);var u=Zi(s);return u.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(u)}function ce(s,l){if(s.classList!==void 0)for(var u=y(l),f=0,p=u.length;f<p;f++)s.classList.add(u[f]);else if(!fl(s,l)){var w=Zi(s);ml(s,(w?w+" ":"")+l)}}function Re(s,l){s.classList!==void 0?s.classList.remove(l):ml(s,_((" "+Zi(s)+" ").replace(" "+l+" "," ")))}function ml(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function Zi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Tt(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Py(s,l)}function Py(s,l){var u=!1,f="DXImageTransform.Microsoft.Alpha";try{u=s.filters.item(f)}catch{if(l===1)return}l=Math.round(l*100),u?(u.Enabled=l!==100,u.Opacity=l):s.style.filter+=" progid:"+f+"(opacity="+l+")"}function qi(s){for(var l=document.documentElement.style,u=0;u<s.length;u++)if(s[u]in l)return s[u];return!1}function Xr(s,l,u){var f=l||new M(0,0);s.style[hl]=(re.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(u?" scale("+u+")":"")}function De(s,l){s._leaflet_pos=l,re.any3d?Xr(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Qr(s){return s._leaflet_pos||new M(0,0)}var As,Os,pl;if("onselectstart"in document)As=function(){oe(window,"selectstart",Ge)},Os=function(){be(window,"selectstart",Ge)};else{var Ls=qi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);As=function(){if(Ls){var s=document.documentElement.style;pl=s[Ls],s[Ls]="none"}},Os=function(){Ls&&(document.documentElement.style[Ls]=pl,pl=void 0)}}function gl(){oe(window,"dragstart",Ge)}function xl(){be(window,"dragstart",Ge)}var Ki,yl;function vl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Gi(),Ki=s,yl=s.style.outlineStyle,s.style.outlineStyle="none",oe(window,"keydown",Gi))}function Gi(){Ki&&(Ki.style.outlineStyle=yl,Ki=void 0,yl=void 0,be(window,"keydown",Gi))}function fh(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function _l(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Ty={__proto__:null,TRANSFORM:hl,TRANSITION:Ts,TRANSITION_END:dh,get:hh,getStyle:Cs,create:xe,remove:Te,empty:Vi,toFront:An,toBack:On,hasClass:fl,addClass:ce,removeClass:Re,setClass:ml,getClass:Zi,setOpacity:Tt,testProp:qi,setTransform:Xr,setPosition:De,getPosition:Qr,get disableTextSelection(){return As},get enableTextSelection(){return Os},disableImageDrag:gl,enableImageDrag:xl,preventOutline:vl,restoreOutline:Gi,getSizedParentNode:fh,getScale:_l};function oe(s,l,u,f){if(l&&typeof l=="object")for(var p in l)wl(s,p,l[p],u);else{l=y(l);for(var w=0,P=l.length;w<P;w++)wl(s,l[w],u,f)}return this}var Xt="_leaflet_events";function be(s,l,u,f){if(arguments.length===1)mh(s),delete s[Xt];else if(l&&typeof l=="object")for(var p in l)jl(s,p,l[p],u);else if(l=y(l),arguments.length===2)mh(s,function(A){return T(l,A)!==-1});else for(var w=0,P=l.length;w<P;w++)jl(s,l[w],u,f);return this}function mh(s,l){for(var u in s[Xt]){var f=u.split(/\d/)[0];(!l||l(f))&&jl(s,f,null,null,u)}}var bl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function wl(s,l,u,f){var p=l+h(u)+(f?"_"+h(f):"");if(s[Xt]&&s[Xt][p])return this;var w=function(A){return u.call(f||s,A||window.event)},P=w;!re.touchNative&&re.pointer&&l.indexOf("touch")===0?w=yy(s,l,w):re.touch&&l==="dblclick"?w=Sy(s,w):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(bl[l]||l,w,re.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(w=function(A){A=A||window.event,kl(s,A)&&P(A)},s.addEventListener(bl[l],w,!1)):s.addEventListener(l,P,!1):s.attachEvent("on"+l,w),s[Xt]=s[Xt]||{},s[Xt][p]=w}function jl(s,l,u,f,p){p=p||l+h(u)+(f?"_"+h(f):"");var w=s[Xt]&&s[Xt][p];if(!w)return this;!re.touchNative&&re.pointer&&l.indexOf("touch")===0?vy(s,l,w):re.touch&&l==="dblclick"?Ey(s,w):"removeEventListener"in s?s.removeEventListener(bl[l]||l,w,!1):s.detachEvent("on"+l,w),s[Xt][p]=null}function en(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Nl(s){return wl(s,"wheel",en),this}function Rs(s){return oe(s,"mousedown touchstart dblclick contextmenu",en),s._leaflet_disable_click=!0,this}function Ge(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function tn(s){return Ge(s),en(s),this}function ph(s){if(s.composedPath)return s.composedPath();for(var l=[],u=s.target;u;)l.push(u),u=u.parentNode;return l}function gh(s,l){if(!l)return new M(s.clientX,s.clientY);var u=_l(l),f=u.boundingClientRect;return new M((s.clientX-f.left)/u.x-l.clientLeft,(s.clientY-f.top)/u.y-l.clientTop)}var Cy=re.linux&&re.chrome?window.devicePixelRatio:re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function xh(s){return re.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Cy:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function kl(s,l){var u=l.relatedTarget;if(!u)return!0;try{for(;u&&u!==s;)u=u.parentNode}catch{return!1}return u!==s}var Ay={__proto__:null,on:oe,off:be,stopPropagation:en,disableScrollPropagation:Nl,disableClickPropagation:Rs,preventDefault:Ge,stop:tn,getPropagationPath:ph,getMousePosition:gh,getWheelDelta:xh,isExternalTarget:kl,addListener:oe,removeListener:be},yh=G.extend({run:function(s,l,u,f){this.stop(),this._el=s,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Qr(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=te(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,u=this._duration*1e3;l<u?this._runFrame(this._easeOut(l/u),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var u=this._startPos.add(this._offset.multiplyBy(s));l&&u._round(),De(this._el,u),this.fire("step")},_complete:function(){X(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),me=G.extend({options:{crs:il,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ae(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ts&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),oe(this._proxy,dh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,u){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ae(s),l,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=a({animate:u.animate},u.zoom),u.pan=a({animate:u.animate,duration:u.duration},u.pan));var f=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,u.zoom):this._tryAnimatedPan(s,u.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,u.pan&&u.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,u){var f=this.getZoomScale(l),p=this.getSize().divideBy(2),w=s instanceof M?s:this.latLngToContainerPoint(s),P=w.subtract(p).multiplyBy(1-1/f),A=this.containerPointToLatLng(p.add(P));return this.setView(A,l,{zoom:u})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():fe(s);var u=U(l.paddingTopLeft||l.padding||[0,0]),f=U(l.paddingBottomRight||l.padding||[0,0]),p=this.getBoundsZoom(s,!1,u.add(f));if(p=typeof l.maxZoom=="number"?Math.min(l.maxZoom,p):p,p===1/0)return{center:s.getCenter(),zoom:p};var w=f.subtract(u).divideBy(2),P=this.project(s.getSouthWest(),p),A=this.project(s.getNorthEast(),p),R=this.unproject(P.add(A).divideBy(2).add(w),p);return{center:R,zoom:p}},fitBounds:function(s,l){if(s=fe(s),!s.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(s,l);return this.setView(u.center,u.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=U(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new yh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ce(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,u,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,u){if(u=u||{},u.animate===!1||!re.any3d)return this.setView(s,l,u);this._stop();var f=this.project(this.getCenter()),p=this.project(s),w=this.getSize(),P=this._zoom;s=ae(s),l=l===void 0?P:l;var A=Math.max(w.x,w.y),R=A*this.getZoomScale(P,l),$=p.distanceTo(f)||1,K=1.42,ie=K*K;function ue(ze){var oa=ze?-1:1,vv=ze?R:A,_v=R*R-A*A+oa*ie*ie*$*$,bv=2*vv*ie*$,Dl=_v/bv,Xh=Math.sqrt(Dl*Dl+1)-Dl,wv=Xh<1e-9?-18:Math.log(Xh);return wv}function ot(ze){return(Math.exp(ze)-Math.exp(-ze))/2}function Ve(ze){return(Math.exp(ze)+Math.exp(-ze))/2}function At(ze){return ot(ze)/Ve(ze)}var mt=ue(0);function Mn(ze){return A*(Ve(mt)/Ve(mt+K*ze))}function pv(ze){return A*(Ve(mt)*At(mt+K*ze)-ot(mt))/ie}function gv(ze){return 1-Math.pow(1-ze,1.5)}var xv=Date.now(),Yh=(ue(1)-mt)/K,yv=u.duration?1e3*u.duration:1e3*Yh*.8;function Jh(){var ze=(Date.now()-xv)/yv,oa=gv(ze)*Yh;ze<=1?(this._flyToFrame=te(Jh,this),this._move(this.unproject(f.add(p.subtract(f).multiplyBy(pv(oa)/$)),P),this.getScaleZoom(A/Mn(oa),P),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Jh.call(this),this},flyToBounds:function(s,l){var u=this._getBoundsCenterZoom(s,l);return this.flyTo(u.center,u.zoom,l)},setMaxBounds:function(s){return s=fe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var u=this.getCenter(),f=this._limitCenter(u,this._zoom,fe(s));return u.equals(f)||this.panTo(f,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var u=U(l.paddingTopLeft||l.padding||[0,0]),f=U(l.paddingBottomRight||l.padding||[0,0]),p=this.project(this.getCenter()),w=this.project(s),P=this.getPixelBounds(),A=H([P.min.add(u),P.max.subtract(f)]),R=A.getSize();if(!A.contains(w)){this._enforcingBounds=!0;var $=w.subtract(A.getCenter()),K=A.extend(w).getSize().subtract(R);p.x+=$.x<0?-K.x:K.x,p.y+=$.y<0?-K.y:K.y,this.panTo(this.unproject(p),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=a({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),f=l.divideBy(2).round(),p=u.divideBy(2).round(),w=f.subtract(p);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=a({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=c(this._handleGeolocationResponse,this),u=c(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,u,s):navigator.geolocation.getCurrentPosition(l,u,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,u=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,u=s.coords.longitude,f=new ne(l,u),p=f.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var P=this.getBoundsZoom(p);this.setView(f,w.maxZoom?Math.min(P,w.maxZoom):P)}var A={latlng:f,bounds:p,timestamp:s.timestamp};for(var R in s.coords)typeof s.coords[R]=="number"&&(A[R]=s.coords[R]);this.fire("locationfound",A)}},addHandler:function(s,l){if(!l)return this;var u=this[s]=new l(this);return this._handlers.push(u),this.options[s]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Te(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(X(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Te(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var u="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),f=xe("div",u,l||this._mapPane);return s&&(this._panes[s]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),u=this.unproject(s.getTopRight());return new de(l,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,u){s=fe(s),u=U(u||[0,0]);var f=this.getZoom()||0,p=this.getMinZoom(),w=this.getMaxZoom(),P=s.getNorthWest(),A=s.getSouthEast(),R=this.getSize().subtract(u),$=H(this.project(A,f),this.project(P,f)).getSize(),K=re.any3d?this.options.zoomSnap:1,ie=R.x/$.x,ue=R.y/$.y,ot=l?Math.max(ie,ue):Math.min(ie,ue);return f=this.getScaleZoom(ot,f),K&&(f=Math.round(f/(K/100))*(K/100),f=l?Math.ceil(f/K)*K:Math.floor(f/K)*K),Math.max(p,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var u=this._getTopLeftPoint(s,l);return new Y(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var u=this.options.crs;return l=l===void 0?this._zoom:l,u.scale(s)/u.scale(l)},getScaleZoom:function(s,l){var u=this.options.crs;l=l===void 0?this._zoom:l;var f=u.zoom(s*u.scale(l));return isNaN(f)?1/0:f},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ae(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(U(s),l)},layerPointToLatLng:function(s){var l=U(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ae(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ae(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(fe(s))},distance:function(s,l){return this.options.crs.distance(ae(s),ae(l))},containerPointToLayerPoint:function(s){return U(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return U(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(U(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(s)))},mouseEventToContainerPoint:function(s){return gh(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=hh(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");oe(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,ce(s,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Cs(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),De(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ce(s.markerPane,"leaflet-zoom-hide"),ce(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,u){De(this._mapPane,new M(0,0));var f=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var p=this._zoom!==l;this._moveStart(p,u)._move(s,l)._moveEnd(p),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,u,f){l===void 0&&(l=this._zoom);var p=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),f?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return X(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){De(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?be:oe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){X(this._resizeRequest),this._resizeRequest=te(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var u=[],f,p=l==="mouseout"||l==="mouseover",w=s.target||s.srcElement,P=!1;w;){if(f=this._targets[h(w)],f&&(l==="click"||l==="preclick")&&this._draggableMoved(f)){P=!0;break}if(f&&f.listens(l,!0)&&(p&&!kl(w,s)||(u.push(f),p))||w===this._container)break;w=w.parentNode}return!u.length&&!P&&!p&&this.listens(l,!0)&&(u=[this]),u},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var u=s.type;u==="mousedown"&&vl(l),this._fireDOMEvent(s,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,u){if(s.type==="click"){var f=a({},s);f.type="preclick",this._fireDOMEvent(f,f.type,u)}var p=this._findEventTargets(s,l);if(u){for(var w=[],P=0;P<u.length;P++)u[P].listens(l,!0)&&w.push(u[P]);p=w.concat(p)}if(p.length){l==="contextmenu"&&Ge(s);var A=p[0],R={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var $=A.getLatLng&&(!A._radius||A._radius<=10);R.containerPoint=$?this.latLngToContainerPoint(A.getLatLng()):this.mouseEventToContainerPoint(s),R.layerPoint=this.containerPointToLayerPoint(R.containerPoint),R.latlng=$?A.getLatLng():this.layerPointToLatLng(R.layerPoint)}for(P=0;P<p.length;P++)if(p[P].fire(l,R,!0),R.originalEvent._stopped||p[P].options.bubblingMouseEvents===!1&&T(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Qr(this._mapPane)||new M(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var u=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var u=this.getSize()._divideBy(2);return this.project(s,l)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,u){var f=this._getNewPixelOrigin(u,l);return this.project(s,l)._subtract(f)},_latLngBoundsToNewLayerBounds:function(s,l,u){var f=this._getNewPixelOrigin(u,l);return H([this.project(s.getSouthWest(),l)._subtract(f),this.project(s.getNorthWest(),l)._subtract(f),this.project(s.getSouthEast(),l)._subtract(f),this.project(s.getNorthEast(),l)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,u){if(!u)return s;var f=this.project(s,l),p=this.getSize().divideBy(2),w=new Y(f.subtract(p),f.add(p)),P=this._getBoundsOffset(w,u,l);return Math.abs(P.x)<=1&&Math.abs(P.y)<=1?s:this.unproject(f.add(P),l)},_limitOffset:function(s,l){if(!l)return s;var u=this.getPixelBounds(),f=new Y(u.min.add(s),u.max.add(s));return s.add(this._getBoundsOffset(f,l))},_getBoundsOffset:function(s,l,u){var f=H(this.project(l.getNorthEast(),u),this.project(l.getSouthWest(),u)),p=f.min.subtract(s.min),w=f.max.subtract(s.max),P=this._rebound(p.x,-w.x),A=this._rebound(p.y,-w.y);return new M(P,A)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),u=this.getMaxZoom(),f=re.any3d?this.options.zoomSnap:1;return f&&(s=Math.round(s/f)*f),Math.max(l,Math.min(u,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Re(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var u=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,l),!0)},_createAnimProxy:function(){var s=this._proxy=xe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var u=hl,f=this._proxy.style[u];Xr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),f===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Te(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Xr(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(l),p=this._getCenterOffset(s)._divideBy(1-1/f);return u.animate!==!0&&!this.getSize().contains(p)?!1:(te(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,u,f){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,ce(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Re(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Oy(s,l){return new me(s,l)}var Mt=_e.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),u=this.getPosition(),f=s._controlCorners[u];return ce(l,"leaflet-control"),u.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Te(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Is=function(s){return new Mt(s)};me.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",u=this._controlContainer=xe("div",l+"control-container",this._container);function f(p,w){var P=l+p+" "+l+w;s[p+w]=xe("div",P,u)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Te(this._controlCorners[s]);Te(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vh=Mt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,u,f){return u<f?-1:f<u?1:0}},initialize:function(s,l,u){b(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in s)this._addLayer(s[f],f);for(f in l)this._addLayer(l[f],f,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Mt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ce(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ce(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Re(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Re(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=xe("div",s),u=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Rs(l),Nl(l);var f=this._section=xe("section",s+"-list");u&&(this._map.on("click",this.collapse,this),oe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=xe("a",s+"-toggle",l);p.href="#",p.title="Layers",p.setAttribute("role","button"),oe(p,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){Ge(w),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=xe("div",s+"-base",f),this._separator=xe("div",s+"-separator",f),this._overlaysList=xe("div",s+"-overlays",f),l.appendChild(f)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,u){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:u}),this.options.sortLayers&&this._layers.sort(c(function(f,p){return this.options.sortFunction(f.layer,p.layer,f.name,p.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Vi(this._baseLayersList),Vi(this._overlaysList),this._layerControlInputs=[];var s,l,u,f,p=0;for(u=0;u<this._layers.length;u++)f=this._layers[u],this._addItem(f),l=l||f.overlay,s=s||!f.overlay,p+=f.overlay?0:1;return this.options.hideSingleBase&&(s=s&&p>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),u=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;u&&this._map.fire(u,l)},_createRadioElement:function(s,l){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=u,f.firstChild},_addItem:function(s){var l=document.createElement("label"),u=this._map.hasLayer(s.layer),f;s.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=u):f=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(f),f.layerId=h(s.layer),oe(f,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+s.name;var w=document.createElement("span");l.appendChild(w),w.appendChild(f),w.appendChild(p);var P=s.overlay?this._overlaysList:this._baseLayersList;return P.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,u,f=[],p=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)l=s[w],u=this._getLayer(l.layerId).layer,l.checked?f.push(u):l.checked||p.push(u);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])&&this._map.removeLayer(p[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,u,f=this._map.getZoom(),p=s.length-1;p>=0;p--)l=s[p],u=this._getLayer(l.layerId).layer,l.disabled=u.options.minZoom!==void 0&&f<u.options.minZoom||u.options.maxZoom!==void 0&&f>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,oe(s,"click",Ge),this.expand();var l=this;setTimeout(function(){be(s,"click",Ge),l._preventClick=!1})}}),Ly=function(s,l,u){return new vh(s,l,u)},Sl=Mt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",u=xe("div",l+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,l+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,l+"-out",u,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,u,f,p){var w=xe("a",u,f);return w.innerHTML=s,w.href="#",w.title=l,w.setAttribute("role","button"),w.setAttribute("aria-label",l),Rs(w),oe(w,"click",tn),oe(w,"click",p,this),oe(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Re(this._zoomInButton,l),Re(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ce(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ce(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});me.mergeOptions({zoomControl:!0}),me.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Sl,this.addControl(this.zoomControl))});var Ry=function(s){return new Sl(s)},_h=Mt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",u=xe("div",l),f=this.options;return this._addScales(f,l+"-line",u),s.on(f.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),u},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,u){s.metric&&(this._mScale=xe("div",l,u)),s.imperial&&(this._iScale=xe("div",l,u))},_update:function(){var s=this._map,l=s.getSize().y/2,u=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(u)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),u=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,u,l/s)},_updateImperial:function(s){var l=s*3.2808399,u,f,p;l>5280?(u=l/5280,f=this._getRoundNum(u),this._updateScale(this._iScale,f+" mi",f/u)):(p=this._getRoundNum(l),this._updateScale(this._iScale,p+" ft",p/l))},_updateScale:function(s,l,u){s.style.width=Math.round(this.options.maxWidth*u)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),u=s/l;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,l*u}}),Iy=function(s){return new _h(s)},Dy='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',El=Mt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?Dy+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=xe("div","leaflet-control-attribution"),Rs(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var u=[];this.options.prefix&&u.push(this.options.prefix),s.length&&u.push(s.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});me.mergeOptions({attributionControl:!0}),me.addInitHook(function(){this.options.attributionControl&&new El().addTo(this)});var zy=function(s){return new El(s)};Mt.Layers=vh,Mt.Zoom=Sl,Mt.Scale=_h,Mt.Attribution=El,Is.layers=Ly,Is.zoom=Ry,Is.scale=Iy,Is.attribution=zy;var Qt=_e.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qt.addTo=function(s,l){return s.addHandler(l,this),this};var My={Events:V},bh=re.touch?"touchstart mousedown":"mousedown",Nr=G.extend({options:{clickTolerance:3},initialize:function(s,l,u,f){b(this,f),this._element=s,this._dragStartTarget=l||s,this._preventOutline=u},enable:function(){this._enabled||(oe(this._dragStartTarget,bh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Nr._dragging===this&&this.finishDrag(!0),be(this._dragStartTarget,bh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!fl(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Nr._dragging===this&&this.finishDrag();return}if(!(Nr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Nr._dragging=this,this._preventOutline&&vl(this._element),gl(),As(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,u=fh(this._element);this._startPoint=new M(l.clientX,l.clientY),this._startPos=Qr(this._element),this._parentScale=_l(u);var f=s.type==="mousedown";oe(document,f?"mousemove":"touchmove",this._onMove,this),oe(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,u=new M(l.clientX,l.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Ge(s),this._moved||(this.fire("dragstart"),this._moved=!0,ce(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ce(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),De(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Re(document.body,"leaflet-dragging"),this._lastTarget&&(Re(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),be(document,"mousemove touchmove",this._onMove,this),be(document,"mouseup touchend touchcancel",this._onUp,this),xl(),Os();var l=this._moved&&this._moving;this._moving=!1,Nr._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function wh(s,l,u){var f,p=[1,4,2,8],w,P,A,R,$,K,ie,ue;for(w=0,K=s.length;w<K;w++)s[w]._code=rn(s[w],l);for(A=0;A<4;A++){for(ie=p[A],f=[],w=0,K=s.length,P=K-1;w<K;P=w++)R=s[w],$=s[P],R._code&ie?$._code&ie||(ue=Yi($,R,ie,l,u),ue._code=rn(ue,l),f.push(ue)):($._code&ie&&(ue=Yi($,R,ie,l,u),ue._code=rn(ue,l),f.push(ue)),f.push(R));s=f}return s}function jh(s,l){var u,f,p,w,P,A,R,$,K;if(!s||s.length===0)throw new Error("latlngs not passed");Ct(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ie=ae([0,0]),ue=fe(s),ot=ue.getNorthWest().distanceTo(ue.getSouthWest())*ue.getNorthEast().distanceTo(ue.getNorthWest());ot<1700&&(ie=Pl(s));var Ve=s.length,At=[];for(u=0;u<Ve;u++){var mt=ae(s[u]);At.push(l.project(ae([mt.lat-ie.lat,mt.lng-ie.lng])))}for(A=R=$=0,u=0,f=Ve-1;u<Ve;f=u++)p=At[u],w=At[f],P=p.y*w.x-w.y*p.x,R+=(p.x+w.x)*P,$+=(p.y+w.y)*P,A+=P*3;A===0?K=At[0]:K=[R/A,$/A];var Mn=l.unproject(U(K));return ae([Mn.lat+ie.lat,Mn.lng+ie.lng])}function Pl(s){for(var l=0,u=0,f=0,p=0;p<s.length;p++){var w=ae(s[p]);l+=w.lat,u+=w.lng,f++}return ae([l/f,u/f])}var By={__proto__:null,clipPolygon:wh,polygonCenter:jh,centroid:Pl};function Nh(s,l){if(!l||!s.length)return s.slice();var u=l*l;return s=Fy(s,u),s=$y(s,u),s}function kh(s,l,u){return Math.sqrt(Ds(s,l,u,!0))}function Uy(s,l,u){return Ds(s,l,u)}function $y(s,l){var u=s.length,f=typeof Uint8Array<"u"?Uint8Array:Array,p=new f(u);p[0]=p[u-1]=1,Tl(s,p,l,0,u-1);var w,P=[];for(w=0;w<u;w++)p[w]&&P.push(s[w]);return P}function Tl(s,l,u,f,p){var w=0,P,A,R;for(A=f+1;A<=p-1;A++)R=Ds(s[A],s[f],s[p],!0),R>w&&(P=A,w=R);w>u&&(l[P]=1,Tl(s,l,u,f,P),Tl(s,l,u,P,p))}function Fy(s,l){for(var u=[s[0]],f=1,p=0,w=s.length;f<w;f++)Hy(s[f],s[p])>l&&(u.push(s[f]),p=f);return p<w-1&&u.push(s[w-1]),u}var Sh;function Eh(s,l,u,f,p){var w=f?Sh:rn(s,u),P=rn(l,u),A,R,$;for(Sh=P;;){if(!(w|P))return[s,l];if(w&P)return!1;A=w||P,R=Yi(s,l,A,u,p),$=rn(R,u),A===w?(s=R,w=$):(l=R,P=$)}}function Yi(s,l,u,f,p){var w=l.x-s.x,P=l.y-s.y,A=f.min,R=f.max,$,K;return u&8?($=s.x+w*(R.y-s.y)/P,K=R.y):u&4?($=s.x+w*(A.y-s.y)/P,K=A.y):u&2?($=R.x,K=s.y+P*(R.x-s.x)/w):u&1&&($=A.x,K=s.y+P*(A.x-s.x)/w),new M($,K,p)}function rn(s,l){var u=0;return s.x<l.min.x?u|=1:s.x>l.max.x&&(u|=2),s.y<l.min.y?u|=4:s.y>l.max.y&&(u|=8),u}function Hy(s,l){var u=l.x-s.x,f=l.y-s.y;return u*u+f*f}function Ds(s,l,u,f){var p=l.x,w=l.y,P=u.x-p,A=u.y-w,R=P*P+A*A,$;return R>0&&($=((s.x-p)*P+(s.y-w)*A)/R,$>1?(p=u.x,w=u.y):$>0&&(p+=P*$,w+=A*$)),P=s.x-p,A=s.y-w,f?P*P+A*A:new M(p,w)}function Ct(s){return!k(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ph(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ct(s)}function Th(s,l){var u,f,p,w,P,A,R,$;if(!s||s.length===0)throw new Error("latlngs not passed");Ct(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var K=ae([0,0]),ie=fe(s),ue=ie.getNorthWest().distanceTo(ie.getSouthWest())*ie.getNorthEast().distanceTo(ie.getNorthWest());ue<1700&&(K=Pl(s));var ot=s.length,Ve=[];for(u=0;u<ot;u++){var At=ae(s[u]);Ve.push(l.project(ae([At.lat-K.lat,At.lng-K.lng])))}for(u=0,f=0;u<ot-1;u++)f+=Ve[u].distanceTo(Ve[u+1])/2;if(f===0)$=Ve[0];else for(u=0,w=0;u<ot-1;u++)if(P=Ve[u],A=Ve[u+1],p=P.distanceTo(A),w+=p,w>f){R=(w-f)/p,$=[A.x-R*(A.x-P.x),A.y-R*(A.y-P.y)];break}var mt=l.unproject(U($));return ae([mt.lat+K.lat,mt.lng+K.lng])}var Wy={__proto__:null,simplify:Nh,pointToSegmentDistance:kh,closestPointOnSegment:Uy,clipSegment:Eh,_getEdgeIntersection:Yi,_getBitCode:rn,_sqClosestPointOnSegment:Ds,isFlat:Ct,_flat:Ph,polylineCenter:Th},Cl={project:function(s){return new M(s.lng,s.lat)},unproject:function(s){return new ne(s.y,s.x)},bounds:new Y([-180,-90],[180,90])},Al={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Y([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,u=this.R,f=s.lat*l,p=this.R_MINOR/u,w=Math.sqrt(1-p*p),P=w*Math.sin(f),A=Math.tan(Math.PI/4-f/2)/Math.pow((1-P)/(1+P),w/2);return f=-u*Math.log(Math.max(A,1e-10)),new M(s.lng*l*u,f)},unproject:function(s){for(var l=180/Math.PI,u=this.R,f=this.R_MINOR/u,p=Math.sqrt(1-f*f),w=Math.exp(-s.y/u),P=Math.PI/2-2*Math.atan(w),A=0,R=.1,$;A<15&&Math.abs(R)>1e-7;A++)$=p*Math.sin(P),$=Math.pow((1-$)/(1+$),p/2),R=Math.PI/2-2*Math.atan(w*$)-P,P+=R;return new ne(P*l,s.x*l/u)}},Vy={__proto__:null,LonLat:Cl,Mercator:Al,SphericalMercator:nl},Zy=a({},jr,{code:"EPSG:3395",projection:Al,transformation:function(){var s=.5/(Math.PI*Al.R);return Es(s,.5,-s,.5)}()}),Ch=a({},jr,{code:"EPSG:4326",projection:Cl,transformation:Es(1/180,1,-1/180,.5)}),qy=a({},ft,{projection:Cl,transformation:Es(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var u=l.lng-s.lng,f=l.lat-s.lat;return Math.sqrt(u*u+f*f)},infinite:!0});ft.Earth=jr,ft.EPSG3395=Zy,ft.EPSG3857=il,ft.EPSG900913=Q0,ft.EPSG4326=Ch,ft.Simple=qy;var Bt=G.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var u=this.getEvents();l.on(u,this),this.once("remove",function(){l.off(u,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});me.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var u in this._layers)s.call(l,this._layers[u]);return this},_addLayers:function(s){s=s?k(s)?s:[s]:[];for(var l=0,u=s.length;l<u;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,u=this._getZoomSpan();for(var f in this._zoomBoundLayers){var p=this._zoomBoundLayers[f].options;s=p.minZoom===void 0?s:Math.min(s,p.minZoom),l=p.maxZoom===void 0?l:Math.max(l,p.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ln=Bt.extend({initialize:function(s,l){b(this,l),this._layers={};var u,f;if(s)for(u=0,f=s.length;u<f;u++)this.addLayer(s[u])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),u,f;for(u in this._layers)f=this._layers[u],f[s]&&f[s].apply(f,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var u in this._layers)s.call(l,this._layers[u]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),Ky=function(s,l){return new Ln(s,l)},lr=Ln.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ln.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ln.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new de;for(var l in this._layers){var u=this._layers[l];s.extend(u.getBounds?u.getBounds():u.getLatLng())}return s}}),Gy=function(s,l){return new lr(s,l)},Rn=_e.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var u=this._getIconUrl(s);if(!u){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(u,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(f,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(s,l){var u=this.options,f=u[l+"Size"];typeof f=="number"&&(f=[f,f]);var p=U(f),w=U(l==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(u.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),p&&(s.style.width=p.x+"px",s.style.height=p.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return re.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Yy(s){return new Rn(s)}var zs=Rn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof zs.imagePath!="string"&&(zs.imagePath=this._detectIconPath()),(this.options.imagePath||zs.imagePath)+Rn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(u,f,p){var w=f.exec(u);return w&&w[p]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=xe("div","leaflet-default-icon-path",document.body),l=Cs(s,"background-image")||Cs(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Ah=Qt.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Nr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ce(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Re(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,u=l._map,f=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,w=Qr(l._icon),P=u.getPixelBounds(),A=u.getPixelOrigin(),R=H(P.min._subtract(A).add(p),P.max._subtract(A).subtract(p));if(!R.contains(w)){var $=U((Math.max(R.max.x,w.x)-R.max.x)/(P.max.x-R.max.x)-(Math.min(R.min.x,w.x)-R.min.x)/(P.min.x-R.min.x),(Math.max(R.max.y,w.y)-R.max.y)/(P.max.y-R.max.y)-(Math.min(R.min.y,w.y)-R.min.y)/(P.min.y-R.min.y)).multiplyBy(f);u.panBy($,{animate:!1}),this._draggable._newPos._add($),this._draggable._startPos._add($),De(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=te(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(X(this._panRequest),this._panRequest=te(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,u=l._shadow,f=Qr(l._icon),p=l._map.layerPointToLatLng(f);u&&De(u,f),l._latlng=p,s.latlng=p,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){X(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Ji=Bt.extend({options:{icon:new zs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=ae(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ae(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=s.icon.createIcon(this._icon),f=!1;u!==this._icon&&(this._icon&&this._removeIcon(),f=!0,s.title&&(u.title=s.title),u.tagName==="IMG"&&(u.alt=s.alt||"")),ce(u,l),s.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&oe(u,"focus",this._panOnFocus,this);var p=s.icon.createShadow(this._shadow),w=!1;p!==this._shadow&&(this._removeShadow(),w=!0),p&&(ce(p,l),p.alt=""),this._shadow=p,s.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&be(this._icon,"focus",this._panOnFocus,this),Te(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Te(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&De(this._icon,s),this._shadow&&De(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ce(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ah)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ah(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Tt(this._icon,s),this._shadow&&Tt(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,u=l.iconSize?U(l.iconSize):U(0,0),f=l.iconAnchor?U(l.iconAnchor):U(0,0);s.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:u.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Jy(s,l){return new Ji(s,l)}var kr=Bt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xi=kr.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=ae(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ae(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return kr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,u=this._clickTolerance(),f=[s+u,l+u];this._pxBounds=new Y(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Xy(s,l){return new Xi(s,l)}var Ol=Xi.extend({initialize:function(s,l,u){if(typeof l=="number"&&(l=a({},u,{radius:l})),b(this,l),this._latlng=ae(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new de(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:kr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,u=this._map,f=u.options.crs;if(f.distance===jr.distance){var p=Math.PI/180,w=this._mRadius/jr.R/p,P=u.project([l+w,s]),A=u.project([l-w,s]),R=P.add(A).divideBy(2),$=u.unproject(R).lat,K=Math.acos((Math.cos(w*p)-Math.sin(l*p)*Math.sin($*p))/(Math.cos(l*p)*Math.cos($*p)))/p;(isNaN(K)||K===0)&&(K=w/Math.cos(Math.PI/180*l)),this._point=R.subtract(u.getPixelOrigin()),this._radius=isNaN(K)?0:R.x-u.project([$,s-K]).x,this._radiusY=R.y-P.y}else{var ie=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(ie).x}this._updateBounds()}});function Qy(s,l,u){return new Ol(s,l,u)}var cr=kr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,u=null,f=Ds,p,w,P=0,A=this._parts.length;P<A;P++)for(var R=this._parts[P],$=1,K=R.length;$<K;$++){p=R[$-1],w=R[$];var ie=f(s,p,w,!0);ie<l&&(l=ie,u=f(s,p,w))}return u&&(u.distance=Math.sqrt(l)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Th(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ae(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new de,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ct(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],u=Ct(s),f=0,p=s.length;f<p;f++)u?(l[f]=ae(s[f]),this._bounds.extend(l[f])):l[f]=this._convertLatLngs(s[f]);return l},_project:function(){var s=new Y;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new M(s,s);this._rawPxBounds&&(this._pxBounds=new Y([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,u){var f=s[0]instanceof ne,p=s.length,w,P;if(f){for(P=[],w=0;w<p;w++)P[w]=this._map.latLngToLayerPoint(s[w]),u.extend(P[w]);l.push(P)}else for(w=0;w<p;w++)this._projectLatlngs(s[w],l,u)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,u,f,p,w,P,A,R;for(u=0,p=0,w=this._rings.length;u<w;u++)for(R=this._rings[u],f=0,P=R.length;f<P-1;f++)A=Eh(R[f],R[f+1],s,f,!0),A&&(l[p]=l[p]||[],l[p].push(A[0]),(A[1]!==R[f+1]||f===P-2)&&(l[p].push(A[1]),p++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,u=0,f=s.length;u<f;u++)s[u]=Nh(s[u],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var u,f,p,w,P,A,R=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(u=0,w=this._parts.length;u<w;u++)for(A=this._parts[u],f=0,P=A.length,p=P-1;f<P;p=f++)if(!(!l&&f===0)&&kh(s,A[p],A[f])<=R)return!0;return!1}});function ev(s,l){return new cr(s,l)}cr._flat=Ph;var In=cr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=cr.prototype._convertLatLngs.call(this,s),u=l.length;return u>=2&&l[0]instanceof ne&&l[0].equals(l[u-1])&&l.pop(),l},_setLatLngs:function(s){cr.prototype._setLatLngs.call(this,s),Ct(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ct(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,u=new M(l,l);if(s=new Y(s.min.subtract(u),s.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,p=this._rings.length,w;f<p;f++)w=wh(this._rings[f],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,u,f,p,w,P,A,R,$;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,R=this._parts.length;w<R;w++)for(u=this._parts[w],P=0,$=u.length,A=$-1;P<$;A=P++)f=u[P],p=u[A],f.y>s.y!=p.y>s.y&&s.x<(p.x-f.x)*(s.y-f.y)/(p.y-f.y)+f.x&&(l=!l);return l||cr.prototype._containsPoint.call(this,s,!0)}});function tv(s,l){return new In(s,l)}var ur=lr.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=k(s)?s:s.features,u,f,p;if(l){for(u=0,f=l.length;u<f;u++)p=l[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var P=Qi(s,w);return P?(P.feature=ra(s),P.defaultOptions=P.options,this.resetStyle(P),w.onEachFeature&&w.onEachFeature(s,P),this.addLayer(P)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=a({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Qi(s,l){var u=s.type==="Feature"?s.geometry:s,f=u?u.coordinates:null,p=[],w=l&&l.pointToLayer,P=l&&l.coordsToLatLng||Ll,A,R,$,K;if(!f&&!u)return null;switch(u.type){case"Point":return A=P(f),Oh(w,s,A,l);case"MultiPoint":for($=0,K=f.length;$<K;$++)A=P(f[$]),p.push(Oh(w,s,A,l));return new lr(p);case"LineString":case"MultiLineString":return R=ea(f,u.type==="LineString"?0:1,P),new cr(R,l);case"Polygon":case"MultiPolygon":return R=ea(f,u.type==="Polygon"?1:2,P),new In(R,l);case"GeometryCollection":for($=0,K=u.geometries.length;$<K;$++){var ie=Qi({geometry:u.geometries[$],type:"Feature",properties:s.properties},l);ie&&p.push(ie)}return new lr(p);case"FeatureCollection":for($=0,K=u.features.length;$<K;$++){var ue=Qi(u.features[$],l);ue&&p.push(ue)}return new lr(p);default:throw new Error("Invalid GeoJSON object.")}}function Oh(s,l,u,f){return s?s(l,u):new Ji(u,f&&f.markersInheritOptions&&f)}function Ll(s){return new ne(s[1],s[0],s[2])}function ea(s,l,u){for(var f=[],p=0,w=s.length,P;p<w;p++)P=l?ea(s[p],l-1,u):(u||Ll)(s[p]),f.push(P);return f}function Rl(s,l){return s=ae(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function ta(s,l,u,f){for(var p=[],w=0,P=s.length;w<P;w++)p.push(l?ta(s[w],Ct(s[w])?0:l-1,u,f):Rl(s[w],f));return!l&&u&&p.length>0&&p.push(p[0].slice()),p}function Dn(s,l){return s.feature?a({},s.feature,{geometry:l}):ra(l)}function ra(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Il={toGeoJSON:function(s){return Dn(this,{type:"Point",coordinates:Rl(this.getLatLng(),s)})}};Ji.include(Il),Ol.include(Il),Xi.include(Il),cr.include({toGeoJSON:function(s){var l=!Ct(this._latlngs),u=ta(this._latlngs,l?1:0,!1,s);return Dn(this,{type:(l?"Multi":"")+"LineString",coordinates:u})}}),In.include({toGeoJSON:function(s){var l=!Ct(this._latlngs),u=l&&!Ct(this._latlngs[0]),f=ta(this._latlngs,u?2:l?1:0,!0,s);return l||(f=[f]),Dn(this,{type:(u?"Multi":"")+"Polygon",coordinates:f})}}),Ln.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(u){l.push(u.toGeoJSON(s).geometry.coordinates)}),Dn(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var u=l==="GeometryCollection",f=[];return this.eachLayer(function(p){if(p.toGeoJSON){var w=p.toGeoJSON(s);if(u)f.push(w.geometry);else{var P=ra(w);P.type==="FeatureCollection"?f.push.apply(f,P.features):f.push(P)}}}),u?Dn(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Lh(s,l){return new ur(s,l)}var rv=Lh,na=Bt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,u){this._url=s,this._bounds=fe(l),b(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ce(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Te(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&An(this._image),this},bringToBack:function(){return this._map&&On(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=fe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:xe("img");if(ce(l,"leaflet-image-layer"),this._zoomAnimated&&ce(l,"leaflet-zoom-animated"),this.options.className&&ce(l,this.options.className),l.onselectstart=x,l.onmousemove=x,l.onload=c(this.fire,this,"load"),l.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Xr(this._image,u,l)},_reset:function(){var s=this._image,l=new Y(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=l.getSize();De(s,l.min),s.style.width=u.x+"px",s.style.height=u.y+"px"},_updateOpacity:function(){Tt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),nv=function(s,l,u){return new na(s,l,u)},Rh=na.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:xe("video");if(ce(l,"leaflet-image-layer"),this._zoomAnimated&&ce(l,"leaflet-zoom-animated"),this.options.className&&ce(l,this.options.className),l.onselectstart=x,l.onmousemove=x,l.onloadeddata=c(this.fire,this,"load"),s){for(var u=l.getElementsByTagName("source"),f=[],p=0;p<u.length;p++)f.push(u[p].src);this._url=u.length>0?f:[l.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var P=xe("source");P.src=this._url[w],l.appendChild(P)}}});function sv(s,l,u){return new Rh(s,l,u)}var Ih=na.extend({_initImage:function(){var s=this._image=this._url;ce(s,"leaflet-image-layer"),this._zoomAnimated&&ce(s,"leaflet-zoom-animated"),this.options.className&&ce(s,this.options.className),s.onselectstart=x,s.onmousemove=x}});function iv(s,l,u){return new Ih(s,l,u)}var er=Bt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof ne||k(s))?(this._latlng=ae(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Tt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Tt(this._container,1),this.bringToFront(),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Tt(this._container,0),this._removeTimeout=setTimeout(c(Te,void 0,this._container),200)):Te(this._container),this.options.interactive&&(Re(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ae(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&An(this._container),this},bringToBack:function(){return this._map&&On(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof lr){l=null;var u=this._source._layers;for(var f in u)if(u[f]._map){l=u[f];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=U(this.options.offset),u=this._getAnchor();this._zoomAnimated?De(this._container,s.add(u)):l=l.add(s).add(u);var f=this._containerBottom=-l.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=f+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});me.include({_initOverlay:function(s,l,u,f){var p=l;return p instanceof s||(p=new s(f).setContent(l)),u&&p.setLatLng(u),p}}),Bt.include({_initOverlay:function(s,l,u,f){var p=u;return p instanceof s?(b(p,f),p._source=this):(p=l&&!f?l:new s(f,this),p.setContent(u)),p}});var sa=er.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,er.prototype.openOn.call(this,s)},onAdd:function(s){er.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof kr||this._source.on("preclick",en))},onRemove:function(s){er.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof kr||this._source.off("preclick",en))},getEvents:function(){var s=er.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=xe("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=xe("div",s+"-content-wrapper",l);if(this._contentNode=xe("div",s+"-content",u),Rs(l),Nl(this._contentNode),oe(l,"contextmenu",en),this._tipContainer=xe("div",s+"-tip-container",l),this._tip=xe("div",s+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=xe("a",s+"-close-button",l);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',oe(f,"click",function(p){Ge(p),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var u=s.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),l.width=u+1+"px",l.whiteSpace="",l.height="";var f=s.offsetHeight,p=this.options.maxHeight,w="leaflet-popup-scrolled";p&&f>p?(l.height=p+"px",ce(s,w)):Re(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),u=this._getAnchor();De(this._container,l.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Cs(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+l,f=this._containerWidth,p=new M(this._containerLeft,-u-this._containerBottom);p._add(Qr(this._container));var w=s.layerPointToContainerPoint(p),P=U(this.options.autoPanPadding),A=U(this.options.autoPanPaddingTopLeft||P),R=U(this.options.autoPanPaddingBottomRight||P),$=s.getSize(),K=0,ie=0;w.x+f+R.x>$.x&&(K=w.x+f-$.x+R.x),w.x-K-A.x<0&&(K=w.x-A.x),w.y+u+R.y>$.y&&(ie=w.y+u-$.y+R.y),w.y-ie-A.y<0&&(ie=w.y-A.y),(K||ie)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([K,ie]))}},_getAnchor:function(){return U(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),av=function(s,l){return new sa(s,l)};me.mergeOptions({closePopupOnClick:!0}),me.include({openPopup:function(s,l,u){return this._initOverlay(sa,s,l,u).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Bt.include({bindPopup:function(s,l){return this._popup=this._initOverlay(sa,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof lr||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){tn(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof kr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var ia=er.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){er.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){er.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=er.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xe("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,u,f=this._map,p=this._container,w=f.latLngToContainerPoint(f.getCenter()),P=f.layerPointToContainerPoint(s),A=this.options.direction,R=p.offsetWidth,$=p.offsetHeight,K=U(this.options.offset),ie=this._getAnchor();A==="top"?(l=R/2,u=$):A==="bottom"?(l=R/2,u=0):A==="center"?(l=R/2,u=$/2):A==="right"?(l=0,u=$/2):A==="left"?(l=R,u=$/2):P.x<w.x?(A="right",l=0,u=$/2):(A="left",l=R+(K.x+ie.x)*2,u=$/2),s=s.subtract(U(l,u,!0)).add(K).add(ie),Re(p,"leaflet-tooltip-right"),Re(p,"leaflet-tooltip-left"),Re(p,"leaflet-tooltip-top"),Re(p,"leaflet-tooltip-bottom"),ce(p,"leaflet-tooltip-"+A),De(p,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Tt(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return U(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ov=function(s,l){return new ia(s,l)};me.include({openTooltip:function(s,l,u){return this._initOverlay(ia,s,l,u).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Bt.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ia,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[l](u),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof lr||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(oe(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),oe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,u,f;this._tooltip.options.sticky&&s.originalEvent&&(u=this._map.mouseEventToContainerPoint(s.originalEvent),f=this._map.containerPointToLayerPoint(u),l=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(l)}});var Dh=Rn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Vi(l),l.appendChild(u.html)):l.innerHTML=u.html!==!1?u.html:"",u.bgPos){var f=U(u.bgPos);l.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function lv(s){return new Dh(s)}Rn.Default=zs;var Ms=Bt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Te(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(An(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(On(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof M?s:new M(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,u=-s(-1/0,1/0),f=0,p=l.length,w;f<p;f++)w=l[f].style.zIndex,l[f]!==this._container&&w&&(u=s(u,+w));isFinite(u)&&(this.options.zIndex=u+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){Tt(this._container,this.options.opacity);var s=+new Date,l=!1,u=!1;for(var f in this._tiles){var p=this._tiles[f];if(!(!p.current||!p.loaded)){var w=Math.min(1,(s-p.loaded)/200);Tt(p.el,w),w<1?l=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),l&&(X(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=xe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===s?(this._levels[u].el.style.zIndex=l-Math.abs(s-u),this._onUpdateLevel(u)):(Te(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var f=this._levels[s],p=this._map;return f||(f=this._levels[s]={},f.el=xe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=l,f.origin=p.project(p.unproject(p.getPixelOrigin()),s).round(),f.zoom=s,this._setZoomTransform(f,p.getCenter(),p.getZoom()),x(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var s,l,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var f=l.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Te(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,u,f){var p=Math.floor(s/2),w=Math.floor(l/2),P=u-1,A=new M(+p,+w);A.z=+P;var R=this._tileCoordsToKey(A),$=this._tiles[R];return $&&$.active?($.retain=!0,!0):($&&$.loaded&&($.retain=!0),P>f?this._retainParent(p,w,P,f):!1)},_retainChildren:function(s,l,u,f){for(var p=2*s;p<2*s+2;p++)for(var w=2*l;w<2*l+2;w++){var P=new M(p,w);P.z=u+1;var A=this._tileCoordsToKey(P),R=this._tiles[A];if(R&&R.active){R.retain=!0;continue}else R&&R.loaded&&(R.retain=!0);u+1<f&&this._retainChildren(p,w,u+1,f)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,u,f){var p=Math.round(l);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var w=this.options.updateWhenZooming&&p!==this._tileZoom;(!f||w)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(s),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var u in this._levels)this._setZoomTransform(this._levels[u],s,l)},_setZoomTransform:function(s,l,u){var f=this._map.getZoomScale(u,s.zoom),p=s.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(l,u)).round();re.any3d?Xr(s.el,p,f):De(s.el,p)},_resetGrid:function(){var s=this._map,l=s.options.crs,u=this._tileSize=this.getTileSize(),f=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],f).x/u.x),Math.ceil(s.project([0,l.wrapLng[1]],f).x/u.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],f).y/u.x),Math.ceil(s.project([l.wrapLat[1],0],f).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,u=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),f=l.getZoomScale(u,this._tileZoom),p=l.project(s,this._tileZoom).floor(),w=l.getSize().divideBy(f*2);return new Y(p.subtract(w),p.add(w))},_update:function(s){var l=this._map;if(l){var u=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(s),p=this._pxBoundsToTileRange(f),w=p.getCenter(),P=[],A=this.options.keepBuffer,R=new Y(p.getBottomLeft().subtract([A,-A]),p.getTopRight().add([A,-A]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var $ in this._tiles){var K=this._tiles[$].coords;(K.z!==this._tileZoom||!R.contains(new M(K.x,K.y)))&&(this._tiles[$].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(s,u);return}for(var ie=p.min.y;ie<=p.max.y;ie++)for(var ue=p.min.x;ue<=p.max.x;ue++){var ot=new M(ue,ie);if(ot.z=this._tileZoom,!!this._isValidTile(ot)){var Ve=this._tiles[this._tileCoordsToKey(ot)];Ve?Ve.current=!0:P.push(ot)}}if(P.sort(function(mt,Mn){return mt.distanceTo(w)-Mn.distanceTo(w)}),P.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var At=document.createDocumentFragment();for(ue=0;ue<P.length;ue++)this._addTile(P[ue],At);this._level.el.appendChild(At)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var u=this._globalTileRange;if(!l.wrapLng&&(s.x<u.min.x||s.x>u.max.x)||!l.wrapLat&&(s.y<u.min.y||s.y>u.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(s);return fe(this.options.bounds).overlaps(f)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,u=this.getTileSize(),f=s.scaleBy(u),p=f.add(u),w=l.unproject(f,s.z),P=l.unproject(p,s.z);return[w,P]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),u=new de(l[0],l[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),u=new M(+l[0],+l[1]);return u.z=+l[2],u},_removeTile:function(s){var l=this._tiles[s];l&&(Te(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ce(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=x,s.onmousemove=x,re.ielt9&&this.options.opacity<1&&Tt(s,this.options.opacity)},_addTile:function(s,l){var u=this._getTilePos(s),f=this._tileCoordsToKey(s),p=this.createTile(this._wrapCoords(s),c(this._tileReady,this,s));this._initTile(p),this.createTile.length<2&&te(c(this._tileReady,this,s,null,p)),De(p,u),this._tiles[f]={el:p,coords:s,current:!0},l.appendChild(p),this.fire("tileloadstart",{tile:p,coords:s})},_tileReady:function(s,l,u){l&&this.fire("tileerror",{error:l,tile:u,coords:s});var f=this._tileCoordsToKey(s);u=this._tiles[f],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Tt(u.el,0),X(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),l||(ce(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?te(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new M(this._wrapX?g(s.x,this._wrapX):s.x,this._wrapY?g(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new Y(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function cv(s){return new Ms(s)}var zn=Ms.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&re.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var u=document.createElement("img");return oe(u,"load",c(this._tileOnLoad,this,l,u)),oe(u,"error",c(this._tileOnError,this,l,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(s),u},getTileUrl:function(s){var l={r:re.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=u),l["-y"]=u}return j(this._url,a(l,this.options))},_tileOnLoad:function(s,l){re.ielt9?setTimeout(c(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,u){var f=this.options.errorTileUrl;f&&l.getAttribute("src")!==f&&(l.src=f),s(u,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,u=this.options.zoomReverse,f=this.options.zoomOffset;return u&&(s=l-s),s+f},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=x,l.onerror=x,!l.complete)){l.src=D;var u=this._tiles[s].coords;Te(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:u})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",D),Ms.prototype._removeTile.call(this,s)},_tileReady:function(s,l,u){if(!(!this._map||u&&u.getAttribute("src")===D))return Ms.prototype._tileReady.call(this,s,l,u)}});function zh(s,l){return new zn(s,l)}var Mh=zn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var u=a({},this.defaultWmsParams);for(var f in l)f in this.options||(u[f]=l[f]);l=b(this,l);var p=l.detectRetina&&re.retina?2:1,w=this.getTileSize();u.width=w.x*p,u.height=w.y*p,this.wmsParams=u},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,zn.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),u=this._crs,f=H(u.project(l[0]),u.project(l[1])),p=f.min,w=f.max,P=(this._wmsVersion>=1.3&&this._crs===Ch?[p.y,p.x,w.y,w.x]:[p.x,p.y,w.x,w.y]).join(","),A=zn.prototype.getTileUrl.call(this,s);return A+E(this.wmsParams,A,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+P},setParams:function(s,l){return a(this.wmsParams,s),l||this.redraw(),this}});function uv(s,l){return new Mh(s,l)}zn.WMS=Mh,zh.wms=uv;var dr=Bt.extend({options:{padding:.1},initialize:function(s){b(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ce(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var u=this._map.getZoomScale(l,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,l),w=f.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(s,l));re.any3d?Xr(this._container,w,u):De(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),u=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new Y(u,u.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Bh=dr.extend({options:{tolerance:0},getEvents:function(){var s=dr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){dr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");oe(s,"mousemove",this._onMouseMove,this),oe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),oe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){X(this._redrawRequest),delete this._ctx,Te(this._container),be(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var s=this._bounds,l=this._container,u=s.getSize(),f=re.retina?2:1;De(l,s.min),l.width=f*u.x,l.height=f*u.y,l.style.width=u.x+"px",l.style.height=u.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){dr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,u=l.next,f=l.prev;u?u.prev=f:this._drawLast=f,f?f.next=u:this._drawFirst=u,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),u=[],f,p;for(p=0;p<l.length;p++){if(f=Number(l[p]),isNaN(f))return;u.push(f)}s.options._dashArray=u}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||te(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Y,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var u=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)s=f.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var u,f,p,w,P=s._parts,A=P.length,R=this._ctx;if(A){for(R.beginPath(),u=0;u<A;u++){for(f=0,p=P[u].length;f<p;f++)w=P[u][f],R[f?"lineTo":"moveTo"](w.x,w.y);l&&R.closePath()}this._fillStroke(R,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,u=this._ctx,f=Math.max(Math.round(s._radius),1),p=(Math.max(Math.round(s._radiusY),1)||f)/f;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(l.x,l.y/p,f,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,s)}},_fillStroke:function(s,l){var u=l.options;u.fill&&(s.globalAlpha=u.fillOpacity,s.fillStyle=u.fillColor||u.color,s.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=u.opacity,s.lineWidth=u.weight,s.strokeStyle=u.color,s.lineCap=u.lineCap,s.lineJoin=u.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),u,f,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(u))&&(f=u);this._fireEvent(f?[f]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Re(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var u,f,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(l)&&(f=u);f!==this._hoveredLayer&&(this._handleMouseOut(s),f&&(ce(this._container,"leaflet-interactive"),this._fireEvent([f],s,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,u){this._map._fireDOMEvent(l,u||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var u=l.next,f=l.prev;if(u)u.prev=f;else return;f?f.next=u:u&&(this._drawFirst=u),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var u=l.next,f=l.prev;if(f)f.next=u;else return;u?u.prev=f:f&&(this._drawLast=f),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Uh(s){return re.canvas?new Bh(s):null}var Bs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dv={_initContainer:function(){this._container=xe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(dr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Bs("shape");ce(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Bs("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Te(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,u=s._fill,f=s.options,p=s._container;p.stroked=!!f.stroke,p.filled=!!f.fill,f.stroke?(l||(l=s._stroke=Bs("stroke")),p.appendChild(l),l.weight=f.weight+"px",l.color=f.color,l.opacity=f.opacity,f.dashArray?l.dashStyle=k(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=f.lineCap.replace("butt","flat"),l.joinstyle=f.lineJoin):l&&(p.removeChild(l),s._stroke=null),f.fill?(u||(u=s._fill=Bs("fill")),p.appendChild(u),u.color=f.fillColor||f.color,u.opacity=f.fillOpacity):u&&(p.removeChild(u),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),u=Math.round(s._radius),f=Math.round(s._radiusY||u);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+u+","+f+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){An(s._container)},_bringToBack:function(s){On(s._container)}},aa=re.vml?Bs:Wd,Us=dr.extend({_initContainer:function(){this._container=aa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=aa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Te(this._container),be(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,u.setAttribute("width",l.x),u.setAttribute("height",l.y)),De(u,s.min),u.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=aa("path");s.options.className&&ce(l,s.options.className),s.options.interactive&&ce(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Te(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,u=s.options;l&&(u.stroke?(l.setAttribute("stroke",u.color),l.setAttribute("stroke-opacity",u.opacity),l.setAttribute("stroke-width",u.weight),l.setAttribute("stroke-linecap",u.lineCap),l.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?l.setAttribute("stroke-dasharray",u.dashArray):l.removeAttribute("stroke-dasharray"),u.dashOffset?l.setAttribute("stroke-dashoffset",u.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),u.fill?(l.setAttribute("fill",u.fillColor||u.color),l.setAttribute("fill-opacity",u.fillOpacity),l.setAttribute("fill-rule",u.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Vd(s._parts,l))},_updateCircle:function(s){var l=s._point,u=Math.max(Math.round(s._radius),1),f=Math.max(Math.round(s._radiusY),1)||u,p="a"+u+","+f+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(l.x-u)+","+l.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(s,w)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){An(s._path)},_bringToBack:function(s){On(s._path)}});re.vml&&Us.include(dv);function $h(s){return re.svg||re.vml?new Us(s):null}me.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Uh(s)||$h(s)}});var Fh=In.extend({initialize:function(s,l){In.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=fe(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function hv(s,l){return new Fh(s,l)}Us.create=aa,Us.pointsToPath=Vd,ur.geometryToLayer=Qi,ur.coordsToLatLng=Ll,ur.coordsToLatLngs=ea,ur.latLngToCoords=Rl,ur.latLngsToCoords=ta,ur.getFeature=Dn,ur.asFeature=ra,me.mergeOptions({boxZoom:!0});var Hh=Qt.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Te(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),As(),gl(),this._startPoint=this._map.mouseEventToContainerPoint(s),oe(document,{contextmenu:tn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=xe("div","leaflet-zoom-box",this._container),ce(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new Y(this._point,this._startPoint),u=l.getSize();De(this._box,l.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Te(this._box),Re(this._container,"leaflet-crosshair")),Os(),xl(),be(document,{contextmenu:tn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var l=new de(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});me.addInitHook("addHandler","boxZoom",Hh),me.mergeOptions({doubleClickZoom:!0});var Wh=Qt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,u=l.getZoom(),f=l.options.zoomDelta,p=s.originalEvent.shiftKey?u-f:u+f;l.options.doubleClickZoom==="center"?l.setZoom(p):l.setZoomAround(s.containerPoint,p)}});me.addInitHook("addHandler","doubleClickZoom",Wh),me.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vh=Qt.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Nr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ce(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Re(this._map._container,"leaflet-grab"),Re(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=fe(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),u=this._initialWorldOffset,f=this._draggable._newPos.x,p=(f-l+u)%s+l-u,w=(f+l+u)%s-l-u,P=Math.abs(p+u)<Math.abs(w+u)?p:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=P},_onDragEnd:function(s){var l=this._map,u=l.options,f=!u.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),f)l.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,P=u.easeLinearity,A=p.multiplyBy(P/w),R=A.distanceTo([0,0]),$=Math.min(u.inertiaMaxSpeed,R),K=A.multiplyBy($/R),ie=$/(u.inertiaDeceleration*P),ue=K.multiplyBy(-ie/2).round();!ue.x&&!ue.y?l.fire("moveend"):(ue=l._limitOffset(ue,l.options.maxBounds),te(function(){l.panBy(ue,{duration:ie,easeLinearity:P,noMoveStart:!0,animate:!0})}))}}});me.addInitHook("addHandler","dragging",Vh),me.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zh=Qt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),oe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,u=s.scrollTop||l.scrollTop,f=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(f,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},u=this.keyCodes,f,p;for(f=0,p=u.left.length;f<p;f++)l[u.left[f]]=[-1*s,0];for(f=0,p=u.right.length;f<p;f++)l[u.right[f]]=[s,0];for(f=0,p=u.down.length;f<p;f++)l[u.down[f]]=[0,s];for(f=0,p=u.up.length;f<p;f++)l[u.up[f]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},u=this.keyCodes,f,p;for(f=0,p=u.zoomIn.length;f<p;f++)l[u.zoomIn[f]]=s;for(f=0,p=u.zoomOut.length;f<p;f++)l[u.zoomOut[f]]=-s},_addHooks:function(){oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,u=this._map,f;if(l in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(f=this._panKeys[l],s.shiftKey&&(f=U(f).multiplyBy(3)),u.options.maxBounds&&(f=u._limitOffset(U(f),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(f)));u.panTo(p)}else u.panBy(f)}else if(l in this._zoomKeys)u.setZoom(u.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;tn(s)}}});me.addInitHook("addHandler","keyboard",Zh),me.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var qh=Qt.extend({addHooks:function(){oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){be(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=xh(s),u=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var f=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),f),tn(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),u=this._map.options.zoomSnap||0;s._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=u?Math.ceil(p/u)*u:p,P=s._limitZoom(l+(this._delta>0?w:-w))-l;this._delta=0,this._startTime=null,P&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+P):s.setZoomAround(this._lastMousePos,l+P))}});me.addInitHook("addHandler","scrollWheelZoom",qh);var fv=600;me.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var Kh=Qt.extend({addHooks:function(){oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new M(l.clientX,l.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(oe(document,"touchend",Ge),oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),fv),oe(document,"touchend touchcancel contextmenu",this._cancel,this),oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){be(document,"touchend",Ge),be(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),be(document,"touchend touchcancel contextmenu",this._cancel,this),be(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new M(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var u=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});u._simulated=!0,l.target.dispatchEvent(u)}});me.addInitHook("addHandler","tapHold",Kh),me.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var Gh=Qt.extend({addHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Re(this._map._container,"leaflet-touch-zoom"),be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var u=l.mouseEventToContainerPoint(s.touches[0]),f=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(u.add(f)._divideBy(2))),this._startDist=u.distanceTo(f),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),oe(document,"touchmove",this._onTouchMove,this),oe(document,"touchend touchcancel",this._onTouchEnd,this),Ge(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,u=l.mouseEventToContainerPoint(s.touches[0]),f=l.mouseEventToContainerPoint(s.touches[1]),p=u.distanceTo(f)/this._startDist;if(this._zoom=l.getScaleZoom(p,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&p<1||this._zoom>l.getMaxZoom()&&p>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var w=u._add(f)._divideBy(2)._subtract(this._centerPoint);if(p===1&&w.x===0&&w.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),X(this._animRequest);var P=c(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=te(P,this,!0),Ge(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,X(this._animRequest),be(document,"touchmove",this._onTouchMove,this),be(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});me.addInitHook("addHandler","touchZoom",Gh),me.BoxZoom=Hh,me.DoubleClickZoom=Wh,me.Drag=Vh,me.Keyboard=Zh,me.ScrollWheelZoom=qh,me.TapHold=Kh,me.TouchZoom=Gh,r.Bounds=Y,r.Browser=re,r.CRS=ft,r.Canvas=Bh,r.Circle=Ol,r.CircleMarker=Xi,r.Class=_e,r.Control=Mt,r.DivIcon=Dh,r.DivOverlay=er,r.DomEvent=Ay,r.DomUtil=Ty,r.Draggable=Nr,r.Evented=G,r.FeatureGroup=lr,r.GeoJSON=ur,r.GridLayer=Ms,r.Handler=Qt,r.Icon=Rn,r.ImageOverlay=na,r.LatLng=ne,r.LatLngBounds=de,r.Layer=Bt,r.LayerGroup=Ln,r.LineUtil=Wy,r.Map=me,r.Marker=Ji,r.Mixin=My,r.Path=kr,r.Point=M,r.PolyUtil=By,r.Polygon=In,r.Polyline=cr,r.Popup=sa,r.PosAnimation=yh,r.Projection=Vy,r.Rectangle=Fh,r.Renderer=dr,r.SVG=Us,r.SVGOverlay=Ih,r.TileLayer=zn,r.Tooltip=ia,r.Transformation=sl,r.Util=le,r.VideoOverlay=Rh,r.bind=c,r.bounds=H,r.canvas=Uh,r.circle=Qy,r.circleMarker=Xy,r.control=Is,r.divIcon=lv,r.extend=a,r.featureGroup=Gy,r.geoJSON=Lh,r.geoJson=rv,r.gridLayer=cv,r.icon=Yy,r.imageOverlay=nv,r.latLng=ae,r.latLngBounds=fe,r.layerGroup=Ky,r.map=Oy,r.marker=Jy,r.point=U,r.polygon=tv,r.polyline=ev,r.popup=av,r.rectangle=hv,r.setOptions=b,r.stamp=h,r.svg=$h,r.svgOverlay=iv,r.tileLayer=zh,r.tooltip=ov,r.transformation=Es,r.version=n,r.videoOverlay=sv;var mv=window.L;r.noConflict=function(){return window.L=mv,this},window.L=r})})(Tu,Tu.exports);var Fi=Tu.exports;const Ud=Au(Fi);function $d(t,e,r){return Object.freeze({instance:t,context:e,container:r})}function Fd(t,e){return e==null?function(n,a){const o=S.useRef();return o.current||(o.current=t(n,a)),o}:function(n,a){const o=S.useRef();o.current||(o.current=t(n,a));const c=S.useRef(n),{instance:d}=o.current;return S.useEffect(function(){c.current!==n&&(e(d,n,c.current),c.current=n)},[d,n,a]),o}}function X1(t,e){S.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function G0(t){return function(r){const n=Md(),a=t(Bd(r,n),n);return V0(n.map,r.attribution),K0(a.current,r.eventHandlers),X1(a.current,n),a}}function Q1(t,e){const r=Fd(t,e),n=G0(r);return K1(n)}function ek(t,e){const r=Fd(t),n=J1(r,e);return G1(n)}function tk(t,e){const r=Fd(t,e),n=G0(r);return Y1(n)}function rk(t,e,r){const{opacity:n,zIndex:a}=e;n!=null&&n!==r.opacity&&t.setOpacity(n),a!=null&&a!==r.zIndex&&t.setZIndex(a)}function nk(){return Md().map}function Cu(){return Cu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cu.apply(this,arguments)}function sk({bounds:t,boundsOptions:e,center:r,children:n,className:a,id:o,placeholder:c,style:d,whenReady:h,zoom:m,...g},x){const[v]=S.useState({className:a,id:o,style:d}),[_,y]=S.useState(null);S.useImperativeHandle(x,()=>(_==null?void 0:_.map)??null,[_]);const b=S.useCallback(N=>{if(N!==null&&_===null){const j=new Fi.Map(N,g);r!=null&&m!=null?j.setView(r,m):t!=null&&j.fitBounds(t,e),h!=null&&j.whenReady(h),y(Z1(j))}},[]);S.useEffect(()=>()=>{_==null||_.map.remove()},[_]);const E=_?hs.createElement(q0,{value:_},n):c??null;return hs.createElement("div",Cu({},v,{ref:b}),E)}const ik=S.forwardRef(sk),ak=Q1(function({position:e,...r},n){const a=new Fi.Marker(e,r);return $d(a,q1(n,{overlayContainer:a}))},function(e,r,n){r.position!==n.position&&e.setLatLng(r.position),r.icon!=null&&r.icon!==n.icon&&e.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==n.opacity&&e.setOpacity(r.opacity),e.dragging!=null&&r.draggable!==n.draggable&&(r.draggable===!0?e.dragging.enable():e.dragging.disable())}),ok=ek(function(e,r){const n=new Fi.Popup(e,r.overlayContainer);return $d(n,r)},function(e,r,{position:n},a){S.useEffect(function(){const{instance:c}=e;function d(m){m.popup===c&&(c.update(),a(!0))}function h(m){m.popup===c&&a(!1)}return r.map.on({popupopen:d,popupclose:h}),r.overlayContainer==null?(n!=null&&c.setLatLng(n),c.openOn(r.map)):r.overlayContainer.bindPopup(c),function(){var g;r.map.off({popupopen:d,popupclose:h}),(g=r.overlayContainer)==null||g.unbindPopup(),r.map.removeLayer(c)}},[e,r,a,n])}),lk=tk(function({url:e,...r},n){const a=new Fi.TileLayer(e,Bd(r,n));return $d(a,n)},function(e,r,n){rk(e,r,n);const{url:a}=r;a!=null&&a!==n.url&&e.setUrl(a)}),ck="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",uk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let dk=Ud.icon({iconUrl:ck,shadowUrl:uk,iconSize:[25,41],iconAnchor:[12,41]});Ud.Marker.prototype.options.icon=dk;const hk=new Ud.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),fk=({agent:t})=>{const e=nk();return S.useEffect(()=>{t&&t.latitude&&t.longitude&&e.flyTo([t.latitude,t.longitude],15,{duration:1.5})},[t,e]),null},mk=()=>{const t=ve(),[e,r]=S.useState([]),[n,a]=S.useState(null);return S.useEffect(()=>{q.getPublicAgents().then(r)},[]),i.jsxs("div",{className:"flex flex-col h-screen bg-[#111]",children:[i.jsxs("div",{className:"p-4 bg-[#1a1a1a] border-b border-white/5 flex items-center justify-between z-20 shadow-xl",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>t("/"),className:"w-10 h-10 rounded-full bg-[#222] hover:bg-[#333] flex items-center justify-center text-gray-400 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"location_on"}),"Agent Locator"]}),i.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:"Verified Exchange Points"})]})]}),i.jsxs("div",{className:"bg-[#222] px-4 py-2 rounded-lg border border-white/5 hidden md:block",children:[i.jsx("span",{className:"text-gray-400 text-xs",children:"Nearby Agents:"}),i.jsx("span",{className:"ml-2 text-lime-400 font-bold",children:e.length})]})]}),i.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[i.jsxs("div",{className:"w-full md:w-96 bg-[#1a1a1a] border-r border-white/5 flex flex-col z-10 shadow-2xl absolute md:relative h-1/3 md:h-full bottom-0 md:bottom-auto",children:[i.jsx("div",{className:"p-4 border-b border-white/5 bg-[#1a1a1a] sticky top-0",children:i.jsx("input",{type:"text",placeholder:"Inter city or region...",className:"w-full bg-[#111] border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-lime-500/50 transition-all text-sm"})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 pb-20 md:pb-4",children:e.length===0?i.jsxs("div",{className:"text-center py-10 text-gray-600",children:[i.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-30",children:"map"}),i.jsx("p",{children:"No agents found yet."})]}):e.map(o=>i.jsxs("div",{onClick:()=>a(o),className:`p-4 rounded-xl border cursor-pointer transition-all group ${(n==null?void 0:n.id)===o.id?"bg-lime-500/10 border-lime-500/50":"bg-[#222] border-transparent hover:border-white/10"}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h3",{className:"font-bold text-white group-hover:text-lime-400 transition-colors",children:o.name}),i.jsx("span",{className:"bg-lime-500/20 text-lime-400 text-[10px] px-2 py-0.5 rounded uppercase font-bold tracking-wider",children:"Verified"})]}),i.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-start gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-[14px] mt-0.5 shrink-0",children:"store"}),o.address||"No address provided"]}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsxs("p",{className:"text-[10px] text-gray-500 font-mono flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"schedule"}),o.hours||"09:00 - 18:00"]}),i.jsx("button",{className:"text-lime-400 hover:text-white transition-colors",children:i.jsx("span",{className:"material-symbols-outlined",children:"directions"})})]})]},o.id))})]}),i.jsxs("div",{className:"flex-1 relative bg-[#0c0c0c]",children:[i.jsxs(ik,{center:[41.0082,28.9784],zoom:12,style:{height:"100%",width:"100%"},zoomControl:!1,children:[i.jsx(lk,{attribution:' <a href="https://carto.com/">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),i.jsx(fk,{agent:n}),e.map(o=>o.latitude&&o.longitude&&i.jsx(ak,{position:[o.latitude,o.longitude],icon:hk,eventHandlers:{click:()=>a(o)},children:i.jsx(ok,{className:"agent-popup",children:i.jsxs("div",{className:"p-1 min-w-[200px]",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.logo&&i.jsx("img",{src:o.logo,className:"w-8 h-8 rounded-full object-cover"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-black text-sm leading-tight",children:o.name}),i.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Authorized Agent"})]})]}),i.jsx("p",{className:"text-gray-600 text-xs mb-3 leading-snug",children:o.address}),i.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${o.latitude},${o.longitude}`,target:"_blank",rel:"noreferrer",className:"block w-full bg-black text-white text-center py-2 rounded-lg font-bold text-xs hover:bg-gray-800 transition-colors shadow-lg",children:"Get Directions on Google Maps"})]})})},o.id))]}),i.jsx("div",{className:"absolute top-4 right-4 z-[400] flex flex-col gap-2",children:i.jsx("button",{className:"w-10 h-10 bg-[#1a1a1a] text-white rounded-lg shadow-xl flex items-center justify-center hover:bg-[#222]",onClick:()=>window.location.reload(),children:i.jsx("span",{className:"material-symbols-outlined",children:"my_location"})})})]})]})]})},pk=()=>{const t=ve();return S.useEffect(()=>{(()=>{try{console.log("AutoLogin processing URL:",window.location.href);let r=new URLSearchParams(window.location.search),n=r.get("token"),a=r.get("email");if(!n){const o=window.location.hash.split("?");if(o.length>1){const c=new URLSearchParams(o[1]);n=c.get("token"),a=c.get("email")}}n&&a?(console.log("Found Credentials. Logging in..."),localStorage.setItem("nusd_auth_token",n),localStorage.setItem("nusd_current_user",a),setTimeout(()=>{window.location.href=window.location.origin+"/#/admin",window.location.reload()},500)):(console.warn("No credentials found in URL"),alert("AutoLogin Error: No token found in link."),t("/"))}catch(r){console.error("Auto-login failed:",r),t("/")}})()},[]),i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col items-center justify-center font-display",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-lime-500 border-t-transparent rounded-full animate-spin mb-6"}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Securely Logging In..."}),i.jsx("p",{className:"text-gray-500",children:"Connecting to Admin Panel..."})]})},gk=()=>{const{slug:t}=fx(),[e,r]=S.useState(null),[n,a]=S.useState(null),[o,c]=S.useState(!0),[d,h]=S.useState(null),[m,g]=S.useState("deposit"),[x,v]=S.useState(""),[_,y]=S.useState("");S.useEffect(()=>{t&&b()},[t]);const b=async()=>{c(!0);const k=await q.getPanelBySlug(t);if(k){if(r(k),k.department_id){const T=await q.getDepartment(k.department_id);T&&a(T)}}else h("Portal not found");c(!1)},E=S.useMemo(()=>{var D;const k=((D=n==null?void 0:n.owner)==null?void 0:D.email)||(n==null?void 0:n.owner_email)||"";if(!k)return"Adres Bulunamad";const T=k.split("").reduce((z,C)=>(z<<5)-z+C.charCodeAt(0),0);return`NUSD-${Math.abs(T).toString(36).toUpperCase().slice(0,6)}`},[n]),N=k=>{navigator.clipboard.writeText(k),alert("Kopyaland!")},j=async()=>{alert("ekim talebi gnderildi. Admin onay bekleniyor.")};return o?i.jsx("div",{className:"min-h-screen bg-[#0F172A] flex items-center justify-center text-white",children:"Loading Portal..."}):d||!e?i.jsx("div",{className:"min-h-screen bg-[#0F172A] flex items-center justify-center text-white",children:d||"Not Found"}):i.jsxs("div",{className:"min-h-screen bg-[#0F172A] flex flex-col items-center justify-center p-4 font-sans text-slate-300",children:[i.jsxs("div",{className:"mb-6 flex flex-col items-center animate-fade-in-down",children:[i.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20 mb-3",children:i.jsx("span",{className:"text-white text-2xl font-bold",children:""})}),i.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:e.name}),i.jsx("p",{className:"text-sm text-slate-500 mt-1",children:n==null?void 0:n.name})]}),i.jsxs("div",{className:"bg-[#1E293B] w-full max-w-md rounded-3xl p-2 shadow-2xl border border-slate-700/50",children:[i.jsxs("div",{className:"bg-[#0F172A]/50 p-1 rounded-2xl flex mb-6",children:[i.jsx("button",{onClick:()=>g("deposit"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${m==="deposit"?"bg-white text-slate-900 shadow-md":"text-slate-400 hover:text-white"}`,children:"Yatrm (Deposit)"}),i.jsx("button",{onClick:()=>g("withdraw"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${m==="withdraw"?"bg-white text-slate-900 shadow-md":"text-slate-400 hover:text-white"}`,children:"ekim (Withdraw)"})]}),i.jsx("div",{className:"px-6 pb-6 space-y-5",children:m==="deposit"?i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"w-16 h-16 bg-green-500/20 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"material-symbols-outlined text-3xl",children:"account_balance_wallet"})}),i.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Yatrm Adresi"}),i.jsxs("p",{className:"text-sm text-slate-400 mb-4",children:["Bu NUSD adresine ",i.jsx("b",{className:"text-white",children:"kendi czdannzdan"})," transfer yapn"]}),i.jsxs("div",{className:"bg-lime-500/10 border-2 border-lime-500/50 p-4 rounded-xl mb-4",children:[i.jsx("p",{className:"text-xs text-lime-400 font-bold uppercase mb-2",children:"# NUSD Adresi (nemli!)"}),i.jsxs("div",{className:"flex items-center justify-between bg-[#0F172A] p-3 rounded-lg cursor-pointer group",onClick:()=>N(E),children:[i.jsx("span",{className:"text-lime-300 font-mono font-bold text-lg tracking-widest",children:E}),i.jsx("span",{className:"material-symbols-outlined text-lime-400 opacity-60 group-hover:opacity-100",children:"content_copy"})]}),i.jsx("p",{className:"text-[10px] text-slate-500 mt-2",children:"Czdannzdan transfer yaparken bu adresi kullann"})]}),i.jsxs("div",{className:"bg-[#0F172A] p-4 rounded-xl text-left space-y-2",children:[i.jsxs("p",{className:"text-xs text-slate-400",children:[i.jsx("span",{className:"text-indigo-400 font-bold",children:"1."}),' Wallet uygulamanzda "Gnder" butonuna basn']}),i.jsxs("p",{className:"text-xs text-slate-400",children:[i.jsx("span",{className:"text-indigo-400 font-bold",children:"2."})," Alc olarak yukardaki NUSD adresini girin"]}),i.jsxs("p",{className:"text-xs text-slate-400",children:[i.jsx("span",{className:"text-indigo-400 font-bold",children:"3."})," Transfer annda tamamlanr"]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Tutar"}),i.jsx("input",{type:"number",className:"w-full bg-[#334155]/50 border border-slate-600 rounded-xl p-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:outline-none",placeholder:"100",value:x,onChange:k=>v(k.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Czdan Adresi (NUSD veya TRX)"}),i.jsx("input",{type:"text",className:"w-full bg-[#334155]/50 border border-slate-600 rounded-xl p-3 text-white placeholder-slate-500 focus:border-indigo-500 focus:outline-none",placeholder:"NUSD-XXXXXX veya T...",value:_,onChange:k=>y(k.target.value)})]}),i.jsx("button",{onClick:j,className:"w-full bg-gradient-to-r from-rose-600 to-pink-600 text-white py-3.5 rounded-xl font-bold text-sm hover:from-rose-500 hover:to-pink-500 transition-all shadow-lg shadow-rose-500/20",children:"ekim Talebi Gnder"})]})})]}),i.jsx("p",{className:"text-xs text-slate-600 mt-8",children:"Powered by NUSD Wallet"})]})},xk=()=>{var V;const{user:t,logout:e}=ht(),r=ve(),[n,a]=S.useState(null),[o,c]=S.useState(null),[d,h]=S.useState([]),[m,g]=S.useState(!0),[x,v]=S.useState(null),[_,y]=S.useState(!1),[b,E]=S.useState(""),[N,j]=S.useState(""),[k,T]=S.useState(!1),[D,z]=S.useState(!1),[C,B]=S.useState([]),[O,Z]=S.useState(null),te=S.useMemo(()=>{if(!(t!=null&&t.email))return"NUSD-XXXX";const G=t.email.split("").reduce((M,W)=>(M<<5)-M+W.charCodeAt(0),0);return`NUSD-${Math.abs(G).toString(36).toUpperCase().slice(0,6)}`},[t==null?void 0:t.email]);S.useEffect(()=>{X()},[t]);const X=async()=>{var G;g(!0);try{const M=await q.getProfile();if(!M||M.account_type!=="business"){v("letme hesab bulunamad");return}if(M.business_department_id){const W=await q.getDepartment(M.business_department_id);a(W),((G=W==null?void 0:W.panels)==null?void 0:G.length)>0&&c(W.panels[0]);const U=await q.getDepartmentTransactions(M.business_department_id);h(U||[])}}catch(M){console.error(M),v("Veriler yklenemedi")}g(!1)},le=async()=>{if(!b||!N||parseFloat(N)<=0){alert("Ltfen geerli bilgiler girin");return}T(!0);try{const G=await q.internalTransfer(b,parseFloat(N));G.success?(alert("Transfer baarl!"),y(!1),E(""),j(""),X()):alert(G.error||"Transfer baarsz")}catch{alert("Transfer hatas")}T(!1)},_e=async()=>{if(!o)return;const G=!o.is_active,M=await q.updatePanelStatus(o.id,G);M!=null&&M.success&&c({...o,is_active:G})},at=G=>{navigator.clipboard.writeText(G),alert("Kopyaland!")};return m?i.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Ykleniyor..."})}):x?i.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-4",children:[i.jsx("div",{className:"text-red-400 mb-4",children:x}),i.jsx("button",{onClick:()=>r("/"),className:"text-lime-400",children:"Ana Sayfaya Dn"})]}):i.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white p-4 pb-24",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-10 h-10 bg-lime-500 rounded-full flex items-center justify-center text-black font-bold",children:((V=n==null?void 0:n.name)==null?void 0:V[0])||"F"}),i.jsxs("div",{children:[i.jsx("h1",{className:"font-bold text-lg",children:n==null?void 0:n.name}),i.jsx("p",{className:"text-xs text-gray-500",children:"letme Paneli"})]})]})}),i.jsx("button",{onClick:()=>r("/"),className:"text-gray-400",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("div",{className:"bg-gradient-to-r from-lime-600/20 to-green-600/20 border border-lime-500/30 rounded-2xl p-4 mb-4",children:[i.jsx("p",{className:"text-xs text-lime-400 font-bold uppercase mb-1",children:"# NUSD Adresiniz"}),i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>at(te),children:[i.jsx("span",{className:"font-mono font-bold text-xl text-lime-300",children:te}),i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-lg",children:"content_copy"})]}),i.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Bu adrese gelen transferler bakiyenize eklenir"})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-5 mb-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Bakiye"}),i.jsxs("p",{className:"text-4xl font-bold text-white",children:["$",((t==null?void 0:t.balance)||0).toLocaleString()]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[i.jsxs("button",{onClick:()=>y(!0),className:"bg-lime-500 text-black font-bold py-3 rounded-xl flex items-center justify-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"send"}),"NUSD Gnder"]}),i.jsxs("button",{onClick:()=>z(!0),className:"bg-[#1a1a1a] text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 border border-gray-700",children:[i.jsx("span",{className:"material-symbols-outlined",children:"account_balance"}),"ekim Talepleri"]})]}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-end justify-center z-50",children:i.jsxs("div",{className:"bg-[#1a1a1a] w-full max-w-lg rounded-t-3xl p-6 max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"font-bold text-lg",children:"ekim Talepleri"}),i.jsx("button",{onClick:()=>z(!1),children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"close"})})]}),C.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"inbox"}),i.jsx("p",{children:"Bekleyen ekim talebi yok"})]}):i.jsx("div",{className:"space-y-3",children:C.map(G=>i.jsxs("div",{className:"bg-[#0a0a0a] rounded-xl p-4 border border-white/5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"font-bold text-white",children:["$",G.amount]}),i.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/20 px-2 py-1 rounded",children:G.status})]}),i.jsxs("p",{className:"text-sm text-gray-400 mb-1",children:["Adres: ",G.wallet_address]}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:new Date(G.created_at).toLocaleString()}),i.jsx("button",{onClick:async()=>{Z(G.id),alert("ekim tamamland olarak iaretlendi"),Z(null)},disabled:O===G.id,className:"w-full bg-lime-500 text-black py-2 rounded-lg font-bold text-sm disabled:opacity-50",children:O===G.id?"leniyor...":"Gnderildi Olarak aretle"})]},G.id))})]})}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"storefront"}),"Portallarm"]}),i.jsxs("button",{onClick:()=>alert("Yeni portal oluturma yaknda"),className:"bg-lime-500/20 text-lime-400 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Portal Ekle"]})]}),o?i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"bg-[#0a0a0a] rounded-xl p-4 border border-white/5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${o.is_active?"bg-green-400":"bg-red-400"}`}),i.jsx("span",{className:"font-medium text-white",children:(n==null?void 0:n.name)||"Portal"})]}),i.jsx("button",{onClick:_e,className:`px-3 py-1 rounded-full text-xs font-bold transition-colors ${o.is_active?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"}`,children:o.is_active?"AKTF":"KAPALI"})]}),i.jsxs("div",{className:"bg-[#1a1a1a] p-3 rounded-lg flex items-center justify-between cursor-pointer hover:bg-[#222] transition-colors",onClick:()=>at(`${window.location.origin}/#/pay/${o.public_slug}`),children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Portal Linki"}),i.jsxs("p",{className:"text-sm text-lime-400 font-mono",children:[window.location.origin,"/#/pay/",o.public_slug]})]}),i.jsx("span",{className:"material-symbols-outlined text-lime-500",children:"content_copy"})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsxs("button",{onClick:()=>window.open(`${window.location.origin}/#/pay/${o.public_slug}`,"_blank"),className:"flex-1 bg-[#1a1a1a] text-white py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-1 hover:bg-[#222] transition-colors",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"open_in_new"}),"nizle"]}),i.jsxs("button",{onClick:()=>at(`${window.location.origin}/#/pay/${o.public_slug}`),className:"flex-1 bg-[#1a1a1a] text-white py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-1 hover:bg-[#222] transition-colors",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"share"}),"Payla"]})]})]})}):i.jsxs("div",{className:"text-center py-6 text-gray-500",children:[i.jsx("span",{className:"material-symbols-outlined text-3xl mb-2",children:"storefront"}),i.jsx("p",{className:"text-sm",children:"Henz portal yok"}),i.jsx("button",{onClick:()=>alert("Portal oluturma yaknda"),className:"mt-3 text-lime-400 text-sm font-medium",children:"lk portaln olutur "})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-bold mb-3",children:"Son Yatrmlar"}),d.length===0?i.jsx("div",{className:"bg-[#1a1a1a] rounded-xl p-6 text-center text-gray-500",children:"Henz yatrm yok"}):i.jsx("div",{className:"space-y-2",children:d.slice(0,5).map(G=>i.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined text-green-400 text-sm",children:"arrow_downward"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:G.sender_email||"Transfer"}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(G.created_at).toLocaleDateString()})]})]}),i.jsxs("p",{className:"text-green-400 font-bold",children:["+$",G.amount]})]},G.id))})]}),_&&i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-end justify-center z-50",children:i.jsxs("div",{className:"bg-[#1a1a1a] w-full max-w-lg rounded-t-3xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"font-bold text-lg",children:"NUSD Gnder"}),i.jsx("button",{onClick:()=>y(!1),children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"close"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-2",children:"Alc NUSD Adresi"}),i.jsx("input",{type:"text",value:b,onChange:G=>E(G.target.value),placeholder:"NUSD-XXXXXX",className:"w-full bg-[#0a0a0a] border border-gray-700 rounded-xl p-3 text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-2",children:"Tutar"}),i.jsx("input",{type:"number",value:N,onChange:G=>j(G.target.value),placeholder:"0.00",className:"w-full bg-[#0a0a0a] border border-gray-700 rounded-xl p-3 text-white"})]}),i.jsx("button",{onClick:le,disabled:k,className:"w-full bg-lime-500 text-black font-bold py-4 rounded-xl disabled:opacity-50",children:k?"Gnderiliyor...":"Gnder"})]})]})})]})},yk=()=>{const t=ve(),{user:e,refreshUser:r}=ht(),[n,a]=S.useState(1),[o,c]=S.useState(null),[d,h]=S.useState(!1),[m,g]=S.useState(!1),x=_=>{var b;const y=(b=_.target.files)==null?void 0:b[0];if(y){const E=new FileReader;E.onloadend=()=>{c(E.result)},E.readAsDataURL(y)}},v=async()=>{if(o){h(!0);try{const{data:{user:_}}=await I.auth.getUser();if(!_)throw new Error("No user");const{error:y}=await I.from("profiles").update({kyc_status:"VERIFIED",kyc_verified_at:new Date().toISOString()}).eq("id",_.id);y&&console.error("KYC update error:",y),g(!0),a(3),await r()}catch(_){console.error("KYC error:",_)}finally{h(!1)}}};return i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 shrink-0",children:[i.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Kimlik Dorulama"})]}),i.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-center gap-2",children:[1,2,3].map(_=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all ${n>=_?n===_?"bg-lime-500 text-black":"bg-lime-500/20 text-lime-400":"bg-gray-800 text-gray-500"}`,children:n>_?i.jsx("span",{className:"material-symbols-outlined text-lg",children:"check"}):_}),_<3&&i.jsx("div",{className:`w-8 h-0.5 ${n>_?"bg-lime-500":"bg-gray-700"}`})]},_))}),n===1&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"material-symbols-outlined text-amber-400 text-4xl",children:"badge"})}),i.jsx("h2",{className:"text-white font-bold text-xl mb-2",children:"Kimlik Dorulama"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"lem limitlerini artrmak ve hesabnz gvence altna almak iin kimlik belgenizi dorulayn."})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 border border-white/5 space-y-3",children:[i.jsxs("h3",{className:"text-white font-bold text-sm flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"info"}),"Gerekli Belgeler"]}),i.jsxs("ul",{className:"text-gray-400 text-sm space-y-2",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-lg",children:"check_circle"}),"Kimlik kartnzn n yz (net ve okunakl)"]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-lg",children:"check_circle"}),"Fotoraf zerinde kesinti veya yansma olmamal"]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-lg",children:"check_circle"}),"Tm keler grnr olmal"]})]})]}),i.jsxs("button",{onClick:()=>a(2),className:"w-full bg-lime-500 text-black py-4 rounded-2xl font-bold text-base hover:bg-lime-400 transition-colors flex items-center justify-center gap-2",children:["Bala",i.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]}),n===2&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-white font-bold text-xl mb-2",children:"Kimlik n Yz"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Kimlik kartnzn n yznn fotorafn ykleyin."})]}),i.jsxs("label",{className:"block cursor-pointer",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden"}),i.jsx("div",{className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all ${o?"border-lime-500/50 bg-lime-500/5":"border-gray-700 hover:border-gray-500"}`,children:o?i.jsxs("div",{className:"space-y-3",children:[i.jsx("img",{src:o,alt:"ID Preview",className:"max-h-48 mx-auto rounded-xl object-cover"}),i.jsx("p",{className:"text-lime-400 text-sm font-medium",children:" Fotoraf yklendi - Deitirmek iin tklayn"})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto",children:i.jsx("span",{className:"material-symbols-outlined text-gray-500 text-3xl",children:"add_photo_alternate"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"Fotoraf Ykle"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"veya srkleyip brakn"})]})]})})]}),i.jsx("div",{className:"bg-amber-500/10 rounded-xl p-4 border border-amber-500/20",children:i.jsxs("p",{className:"text-amber-400 text-sm flex items-start gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lg shrink-0",children:"tips_and_updates"}),"pucu: yi aydnlatlm bir ortamda, dz bir zemin zerinde fotoraf ekin."]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>a(1),className:"flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold text-base hover:bg-gray-700 transition-colors",children:"Geri"}),i.jsx("button",{onClick:v,disabled:!o||d,className:`flex-1 py-4 rounded-2xl font-bold text-base transition-all flex items-center justify-center gap-2 ${o&&!d?"bg-lime-500 text-black hover:bg-lime-400":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Ykleniyor..."]}):i.jsxs(i.Fragment,{children:["Dorula",i.jsx("span",{className:"material-symbols-outlined",children:"verified"})]})})]})]}),n===3&&i.jsxs("div",{className:"space-y-6 text-center py-10",children:[i.jsx("div",{className:"w-24 h-24 bg-lime-500/20 rounded-full flex items-center justify-center mx-auto",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-5xl",children:"verified_user"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-white font-bold text-2xl mb-2",children:"Kimlik Doruland!"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Tebrikler! Hesabnz baaryla doruland. Artk tm zelliklere eriebilirsiniz."})]}),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 border border-lime-500/20 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Durum"}),i.jsxs("span",{className:"text-lime-400 font-bold flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-lg",children:"check_circle"}),"Dorulanm"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Gnlk Limit"}),i.jsx("span",{className:"text-white font-bold",children:"100.000"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Aylk Limit"}),i.jsx("span",{className:"text-white font-bold",children:"1.000.000"})]})]}),i.jsx("button",{onClick:()=>t("/profile"),className:"w-full bg-lime-500 text-black py-4 rounded-2xl font-bold text-base hover:bg-lime-400 transition-colors",children:"Tamam"})]})]})]})},vk=()=>{const t=ve(),{refreshUser:e}=ht(),[r,n]=S.useState(""),[a,o]=S.useState(""),[c,d]=S.useState(""),[h,m]=S.useState(!1),[g,x]=S.useState(!1),[v,_]=S.useState(!1);S.useEffect(()=>{y()},[]);const y=async()=>{m(!0);try{const{data:{user:N}}=await I.auth.getUser();if(!N)return;const{data:j}=await I.from("profiles").select("first_name, last_name, birth_date").eq("id",N.id).single();j&&(n(j.first_name||""),o(j.last_name||""),d(j.birth_date||""))}catch(N){console.error("Load profile error:",N)}finally{m(!1)}},b=async()=>{if(!(!r.trim()||!a.trim()||!c)){x(!0);try{const{data:{user:N}}=await I.auth.getUser();if(!N)throw new Error("No user");const{error:j}=await I.from("profiles").update({first_name:r.trim(),last_name:a.trim(),birth_date:c,name:`${r.trim()} ${a.trim()}`,profile_completed:!0}).eq("id",N.id);j&&console.error("Update error:",j),_(!0),await e(),setTimeout(()=>{t("/profile")},1500)}catch(N){console.error("Save error:",N)}finally{x(!1)}}},E=r.trim()&&a.trim()&&c;return h?i.jsx("div",{className:"min-h-screen bg-[#111111] flex items-center justify-center",children:i.jsx("div",{className:"w-10 h-10 border-2 border-lime-500/30 border-t-lime-500 rounded-full animate-spin"})}):i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 shrink-0",children:[i.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"Profil Bilgileri"})]}),v&&i.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 text-center max-w-xs w-full border border-lime-500/30",children:[i.jsx("div",{className:"w-16 h-16 bg-lime-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl",children:"check_circle"})}),i.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Kaydedildi!"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Profil bilgileriniz gncellendi."})]})}),i.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-br from-lime-500/10 to-green-500/5 rounded-2xl p-4 border border-lime-500/20",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-lime-500/20 rounded-full flex items-center justify-center shrink-0",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"info"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium text-sm",children:"Neden bu bilgiler gerekli?"}),i.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Kimlik bilgileriniz hesap gvenlii ve yasal ykmllkler iin gereklidir."})]})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Ad"}),i.jsx("input",{type:"text",value:r,onChange:N=>n(N.target.value),placeholder:"Adnz girin",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3.5 text-white placeholder-gray-500 focus:border-lime-500/50 focus:outline-none transition-colors"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Soyad"}),i.jsx("input",{type:"text",value:a,onChange:N=>o(N.target.value),placeholder:"Soyadnz girin",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3.5 text-white placeholder-gray-500 focus:border-lime-500/50 focus:outline-none transition-colors"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Doum Tarihi"}),i.jsx("input",{type:"date",value:c,onChange:N=>d(N.target.value),className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3.5 text-white focus:border-lime-500/50 focus:outline-none transition-colors [color-scheme:dark]"})]})]}),(r||a)&&i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 border border-white/5",children:[i.jsx("p",{className:"text-gray-500 text-xs mb-2",children:"nizleme"}),i.jsxs("p",{className:"text-white font-bold text-lg",children:[r," ",a]}),c&&i.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["Doum: ",new Date(c).toLocaleDateString("tr-TR")]})]}),i.jsx("button",{onClick:b,disabled:!E||g,className:`w-full py-4 rounded-2xl font-bold text-base transition-all flex items-center justify-center gap-2 ${E&&!g?"bg-lime-500 text-black hover:bg-lime-400 active:scale-[0.98]":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:g?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Kaydediliyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-symbols-outlined",children:"save"}),"Kaydet"]})})]})]})},_k=()=>{const t=ve(),[e,r]=S.useState({profileComplete:!1,kycVerified:!1,phoneVerified:!1,emailVerified:!1}),[n,a]=S.useState(!0);S.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:{user:g}}=await I.auth.getUser();if(!g)return;const{data:x}=await I.from("profiles").select("first_name, last_name, birth_date, profile_completed, kyc_status, phone_verified, email_verified").eq("id",g.id).single();x&&r({profileComplete:x.profile_completed||x.first_name&&x.last_name&&x.birth_date,kycVerified:x.kyc_status==="VERIFIED",phoneVerified:x.phone_verified||!1,emailVerified:x.email_verified!==!1})}catch(g){console.error("Check verification error:",g)}finally{a(!1)}},c=Object.values(e).filter(Boolean).length,d=c===4,h=d?{daily:1e5,monthly:1e6}:{daily:2e4,monthly:5e5},m=[{key:"profileComplete",icon:"person",label:"Profil Bilgileri",sublabel:"Ad, soyad, doum tarihi",completed:e.profileComplete,action:()=>t("/profile/edit")},{key:"kycVerified",icon:"badge",label:"Kimlik Belgesi",sublabel:"Kimlik kart n yz",completed:e.kycVerified,action:()=>t("/kyc")},{key:"phoneVerified",icon:"phone_android",label:"Telefon Dorulama",sublabel:"SMS ile dorulama",completed:e.phoneVerified,action:()=>{}},{key:"emailVerified",icon:"mail",label:"E-posta Dorulama",sublabel:"E-posta adresi onay",completed:e.emailVerified,action:()=>{}}];return n?i.jsx("div",{className:"min-h-screen bg-[#111111] flex items-center justify-center",children:i.jsx("div",{className:"w-10 h-10 border-2 border-lime-500/30 border-t-lime-500 rounded-full animate-spin"})}):i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 shrink-0",children:[i.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"lem Limitleri"})]}),i.jsxs("div",{className:"flex-1 p-5 space-y-6 overflow-y-auto pb-20",children:[i.jsxs("div",{className:`rounded-2xl p-5 border ${d?"bg-gradient-to-br from-lime-500/10 to-green-500/5 border-lime-500/30":"bg-gradient-to-br from-amber-500/10 to-orange-500/5 border-amber-500/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${d?"bg-lime-500/20":"bg-amber-500/20"}`,children:i.jsx("span",{className:`material-symbols-outlined text-2xl ${d?"text-lime-400":"text-amber-400"}`,children:d?"verified_user":"pending"})}),i.jsxs("div",{children:[i.jsx("p",{className:`font-bold ${d?"text-lime-400":"text-amber-400"}`,children:d?"Dorulanm Hesap":"Dorulanmam Hesap"}),i.jsx("p",{className:"text-gray-400 text-sm",children:d?"Tm limitler aktif":`${c}/4 adm tamamland`})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-black/30 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Gnlk Limit"}),i.jsxs("p",{className:"text-white font-bold text-xl",children:["",h.daily.toLocaleString()]})]}),i.jsxs("div",{className:"bg-black/30 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Aylk Limit"}),i.jsxs("p",{className:"text-white font-bold text-xl",children:["",h.monthly.toLocaleString()]})]})]})]}),!d&&i.jsx("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 border border-white/5",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-lime-500/20 rounded-full flex items-center justify-center shrink-0",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400",children:"trending_up"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-bold text-sm",children:"Limitleri Artrn"}),i.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Aadaki admlar tamamlayarak gnlk 100.000, aylk 1.000.000 limite ulan."})]})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Dorulama Admlar"}),i.jsx("div",{className:"bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 divide-y divide-white/5",children:m.map(g=>i.jsxs("button",{onClick:g.action,disabled:g.completed,className:`w-full p-4 flex items-center gap-4 text-left transition-colors ${g.completed?"opacity-60":"hover:bg-white/5"}`,children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${g.completed?"bg-lime-500/20":"bg-gray-700"}`,children:i.jsx("span",{className:`material-symbols-outlined ${g.completed?"text-lime-400":"text-gray-400"}`,children:g.completed?"check_circle":g.icon})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:`text-sm font-bold ${g.completed?"text-gray-400":"text-white"}`,children:g.label}),i.jsx("p",{className:"text-xs text-gray-500",children:g.sublabel})]}),g.completed?i.jsx("span",{className:"text-xs font-bold text-lime-400 bg-lime-500/10 px-2 py-1 rounded-full",children:" Tamam"}):i.jsx("span",{className:"material-symbols-outlined text-gray-600",children:"chevron_right"})]},g.key))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wider pl-2",children:"Limit Karlatrmas"}),i.jsx("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 border border-white/5",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-gray-500",children:[i.jsx("th",{className:"text-left py-2"}),i.jsx("th",{className:"text-center py-2",children:"Dorulanmam"}),i.jsx("th",{className:"text-center py-2",children:"Dorulanm"})]})}),i.jsxs("tbody",{className:"text-white",children:[i.jsxs("tr",{className:"border-t border-white/5",children:[i.jsx("td",{className:"py-3 text-gray-400",children:"Gnlk"}),i.jsx("td",{className:"text-center py-3",children:"20.000"}),i.jsx("td",{className:"text-center py-3 text-lime-400 font-bold",children:"100.000"})]}),i.jsxs("tr",{className:"border-t border-white/5",children:[i.jsx("td",{className:"py-3 text-gray-400",children:"Aylk"}),i.jsx("td",{className:"text-center py-3",children:"500.000"}),i.jsx("td",{className:"text-center py-3 text-lime-400 font-bold",children:"1.000.000"})]})]})]})})]})]})]})},bk=()=>{const t=ve(),[e,r]=S.useState(""),[n,a]=S.useState(""),[o,c]=S.useState(""),[d,h]=S.useState(!1),[m,g]=S.useState(!1),[x,v]=S.useState(!1),[_,y]=S.useState(!1),[b,E]=S.useState(null),[N,j]=S.useState(!1),k=z=>z.length<6?"ifre en az 6 karakter olmaldr":null,T=async()=>{if(E(null),!e||!n||!o){E("Tm alanlar doldurun");return}if(n!==o){E("Yeni ifreler elemiyor");return}const z=k(n);if(z){E(z);return}if(e===n){E("Yeni ifre mevcut ifreden farkl olmaldr");return}y(!0);try{const{data:{user:C}}=await I.auth.getUser();if(!(C!=null&&C.email)){E("Kullanc bulunamad");return}const{error:B}=await I.auth.signInWithPassword({email:C.email,password:e});if(B){E("Mevcut ifre yanl"),y(!1);return}const{error:O}=await I.auth.updateUser({password:n});if(O){E(O.message),y(!1);return}j(!0),setTimeout(()=>{t("/profile")},2e3)}catch(C){console.error("Password change error:",C),E("Bir hata olutu. Ltfen tekrar deneyin.")}finally{y(!1)}},D=e&&n&&o&&n===o;return i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"bg-[#1a1a1a] px-4 py-4 flex items-center border-b border-white/5 shrink-0",children:[i.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"arrow_back"})}),i.jsx("h1",{className:"flex-1 text-center font-bold text-lg text-white pr-8",children:"ifre Deitir"})]}),N&&i.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 text-center max-w-xs w-full border border-lime-500/30",children:[i.jsx("div",{className:"w-16 h-16 bg-lime-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"material-symbols-outlined text-lime-400 text-3xl",children:"check_circle"})}),i.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"ifre Deitirildi!"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"ifreniz baaryla gncellendi."})]})}),i.jsxs("div",{className:"flex-1 p-5 space-y-6",children:[i.jsx("div",{className:"bg-amber-500/10 rounded-2xl p-4 border border-amber-500/20",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-amber-500/20 rounded-full flex items-center justify-center shrink-0",children:i.jsx("span",{className:"material-symbols-outlined text-amber-400",children:"shield"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-bold text-sm",children:"Gvenlik pucu"}),i.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Gl bir ifre en az 6 karakter iermeli ve baka hibir yerde kullanlmamaldr."})]})]})}),b&&i.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 flex items-center gap-3",children:[i.jsx("span",{className:"material-symbols-outlined text-red-400",children:"error"}),i.jsx("p",{className:"text-red-400 text-sm",children:b})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Mevcut ifre"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:d?"text":"password",value:e,onChange:z=>r(z.target.value),placeholder:"Mevcut ifrenizi girin",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3.5 pr-12 text-white placeholder-gray-500 focus:border-lime-500/50 focus:outline-none transition-colors"}),i.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 p-1",children:i.jsx("span",{className:"material-symbols-outlined text-xl",children:d?"visibility_off":"visibility"})})]})]}),i.jsx("div",{className:"border-t border-white/5 my-6"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Yeni ifre"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:m?"text":"password",value:n,onChange:z=>a(z.target.value),placeholder:"Yeni ifrenizi girin",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3.5 pr-12 text-white placeholder-gray-500 focus:border-lime-500/50 focus:outline-none transition-colors"}),i.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 p-1",children:i.jsx("span",{className:"material-symbols-outlined text-xl",children:m?"visibility_off":"visibility"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-gray-400 text-sm font-medium pl-1",children:"Yeni ifre Tekrar"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:x?"text":"password",value:o,onChange:z=>c(z.target.value),placeholder:"Yeni ifrenizi tekrar girin",className:`w-full bg-[#1a1a1a] border rounded-xl px-4 py-3.5 pr-12 text-white placeholder-gray-500 focus:outline-none transition-colors ${o&&n!==o?"border-red-500/50 focus:border-red-500":o&&n===o?"border-lime-500/50 focus:border-lime-500":"border-white/10 focus:border-lime-500/50"}`}),i.jsx("button",{type:"button",onClick:()=>v(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 p-1",children:i.jsx("span",{className:"material-symbols-outlined text-xl",children:x?"visibility_off":"visibility"})})]}),o&&n!==o&&i.jsx("p",{className:"text-red-400 text-xs pl-1",children:"ifreler elemiyor"}),o&&n===o&&i.jsxs("p",{className:"text-lime-400 text-xs pl-1 flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"check"}),"ifreler eleiyor"]})]})]}),i.jsx("button",{onClick:T,disabled:!D||_,className:`w-full py-4 rounded-2xl font-bold text-base transition-all flex items-center justify-center gap-2 ${D&&!_?"bg-lime-500 text-black hover:bg-lime-400 active:scale-[0.98]":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:_?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Gncelleniyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-symbols-outlined",children:"lock_reset"}),"ifreyi Gncelle"]})})]})]})},wk={p2p_matched:{title:" Eleme Bulundu",message:"{amount} USDT tutarnda ileminiz eleti.",icon:"handshake"},p2p_payment_sent:{title:" deme Gnderildi",message:"Alc demeyi gnderdi. Ltfen kontrol edin.",icon:"payments"},p2p_completed:{title:" lem Tamamland",message:"{amount} USDT tutarnda ileminiz baaryla tamamland.",icon:"check_circle"},p2p_cancelled:{title:" lem ptal Edildi",message:"{amount} USDT tutarnda ileminiz iptal edildi.",icon:"cancel"},p2p_expired:{title:" Sre Doldu",message:"leminiz sre am nedeniyle iptal edildi.",icon:"timer_off"},balance_received:{title:" Para Geldi",message:"{amount} USDT hesabnza aktarld.",icon:"add_circle"},balance_sent:{title:" Para Gnderildi",message:"{amount} USDT gnderildi.",icon:"send"},deposit_approved:{title:" Yatrm Onayland",message:"{amount} USDT yatrmnz onayland.",icon:"verified"},withdraw_approved:{title:" ekim Onayland",message:"{amount} TRY ekim talebiniz onayland.",icon:"verified"},system_alert:{title:" Sistem Bildirimi",message:"{message}",icon:"info"},security_alert:{title:" Gvenlik Uyars",message:"Hesabnza yeni bir cihazdan giri yapld.",icon:"security"}},jk=()=>{const t=ve(),[e,r]=S.useState([]),[n,a]=S.useState(!0);S.useEffect(()=>{o()},[]);const o=async()=>{a(!0);const x=await q.getNotificationHistory();r(x),a(!1)},c=async x=>{x.read||(await q.markNotificationAsRead(x.id),r(v=>v.map(_=>_.id===x.id?{..._,read:!0}:_))),(x.type.startsWith("p2p_")||x.type==="balance_received"||x.type==="balance_sent")&&t("/dashboard")},d=async()=>{await q.markAllNotificationsAsRead(),r(x=>x.map(v=>({...v,read:!0})))},h=x=>{const v=wk[x];return(v==null?void 0:v.icon)||"notifications"},m=x=>{const v=new Date,_=new Date(x),y=v.getTime()-_.getTime(),b=Math.floor(y/6e4),E=Math.floor(b/60),N=Math.floor(E/24);return b<1?"Az nce":b<60?`${b} dakika nce`:E<24?`${E} saat nce`:N<7?`${N} gn nce`:_.toLocaleDateString("tr-TR")},g=e.filter(x=>!x.read).length;return i.jsxs("div",{className:"min-h-screen bg-[#111111] flex flex-col font-display",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[i.jsx("button",{onClick:()=>t(-1),className:"text-white",children:i.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),i.jsx("h1",{className:"text-white text-lg font-bold",children:"Bildirimler"}),i.jsx("div",{className:"w-8"})]}),g>0&&i.jsx("div",{className:"p-4 border-b border-gray-800",children:i.jsxs("button",{onClick:d,className:"text-lime-400 text-sm flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"done_all"}),"Tmn okundu iaretle (",g,")"]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:n?i.jsx("div",{className:"flex items-center justify-center h-40",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-lime-400"})}):e.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-60 text-gray-500",children:[i.jsx("span",{className:"material-symbols-outlined text-5xl mb-2",children:"notifications_off"}),i.jsx("p",{children:"Henz bildirim yok"})]}):i.jsx("div",{className:"divide-y divide-gray-800",children:e.map(x=>i.jsxs("div",{onClick:()=>c(x),className:`p-4 flex items-start gap-3 cursor-pointer hover:bg-white/5 transition-colors ${x.read?"":"bg-lime-500/5"}`,children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${x.read?"bg-gray-800":"bg-lime-500/20"}`,children:i.jsx("span",{className:`material-symbols-outlined ${x.read?"text-gray-400":"text-lime-400"}`,children:h(x.type)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:`font-medium truncate ${x.read?"text-gray-400":"text-white"}`,children:x.title}),!x.read&&i.jsx("div",{className:"w-2 h-2 bg-lime-400 rounded-full flex-shrink-0"})]}),i.jsx("p",{className:"text-sm text-gray-500 mt-0.5 line-clamp-2",children:x.message}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:m(x.created_at)})]}),i.jsx("span",{className:"material-symbols-outlined text-gray-600",children:"chevron_right"})]},x.id))})})]})},Nk=()=>{const t=ve(),e=Tn(),r=n=>e.pathname===n;return i.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-[#1a1a1a] border-t border-white/10 px-6 pb-safe z-50",children:i.jsxs("div",{className:"max-w-md mx-auto flex items-end justify-around py-3",children:[i.jsxs("button",{onClick:()=>t("/dashboard"),className:`flex flex-col items-center gap-1 transition-all ${r("/dashboard")?"text-lime-500":"text-gray-500 hover:text-gray-400"}`,children:[i.jsx("div",{className:`p-3 rounded-2xl transition-all ${r("/dashboard")?"bg-lime-500/20":"bg-transparent"}`,children:i.jsx("span",{className:"material-symbols-outlined text-2xl",children:"home"})}),i.jsx("span",{className:"text-xs font-medium",children:"Ana Sayfa"})]}),i.jsxs("button",{onClick:()=>t("/qr-scan"),className:"flex flex-col items-center -mt-6",children:[i.jsx("div",{className:"w-16 h-16 bg-lime-500 rounded-2xl flex items-center justify-center shadow-2xl shadow-lime-500/50 hover:bg-lime-400 transition-all active:scale-95",children:i.jsx("span",{className:"material-symbols-outlined text-4xl text-black",children:"qr_code_scanner"})}),i.jsx("span",{className:"text-xs font-medium text-lime-500 mt-2",children:"Tara"})]}),i.jsxs("button",{onClick:()=>t("/profile"),className:`flex flex-col items-center gap-1 transition-all ${r("/profile")?"text-lime-500":"text-gray-500 hover:text-gray-400"}`,children:[i.jsx("div",{className:`p-3 rounded-2xl transition-all ${r("/profile")?"bg-lime-500/20":"bg-transparent"}`,children:i.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})}),i.jsx("span",{className:"text-xs font-medium",children:"Ayarlar"})]})]})})},Y0=S.createContext({}),ht=()=>S.useContext(Y0);async function Ra(t,e=15e3){var n,a,o,c;const r={email:t.email||"",name:((n=t.user_metadata)==null?void 0:n.name)||((a=t.email)==null?void 0:a.split("@")[0])||"User",balance:0,role:"user",isActive:!0,account_type:((o=t.user_metadata)==null?void 0:o.accountType)||"personal",business_name:(c=t.user_metadata)==null?void 0:c.businessName};return new Promise(d=>{const h=setTimeout(()=>{console.warn("Profile fetch timeout - using fallback user"),d(r)},e);kk(t,r).then(m=>{clearTimeout(h),d(m)}).catch(m=>{clearTimeout(h),console.error("Profile fetch error:",m),d(r)})})}async function kk(t,e){var r,n;try{let{data:a,error:o}=await I.from("profiles").select("*").eq("id",t.id).single();if(o&&o.code==="PGRST116"&&console.log("Profile not found by ID, will create new profile"),o&&o.code==="PGRST116"){const{data:c,error:d}=await I.from("profiles").insert({id:t.id,email:t.email,name:((r=t.user_metadata)==null?void 0:r.name)||((n=t.email)==null?void 0:n.split("@")[0])||"User",role:"user",is_active:!0,balance:0}).select().single();return d?(console.error("Profile creation error:",d.message),e):c?{email:c.email,name:c.name||"User",balance:c.balance||0,role:c.role||"user",isActive:c.is_active??!0,createdAt:c.created_at?new Date(c.created_at).getTime():Date.now(),trxAddress:c.trx_address,account_type:c.account_type||"personal",business_name:c.business_name,business_department_id:c.business_department_id}:e}else if(o)return console.error("Profile fetch error:",o.message),e;return a?{email:a.email,name:a.name||"User",balance:a.balance||0,role:a.role||"user",isActive:a.is_active??!0,createdAt:a.created_at?new Date(a.created_at).getTime():Date.now(),trxAddress:a.trx_address,account_type:a.account_type||"personal",business_name:a.business_name,business_department_id:a.business_department_id}:e}catch(a){return console.error("fetchProfileFromSupabase exception:",a),e}}const Ze=({children:t,showBottomNav:e=!1})=>i.jsx("div",{className:"popup-layout flex justify-center min-h-screen bg-gray-100 dark:bg-gray-900 font-display",children:i.jsxs("div",{className:"w-full max-w-md bg-background-light dark:bg-background-dark min-h-screen shadow-xl relative overflow-x-hidden",children:[t,e&&i.jsx(Nk,{})]})}),Ne=({children:t,adminOnly:e=!1})=>{const{user:r,session:n,isLoading:a}=ht();return a?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):!n||!r?i.jsx(pm,{to:"/",replace:!0}):e&&r.role!=="admin"?i.jsx(pm,{to:"/dashboard",replace:!0}):i.jsx(i.Fragment,{children:t})},Sk=()=>{const{pathname:t}=Tn();return S.useEffect(()=>{window.scrollTo(0,0)},[t]),null},Ek=()=>{const[t,e]=S.useState(null),[r,n]=S.useState(null),[a,o]=S.useState(!0);S.useEffect(()=>{let m=!0;(async()=>{try{const{data:{session:v}}=await I.auth.getSession();if(m&&(v!=null&&v.user)){e(v);const _=await Ra(v.user);m&&n(_)}}catch(v){console.error("Auth initialization error:",v)}finally{m&&o(!1)}})();const{data:{subscription:x}}=I.auth.onAuthStateChange(async(v,_)=>{if(console.log("Auth event:",v),v==="INITIAL_SESSION"||v==="TOKEN_REFRESHED"){_&&e(_);return}if(v==="SIGNED_IN"&&(_!=null&&_.user)){e(_);const y=await Ra(_.user);n(y)}else v==="SIGNED_OUT"&&(e(null),n(null))});return()=>{m=!1,x.unsubscribe()}},[]);const c=async(m,g)=>{try{const{data:x,error:v}=await I.auth.signInWithPassword({email:m,password:g});if(v)return console.error("Login error:",v.message),!1;if(x.session&&x.user){e(x.session);const _=await Ra(x.user);return n(_),!0}return!1}catch(x){return console.error("Login exception:",x),!1}},d=async()=>{await I.auth.signOut()},h=async()=>{const{data:{session:m}}=await I.auth.getSession();if(m!=null&&m.user){const g=await Ra(m.user);n(g)}};return S.useEffect(()=>{let m;const x=()=>{console.log("Session expired due to inactivity"),d()},v=()=>{t&&(clearTimeout(m),m=setTimeout(x,3e5))},_=["mousedown","mousemove","keydown","scroll","touchstart"];return t&&(v(),_.forEach(y=>window.addEventListener(y,v))),()=>{clearTimeout(m),_.forEach(y=>window.removeEventListener(y,v))}},[t]),i.jsx(Y0.Provider,{value:{user:r,session:t,login:c,logout:d,refreshUser:h,isLoading:a},children:i.jsxs(Fw,{children:[i.jsx(Sk,{}),i.jsxs(Bw,{children:[i.jsx(pe,{path:"/admin",element:i.jsx(Ne,{adminOnly:!0,children:i.jsx(T1,{})})}),i.jsx(pe,{path:"/admin/users",element:i.jsx(Ne,{adminOnly:!0,children:i.jsx(C1,{})})}),i.jsx(pe,{path:"/admin/transactions",element:i.jsx(Ne,{adminOnly:!0,children:i.jsx(O1,{})})}),i.jsx(pe,{path:"/admin/p2p-orders",element:i.jsx(Ne,{adminOnly:!0,children:i.jsx(L1,{})})}),i.jsx(pe,{path:"/admin/vaults",element:i.jsx(Ne,{adminOnly:!0,children:i.jsx(B1,{})})}),i.jsx(pe,{path:"/admin/departments",element:i.jsx(Ne,{adminOnly:!0,children:i.jsx(F1,{})})}),i.jsx(pe,{path:"/admin/departments/:id",element:i.jsx(Ne,{adminOnly:!0,children:i.jsx(H1,{})})}),i.jsx(pe,{path:"/admin/exchange-rate",element:i.jsx(Ne,{adminOnly:!0,children:i.jsx(W1,{})})}),i.jsx(pe,{path:"/admin/logs",element:i.jsx(Ne,{adminOnly:!0,children:i.jsx(R1,{})})}),i.jsx(pe,{path:"/welcome",element:i.jsx(Hw,{})}),i.jsx(pe,{path:"/",element:i.jsx(Ze,{children:i.jsx(Ww,{})})}),i.jsx(pe,{path:"/register",element:i.jsx(Ze,{children:i.jsx(d1,{})})}),i.jsx(pe,{path:"/dashboard",element:i.jsx(Ze,{showBottomNav:!0,children:i.jsx(Ne,{children:i.jsx(x1,{})})})}),i.jsx(pe,{path:"/profile",element:i.jsx(Ze,{showBottomNav:!0,children:i.jsx(Ne,{children:i.jsx(k1,{})})})}),i.jsx(pe,{path:"/qr-scan",element:i.jsx(Ze,{showBottomNav:!0,children:i.jsx(Ne,{children:i.jsx(S1,{})})})}),i.jsx(pe,{path:"/history",element:i.jsx(Ze,{showBottomNav:!0,children:i.jsx(Ne,{children:i.jsx(j1,{})})})}),i.jsx(pe,{path:"/deposit",element:i.jsx(Ze,{showBottomNav:!0,children:i.jsx(Ne,{children:i.jsx(y1,{})})})}),i.jsx(pe,{path:"/deposit/confirm",element:i.jsx(Ze,{children:i.jsx(Ne,{children:i.jsx(v1,{})})})}),i.jsx(pe,{path:"/withdraw",element:i.jsx(Ze,{showBottomNav:!0,children:i.jsx(Ne,{children:i.jsx(_1,{})})})}),i.jsx(pe,{path:"/crypto/withdraw",element:i.jsx(Ze,{children:i.jsx(Ne,{children:i.jsx(b1,{})})})}),i.jsx(pe,{path:"/crypto/deposit",element:i.jsx(Ze,{children:i.jsx(Ne,{children:i.jsx(w1,{})})})}),i.jsx(pe,{path:"/bank-accounts",element:i.jsx(Ze,{children:i.jsx(Ne,{children:i.jsx(N1,{})})})}),i.jsx(pe,{path:"/kyc",element:i.jsx(Ze,{children:i.jsx(Ne,{children:i.jsx(yk,{})})})}),i.jsx(pe,{path:"/profile/edit",element:i.jsx(Ze,{children:i.jsx(Ne,{children:i.jsx(vk,{})})})}),i.jsx(pe,{path:"/limits",element:i.jsx(Ze,{children:i.jsx(Ne,{children:i.jsx(_k,{})})})}),i.jsx(pe,{path:"/change-password",element:i.jsx(Ze,{children:i.jsx(Ne,{children:i.jsx(bk,{})})})}),i.jsx(pe,{path:"/notifications",element:i.jsx(Ze,{children:i.jsx(Ne,{children:i.jsx(jk,{})})})}),i.jsx(pe,{path:"/privacy",element:i.jsx(E1,{})}),i.jsx(pe,{path:"/terms",element:i.jsx(P1,{})}),i.jsx(pe,{path:"/find-agent",element:i.jsx(mk,{})}),i.jsx(pe,{path:"/autologin",element:i.jsx(pk,{})}),i.jsx(pe,{path:"/pay/:slug",element:i.jsx(gk,{})}),i.jsx(pe,{path:"/business",element:i.jsx(Ze,{children:i.jsx(Ne,{children:i.jsx(xk,{})})})})]})]})})},J0=document.getElementById("root");if(!J0)throw new Error("Could not find root element to mount to");const X0=new URLSearchParams(window.location.search),Fm=X0.get("token"),Hm=X0.get("email");if(Fm&&Hm){console.log("Magic Link Detected (Pre-Mount)"),localStorage.setItem("nusd_auth_token",Fm),localStorage.setItem("nusd_current_user",Hm);let t=window.location.hash;(!t||t==="#/")&&(t="#/admin");const e=window.location.origin+window.location.pathname+t;window.history.replaceState({},"",e)}const Pk=xc.createRoot(J0);Pk.render(i.jsx(hs.StrictMode,{children:i.jsx(Ek,{})}));
